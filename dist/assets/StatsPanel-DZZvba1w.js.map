{"version":3,"file":"StatsPanel-DZZvba1w.js","sources":["../../src/components/StatsPanel.tsx"],"sourcesContent":["import { useMatch } from \"../store/match\";\r\nimport { formatAvg } from \"../utils/stats\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport BarChart from \"./BarChart\";\r\nimport {\r\n  getGameModeStats,\r\n  getMonthlyAvg3,\r\n  getMonthlyFirstNineAvg,\r\n  getAllTimeAvg,\r\n  getAllTimeFirstNineAvg,\r\n  getAllTime,\r\n} from \"../store/profileStats\";\r\nimport { allGames } from \"../utils/games\";\r\nimport TabPills from \"./ui/TabPills\";\r\n\r\nexport default function StatsPanel({ user }: { user?: any }) {\r\n  const { players, inProgress, startingScore, newMatch } = useMatch();\r\n  const [family, setFamily] = useState<\"x01\" | \"other\">(\"x01\");\r\n  const [playersText, setPlayersText] = useState(\"Player 1, Player 2\");\r\n  const [start, setStart] = useState(501);\r\n  const [selectedGameMode, setSelectedGameMode] = useState<string>(\"\");\r\n  // Opponent compare: select a friend to render on the second card\r\n  const [friends, setFriends] = useState<\r\n    Array<{ email: string; username?: string }>\r\n  >([]);\r\n  const [opponent, setOpponent] = useState<string>(\"\");\r\n  const [showPicker, setShowPicker] = useState<boolean>(false);\r\n  const [q, setQ] = useState<string>(\"\");\r\n  const [results, setResults] = useState<\r\n    Array<{ email: string; username?: string }>\r\n  >([]);\r\n  const [searching, setSearching] = useState<boolean>(false);\r\n  const me = String(user?.email || \"\").toLowerCase();\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function load() {\r\n      try {\r\n        if (!me) return;\r\n        const res = await fetch(\r\n          `/api/friends/list?email=${encodeURIComponent(me)}`,\r\n        );\r\n        const j = await res.json().catch(() => ({ friends: [] }));\r\n        if (!cancelled)\r\n          setFriends(\r\n            (j.friends || []) as Array<{ email: string; username?: string }>,\r\n          );\r\n      } catch {}\r\n    }\r\n    load();\r\n    // Refresh occasionally in case friends change while open\r\n    const id = setInterval(load, 20000);\r\n    return () => {\r\n      cancelled = true;\r\n      clearInterval(id);\r\n    };\r\n  }, [me]);\r\n\r\n  // Rehydrate previously selected opponent from localStorage (per-user key)\r\n  useEffect(() => {\r\n    try {\r\n      const key = me ? `ndn:stats:opponent:${me}` : \"ndn:stats:opponent\";\r\n      const saved = localStorage.getItem(key);\r\n      if (saved) setOpponent(saved);\r\n    } catch {}\r\n  }, [me]);\r\n\r\n  // Persist opponent selection\r\n  useEffect(() => {\r\n    try {\r\n      const key = me ? `ndn:stats:opponent:${me}` : \"ndn:stats:opponent\";\r\n      if (opponent) localStorage.setItem(key, opponent);\r\n      else localStorage.removeItem(key);\r\n    } catch {}\r\n  }, [opponent, me]);\r\n\r\n  async function runSearch(term: string) {\r\n    setQ(term);\r\n    if (!term.trim()) {\r\n      setResults([]);\r\n      return;\r\n    }\r\n    setSearching(true);\r\n    try {\r\n      const res = await fetch(\r\n        `/api/friends/search?q=${encodeURIComponent(term)}`,\r\n      );\r\n      const j = await res.json().catch(() => ({ results: [] }));\r\n      setResults(\r\n        (j.results || []) as Array<{ email: string; username?: string }>,\r\n      );\r\n    } finally {\r\n      setSearching(false);\r\n    }\r\n  }\r\n\r\n  // Build a score-frequency distribution for the selected family.\r\n  // For now, we only have X01 in the match store; \"other\" is a placeholder that would read other game stats when added.\r\n  const dist = useMemo(() => {\r\n    const freq = new Map<number, number>();\r\n    if (family === \"x01\") {\r\n      for (const p of players) {\r\n        for (const leg of p.legs) {\r\n          for (const v of leg.visits) {\r\n            const s = Math.max(0, Math.min(180, v.score));\r\n            freq.set(s, (freq.get(s) ?? 0) + 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Convert to sorted array (by score asc) and limit to reasonable width\r\n    const arr = Array.from(freq.entries()).sort((a, b) => a[0] - b[0]);\r\n    // If very sparse, still show common x01 bands\r\n    if (arr.length === 0 && family === \"x01\") {\r\n      [0, 26, 41, 60, 81, 100, 120, 140, 160, 180].forEach((k) =>\r\n        freq.set(k, 0),\r\n      );\r\n      return Array.from(freq.entries())\r\n        .sort((a, b) => a[0] - b[0])\r\n        .map(([label, value]) => ({ label, value }));\r\n    }\r\n    return arr.map(([label, value]) => ({ label, value }));\r\n  }, [players, family]);\r\n\r\n  // Build Other Modes dataset: one bar per mode with value = played, label = mode name, and show played/won in label\r\n  const otherData = useMemo(() => {\r\n    const gm = getGameModeStats(allGames as unknown as string[]);\r\n    return (allGames as unknown as string[]).map((mode) => {\r\n      const e = gm[mode] || { played: 0, won: 0 };\r\n      // Bar label stays short; detailed caption rendered below values via custom footer\r\n      return { label: mode, value: e.played, extra: e.won };\r\n    });\r\n  }, [family]);\r\n\r\n  // Trigger re-render when any game-mode stat updates elsewhere\r\n  useEffect(() => {\r\n    const onUpdate = () => setFamily((f) => f); // noop to refresh memo\r\n    window.addEventListener(\"ndn:stats-updated\", onUpdate as any);\r\n    return () =>\r\n      window.removeEventListener(\"ndn:stats-updated\", onUpdate as any);\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      className=\"card ndn-game-shell\"\r\n      style={{\r\n        background: \"linear-gradient(135deg, #393053 0%, #635985 100%)\",\r\n      }}\r\n    >\r\n      <div className=\"mb-4\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <h2 className=\"text-2xl font-extrabold text-white\">Match Stats</h2>\r\n          <span className=\"text-xs opacity-70\">View</span>\r\n        </div>\r\n        <TabPills\r\n          tabs={[\r\n            { key: \"x01\", label: \"X01\" },\r\n            { key: \"other\", label: \"Other Modes\" },\r\n          ]}\r\n          active={family}\r\n          onChange={(k) => setFamily(k as \"x01\" | \"other\")}\r\n        />\r\n      </div>\r\n      {inProgress && (\r\n        <div className=\"mb-3 p-2 rounded-lg text-sm border border-amber-500/40 bg-amber-500/10 text-amber-200\">\r\n          Note: Detailed leg stats are finalized at the end of the game.\r\n        </div>\r\n      )}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n        {players.map((p, idx) => (\r\n          <div\r\n            key={p.id}\r\n            className=\"p-4 rounded-2xl border border-indigo-500/20 bg-gradient-to-br from-indigo-700/6 to-indigo-900/6 shadow-sm transform transition-transform duration-200 hover:-translate-y-1 hover:shadow-lg\"\r\n          >\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div className=\"font-semibold\">\r\n                {idx === 1 && !opponent\r\n                  ? p.name || \"Opponent\"\r\n                  : idx === 1 && opponent\r\n                    ? opponent\r\n                    : p.name}\r\n              </div>\r\n              {idx === 1 && (\r\n                <div className=\"flex gap-2 items-center overflow-x-auto py-1\">\r\n                  <button\r\n                    className=\"text-[11px] px-3 py-1 rounded-full bg-white/5 border border-white/10 hover:bg-white/10\"\r\n                    onClick={() => setShowPicker((s) => !s)}\r\n                    title=\"Search user to compare\"\r\n                  >\r\n                    Select Friend\r\n                  </button>\r\n                  {friends.slice(0, 6).map((f) => {\r\n                    const lbl = f.username || f.email;\r\n                    const active = opponent === lbl;\r\n                    return (\r\n                      <button\r\n                        key={f.email}\r\n                        className={`text-[11px] px-3 py-1 rounded-full border ${active ? \"bg-indigo-500/30 border-indigo-400/50\" : \"bg-white/6 border-white/8 hover:bg-white/10 transform hover:-translate-y-0.5 transition-all duration-150\"}`}\r\n                        onClick={() => setOpponent(lbl)}\r\n                        title={`Compare vs ${lbl}`}\r\n                      >\r\n                        {lbl}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                  {friends.length === 0 && (\r\n                    <button\r\n                      className=\"text-[11px] px-3 py-1 rounded-full bg-white/5 border border-white/10\"\r\n                      disabled\r\n                    >\r\n                      Find friends to compare\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n            {idx === 1 && showPicker && (\r\n              <div className=\"mb-2 p-2 rounded-lg bg-black/20 border border-white/10\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <input\r\n                    className=\"input flex-1 py-1\"\r\n                    placeholder=\"Search by name or email\"\r\n                    value={q}\r\n                    onChange={(e) => runSearch(e.target.value)}\r\n                  />\r\n                  <button\r\n                    className=\"btn px-3 py-1 text-sm\"\r\n                    onClick={() => runSearch(q)}\r\n                    disabled={searching}\r\n                  >\r\n                    Search\r\n                  </button>\r\n                </div>\r\n                <ul className=\"max-h-40 overflow-auto space-y-1\">\r\n                  {results.map((r) => {\r\n                    const lbl = r.username || r.email;\r\n                    return (\r\n                      <li key={r.email}>\r\n                        <button\r\n                          className=\"w-full text-left px-2 py-1 rounded bg-white/5 hover:bg-white/10 border border-white/10 text-sm\"\r\n                          onClick={() => {\r\n                            setOpponent(lbl);\r\n                            setShowPicker(false);\r\n                          }}\r\n                        >\r\n                          {lbl}\r\n                        </button>\r\n                      </li>\r\n                    );\r\n                  })}\r\n                  {!results.length && (\r\n                    <li className=\"text-xs opacity-70\">\r\n                      {q.trim() ? \"No results\" : \"Type to search…\"}\r\n                    </li>\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            )}\r\n            {/* If second card and an opponent is selected, show their all-time stats; otherwise show the match/player stats */}\r\n            {idx === 1 && opponent ? (\r\n              <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Best 3-Dart</div>\r\n                  <div className=\"font-semibold\">\r\n                    {formatAvg(getAllTime(opponent).best3 || 0)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Worst 3-Dart</div>\r\n                  <div className=\"font-semibold\">\r\n                    {formatAvg(getAllTime(opponent).worst3 || 0)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">\r\n                    Best 9-Dart (fewest darts)\r\n                  </div>\r\n                  <div className=\"font-semibold\">\r\n                    {(() => {\r\n                      const a = getAllTime(opponent);\r\n                      return a.bestLegDarts ? `${a.bestLegDarts} darts` : \"—\";\r\n                    })()}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Best Checkout</div>\r\n                  <div className=\"font-semibold\">\r\n                    {getAllTime(opponent).bestCheckout || \"—\"}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\r\n                  <div className=\"text-slate-300\">\r\n                    Averages (All-time vs Monthly)\r\n                  </div>\r\n                  <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\r\n                    <span>\r\n                      3-dart: {formatAvg(getAllTimeAvg(opponent))} ·{\" \"}\r\n                      {formatAvg(getMonthlyAvg3(opponent))}\r\n                    </span>\r\n                    <span>\r\n                      First 9: {formatAvg(getAllTimeFirstNineAvg(opponent))} ·{\" \"}\r\n                      {formatAvg(getMonthlyFirstNineAvg(opponent))}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\r\n                  <div className=\"text-slate-300\">All-time snapshot</div>\r\n                  {(() => {\r\n                    const all = getAllTime(opponent);\r\n                    return (\r\n                      <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\r\n                        <span>Best 3-dart: {formatAvg(all.best3 || 0)}</span>\r\n                        <span>Worst 3-dart: {formatAvg(all.worst3 || 0)}</span>\r\n                        <span>Best leg: {all.bestLegDarts || 0} darts</span>\r\n                        <span>Best checkout: {all.bestCheckout || 0}</span>\r\n                      </div>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Best 3-Dart</div>\r\n                  <div className=\"font-semibold\">\r\n                    {formatAvg(p.bestThreeDartAvg)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Worst 3-Dart</div>\r\n                  <div className=\"font-semibold\">\r\n                    {formatAvg(p.worstThreeDartAvg)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">\r\n                    Best 9-Dart (fewest darts)\r\n                  </div>\r\n                  <div className=\"font-semibold\">\r\n                    {p.bestNineDart ? `${p.bestNineDart.darts} darts` : \"—\"}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Best Checkout</div>\r\n                  <div className=\"font-semibold\">{p.bestCheckout ?? \"—\"}</div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\r\n                  <div className=\"text-slate-300\">\r\n                    Averages (All-time vs Monthly)\r\n                  </div>\r\n                  <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\r\n                    <span>\r\n                      3-dart: {formatAvg(getAllTimeAvg(p.name))} ·{\" \"}\r\n                      {formatAvg(getMonthlyAvg3(p.name))}\r\n                    </span>\r\n                    <span>\r\n                      First 9: {formatAvg(getAllTimeFirstNineAvg(p.name))} ·{\" \"}\r\n                      {formatAvg(getMonthlyFirstNineAvg(p.name))}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                {/* Live current three-dart average for in-progress matches */}\r\n                {inProgress && (\r\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\r\n                    <div className=\"text-slate-300\">Current 3-Dart (live)</div>\r\n                    <div className=\"font-semibold\">\r\n                      {formatAvg(p.currentThreeDartAvg)}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                {/* All-time snapshot */}\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\r\n                  <div className=\"text-slate-300\">All-time snapshot</div>\r\n                  {(() => {\r\n                    const all = getAllTime(p.name);\r\n                    return (\r\n                      <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\r\n                        <span>Best 3-dart: {formatAvg(all.best3 || 0)}</span>\r\n                        <span>Worst 3-dart: {formatAvg(all.worst3 || 0)}</span>\r\n                        <span>Best leg: {all.bestLegDarts || 0} darts</span>\r\n                        <span>Best checkout: {all.bestCheckout || 0}</span>\r\n                      </div>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        {/* Opponent compare card: if there are fewer than 2 players, show a selector to compare with a friend */}\r\n        {players.length <= 1 && (\r\n          <div className=\"p-3 rounded-2xl border border-purple-500/20 bg-gradient-to-r from-purple-800/6 to-pink-800/6\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div className=\"font-semibold\">Opponent</div>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {friends.slice(0, 6).map((f) => {\r\n                  const lbl = f.username || f.email;\r\n                  const active = opponent === (f.username || f.email);\r\n                  return (\r\n                    <button\r\n                      key={f.email}\r\n                      className={`text-[11px] px-3 py-1 rounded-full border ${active ? \"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-transparent shadow-sm\" : \"bg-gradient-to-r from-purple-500/8 to-pink-500/8 border-white/10 hover:from-purple-500/12 hover:to-pink-500/12\"}`}\r\n                      onClick={() => setOpponent(lbl)}\r\n                      title={`Compare vs ${lbl}`}\r\n                    >\r\n                      {lbl}\r\n                    </button>\r\n                  );\r\n                })}\r\n                {friends.length === 0 && (\r\n                  <span className=\"text-xs opacity-70\">\r\n                    Add friends to compare stats.\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n            {opponent ? (\r\n              <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\r\n                  <div className=\"text-slate-300\">Comparing to</div>\r\n                  <div className=\"font-semibold\">{opponent}</div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Best 3-Dart</div>\r\n                  <div className=\"font-semibold\">\r\n                    {formatAvg(getAllTimeAvg(opponent))}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Worst 3-Dart</div>\r\n                  <div className=\"font-semibold\">\r\n                    {formatAvg(getAllTime(opponent).worst3 || 0)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">\r\n                    Best 9-Dart (fewest darts)\r\n                  </div>\r\n                  <div className=\"font-semibold\">\r\n                    {(() => {\r\n                      const a = getAllTime(opponent);\r\n                      return a.bestLegDarts ? `${a.bestLegDarts} darts` : \"—\";\r\n                    })()}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                  <div className=\"text-slate-300\">Best Checkout</div>\r\n                  <div className=\"font-semibold\">\r\n                    {getAllTime(opponent).bestCheckout || \"—\"}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\r\n                  <div className=\"text-slate-300\">\r\n                    Averages (All-time vs Monthly)\r\n                  </div>\r\n                  <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\r\n                    <span>\r\n                      3-dart: {formatAvg(getAllTimeAvg(opponent))} ·{\" \"}\r\n                      {formatAvg(getMonthlyAvg3(opponent))}\r\n                    </span>\r\n                    <span>\r\n                      First 9: {formatAvg(getAllTimeFirstNineAvg(opponent))} ·{\" \"}\r\n                      {formatAvg(getMonthlyFirstNineAvg(opponent))}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\r\n                  <div className=\"text-slate-300\">All-time snapshot</div>\r\n                  {(() => {\r\n                    const all = getAllTime(opponent);\r\n                    return (\r\n                      <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\r\n                        <span>Best 3-dart: {formatAvg(all.best3 || 0)}</span>\r\n                        <span>Worst 3-dart: {formatAvg(all.worst3 || 0)}</span>\r\n                        <span>Best leg: {all.bestLegDarts || 0} darts</span>\r\n                        <span>Best checkout: {all.bestCheckout || 0}</span>\r\n                      </div>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-sm opacity-70\">\r\n                Select a friend above to compare.\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Score distribution for X01 family OR Game Stats for Other Modes */}\r\n      {family !== \"other\" ? (\r\n        <div className=\"mt-6\">\r\n          <div className=\"mb-2 text-sm opacity-80\">\r\n            Score Distribution ({family.toUpperCase()}): Visits by scored points\r\n          </div>\r\n          <div\r\n            className=\"rounded-xl border border-indigo-500/20 p-3 min-h-[220px] transform transition-shadow duration-200 hover:shadow-lg overflow-y-auto\"\r\n            style={{\r\n              background: \"linear-gradient(135deg, #393053 0%, #635985 100%)\",\r\n              scrollbarColor: \"#8F43EE #18122B\",\r\n            }}\r\n          >\r\n            <BarChart data={dist} showValues={false} />\r\n          </div>\r\n        </div>\r\n      ) : selectedGameMode &&\r\n        otherData.find((d) => d.label === selectedGameMode) ? (\r\n        <div className=\"mt-6\">\r\n          {(() => {\r\n            const game = otherData.find((d) => d.label === selectedGameMode)!;\r\n            return (\r\n              <div>\r\n                <div className=\"mb-2 text-sm opacity-80\">\r\n                  Game Stats for {game.label}\r\n                </div>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n                  <div className=\"p-4 rounded-lg bg-white/10 border border-white/20\">\r\n                    <div className=\"text-slate-300 text-sm mb-1\">\r\n                      Games Played\r\n                    </div>\r\n                    <div className=\"text-3xl font-bold text-white\">\r\n                      {game.value}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"p-4 rounded-lg bg-white/10 border border-white/20\">\r\n                    <div className=\"text-slate-300 text-sm mb-1\">Games Won</div>\r\n                    <div className=\"text-3xl font-bold text-green-400\">\r\n                      {game.extra}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"p-4 rounded-lg bg-white/10 border border-white/20\">\r\n                    <div className=\"text-slate-300 text-sm mb-1\">Win Rate</div>\r\n                    <div className=\"text-3xl font-bold text-blue-400\">\r\n                      {game.value > 0\r\n                        ? ((game.extra / game.value) * 100).toFixed(1)\r\n                        : 0}\r\n                      %\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })()}\r\n        </div>\r\n      ) : null}\r\n\r\n      {/* Other Modes: Game Mode Selector with Pills */}\r\n      {family === \"other\" && (\r\n        <div className=\"mt-6\">\r\n          <div className=\"mb-3\">\r\n            <div className=\"text-sm opacity-80 mb-3\">\r\n              Other Modes: Click a game to view stats\r\n            </div>\r\n            <div className=\"rounded-xl bg-white/5 backdrop-blur-md border border-white/10 p-2 flex items-center gap-2 overflow-x-auto no-scrollbar flex-wrap\">\r\n              {otherData.map((d) => (\r\n                <button\r\n                  key={d.label}\r\n                  onClick={() => setSelectedGameMode(d.label)}\r\n                  className={`transition-all select-none whitespace-nowrap rounded-full px-4 py-2 text-sm font-semibold shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60 active:scale-[0.98] ${\r\n                    selectedGameMode === d.label\r\n                      ? \"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg\"\r\n                      : \"bg-gradient-to-r from-slate-700 to-slate-600 text-white hover:from-slate-600 hover:to-slate-500\"\r\n                  }`}\r\n                >\r\n                  {d.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {!selectedGameMode && (\r\n            <div\r\n              className=\"rounded-xl border border-indigo-500/20 p-4\"\r\n              style={{\r\n                background: \"linear-gradient(135deg, #393053 0%, #635985 100%)\",\r\n              }}\r\n            >\r\n              <div className=\"text-center text-slate-300\">\r\n                Select a game mode above to view detailed stats\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["StatsPanel","user","players","inProgress","startingScore","newMatch","useMatch","family","setFamily","useState","playersText","setPlayersText","start","setStart","selectedGameMode","setSelectedGameMode","friends","setFriends","opponent","setOpponent","showPicker","setShowPicker","q","setQ","results","setResults","searching","setSearching","me","useEffect","cancelled","load","j","id","key","saved","runSearch","term","dist","useMemo","freq","p","leg","v","s","arr","a","b","k","label","value","otherData","gm","getGameModeStats","allGames","mode","e","onUpdate","f","jsxs","jsx","TabPills","idx","lbl","active","r","formatAvg","getAllTime","getAllTimeAvg","getMonthlyAvg3","getAllTimeFirstNineAvg","getMonthlyFirstNineAvg","all","BarChart","d","game"],"mappings":"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"}