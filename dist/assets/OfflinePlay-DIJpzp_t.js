import{j as e,B as $e,u as Xi,a as qi,r as kr,f as Dr,p as Yi,R as Bt,b as Ji,c as Qi,d as Zi}from"./index-hEoLjEue.js";import{r as n}from"./ui-CuWypN7C.js";import{c as Na,a as ya,b as wa,d as Sa,e as Mr,f as Ar,g as Tr,h as Lr,s as ws,u as Ke,G as el,i as tl,D as Ca,A as Me,j as sl,C as al,k as nl,l as rl,m as il,n as he,o as ll,p as Rr,q as Er,r as ct,T as cl,t as ol,v as Fr,w as Ir,x as dl,y as ml,z as ul,B as xl,E as hl,F as fl,H as bl,I as pl,J as gl,K as vl,L as jl,M as Nl}from"./useGameStats-BUBeBCPI.js";import{u as yl,C as k,R as wl}from"./CameraView-Cm4v6VMJ.js";import{M as Sl}from"./MatchStartShowcase-Drb4-30d.js";import{u as Cl,a as $t}from"./match-Bov6r4NF.js";import{M as kl}from"./MatchControls-DYad0mfx.js";import"./vendor-D3F3s8fL.js";import"./pendingVisit-DMkUfJ7h.js";function Pr(l,f,w,y){const N=(y-90)*Math.PI/180;return{x:l+w*Math.cos(N),y:f+w*Math.sin(N)}}function Hr(l){return[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5].indexOf(l)*18+9}function Dl({width:l=320,height:f=320}){const w=yl(N=>N.samples),y=n.useRef(null);return n.useEffect(()=>{const N=y.current;if(!N)return;const D=N.getContext("2d");if(!D)return;N.width=l,N.height=f,D.clearRect(0,0,l,f);const se=l/2,ot=f/2,je=Math.min(l,f)/($e.doubleOuter*2+20),J={bullInner:$e.bullInner*je,bullOuter:$e.bullOuter*je,trebleInner:$e.trebleInner*je,trebleOuter:$e.trebleOuter*je,doubleInner:$e.doubleInner*je,doubleOuter:$e.doubleOuter*je};D.strokeStyle="rgba(255,255,255,0.06)",D.lineWidth=1;const Ne=["doubleOuter","doubleInner","trebleOuter","trebleInner","bullOuter","bullInner"];for(const A of Ne)D.beginPath(),D.arc(se,ot,J[A],0,Math.PI*2),D.stroke();const Ae=[];for(const A of w){let _=Math.random()*360,re=Math.random()*J.doubleOuter;typeof A.sector=="number"&&A.sector>=1&&A.sector<=20&&(_=Hr(A.sector),A.ring==="DOUBLE"?re=(J.doubleInner+J.doubleOuter)/2:A.ring==="TRIPLE"?re=(J.trebleInner+J.trebleOuter)/2:A.ring==="INNER_BULL"?re=J.bullInner*.5:A.ring==="BULL"?re=J.bullOuter*.8:re=(J.trebleOuter+J.doubleInner)/2*(.6+Math.random()*.4));const g=Pr(se,ot,re,_);Ae.push({x:g.x,y:g.y,w:1})}for(const A of Ae){const _=D.createRadialGradient(A.x,A.y,1,A.x,A.y,60);_.addColorStop(0,"rgba(255,0,0,0.9)"),_.addColorStop(.3,"rgba(255,100,0,0.5)"),_.addColorStop(1,"rgba(255,100,0,0)"),D.fillStyle=_,D.beginPath(),D.arc(A.x,A.y,60,0,Math.PI*2),D.fill()}D.fillStyle="rgba(255,255,255,0.85)",D.font="12px ui-sans-serif";const Te={};for(const A of w)A.sector&&(Te[A.sector]=(Te[A.sector]||0)+1);for(const A of Object.keys(Te)){const _=Number(A),re=Hr(_),g=Pr(se,ot,J.trebleOuter+18,re);D.fillText(String(Te[_]),g.x-6,g.y+4)}},[w,l,f]),e.jsx("canvas",{ref:y,style:{width:"100%",height:"auto",borderRadius:8,background:"#081018"}})}function Da(){return{targetIndex:0,darts:0,finished:!1}}const $r=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25],ka=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","Bull"];function Ml(l){return $r[l.targetIndex]}function Ma(l,f,w){if(l.finished)return l;const y=Ml(l);if(!(w==="SINGLE"&&f===y||w==="DOUBLE"&&f===y||w==="TRIPLE"&&f===y||w==="INNER_BULL"&&y===25))return l;const D=l.targetIndex+1,se=D>=$r.length;return{targetIndex:D,darts:l.darts+1,finished:se}}function Or(l,f){return Ma(l,f,"SINGLE")}function Al(){return Da()}function Aa(l=50){return{score:0,darts:0,finished:!1,target:l}}const Tl=[5,10,15,20,25,50];function Ll(l){return Tl.includes(l)}function Ta(l,f,w){if(l.finished)return l;if(!Ll(f))return{...l,darts:l.darts+1};const y=l.score+f,N=y>=l.target;return{score:N?l.target:y,darts:l.darts+1,finished:N,target:l.target}}function Vr(l,f){return Ta(l,f)}function Rl(l=50){return Aa(l)}function La(l=70){return{score:0,darts:0,finished:!1,target:l}}const El=[7,14,21];function Fl(l){return El.includes(l)}function Ra(l,f,w){if(l.finished)return l;if(!Fl(f))return{...l,darts:l.darts+1};const y=l.score+f,N=y>=l.target;return{score:N?l.target:y,darts:l.darts+1,finished:N,target:l.target}}function Br(l,f){return Ra(l,f)}function Il(l=70){return La(l)}function ne(l){return(f,w)=>{l(f)}}function Pl(l){const{match:f,commitManualVisitTotal:w,endTurn:y}=l;return{addVisit:(N,D=3,se)=>{if(w){w(N);return}try{f.addVisit(N,D,se)}catch{f.addVisit(N,D)}},undoVisit:()=>{f.undoVisit()},nextPlayer:()=>{if(y)try{y(0)}catch{f.nextPlayer()}else f.nextPlayer()},endLeg:N=>{typeof N=="number"?f.endLeg(N):f.endLeg(0)},endGame:()=>{f.endGame()}}}const Hl=["Easy","Medium","Hardened"];function fe(l,f,w){return Math.max(f,Math.min(w,l))}const Ol=6500;function Vl(l,f){let w=0;if(f==="Easy"){const y=[22,26,41,45,60];w=y[Math.floor(Math.random()*y.length)]}else f==="Medium"?w=Math.round(fe(60+(Math.random()*30-15),30,100)):w=Math.round(fe(80+(Math.random()*20-10),50,120));return l<=0?0:w>l?[100,85,81,60,57,45,41,26,22,20,1].find(N=>N<=l)??0:w}function Bl({onClose:l}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"card max-w-lg w-full relative",children:[e.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:l,children:"Close"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"X01 Rules & Regulations"}),e.jsxs("ul",{className:"list-disc pl-5 text-left mb-2",children:[e.jsx("li",{children:"Double In: Start scoring only after hitting a double."}),e.jsx("li",{children:"Double Out: Finish the game by hitting a double to reach exactly zero."}),e.jsx("li",{children:"Best Of: Play a set number of legs, winner is first to reach majority."}),e.jsx("li",{children:"First To: Play until a player reaches a set number of legs."}),e.jsx("li",{children:"No Cheating: All scores must be valid, no manual score changes mid-leg."}),e.jsx("li",{children:"Competitive Standard: Follow latest WDF/PDC rules for match play."})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"For full details, see official darts governing body rules."})]})})}const $l="http://localhost:8787";function uc({user:l}){const{offlineLayout:f,favoriteDouble:w,callerEnabled:y,callerVoice:N,callerVolume:D,speakCheckoutOnly:se,rememberLastOffline:ot,setLastOffline:je,autoStartOffline:J,cameraScale:Ne,setCameraScale:Ae,cameraAspect:Te="wide",setCameraAspect:A,cameraFitMode:_="fill",setCameraFitMode:re,cameraEnabled:g,textSize:Ss,boxSize:Ea,autoscoreProvider:Kr,autoCommitMode:Wr="wait-for-clear",matchType:Ur="singles",setMatchType:Gr,teamAName:_r="Team A",setTeamAName:zr,teamBName:Xr="Team B",setTeamBName:qr}=Xi(),Cs=Kr==="manual",S=g&&!Cs,Le=g&&!Cs&&Wr!=="immediate",[o,Fa]=n.useState("X01"),[v,Ia]=n.useState(501),[M,Yr]=n.useState("None"),[Jr,Pa]=n.useState(!1),[Ha,Kt]=n.useState(!1),[I,H]=n.useState(v),[O,dt]=n.useState(v),[Kl,Oa]=n.useState(!1),[Va,Q]=n.useState(!1),[mt,Ba]=n.useState(1),[V,Wt]=n.useState(0),Ut=Cl(),[Qr,$a]=n.useState(!1),Ka=n.useRef(!1),[B,Gt]=n.useState(0),[_t,Z]=n.useState(null),[Wa,Zr]=n.useState(1),[Ua,ei]=n.useState(1),[le,Ga]=n.useState([]),[_a,ti]=n.useState(2e3),ye=qi(),[ks,ut]=n.useState(!1),[xt,za]=n.useState(f==="modern"),[ht,Xa]=n.useState(f==="modern");n.useEffect(()=>{za(f==="modern"),Xa(f==="modern")},[f]),n.useEffect(()=>{_!=="fit"&&re("fit")},[_,re]);const[zt,qa]=n.useState(1),[Wl,Ya]=n.useState(!1),[R,ft]=n.useState(!0);n.useEffect(()=>{const t=()=>Ze(!0);return window.addEventListener("ndn:open-camera-manager",t),()=>window.removeEventListener("ndn:open-camera-manager",t)},[]);const[j,p]=n.useState(0),[bt,Ds]=n.useState(0),[Ms,As]=n.useState(0),[Re,Ja]=n.useState(0),[Qa,Za]=n.useState(0),[pt,Ts]=n.useState(Na()),[Xt,qt]=n.useState(ya()),[gt,Yt]=n.useState(wa()),[Jt,Qt]=n.useState(Sa()),[Ul,ie]=n.useState(0),[en,tn]=n.useState(1),[si,Ls]=n.useState(27),[Gl,sn]=n.useState(0),[ai,Rs]=n.useState(0),[an,nn]=n.useState(!1),[rn,ln]=n.useState(1),[ni,cn]=n.useState(0),[_l,on]=n.useState(0),ri=8,[dn,mn]=n.useState(1),[ii,un]=n.useState(0),[zl,xn]=n.useState(0),li=10,[hn,fn]=n.useState(1),[ci,bn]=n.useState(0),[Xl,pn]=n.useState(0),oi=10,[Es,Fs]=n.useState(170),[gn,vn]=n.useState(0),[jn,Nn]=n.useState(0),[yn,wn]=n.useState(0),[Is,Ps]=n.useState(121),[Sn,Cn]=n.useState(0),[kn,Dn]=n.useState(0),[Mn,An]=n.useState(0),[Ee,Hs]=n.useState(20),[Os,Vs]=n.useState(0),[Tn,Bs]=n.useState(0),[vt,di]=n.useState(30),[Ln,$s]=n.useState(!1),[Rn,En]=n.useState(Mr()),[Fn,In]=n.useState(Ar()),[Fe,Pn]=n.useState(Tr()),[Ks,Hn]=n.useState(Lr()),[L,Ws]=n.useState([{id:"p1",name:"Player 1"},{id:"p2",name:"Player 2"}]),[jt,Nt]=n.useState({}),[Zt,Us]=n.useState({}),[On,Gs]=n.useState(!1),[de,We]=n.useState(0),[ql,Ue]=n.useState(0),[Ge,yt]=n.useState(null),[mi,be]=n.useState(""),[es,Yl]=n.useState(Da()),[Ie,wt]=n.useState(Da()),[St,Jl]=n.useState(Aa(50)),[ce,Ct]=n.useState(Aa(50)),[kt,Ql]=n.useState(La(70)),[oe,Dt]=n.useState(La(70)),[ts,Pe]=n.useState(0),[pe,we]=n.useState(0),[E,$]=n.useState(0),[_s,Mt]=n.useState(v),[me,ee]=n.useState(0),[_e,ge]=n.useState(null),[ss,z]=n.useState(0),He=n.useRef(0),Vn=n.useRef(0),K=n.useRef(I),W=n.useRef(E),X=n.useRef(me),Oe=n.useRef(_s),U=n.useRef(ss);n.useEffect(()=>{K.current=I},[I]),n.useEffect(()=>{W.current=E},[E]),n.useEffect(()=>{X.current=me},[me]),n.useEffect(()=>{Oe.current=_s},[_s]),n.useEffect(()=>{U.current=ss},[ss]);const[ui,At]=n.useState(0);n.useRef(null);const[as,zs]=n.useState(0),[Ve,ns]=n.useState(0),[ze,Be]=n.useState(0),[Xe,ve]=n.useState(0),[qe,Ye]=n.useState(null),[Xs,Je]=n.useState(0),[Tt,Lt]=n.useState(0),[qs,rs]=n.useState(0),[Rt,Bn]=n.useState(0),[Ys,$n]=n.useState(0),[Et,Qe]=n.useState(0),[Ft,Kn]=n.useState(0),[Js,It]=n.useState(0),[Qs,Wn]=n.useState(0),[Un,is]=n.useState(0),[xi,ls]=n.useState(0),[hi,cs]=n.useState(0),[Gn,Zs]=n.useState(0),[fi,ea]=n.useState(0),[bi,ta]=n.useState(0),[pi,os]=n.useState(0),[gi,_n]=n.useState(0),[vi,sa]=n.useState(!1),[G,P]=n.useState(""),[aa,Pt]=n.useState(""),[Zl,ec]=n.useState(""),[zn,Xn]=n.useState(""),[qn,na]=n.useState(""),[Yn,ra]=n.useState(""),[ds,ia]=n.useState(null),[ji,Ze]=n.useState(!1),[Ni,Jn]=n.useState({}),[yi,Ht]=n.useState(!1),Se=n.useRef(null),la=n.useRef(null),ue=n.useCallback(()=>{const t=la.current;t&&(clearTimeout(t),la.current=null)},[]),ms=n.useCallback(t=>{if(!y)return;const s=l?.username||"Player";try{ws(s,t.visitTotal,Math.max(t.remaining,0),N,{volume:D,checkoutOnly:se})}catch{}},[y,N,D,se,l?.username]),us=n.useCallback((t,s)=>{Ht(!1);const{visitTotal:a,darts:r,preRemaining:i,remaining:u,doubleAttempts:m,finished:b,doubleWindow:d,highestCheckout:x}=t;b?(H(0),K.current=0,typeof x=="number"&&x>0&&os(c=>Math.max(c,x))):(H(u),K.current=u),ge(a),a===180?is(c=>c+1):a>=140?ls(c=>c+1):a>=100&&cs(c=>c+1),d&&m>0&&(Lt(c=>c+m),b&&rs(c=>c+1)),t.announced||ms(t);try{$t.getState().recordVisit("offline-x01",r,a,{preRemaining:i,postRemaining:b?0:u,finish:b,bust:!1})}catch{}b&&(Z("player"),Q(!0)),it(b?0:u),ee(0),X.current=0,$(0),W.current=0,z(0),U.current=0},[it,os,Z,H,ge,ee,$,z,Q,is,ls,cs,Lt,rs,ms]),et=n.useCallback(t=>{const s=Se.current;s&&(Se.current=null,ue(),us(s,t))},[ue,us]),Qn=n.useCallback(t=>{ms(t),Se.current={...t,announced:!0},Ht(!0),ue(),la.current=setTimeout(()=>et("timeout"),Ol)},[ue,et,ms]);n.useEffect(()=>{if(!Le)return;const t=()=>et("event");return window.addEventListener("ndn:darts-cleared",t),()=>window.removeEventListener("ndn:darts-cleared",t)},[Le,et]),n.useEffect(()=>{Le||et("timeout")},[Le,et]),n.useEffect(()=>()=>ue(),[ue]),n.useEffect(()=>{if(E===0&&Vn.current>0){try{window.dispatchEvent(new CustomEvent("ndn:darts-cleared",{detail:{source:"offline-play",ts:Date.now()}}))}catch{}He.current=0}Vn.current=E},[E]);const Ce=l?.username||"Player 1",tt=M==="None"?"Player 2":M,xs=Ke("X01",I,O,V,B,pe,Ve,me,ze,_e,qe,E,Xe,qs,Tt,Ys,Rt,le,R,M),wi=Ke("Cricket",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,pt),Si=Ke("Shanghai",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,R,M,void 0,pt,Xt),Ci=Ke("Killer",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,L,jt,Zt,de),ki=Ke("Scam"),Di=Ke("Fives"),Mi=Ke("Sevens"),hs=n.useMemo(()=>{const t=xs||[],s=E>0?me:_e??pe,a=Xe>0?ze:qe??Ve;return t.length===0?{name:R?Ce:tt,isCurrentTurn:!0,legsWon:R?V:B,score:R?I:O,lastScore:R?s:a}:t.find(r=>r.isCurrentTurn)??t[0]},[xs,R,Ce,tt,V,B,I,O,E,me,_e,pe,ze,qe,Ve,Xe]),Zn=n.useMemo(()=>{if(!hs)return[];const{matchAvg:t,allTimeAvg:s,...a}=hs;return[{...a,matchAvg:void 0,allTimeAvg:void 0}]},[hs]),Ai=R?tt:Ce,Ti=hs?.name??(R?Ce:tt),Li=R?I:O,Ri=R?E>0?me:_e??pe:Xe>0?ze:qe??Ve,C=n.useCallback((t,s=1)=>{!t||s<=0||Jn(a=>({...a,[t]:(a[t]||0)+s}))},[]),T=n.useCallback(t=>{t&&Jn(s=>s[t]===void 0?s:{...s,[t]:0})},[]);Ni[o];const Ei=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?fe(Math.round(s),0,v):null},Fi=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?Math.max(0,Math.round(s)):null},er=n.useCallback(()=>{Se.current&&(Se.current=null),ue(),Ht(!1)},[ue]);n.useCallback(t=>{const s=fe(t,0,v);er(),H(s),K.current=s;const a=s===0?v:s;Mt(a),Oe.current=a,ee(0),X.current=0,$(0),W.current=0,z(0),U.current=0,ge(null),we(0),p(0),He.current=0,s===0?(Z("player"),Q(!0)):(Z(null),Q(!1))},[er,H,v,Mt,ee,$,z,ge,we,p,Z,Q]);const tr=t=>{const a=Ei(zn);if(a===null){ye(`Enter a number between 0 and ${v}`,{type:"error",timeout:2500});return}dt(a),Be(0),ve(0),Ye(null),Je(0),ns(0),Xn(""),Z(null),Q(!1)},sr=n.useCallback((t,s)=>{t==="player"?(Wt(s),na("")):(Gt(s),ra("")),Z(null),Q(!1)},[Gt,ra,na,Z,Wt,Q]),fs=t=>{const a=Fi(t==="player"?qn:Yn);if(a===null){ye("Enter a non-negative whole number for legs",{type:"error",timeout:2500});return}ia({target:t,value:a,stage:1})},Ii=n.useCallback(()=>{ia(t=>t&&(t.stage===1?{...t,stage:2}:(sr(t.target,t.value),null)))},[sr]),Ot=n.useCallback(()=>{ia(null)},[]);n.useEffect(()=>{if(!ds)return;const t=s=>{s.key==="Escape"&&(s.preventDefault(),Ot())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[Ot,ds]);const ke=(t=>{switch(t){case"small":return"px-1.5 py-0.5 text-xs";case"large":return"px-3 py-1 text-sm";default:return"px-2 py-0.5 text-sm"}})(Ss),st=n.useRef(null),at=n.useRef(null),ca=n.useRef(null),[nt,oa]=n.useState("first"),[bs,ar]=n.useState(1),Pi=n.useRef(null);n.useEffect(()=>{const t=Math.max(1,Math.floor(Number(bs)||1)),s=nt==="first"?t:Math.max(1,Math.ceil(t/2));Ba(s)},[nt,bs]),n.useEffect(()=>{if(!ht){qa(1),Ya(!1);return}const t=()=>{const r=st.current,i=at.current;if(!r||!i)return;const u=ca.current?ca.current.getBoundingClientRect().height:0,m=Math.max(0,r.clientHeight-u-6),b=Math.max(0,r.clientWidth-8),d=i.getBoundingClientRect(),x=zt||1,c=d.height/x,h=d.width/x,Y=m>0?m/c:1,xe=b>0?b/h:1,De=Math.min(1,Math.max(.5,Math.min(Y,xe))),te=c*De,F=m>0&&te-m>1;Ya(F),qa(De)};t();const s=window.ResizeObserver,a=s?new s(()=>t()):null;return a&&st.current&&a.observe(st.current),a&&at.current&&a.observe(at.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t);try{a&&st.current&&a.unobserve(st.current)}catch{}try{a&&at.current&&a.unobserve(at.current)}catch{}}},[ht,zt]),n.useEffect(()=>{const t=s=>{const a=s?.detail?.mode;a&&(Fa(a),rt())};return window.addEventListener("ndn:auto-start",t),()=>window.removeEventListener("ndn:auto-start",t)},[]),n.useEffect(()=>{const t=s=>{const a=s?.detail?.formatType,r=s?.detail?.formatCount,i=s?.detail?.startScore;(a==="first"||a==="best")&&oa(a),typeof r=="number"&&isFinite(r)&&ar(Math.max(1,Math.floor(r))),typeof i=="number"&&isFinite(i)&&Ia(Math.max(1,Math.floor(i)))};return window.addEventListener("ndn:offline-format",t),()=>window.removeEventListener("ndn:offline-format",t)},[]),n.useEffect(()=>{if(!J)return;const t=setTimeout(()=>rt(),50);return()=>clearTimeout(t)},[J]),n.useEffect(()=>{if(!ks||R||M==="None"||ui<=0)return;let t,s=performance.now();const a=r=>{const i=r-s;s=r,At(u=>{const m=u-i;if(m<=0){let b=0,d=0,x=O;for(ve(0);b<3&&x>0;){const c=Vl(x,M),h=fe(c-b*20,0,Math.min(60,x)),Y=x-h;if(ns(h),zs(te=>te+1),Kn(te=>te+1),Y<0){x=O,Be(0),Je(0),d=0,Ye(0),ve(0);break}d+=h,Be(te=>te+h),Wn(te=>te+h);const xe=x,De=Y;if(xe>50&&De<=50?Je(1):xe<=50&&Je(te=>te+1),x=Y,b+=1,ve(b),x===0)break}if(dt(x),x===0){d===180?Zs(h=>h+1):d>=140?ea(h=>h+1):d>=100&&ta(h=>h+1);const c=O;c<=170&&_n(h=>Math.max(h,c)),O<=50&&(Bn(h=>h+(Xs>0?Xs:1)),$n(h=>h+1)),Ye(d),Be(0),Je(0),ve(0),Z("ai"),Q(!0)}return x>0&&b>=3&&(d===180?Zs(c=>c+1):d>=140?ea(c=>c+1):d>=100&&ta(c=>c+1),Ye(d),Be(0),Je(0),ve(0)),ve(0),ft(!0),0}return m}),t=requestAnimationFrame(a)};return t=requestAnimationFrame(a),()=>cancelAnimationFrame(t)},[ks,R,M,O]),n.useEffect(()=>{Ut.inProgress&&(Ka.current||($a(!0),Ka.current=!0))},[Ut.inProgress]);function rt(){Kt(!0),H(v),K.current=v,dt(v),Oa(!1),ut(!0),ft(!0),p(0),Pe(0),we(0),$(0),W.current=0,Mt(v),ee(0),ge(null),z(0),At(0),zs(0),ns(0),Be(0),ve(0),Ye(null),Z(null),Wt(0),Gt(0),Ga([]),Vs(0),Bs(0),$s(!1),Qe(0),Kn(0),It(0),Wn(0),is(0),ls(0),cs(0),Zs(0),ea(0),ta(0),os(0),_n(0),Lt(0),rs(0),Bn(0),$n(0),T("X01");const t=Math.max(1,Math.floor(Number(bs)||1));if(Ba(nt==="first"?t:Math.max(1,Math.ceil(t/2))),ot)try{je({mode:o,x01Start:v,firstTo:mt,aiLevel:M})}catch{}}function Hi(){H(v),K.current=v,dt(v),Oa(!1),ut(!0),ft(!0),p(0),Pe(0),we(0),$(0),W.current=0,Mt(v),ee(0),Oe.current=v,X.current=0,ge(null),z(0),U.current=0,U.current=0,At(0),zs(0),ns(0),Be(0),ve(0),Ye(null),Z(null)}function it(t){$(0),W.current=0,Mt(t===0?v:t),Oe.current=t===0?v:t,z(0),U.current=0,M!=="None"?(ft(!1),At(_a)):(At(0),ft(!0))}function lt(t){if(Le&&Se.current){yi||Ht(!0),ye("Remove your darts before starting the next throw",{type:"info",timeout:1800});return}C("X01");const s=K.current,a=W.current,r=X.current,i=Oe.current,u=U.current,m=s-t,b=a+1;if(we(t),Pe(F=>F+1),Qe(F=>F+1),m<0){try{const F=s,ja=i;$t.getState().recordVisit("offline-x01",b,0,{preRemaining:F,postRemaining:ja,bust:!0,finish:!1})}catch{}if(H(i),K.current=i,s<=50){const F=(u||0)+1;Lt(ja=>ja+F)}if(y)try{ws(l?.username||"Player",0,Math.max(i,0),N,{volume:D,checkoutOnly:se})}catch{}ge(0),p(0),ee(0),X.current=0,z(0),U.current=0,it(i);return}H(m),K.current=m,$(b),W.current=b;const d=r+t;ee(d),X.current=d,It(F=>F+t),p(0);const x=s,c=m,h=x>50&&c<=50,Y=x<=50;h?(z(1),U.current=1):Y&&(z(F=>F+1),U.current=(u||0)+1);const xe=U.current||0,De=x<=50,te=De?Math.max(xe,Math.min(b,3)):0;if(m===0){const F={visitTotal:d,darts:b,preRemaining:s,remaining:0,doubleAttempts:te,finished:!0,doubleWindow:De,highestCheckout:i<=170?i:null};Le?Qn(F):us(F,"immediate");return}if(b>=3){const F={visitTotal:d,darts:b,preRemaining:s,remaining:m,doubleAttempts:te,finished:!1,doubleWindow:De,highestCheckout:null};Le?Qn(F):us(F,"immediate");return}}function ps(){const t=fe(Math.round(Number(j)||0),0,60);lt(t)}function q(t){if(!Number.isFinite(t))return!1;const s=Oe.current,a=K.current,r=W.current,i=X.current,u=r>0||i>0;u&&(H(s),K.current=s,$(0),W.current=0,ee(0),X.current=0,z(0),U.current=0,we(0),p(0),Pe(c=>Math.max(0,c-r)),Qe(c=>Math.max(0,c-r)),It(c=>Math.max(0,c-i)),He.current=0);const m=u?s:a,b=m<=170?170:180,d=fe(Math.round(t),0,b);C("X01",3),Pe(c=>c+3),Qe(c=>c+3),$(3),W.current=3,ee(d),X.current=d,ge(d),d===180?is(c=>c+1):d>=140?ls(c=>c+1):d>=100&&cs(c=>c+1);const x=m-d;if(x<0){if(y)try{ws(Ce,0,Math.max(s,0),N,{volume:D,checkoutOnly:se})}catch{}try{$t.getState().recordVisit("offline-x01",3,0,{preRemaining:m,postRemaining:s,bust:!0,finish:!1})}catch{}return H(s),K.current=s,ge(0),ee(0),X.current=0,$(0),W.current=0,z(0),U.current=0,it(s),!0}if(H(x),K.current=x,It(c=>c+d),y)try{ws(Ce,d,Math.max(x,0),N,{volume:D,checkoutOnly:se})}catch{}if(m<=50&&(Lt(c=>c+3),x===0&&rs(c=>c+1)),x===0){m<=170&&os(c=>Math.max(c,m));try{$t.getState().recordVisit("offline-x01",3,d,{preRemaining:m,postRemaining:0,finish:!0,bust:!1})}catch{}return Z("player"),Q(!0),$(0),W.current=0,ee(0),X.current=0,z(0),U.current=0,!0}try{$t.getState().recordVisit("offline-x01",3,d,{preRemaining:m,postRemaining:x,finish:!1,bust:!1})}catch{}return it(x),ee(0),X.current=0,$(0),W.current=0,z(0),U.current=0,!0}const ae=Pl({match:Ut,commitManualVisitTotal:q,endTurn:it}),[gs,vs]=n.useState(""),nr=t=>{if(!t){vs("");return}const s=t.replace(/[^0-9]/g,"");if(!s){vs("");return}const a=Number(s);if(!Number.isFinite(a))return;const r=K.current<=170?170:180,i=fe(Math.round(a),0,r);vs(String(i))};function js(){if(!gs){alert("Enter a number 0â€“180 for visit total");return}const t=Number(gs);if(!Number.isFinite(t)){alert("Enter a number 0â€“180 for visit total");return}const s=K.current<=170?170:180,a=fe(Math.round(t),0,s);t>s&&ye(`Visit totals cannot exceed ${s}.`,{type:"info",timeout:2200}),q(a)&&vs("")}const da=n.useCallback(()=>{Se.current&&(Se.current=null,ue(),Ht(!1));const t=W.current,s=X.current,a=Oe.current;t===0&&s===0||(H(a),K.current=a,$(0),W.current=0,ee(0),X.current=0,z(0),U.current=0,we(0),p(0),Pe(r=>Math.max(0,r-t)),Qe(r=>Math.max(0,r-t)),It(r=>Math.max(0,r-s)),He.current=0)},[ue]);n.useEffect(()=>{const t=s=>{const a=s?.detail;!a||a?.source==="offline-play"||da()};return window.addEventListener("ndn:clear-visit-request",t),()=>window.removeEventListener("ndn:clear-visit-request",t)},[da]);function rr(t){C("Double Practice");const s=fe(Math.round(t||0),0,60);if(we(s),Pe(a=>a+1),Qe(a=>a+1),Er(s,bt)){const a=Ms+1;As(a),Ds(r=>Math.min(20,r+1)),a>=21&&(Z("player"),Q(!0))}p(0)}function ir(){rr(Number(j))}function lr(){const t=ct(G);if(t==null){alert("Enter like D16, 50, 25, T20");return}rr(t),P("")}function cr(t,s,a){if(an)return;C("Bob's 27");const r=en,i=s==="DOUBLE"&&a===r||!s&&t===r*2;i&&Rs(u=>u+1),sn(u=>{const m=u+1;if(m>=3){const b=ai+(i?1:0);b>0?Ls(x=>x+b*r*2):Ls(x=>x-r*2);const d=r+1;return tn(d),Rs(0),d>20&&nn(!0),0}return m})}function or(){cr(Math.max(0,j|0)),p(0)}function dr(){tn(1),Ls(27),sn(0),Rs(0),nn(!1),T("Bob's 27")}function ma(t){C("Count-Up"),cn(s=>s+Math.max(0,t|0)),on(s=>{const a=s+1;return a>=3?(ln(r=>r+1),0):a})}function ua(t){C("High Score"),un(s=>s+Math.max(0,t|0)),xn(s=>{const a=s+1;return a>=3?(mn(r=>r+1),0):a})}function xa(t){C("Low Score"),bn(s=>s+Math.max(0,t|0)),pn(s=>{const a=s+1;return a>=3?(fn(r=>r+1),0):a})}function mr(t,s,a,r,i,u,m,b){const d=t-m;if(!(d<0))if(d===0){if(b==="DOUBLE"||b==="INNER_BULL"){u(x=>x+1),i(x=>x+1),r(()=>0),s(t);return}s(d)}else s(d);r(x=>{const c=x+1;return c>=3?(i(h=>h+1),0):c})}function ur(t,s){C("Checkout 170"),mr(Es,Fs,gn,vn,Nn,wn,t,s),gn+1>=3&&Fs(170)}function xr(t,s){C("Checkout 121"),mr(Is,Ps,Sn,Cn,Dn,An,t,s),Sn+1>=3&&Ps(121)}function Ns(t){const s=ct(G);if(s==null){alert("Enter like T20, D16, 25, 50");return}const a=G.trim().toUpperCase(),r=a.startsWith("D")||a==="50"||a==="BULL"||a==="DBULL"||a==="IBULL"||a.includes("INNER");t?ur(s,r?"DOUBLE":void 0):xr(s,r?"DOUBLE":void 0),P("")}function Oi(){Fs(170),vn(0),Nn(0),wn(0),T("Checkout 170")}function Vi(){Ps(121),Cn(0),Dn(0),An(0),T("Checkout 121")}function ha(t,s,a){if(Ln)return;C("Treble Practice"),(s==="TRIPLE"&&a===Ee||!s&&t===Ee*3)&&Vs(i=>i+1),Bs(i=>{const u=i+1;if(u%3===0&&[20,19,18].includes(Ee)){const m=[20,19,18],b=m.indexOf(Ee),d=m[(b+1)%m.length];Hs(d)}return vt>0&&u>=vt&&$s(!0),u})}function hr(){Vs(0),Bs(0),$s(!1),T("Treble Practice")}function Bi(t,s,a){C("Baseball"),En(r=>{const i={...r};return dl(i,t,s,a),i})}function $i(){En(Mr()),T("Baseball")}function Ki(t,s,a){C("Golf"),In(r=>{const i={...r};return ml(i,t,s,a),i})}function Wi(){In(Ar()),T("Golf")}function Ui(t,s,a,r){C("Tic Tac Toe"),Pn(i=>{const u={...i,board:[...i.board]};return ul(u,t,s,a,r),u})}function Gi(){Pn(Tr()),T("Tic Tac Toe")}function _i(t,s,a){C("American Cricket"),Hn(r=>{const i={...r,marks:{...r.marks}};return xl(i,t,s,a,()=>!1),i})}function fr(){Hn(Lr()),T("American Cricket")}function fa(t,s,a){C("Around the Clock");const r=Me[Re];let i=!1;if(typeof a=="number"&&a===r&&(s==="SINGLE"||s==="DOUBLE"||s==="TRIPLE")&&(i=!0),r===25&&(s==="BULL"||t===25)&&(i=!0),r===50&&(s==="INNER_BULL"||t===50)&&(i=!0),i||(t===r||t===r*2||t===r*3)&&(i=!0),i){const u=Qa+1;Za(u),Ja(m=>m+1)}}function br(){fa(Math.max(0,j|0)),p(0)}function pr(){const t=ct(G);if(t==null){alert("Enter like T20, D5, 25, 50");return}fa(t),P("")}function ba(t,s,a){C("Cricket"),Ts(r=>{const i={...r,marks:{...r.marks}};return hl(i,t,s,a,()=>!1),i}),ie(r=>{const i=r+1;return i>=3?0:i})}function gr(){ba(Math.max(0,j|0)),p(0)}function pa(t,s,a){C("Shanghai"),qt(r=>{const i={...r,turnHits:{...r.turnHits}};return fl(i,t,s,a),i}),ie(r=>{const i=r+1;return i>=3?(qt(u=>{const m={...u,turnHits:{...u.turnHits}};return bl(m),m}),0):i})}function vr(){pa(Math.max(0,j|0)),p(0)}function jr(t,s,a){C("Halve It"),Yt(r=>{const i={...r,targets:[...r.targets]};return pl(i,t,s,a),i}),ie(r=>{const i=r+1;return i>=3?(Yt(u=>{const m={...u,targets:[...u.targets]};return gl(m),m}),0):i})}function Nr(){jr(Math.max(0,j|0)),p(0)}function yr(t,s,a){C("High-Low"),Qt(r=>{const i={...r};return vl(i,t,s,a),i}),ie(r=>{const i=r+1;return i>=3?(Qt(u=>{const m={...u};return jl(m),m}),0):i})}function wr(){yr(Math.max(0,j|0)),p(0)}function Sr(){const t=G.trim().toUpperCase();if(!t)return null;if(t==="50"||t==="BULL"||t==="DBULL"||t==="IBULL")return 50;if(t==="25"||t==="OBULL")return 25;const s=t.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!s)return null;const a=s[1]||"S",r=parseInt(s[2],10);return r<1||r>20?null:r*(a==="S"?1:a==="D"?2:3)}function Vt(){const t=Sr();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}lt(t),P("")}function Cr(){const t=aa.trim().split(`
`).map(s=>s.trim()).filter(s=>s);if(t.length!==0){for(const s of t){const a=ct(s);if(a==null){alert(`Invalid score: ${s}`);return}lt(a)}Pt("")}}function ga(){E!==0&&(H(t=>t+pe),$(t=>Math.max(0,t-1)))}function ys(){const t=Sr();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}if(E===0){Vt();return}const s=pe;H(a=>a+s),$(a=>Math.max(0,a-1)),setTimeout(()=>lt(t),0),P("")}function zi(){const t=_t??"player",s=t==="player"?ss||void 0:Xs||void 0,a=1,r=t==="player"?ts:as;Ga([...le,{winner:t,doubleDarts:Wa,checkoutDarts:Ua,winnerDarts:r,doublesAtt:s,doublesHit:a}]),Q(!1);let i=V,u=B;if(_t==="player"?i+=1:_t==="ai"&&(u+=1),Wt(i),Gt(u),Z(null),i>=mt||u>=mt){try{Zi(o,t==="player")}catch{}ut(!1),Kt(!1),H(v),dt(v),sa(!0);return}Hi()}const va=!Dr.includes(o)&&!(l?.fullAccess||l?.admin);return e.jsxs("div",{className:"card ndn-game-shell relative overflow-hidden",children:[Qr&&e.jsx(Sl,{players:Ut.players||[],onDone:()=>$a(!1)}),e.jsxs("h2",{className:"text-2xl font-bold text-brand-700 mb-4",children:["Offline Game Modes ",f==="classic"?e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-white/10 border border-white/10 align-middle",children:"Classic layout"}):e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-400/30 text-emerald-200 align-middle",children:"Modern layout"})]}),e.jsxs("div",{className:"ndn-shell-body",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[e.jsx("label",{className:"font-semibold",children:"Select game mode:"}),e.jsxs("select",{className:"input w-full",value:o,onChange:t=>Fa(t.target.value),children:[Dr.map(t=>e.jsx("option",{value:t,children:t},t)),Yi.map(t=>e.jsxs("option",{value:t,disabled:!(l?.fullAccess||l?.admin),children:[t," ",l?.fullAccess||l?.admin?"":"(Premium)"]},t))]}),e.jsx(el,{gameMode:o,compact:!0}),o==="Treble Practice"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"font-semibold",children:"Throws per game"}),e.jsx("input",{className:"input w-full",type:"number",min:3,step:3,value:vt,onChange:t=>di(Math.max(3,Math.floor(Number(t.target.value)||30)))})]}),e.jsx("div",{className:"sm:col-span-2 text-xs text-slate-300",children:"Target cycles T20â†’T19â†’T18 every 3 darts. Game ends after the selected number of throws."})]}),!l?.fullAccess&&e.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”’"}),e.jsx("span",{children:"Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM."})]}),o==="X01"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-semibold mt-2",children:"Enter starting score (1-1001):"}),e.jsx("input",{className:"input w-full",type:"number",min:1,max:1001,value:v,onChange:t=>Ia(Number(t.target.value))}),e.jsx("label",{className:"font-semibold mt-2",children:"Play against AI bot?"}),e.jsxs("select",{className:"input w-full",value:M,onChange:t=>Yr(t.target.value),children:[e.jsx("option",{value:"None",children:"None"}),Hl.map(t=>e.jsx("option",{value:t,children:t},t))]}),M!=="None"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"font-semibold",children:"AI throw delay (seconds)"}),e.jsx("input",{className:"input w-full",type:"number",min:.5,max:10,step:.5,value:_a/1e3,onChange:t=>ti(Math.round(Number(t.target.value)*1e3))})]}),e.jsx("div",{className:"text-sm text-slate-300",children:"Controls how long the AI waits before its visit."})]}),e.jsx("button",{className:"btn mt-2",onClick:()=>Pa(!0),children:"X01 Rules & Regulations!"})]}),o==="Double Practice"&&e.jsx("div",{className:"mt-2 text-brand-600",children:"Hit doubles D1 â†’ D20 â†’ DBULL in as few darts as possible. AI and X01 settings donâ€™t apply."})]}),!Ha&&e.jsx("button",{className:"btn",disabled:va,title:va?"PREMIUM required for this mode":"",onClick:rt,children:"Start Match"}),ks&&e.jsx("div",{className:`absolute inset-0 z-[1000] ${xt?"":"flex items-center justify-center p-3 sm:p-4"}`,children:e.jsx(Bt,{storageKey:"ndn:modal:offline-match",className:`${xt?"w-full h-full ndn-modal-tight":""} relative flex flex-col overflow-hidden`,fullScreen:xt,defaultWidth:1100,defaultHeight:720,minWidth:720,minHeight:480,maxWidth:1600,maxHeight:1200,initialFitHeight:!0,children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-x-hidden pr-1 pt-2 pb-2",style:{overflowY:"auto"},ref:t=>{st.current=t},children:[e.jsx("div",{ref:t=>{ca.current=t},children:e.jsx(tl,{left:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden xs:inline px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-[10px] sm:text-xs",children:"Game Mode"}),e.jsxs("span",{className:"font-medium whitespace-nowrap",children:[o,o==="X01"?` / ${v}`:""]}),e.jsxs("span",{className:"opacity-80 whitespace-nowrap",children:["First to ",mt," Â· Legs ",V,"-",B]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full border text-[10px] sm:text-xs ${f==="modern"?"bg-emerald-500/15 text-emerald-200 border-emerald-400/30":"bg-white/10 text-white/70 border-white/20"}`,children:f==="modern"?"Modern layout":"Classic layout"})]}),right:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden items-center gap-2 mr-2 text-xs",children:[e.jsx("span",{className:"opacity-80",children:"Cam"}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>Ae(Math.max(.5,Math.round((Ne-.05)*100)/100)),title:"Decrease camera size",children:"âˆ’"}),e.jsxs("span",{className:"w-9 text-center",children:[Math.round(Ne*100),"%"]}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>Ae(Math.min(1.25,Math.round((Ne+.05)*100)/100)),title:"Increase camera size",children:"+"})]}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:ht?"Actual Size":"Fit All",onClick:()=>Xa(t=>!t),children:ht?"Actual Size":"Fit All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:xt?"Restore":"Maximize",onClick:()=>za(t=>!t),children:xt?"Restore":"Maximize"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{rt()},children:"Restart"}),e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:()=>{ut(!1),Kt(!1)},children:"Quit"})]})})}),e.jsxs("div",{ref:t=>{at.current=t},className:"will-change-transform",style:ht?{transform:`scale(${zt})`,transformOrigin:"top left",width:"100%",fontSize:`${Math.max(.8,Math.min(1,zt))}em`}:void 0,children:[e.jsx("h3",{className:"text-xl font-bold mb-2 mt-1 leading-tight",children:o==="X01"?"X01 Match":o}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Mode: ",o]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Start: ",v]}),e.jsxs("div",{ref:Pi,className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[e.jsx("span",{children:"Format:"}),(()=>{const t=I!==v||O!==v||E>0,s=`px-2 py-0.5 rounded border text-xs ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"} `;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:`${s} ${nt==="first"?"bg-indigo-500/20 text-indigo-100 border-indigo-400/30":"bg-white/10 text-white/80 border-white/20"}`,onClick:()=>{t||oa("first")},title:"First to N",children:"First to"}),e.jsx("button",{type:"button",className:`${s} ${nt==="best"?"bg-indigo-500/20 text-indigo-100 border-indigo-400/30":"bg-white/10 text-white/80 border-white/20"}`,onClick:()=>{t||oa("best")},title:"Best of N (wins = ceil(N/2)",children:"Best of"})]}),e.jsx("input",{className:`input w-16 text-center ${t?"opacity-50":""}`,type:"number",min:1,step:1,value:bs,onChange:a=>ar(Math.max(1,Math.floor(Number(a.target.value)||1))),disabled:t,title:nt==="first"?"First to N":"Best of N (wins = ceil(N/2))"})]})})()]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs: ",V,"â€“",B]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px] flex-wrap",children:[e.jsx("span",{className:"opacity-70",children:"Match"}),e.jsxs("select",{className:`btn ${ke}`,value:Ur,onChange:t=>Gr(t.target.value),children:[e.jsx("option",{value:"singles",children:"Singles"}),e.jsx("option",{value:"doubles",children:"Doubles"})]}),e.jsx("input",{className:`input ${ke} w-[7.5rem]`,value:_r,onChange:t=>zr(t.target.value),placeholder:"Team A"}),e.jsx("span",{className:"opacity-50",children:"vs"}),e.jsx("input",{className:`input ${ke} w-[7.5rem]`,value:Xr,onChange:t=>qr(t.target.value),placeholder:"Team B"})]})]}),o!=="X01"?e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2",children:[o==="Double Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Ca[bt]?.label||"â€”"})]})}),o==="Around the Clock"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Me[Re]===25?"25 (Outer Bull)":Me[Re]===50?"50 (Inner Bull)":Me[Re]||"â€”"})]})}),o==="Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Cricket â€” Close 20â€“15 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-[11px] mb-2",children:al.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,pt.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points: ",e.jsx("span",{className:"font-semibold",children:pt.points})]}),sl(pt)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Ts(Na()),ie(0),T("Cricket")},children:"Reset"})]})]}),o==="Shanghai"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Round"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:Xt.round})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Xt.score]}),Xt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{qt(ya()),ie(0),T("Shanghai")},children:"Reset"})]})]}),o==="Halve It"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Stage"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[gt.stage+1,"/",gt.targets.length]})]}),e.jsxs("div",{className:"text-sm",children:["Target: ",e.jsx("span",{className:"font-semibold",children:(()=>{const t=nl(gt);return t?t.kind==="ANY_NUMBER"?"Any":t.kind==="BULL"?"Bull":t.kind==="DOUBLE"||t.kind==="TRIPLE"||t.kind==="NUMBER"?`${t.kind} ${t.num}`:"â€”":"â€”"})()})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",gt.score]}),gt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Yt(wa()),ie(0),T("Halve It")},children:"Reset"})]})]}),o==="High-Low"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Jt.round," Â· Target ",Jt.target]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Jt.score]}),Jt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Qt(Sa()),ie(0),T("High-Low")},children:"Reset"})]})]}),o==="Bob's 27"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Target"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold",children:["D",en]})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",si]}),an&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:dr,children:"Reset"})]})]}),o==="Count-Up"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",rn,"/8"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ni]})]}),o==="High Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",dn,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ii]})]}),o==="Low Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",hn,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ci]})]}),o==="Checkout 170"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Es}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",jn," Â· Successes: ",yn]})]}),o==="Checkout 121"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Is}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",kn," Â· Successes: ",Mn]})]}),o==="Treble Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Treble Target: T",Ee]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Hits: ",Os]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("label",{className:"text-sm",children:"Target"}),e.jsx("div",{className:"inline-flex items-center gap-1",children:[20,19,18].map(t=>e.jsxs("button",{className:`btn px-2 py-0.5 text-xs ${Ee===t?"bg-emerald-600/30 border border-emerald-400/30":""}`,onClick:()=>Hs(t),children:["T",t]},`tpick-header-${t}`))}),e.jsx("span",{className:"opacity-60 text-xs",children:"or"}),e.jsx("select",{className:"input w-24",value:Ee,onChange:t=>Hs(parseInt(t.target.value,10)),children:Array.from({length:20},(t,s)=>s+1).map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:hr,children:"Reset"})]})]})}),o==="Baseball"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Inning"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Rn.inning}),e.jsxs("div",{className:"text-sm",children:["Score: ",e.jsx("span",{className:"font-semibold",children:Rn.score})]})]}),o==="Golf"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Hole"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Fn.hole}),e.jsxs("div",{className:"text-sm",children:["Strokes: ",e.jsx("span",{className:"font-semibold",children:Fn.strokes})]})]}),o==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Turn"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Fe.turn}),Fe.finished&&e.jsxs("div",{className:"mt-1 text-xs",children:["Winner: ",Fe.winner||"â€”"]})]}),o==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Target"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:ka[es.targetIndex]}),e.jsxs("div",{className:"text-sm",children:["Progress: ",e.jsxs("span",{className:"font-semibold",children:[es.targetIndex+1,"/",ka.length]})]}),es.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["ðŸŽ‰ Finished in ",es.darts," darts!"]})]}),o==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[St.score,"/",St.target]}),e.jsxs("div",{className:"text-sm",children:["Darts: ",e.jsx("span",{className:"font-semibold",children:St.darts})]}),St.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",St.target,"!"]})]}),o==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[kt.score,"/",kt.target]}),e.jsxs("div",{className:"text-sm",children:["Darts: ",e.jsx("span",{className:"font-semibold",children:kt.darts})]}),kt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",kt.target,"!"]})]}),o==="American Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Close 20â€“12 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-10 gap-1 text-center text-[11px] mb-2",children:il.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,Ks.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points: ",e.jsx("span",{className:"font-semibold",children:Ks.points})]}),rl(Ks)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:fr,children:"Reset"})]})]}),o==="Killer"&&e.jsx(e.Fragment,{children:On?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Turn"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:L[de]?.name||"â€”"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ge?`${L.find(t=>t.id===Ge)?.name||"Winner"} Wins`:mi||"Ready"})]}):e.jsx("div",{className:"text-xs text-slate-600",children:"Setup players and assign numbers"})})]}):f==="modern"?e.jsx("div",{className:"space-y-3 mb-2",children:Cs?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Manual scoring active"}),e.jsx("div",{className:"text-xs opacity-70",children:"Camera previews are disabled. Use the manual entry controls below to record your turn."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-wrap gap-1.5 mt-1",children:e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"opacity-70",children:"Cam"}),e.jsx("button",{className:`btn ${ke}`,onClick:()=>Ae(Math.max(.5,Math.round((Ne-.05)*100)/100)),children:"âˆ’"}),e.jsxs("span",{className:`btn ${ke} min-w-[2.5rem] text-center`,children:[Math.round(Ne*100),"%"]}),e.jsx("button",{className:`btn ${ke}`,onClick:()=>Ae(Math.min(1.25,Math.round((Ne+.05)*100)/100)),children:"+"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${ke}`,title:"Toggle fit/fill",onClick:()=>re(_==="fill"?"fit":"fill"),children:_==="fill"?"Fill":"Fit"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${ke}`,title:"Toggle camera aspect",onClick:()=>A(Te==="square"?"wide":"square"),children:Te==="square"?"Square":"Wide"})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row-reverse md:items-start md:gap-6",children:[e.jsx("div",{className:"w-full h-[260px] rounded-2xl overflow-hidden bg-black shadow-xl md:w-[48%] md:min-h-[420px]",children:e.jsx(k,{scoringMode:"x01",showToolbar:S,onAutoDart:(t,s,a)=>{lt(t)}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-[minmax(0,1fr)_300px] md:items-start md:gap-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Current Shooter"}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-white",children:Ti}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-white/80",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Remaining"}),e.jsx("div",{className:"font-mono text-lg text-white",children:Li})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Last Dart"}),e.jsx("div",{className:"font-mono text-lg text-white",children:Ri||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Match Legs"}),e.jsxs("div",{className:"font-semibold text-white",children:[V,"-",B]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Next Up"}),e.jsx("div",{className:"font-medium text-white",children:Ai})]})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(he,{gameMode:o,players:Zn,matchScore:`${V}-${B}`})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(he,{gameMode:o,players:Zn,matchScore:`${V}-${B}`})}),o==="X01"&&e.jsxs("div",{className:"mt-3 md:mt-4 rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Manual Scoreboard Override"}),e.jsxs("p",{className:"mt-1 text-xs text-white/40",children:["Adjust the live totals if a dart was misread. Values are clamped between 0 and ",v,"."]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:Ce}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Commit Visit"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(kl,{inProgress:!0,startingScore:v,onAddVisit:ne(q),quickButtons:[180,140,100,60],onNextPlayer:()=>ae?.nextPlayer(),onEndLeg:()=>{},onUndo:()=>{},showDartsSelect:!0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:qn,onChange:t=>na(t.target.value),onKeyDown:t=>{t.key==="Enter"&&fs("player")},placeholder:`${V}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>fs("player"),children:"Set"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:tt}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Three Dart Edit"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:v,value:zn,onChange:t=>Xn(t.target.value),onKeyDown:t=>{t.key==="Enter"&&tr()},placeholder:`${O}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>tr(),children:"Set"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:Yn,onChange:t=>ra(t.target.value),onKeyDown:t=>{t.key==="Enter"&&fs("ai")},placeholder:`${B}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>fs("ai"),children:"Set"})]})]})]})]})]})]})]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:[grid-template-columns:minmax(0,0.75fr)_minmax(0,3fr)_minmax(0,0.75fr)] gap-2 mb-2 items-stretch min-w-0",children:e.jsxs("div",{className:"flex items-stretch justify-center md:px-3 min-w-0",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"You Remain"}),R?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:I}),e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-400/70",style:{width:`${Math.max(0,Math.min(100,(1-I/v)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",e.jsx("span",{className:"font-semibold",children:pe})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score: ",e.jsx("span",{className:"font-semibold",children:E>0?me:_e??pe})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",e.jsx("span",{className:"font-semibold",children:Et>0?(Js/Et*3).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"text-xs opacity-70 flex items-center gap-2",children:[e.jsxs("span",{children:["Darts thrown: ",ts]}),e.jsx("span",{className:"inline-flex items-center gap-1","aria-label":"Visit darts",children:[0,1,2].map(t=>e.jsx("span",{className:`w-2 h-2 rounded-full ${t<E?"bg-emerald-400":"bg-white/20"}`},t))})]}),e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",e.jsxs("span",{className:"font-semibold",children:["Att ",Tt," Â· Hit ",qs]})]}),I<=170&&I>0&&(()=>{const s=ll(I,w)[0]||"â€”";return e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-sm",children:[e.jsx("span",{className:"opacity-70",children:"Checkout"}),e.jsx("span",{className:"font-semibold",children:s})]})})()]}),e.jsx("div",{className:"flex items-stretch justify-center md:justify-end md:px-3 min-w-0 flex-1 min-h-0 ndn-camera-tall",children:e.jsx(wl,{storageKey:"ndn:camera:tile:offline:center:v4",className:"relative rounded-2xl overflow-hidden bg-black w-full camera-fullwidth-card",defaultWidth:0,defaultHeight:0,minWidth:300,minHeight:300,maxWidth:2e3,maxHeight:1200,autoFill:!0,children:e.jsx(Rr,{label:"Your Board",autoStart:!0,className:"min-w-0 h-full",aspect:"classic",fill:!0})})}),e.jsxs("div",{className:`mt-2 ${Ea==="small"?"p-2":Ea==="large"?"p-4":"p-3"} rounded-2xl bg-slate-900/40 border border-white/10 text-white ${Ss==="small"?"text-xs":Ss==="large"?"text-base":"text-sm"}`,children:[e.jsx("div",{className:"font-semibold mb-2",children:"Match Summary"}),(()=>{const t=R?l?.username||"You":M==="None"?"â€”":`${M} AI`,s=R?I:M==="None"?0:O,a=R?E>0?me:_e??pe:Xe>0?ze:qe??Ve,r=R?ts:as,i=v-(R?I:M==="None"?v:O),u=r>0?i/r*3:0,m=`${V}-${B}`,b=le.length>0?`${Math.min(...le.map(d=>d.doubleDarts+(d.checkoutDarts||0)))||0} darts`:"â€”";return e.jsxs("div",{className:"grid grid-cols-2 gap-y-1",children:[e.jsx("div",{className:"opacity-80",children:"Current score"}),e.jsx("div",{className:"font-mono text-right",children:m}),e.jsx("div",{className:"opacity-80",children:"Current thrower"}),e.jsx("div",{className:"text-right font-semibold text-lg",children:t}),e.jsx("div",{className:"opacity-80",children:"Score remaining"}),e.jsx("div",{className:"text-right font-mono font-bold text-xl",children:s}),e.jsx("div",{className:"opacity-80",children:"3-dart avg"}),e.jsx("div",{className:"text-right font-mono",children:u.toFixed(1)}),e.jsx("div",{className:"opacity-80",children:"Last score"}),e.jsx("div",{className:"text-right font-mono",children:a}),e.jsx("div",{className:"opacity-80",children:"Best leg"}),e.jsx("div",{className:"text-right",children:b})]})})()]}),e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs flex items-center justify-between opacity-80",children:[e.jsxs("span",{children:[M==="None"?"Opponent":`${M} AI`," Remain"]}),R?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:M!=="None"?O:"N/A"}),M!=="None"&&e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-fuchsia-400/70",style:{width:`${Math.max(0,Math.min(100,(1-O/v)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",e.jsx("span",{className:"font-semibold",children:M==="None"?0:Ve})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score: ",e.jsx("span",{className:"font-semibold",children:M==="None"?"â€”":Xe>0?ze:qe??Ve})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",e.jsx("span",{className:"font-semibold",children:M!=="None"?Ft>0?(Qs/Ft*3).toFixed(1):"0.0":"â€”"})]}),M!=="None"&&e.jsxs("div",{className:"text-xs opacity-70",children:["Darts thrown: ",as]}),M!=="None"&&e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",e.jsxs("span",{className:"font-semibold",children:["Att ",Rt," Â· Hit ",Ys]})]})]})]})}),o!=="X01"?e.jsxs("div",{className:"space-y-2",children:[o==="Double Practice"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Ca[bt]?.label||"â€”"})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,onAutoDart:(t,s)=>{if((s==="DOUBLE"||s==="INNER_BULL")&&Er(t,bt)){const r=Ms+1,i=bt+1;As(r),Ds(i),r>=Ca.length&&setTimeout(()=>{As(0),Ds(0)},250)}},immediateAutoCommit:!0,onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&ir()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:ir,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&lr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:lr,children:"Add"})]})]}),e.jsxs("div",{className:"text-xs text-slate-300",children:["Progress: ",Ms," of 21"]})]}),o==="Around the Clock"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Me[Re]===25?"25 (Outer Bull)":Me[Re]===50?"50 (Inner Bull)":Me[Re]||"â€”"})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{fa(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&br()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:br,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D5, 25, 50)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&pr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:pr,children:"Add"})]}),Qa>=Me.length&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Za(0),Ja(0),T("Around the Clock")},children:"Reset"})]})]}),o==="Cricket"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{ba(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&gr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:gr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ts(Na()),ie(0),T("Cricket")},children:"Reset"})]})]}),o==="Shanghai"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{pa(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&vr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:vr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{qt(ya()),ie(0),T("Shanghai")},children:"Reset"})]})]}),o==="Halve It"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{jr(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Nr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Nr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Yt(wa()),ie(0),T("Halve It")},children:"Reset"})]})]}),o==="High-Low"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{yr(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&wr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:wr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Qt(Sa()),ie(0),T("High-Low")},children:"Reset"})]})]}),o==="Bob's 27"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{cr(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&or()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:or,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:dr,children:"Reset"})]})]}),o==="Count-Up"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>ma(t),onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(ma(j),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{ma(j),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ln(1),cn(0),on(0),T("Count-Up")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",rn,"/",ri]})]}),o==="High Score"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>ua(t),onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(ua(j),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{ua(j),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{mn(1),un(0),xn(0),T("High Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",dn,"/",li]})]}),o==="Low Score"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>xa(t),onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(xa(j),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{xa(j),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{fn(1),bn(0),pn(0),T("Low Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",hn,"/",oi]})]}),o==="Checkout 170"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>ur(t,s==="MISS"?void 0:s),onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Ns(!0)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>Ns(!0),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Oi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Es," Â· Attempts: ",jn," Â· Successes: ",yn]})]}),o==="Checkout 121"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>xr(t,s==="MISS"?void 0:s),onAddVisit:ne(q),onEndLeg:t=>ae.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Ns(!1)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>Ns(!1),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Vi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Is," Â· Attempts: ",kn," Â· Successes: ",Mn]})]}),o==="Treble Practice"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{ha(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){const s=ct(G);s!=null&&ha(s,void 0,void 0),P("")}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{const t=ct(G);t!=null&&ha(t,void 0,void 0),P("")},children:"Add Dart"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Hits: ",Os," Â· Misses: ",Math.max(0,Tn-Os)," Â· Darts: ",Tn,vt>0?`/${vt}`:""]}),Ln&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:hr,children:"Reset"})]})]}),o==="Baseball"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{Bi(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:$i,children:"Reset"})})]}),o==="Golf"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{Ki(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Wi,children:"Reset"})})]}),o==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(t,s)=>s).map(t=>e.jsx("button",{className:`h-16 rounded-xl border ${Fe.board[t]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(Fe.finished||Fe.board[t])return;const s=Number(prompt("Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)")||0),a=s%3===0?"TRIPLE":s%2===0?"DOUBLE":"SINGLE",r=t,i=cl[r],u=i.type==="BULL"?null:i.num||null;Ui(r,s,a,u)},children:Fe.board[t]||""},t))}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Gi,children:"Reset"})})]}),o==="American Cricket"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{_i(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:fr,children:"Reset"})})]}),o==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:ka[Ie.targetIndex]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{const r=s==="MISS"?void 0:s;C("Scam"),wt(Ma(Ie,t,r))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:1,max:25,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(C("Scam"),wt(Or(Ie,j)),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{C("Scam"),wt(Or(Ie,j)),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{wt(Al()),T("Scam")},children:"Reset"})]}),Ie.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["ðŸŽ‰ Finished in ",Ie.darts," darts!"]})]}),o==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score: ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[ce.score,"/",ce.target]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{C("Fives"),Ct(Ta(ce,t))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:5,max:50,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(C("Fives"),Ct(Vr(ce,j)),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{C("Fives"),Ct(Vr(ce,j)),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ct(Rl(ce.target)),T("Fives")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 5, 10, 15, 20, 25, 50 Â· Darts: ",ce.darts]}),ce.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",ce.target," in ",ce.darts," darts!"]})]}),o==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score: ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[oe.score,"/",oe.target]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{C("Sevens"),Dt(Ra(oe,t))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:7,max:21,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(C("Sevens"),Dt(Br(oe,j)),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{C("Sevens"),Dt(Br(oe,j)),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Dt(Il(oe.target)),T("Sevens")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 7, 14, 21 Â· Darts: ",oe.darts]}),oe.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",oe.target," in ",oe.darts," darts!"]})]}),o==="Killer"&&e.jsx(e.Fragment,{children:On?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:L.map(t=>{const s=jt[t.id],a=Zt[t.id];return e.jsxs("div",{className:`p-2 rounded-xl border ${s?.eliminated?"opacity-50 border-red-500/40 bg-red-500/10":"border-slate-700/50 bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded ${s?.isKiller?"bg-purple-500/20 text-purple-200 border border-purple-400/30":"bg-slate-600/30 text-slate-300"}`,children:s?.isKiller?"Killer":"Not Killer"})]}),e.jsxs("div",{className:"mt-1 text-sm",children:["Number: ",e.jsx("span",{className:"font-semibold",children:a})]}),e.jsxs("div",{className:"text-sm",children:["Lives: ",e.jsx("span",{className:"font-semibold",children:s?.lives??0})]})]},t.id)})}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{if(Ge)return;const r=s==="MISS"?void 0:s,i=a?.sector??null,u=L[de];u&&(Nt(m=>{const b={};Object.keys(m).forEach(c=>b[c]={...m[c]});const d=Fr(u.id,b,r,i);if(d.becameKiller)be(`${u.name} became a Killer`);else if(d.victimId){const c=L.find(h=>h.id===d.victimId);be(`${u.name} hit ${c?.name}'s ${Zt[d.victimId]} (${d.livesRemoved} life${(d.livesRemoved||0)>1?"s":""})`)}else be("No effect");const x=Ir(b);return x&&yt(x),b}),Ue(m=>{const b=m+1;if(b>=3){let d=de;for(let x=1;x<=L.length;x++){const c=(de+x)%L.length,h=L[c].id,Y=jt[h];if(Y&&!Y.eliminated&&Y.lives>0){d=c;break}}return We(d),0}return b}))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-40",placeholder:"Manual (D16, T5)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){if(Ge)return;const a=G.trim().toUpperCase().match(/^(S|D|T)?\s*(\d{1,2})$/);if(!a){P("");return}const r=a[1]||"S",i=parseInt(a[2],10),u=r==="D"?"DOUBLE":r==="T"?"TRIPLE":"SINGLE",m=L[de];Nt(b=>{const d={};Object.keys(b).forEach(h=>d[h]={...b[h]});const x=Fr(m.id,d,u,i);if(x.becameKiller)be(`${m.name} became a Killer`);else if(x.victimId){const h=L.find(Y=>Y.id===x.victimId);be(`${m.name} hit ${h?.name}'s ${Zt[x.victimId]} (${x.livesRemoved} life${(x.livesRemoved||0)>1?"s":""})`)}else be("No effect");const c=Ir(d);return c&&yt(c),d}),P(""),Ue(b=>{const d=b+1;if(d>=3){let x=de;for(let c=1;c<=L.length;c++){const h=(de+c)%L.length,Y=L[h].id,xe=jt[Y];if(xe&&!xe.eliminated&&xe.lives>0){x=h;break}}return We(x),0}return d})}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{let t=de;for(let s=1;s<=L.length;s++){const a=(de+s)%L.length,r=L[a].id,i=jt[r];if(i&&!i.eliminated&&i.lives>0){t=a;break}}We(t),Ue(0)},children:"Next Player"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Nt({}),Us({}),Gs(!1),We(0),Ue(0),yt(null),be("")},children:"Reset"})]}),Ge&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Winner: ",L.find(t=>t.id===Ge)?.name," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Nt({}),Us({}),Gs(!1),We(0),Ue(0),yt(null),be("")},children:"Play Again"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Players"}),e.jsx("div",{className:"space-y-1",children:L.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input",value:t.name,onChange:a=>{const r=a.target.value;Ws(i=>i.map((u,m)=>m===s?{...u,name:r}:u))}}),e.jsx("button",{className:"btn px-2 py-1",onClick:()=>Ws(a=>a.filter((r,i)=>i!==s)),disabled:L.length<=2,children:"Remove"})]},t.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn px-2 py-1",onClick:()=>Ws(t=>{const s=`p${t.length+1}`;return[...t,{id:s,name:`Player ${t.length+1}`}]}),children:"Add Player"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1",onClick:()=>{if(L.length<2){alert("Need at least 2 players");return}const t=L.map(r=>r.id),s=ol(t),a={};t.forEach(r=>{a[r]=Nl(s[r])}),Us(s),Nt(a),We(0),Ue(0),yt(null),be("Assigned numbers"),Gs(!0)},children:"Assign Numbers & Start"})]})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-3 min-h-0 flex-1 text-[14px]",children:[e.jsxs("div",{className:"basis-1/2 shrink-0 min-w-0 flex flex-col gap-2 overflow-y-auto pr-2 text-sm",children:[e.jsx("div",{className:"text-sm font-semibold opacity-80",children:"Scoreboard"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(he,{gameMode:o,players:xs,matchScore:`${V}-${B}`})}),R&&e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-900/60 border border-white/10 text-slate-100 shadow-lg backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h4",{className:"text-sm font-semibold tracking-wide uppercase text-indigo-200",children:"Manual Scoring"}),e.jsx("span",{className:"text-xs text-white/60",children:"Override a visit or enter dart-by-dart scores."})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Single Dart"}),e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:60,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?ga():ps())},placeholder:"60"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:ps,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Three Dart Edit"}),e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:I<=170?170:180,value:gs,onChange:t=>nr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&js()},placeholder:"100"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:js,children:"Commit Visit"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:ga,children:"Undo Visit"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Manual"}),e.jsx("input",{className:"input w-28 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?ys():Vt())},placeholder:"T20"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Vt,children:"Apply"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:ys,disabled:E===0,children:"Replace Last"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Multi-entry (one per line)"}),e.jsx("textarea",{className:"mt-2 w-full rounded-xl bg-slate-950/70 border border-white/10 text-sm text-slate-100 placeholder-white/40 p-3 focus:outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-500/30",rows:3,value:aa,onChange:t=>Pt(t.target.value),placeholder:`T20
D16
25`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Cr,children:"Apply All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>Pt(""),children:"Clear"})]})]}),e.jsx("div",{className:"pt-2 border-t border-white/10 mt-3",children:e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:da,disabled:E===0&&me===0,children:"Clear Current Visit"})})]})]})]}),g&&e.jsx("div",{className:"basis-1/2 shrink-0 min-w-0 rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>{const a=s??"MISS",r=Number.isFinite(t)?Math.max(0,t):0,i=Date.now();if(r<=0){if(a!=="MISS"||i-(He.current||0)<1200)return;He.current=i}else He.current=0;lt(r)}})})]}),o==="X01"&&!g&&e.jsx(e.Fragment,{children:e.jsx(he,{gameMode:o,players:xs,matchScore:`${V}-${B}`})}),o==="Cricket"&&e.jsx(e.Fragment,{children:e.jsx(he,{gameMode:"Cricket",players:wi})}),o==="Cricket"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&ba(t,s==="MISS"?void 0:s,a?.sector??null)}})}),o==="Shanghai"&&e.jsx(e.Fragment,{children:e.jsx(he,{gameMode:"Shanghai",players:Si})}),o==="Shanghai"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&pa(t,s==="MISS"?void 0:s,a?.sector??null)}})}),o==="Killer"&&e.jsx(e.Fragment,{children:e.jsx(he,{gameMode:"Killer",players:Ci})}),o==="Scam"&&e.jsx(e.Fragment,{children:e.jsx(he,{gameMode:"Scam",players:ki})}),o==="Scam"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&wt(Ma(Ie,t,s))}})}),o==="Fives"&&e.jsx(e.Fragment,{children:e.jsx(he,{gameMode:"Fives",players:Di})}),o==="Fives"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&Ct(Ta(ce,t))}})}),o==="Sevens"&&e.jsx(e.Fragment,{children:e.jsx(he,{gameMode:"Sevens",players:Mi})}),o==="Sevens"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&Dt(Ra(oe,t))}})}),e.jsx("div",{className:"font-semibold",children:"Your Turn"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?ga():ps())}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:ps,title:"Add a single dart (0â€“60)",children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-28",type:"number",min:0,max:I<=170?170:180,placeholder:"Visit total (0â€“180)",value:gs,onChange:t=>nr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&js()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:js,title:"Commit a full 3-dart total like 93",children:"Commit Visit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D16, 5, 25, 50)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?ys():Vt())}}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:ys,disabled:E===0,children:"Replace Last"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Vt,children:"Add"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"input w-full h-24 resize-none",placeholder:`Type scores manually (one per line, e.g. T20
D16
5
25
50) - No camera needed!`,value:aa,onChange:t=>Pt(t.target.value)}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Cr,children:"Add All Scores"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>Pt(""),children:"Clear"})]})]})]}),e.jsx("div",{className:"text-xs text-slate-300",children:"Tip: Enter to Add Â· Shift+Enter to Replace Last"})]}),e.jsx("div",{className:"h-1"})]})]})})}),Jr&&e.jsx(Bl,{onClose:()=>Pa(!1)}),va&&e.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),e.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”’"}),e.jsx("div",{className:"font-semibold",children:"Premium mode locked"}),e.jsx("div",{className:"text-sm text-slate-200/80",children:"Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more."}),e.jsxs("button",{onClick:async()=>{try{const s=await(await fetch(`${$l}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l?.email})})).json();s.ok&&s.url?(window.location.href=s.url,s.development&&ye("Opened Stripe test checkout (development mode)",{type:"info",timeout:3e3})):s.error==="STRIPE_NOT_CONFIGURED"?ye("Premium purchases are not available in this development environment. Please visit the production site to upgrade.",{type:"error",timeout:4e3}):ye("Failed to create checkout session. Please try again.",{type:"error",timeout:4e3})}catch{ye("Error creating checkout. Please try again.",{type:"error",timeout:4e3})}},className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM Â· ",Ji(Qi(),5)]})]})]}),ji&&typeof document<"u"?kr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[200] flex items-center justify-center p-4",onClick:()=>Ze(!1),children:e.jsx(Bt,{storageKey:"ndn:modal:offline-camera-manager",className:"relative",defaultWidth:640,defaultHeight:520,minWidth:480,minHeight:420,maxWidth:1200,maxHeight:900,initialFitHeight:!0,onClose:()=>Ze(!1),children:e.jsxs("div",{className:"space-y-3",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Camera Devices"}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Manage Offline Camera Feeds"})]}),e.jsx("button",{className:"btn bg-slate-800 hover:bg-slate-700 text-white",onClick:()=>Ze(!1),children:"Close"})]}),e.jsx(Rr,{fill:!0,user:l,playerScore:I,aiScore:O,x01Score:v,inMatch:Ha,showWinPopup:Va,pendingLegWinner:_t,playerDartsThrown:ts,aiDartsThrown:as,totalPlayerDarts:Et,totalAiDarts:Ft,totalPlayerPoints:Js,totalAiPoints:Qs,player180s:Un,player140s:xi,player100s:hi,ai180s:Gn,ai140s:fi,ai100s:bi,playerHighestCheckout:pi,aiHighestCheckout:gi,onClose:()=>Ze(!1),onOpen:()=>Ze(!0),layout:f})]})})}),document.body):null,ds&&typeof document<"u"?kr.createPortal((()=>{const{target:t,value:s,stage:a}=ds,r=t==="player"?Ce:tt,i=t==="player"?V:B;return e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[240] flex items-center justify-center p-4",onClick:Ot,children:e.jsx(Bt,{storageKey:"ndn:modal:offline-leg-override",className:"relative",defaultWidth:360,defaultHeight:240,minWidth:280,minHeight:200,maxWidth:420,maxHeight:360,initialFitHeight:!0,onClose:Ot,children:e.jsxs("div",{className:"space-y-3 max-w-[18rem] mx-auto",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/50",children:["Step ",a," of 2"]}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Override legs?"})]}),e.jsx("div",{className:"text-sm text-slate-200 leading-relaxed",children:a===1?e.jsxs(e.Fragment,{children:["Set ",r,"'s legs to ",e.jsx("span",{className:"font-semibold text-white",children:s}),"? Confirm to continue."]}):e.jsxs(e.Fragment,{children:["Final confirmation: set ",r,"'s legs to ",e.jsx("span",{className:"font-semibold text-white",children:s}),". Select ",e.jsx("span",{className:"font-semibold text-emerald-200",children:"Yes"})," to apply immediately."]})}),e.jsxs("div",{className:"rounded-xl bg-black/40 border border-white/10 p-3 text-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Current legs"}),e.jsx("div",{className:"text-base font-semibold text-white",children:i})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 text-white",onClick:Ot,children:"No"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 text-white",onClick:Ii,children:"Yes"})]})]})})})})(),document.body):null,Va&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs(Bt,{storageKey:"ndn:modal:offline-win",className:"w-full relative",defaultWidth:420,defaultHeight:360,minWidth:360,minHeight:300,maxWidth:800,maxHeight:700,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Leg Won!"}),e.jsx("label",{className:"block mb-1",children:"Darts to hit double:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${Wa===t?"bg-brand-600":""}`,onClick:()=>Zr(t),children:t},t))}),e.jsx("label",{className:"block mb-1",children:"Darts for checkout:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${Ua===t?"bg-brand-600":""}`,onClick:()=>ei(t),children:t},t))}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[e.jsx("button",{className:"btn w-full",onClick:zi,children:"Submit"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 w-full",onClick:()=>{Q(!1),rt()},children:"Rematch"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 w-full",onClick:()=>{Q(!1),ut(!1),Kt(!1)},children:"Back to Menu"})]})]})}),vi&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60]",children:e.jsxs(Bt,{storageKey:"ndn:modal:offline-summary",className:"w-full relative",defaultWidth:820,defaultHeight:520,minWidth:600,minHeight:400,maxWidth:1400,maxHeight:1e3,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-xl font-extrabold mb-2",children:"Match Summary"}),e.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[o," Â· ",v," start Â· First to ",mt]}),(()=>{const t=Et>0?Js/Et*3:0,s=t*3,a=(()=>{const c=le.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return c.length?`${Math.min(...c)} darts`:"â€”"})(),r=(()=>{const c=le.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return c.length?`${Math.max(...c)} darts`:"â€”"})(),i=Tt>0?Math.round(qs/Tt*100):0,u=Ft>0?Qs/Ft*3:0,m=u*3,b=(()=>{const c=le.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return c.length?`${Math.min(...c)} darts`:"â€”"})(),d=(()=>{const c=le.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return c.length?`${Math.max(...c)} darts`:"â€”"})(),x=Rt>0?Math.round(Ys/Rt*100):0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:l?.username||"You"}),e.jsx("div",{className:"text-3xl font-extrabold",children:V}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:t.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:s.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:Tt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[i,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:a})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:Un})]})]})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-black",children:[V," â€“ ",B]})}),e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:M==="None"?"Opponent":`${M} AI`}),e.jsx("div",{className:"text-3xl font-extrabold",children:B}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:u.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:m.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:Rt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[x,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:b})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:d})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:Gn})]})]})]})]})})(),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Legs Timeline"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:le.map((t,s)=>e.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs ${t.winner==="player"?"bg-emerald-500/15 border-emerald-400/30":"bg-fuchsia-500/15 border-fuchsia-400/30"}`,children:["Leg ",s+1,": ",t.winner==="player"?"You":M==="None"?"Opp":"AI"," Â· Dbl ",t.doubleDarts," Â· CO ",t.checkoutDarts]},s))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Shot Heat Map"}),e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black p-3",children:e.jsx(Dl,{})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>sa(!1),children:"Close"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{sa(!1),rt()},children:"Rematch"})]})]})}),le.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Leg Stats"}),e.jsx("ul",{children:le.map((t,s)=>e.jsxs("li",{children:["Leg ",s+1,": Double darts: ",t.doubleDarts,", Checkout darts: ",t.checkoutDarts]},s))})]})]})]})}export{uc as default};
//# sourceMappingURL=OfflinePlay-DIJpzp_t.js.map
