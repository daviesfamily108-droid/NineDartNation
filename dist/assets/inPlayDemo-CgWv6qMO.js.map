{"version":3,"file":"inPlayDemo-CgWv6qMO.js","sources":["../../src/utils/inPlayDemo.ts"],"sourcesContent":["import { useMatch } from \"../store/match\";\r\nimport { writeMatchSnapshot } from \"./matchSync\";\r\n\r\ntype DemoVisit = {\r\n  score: number;\r\n  darts?: number;\r\n  visitTotal?: number;\r\n};\r\n\r\ntype InPlayDemoOptions = {\r\n  players: string[];\r\n  startingScore?: number;\r\n  roomId?: string;\r\n  visits?: DemoVisit[];\r\n  openWindow?: boolean;\r\n};\r\n\r\nexport function launchInPlayDemo({\r\n  players,\r\n  startingScore = 501,\r\n  roomId = \"demo-room\",\r\n  visits,\r\n  openWindow = true,\r\n}: InPlayDemoOptions) {\r\n  if (!players || players.length === 0) return;\r\n  try {\r\n    const match = useMatch.getState();\r\n    match.newMatch(players, startingScore, roomId);\r\n\r\n    const seededVisits: DemoVisit[] =\r\n      visits && visits.length > 0\r\n        ? visits\r\n        : [\r\n            { score: 60 },\r\n            { score: 85 },\r\n            { score: 100 },\r\n          ];\r\n\r\n    seededVisits.forEach((visit, index) => {\r\n      match.addVisit(visit.score, visit.darts ?? 3, {\r\n        visitTotal: visit.visitTotal ?? visit.score,\r\n      });\r\n      if (index < seededVisits.length - 1) {\r\n        match.nextPlayer();\r\n      }\r\n    });\r\n\r\n    writeMatchSnapshot();\r\n  } catch {\r\n    return;\r\n  }\r\n\r\n  if (!openWindow || typeof window === \"undefined\") return;\r\n  try {\r\n    const url = new URL(window.location.href);\r\n    url.searchParams.set(\"match\", \"1\");\r\n    window.open(url.toString(), \"_blank\", \"noopener,noreferrer\");\r\n  } catch {}\r\n}"],"names":["launchInPlayDemo","players","startingScore","roomId","visits","openWindow","match","useMatch","seededVisits","visit","index","writeMatchSnapshot","url"],"mappings":"+CAiBO,SAASA,EAAiB,CAC/B,QAAAC,EACA,cAAAC,EAAgB,IAChB,OAAAC,EAAS,YACT,OAAAC,EACA,WAAAC,EAAa,EACf,EAAsB,CACpB,GAAI,GAACJ,GAAWA,EAAQ,SAAW,GACnC,IAAI,CACF,MAAMK,EAAQC,EAAS,SAAA,EACvBD,EAAM,SAASL,EAASC,EAAeC,CAAM,EAE7C,MAAMK,EACJJ,GAAUA,EAAO,OAAS,EACtBA,EACA,CACE,CAAE,MAAO,EAAA,EACT,CAAE,MAAO,EAAA,EACT,CAAE,MAAO,GAAA,CAAI,EAGrBI,EAAa,QAAQ,CAACC,EAAOC,IAAU,CACrCJ,EAAM,SAASG,EAAM,MAAOA,EAAM,OAAS,EAAG,CAC5C,WAAYA,EAAM,YAAcA,EAAM,KAAA,CACvC,EACGC,EAAQF,EAAa,OAAS,GAChCF,EAAM,WAAA,CAEV,CAAC,EAEDK,EAAA,CACF,MAAQ,CACN,MACF,CAEA,GAAI,GAACN,GAAc,OAAO,OAAW,KACrC,GAAI,CACF,MAAMO,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACxCA,EAAI,aAAa,IAAI,QAAS,GAAG,EACjC,OAAO,KAAKA,EAAI,SAAA,EAAY,SAAU,qBAAqB,CAC7D,MAAQ,CAAC,EACX"}