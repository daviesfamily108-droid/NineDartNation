{"version":3,"file":"Home-DlaWK2dR.js","sources":["../../src/components/ProfilePanel.tsx","../../src/components/Home.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  User,\n  Trophy,\n  Target,\n  TrendingUp,\n  Camera,\n  Edit3,\n  Save,\n  Star,\n  Award,\n  Zap,\n  Crown,\n  Settings,\n  LogOut,\n  CreditCard,\n  Download,\n  Lock,\n  Unlock,\n  ChevronDown,\n  ChevronUp,\n  BarChart3,\n  Clock,\n  Percent,\n  Hash,\n} from \"lucide-react\";\nimport { useUserSettings } from \"../store/userSettings.js\";\nimport {\n  getAllTime,\n  getRollingAvg,\n  getAllTimeAvg,\n  getGameModeStats,\n} from \"../store/profileStats.js\";\nimport { formatAvg } from \"../utils/stats.js\";\nimport { apiFetch } from \"../utils/api.js\";\n\n// Section component - defined outside to avoid recreation on every render\nconst Section = ({\n  id,\n  title,\n  icon: Icon,\n  children,\n  color = \"indigo\",\n  isOpen,\n  onToggle,\n}: {\n  id: string;\n  title: string;\n  icon: any;\n  children: React.ReactNode;\n  color?: string;\n  isOpen: boolean;\n  onToggle: (id: string) => void;\n}) => {\n  const colorClasses: Record<string, string> = {\n    indigo: \"border-indigo-500/40 bg-indigo-500/10 text-indigo-100\",\n    green: \"border-green-500/40 bg-green-500/10 text-green-100\",\n    yellow: \"border-yellow-500/40 bg-yellow-500/10 text-yellow-100\",\n    blue: \"border-blue-500/40 bg-blue-500/10 text-blue-100\",\n    purple: \"border-purple-500/40 bg-purple-500/10 text-purple-100\",\n    orange: \"border-orange-500/40 bg-orange-500/10 text-orange-100\",\n    red: \"border-red-500/40 bg-red-500/10 text-red-100\",\n    cyan: \"border-cyan-500/40 bg-cyan-500/10 text-cyan-100\",\n  };\n\n  return (\n    <div className={`rounded-xl border ${colorClasses[color]} overflow-hidden`}>\n      <button\n        type=\"button\"\n        onClick={() => onToggle(id)}\n        className=\"w-full p-4 flex items-center justify-between hover:bg-white/5 active:bg-white/10 transition-colors cursor-pointer select-none text-left\"\n      >\n        <div className=\"flex items-center gap-3 font-semibold\">\n          <Icon className=\"w-5 h-5\" />\n          {title}\n        </div>\n        <div>\n          {isOpen ? (\n            <ChevronUp className=\"w-5 h-5\" />\n          ) : (\n            <ChevronDown className=\"w-5 h-5\" />\n          )}\n        </div>\n      </button>\n      {isOpen && (\n        <div className=\"p-4 pt-0 border-t border-white/10\">{children}</div>\n      )}\n    </div>\n  );\n};\n\ninterface ProfilePanelProps {\n  user?: any;\n  onClose?: () => void;\n}\n\nexport default function ProfilePanel({ user, onClose }: ProfilePanelProps) {\n  const [availableVoices, setAvailableVoices] = useState<\n    SpeechSynthesisVoice[]\n  >([]);\n  // Profile bio fields\n  const [isEditing, setIsEditing] = useState(false);\n  const [favPlayer, setFavPlayer] = useState(\"\");\n  const [favTeam, setFavTeam] = useState(\"\");\n  const [favDarts, setFavDarts] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [profilePhoto, setProfilePhoto] = useState(\"\");\n\n  // Account data\n  const [subscription, setSubscription] = useState<any>(null);\n\n  // Achievements\n  const [achievements, setAchievements] = useState([\n    {\n      key: \"first180\",\n      label: \"First 180\",\n      unlocked: false,\n      icon: \"üî•\",\n      desc: \"Score 180 in a match.\",\n    },\n    {\n      key: \"hundredGames\",\n      label: \"100 Games\",\n      unlocked: false,\n      icon: \"üèÜ\",\n      desc: \"Play 100 games.\",\n    },\n    {\n      key: \"tournamentWin\",\n      label: \"Tournament Winner\",\n      unlocked: false,\n      icon: \"ü•á\",\n      desc: \"Win a tournament.\",\n    },\n    {\n      key: \"bestLeg\",\n      label: \"Best Leg\",\n      unlocked: false,\n      icon: \"‚ö°\",\n      desc: \"Finish a leg in 12 darts or less.\",\n    },\n    {\n      key: \"comeback\",\n      label: \"Comeback\",\n      unlocked: false,\n      icon: \"üî•\",\n      desc: \"Win after trailing by 3 legs.\",\n    },\n    {\n      key: \"perfectGame\",\n      label: \"Perfect Game\",\n      unlocked: false,\n      icon: \"üíé\",\n      desc: \"Win a match without missing a double.\",\n    },\n    {\n      key: \"streakMaster\",\n      label: \"Streak Master\",\n      unlocked: false,\n      icon: \"üåü\",\n      desc: \"Win 5 matches in a row.\",\n    },\n    {\n      key: \"nightOwl\",\n      label: \"Night Owl\",\n      unlocked: false,\n      icon: \"ü¶â\",\n      desc: \"Play a match after midnight.\",\n    },\n  ]);\n\n  // Username change\n  const [newUsername, setNewUsername] = useState(\"\");\n  const [changingUsername, setChangingUsername] = useState(false);\n  const [usernameError, setUsernameError] = useState(\"\");\n\n  // Expanded sections\n  const [expandedSection, setExpandedSection] = useState<string | null>(\n    \"overview\",\n  );\n\n  // Settings from store\n  const {\n    favoriteDouble,\n    setFavoriteDouble,\n    callerEnabled,\n    setCallerEnabled,\n    callerVoice,\n    setCallerVoice,\n    callerVolume,\n    setCallerVolume,\n    avgMode,\n    setAvgMode,\n  } = useUserSettings();\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\" || !window.speechSynthesis) return;\n    const synth = window.speechSynthesis;\n    const loadVoices = () => {\n      try {\n        const voices = synth.getVoices();\n        setAvailableVoices(\n          voices.filter((v) => (v.lang || \"\").toLowerCase().startsWith(\"en\")),\n        );\n      } catch {}\n    };\n    loadVoices();\n    synth.addEventListener?.(\"voiceschanged\", loadVoices);\n    return () => synth.removeEventListener?.(\"voiceschanged\", loadVoices);\n  }, []);\n\n  const handlePhotoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Limit size to 2MB\n    if (file.size > 2 * 1024 * 1024) {\n      alert(\"Image size too large. Please choose an image under 2MB.\");\n      return;\n    }\n\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const result = reader.result as string;\n      setProfilePhoto(result);\n      // Auto-save photo immediately\n      const uname = user?.username || \"\";\n      if (uname) {\n        localStorage.setItem(`ndn:bio:profilePhoto:${uname}`, result);\n        window.dispatchEvent(\n          new CustomEvent(\"ndn:avatar-updated\", {\n            detail: { username: uname, avatar: result },\n          }),\n        );\n        // Sync avatar to server so other users can see it\n        apiFetch(\"/api/user/avatar\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ avatar: result }),\n        }).catch(() => {});\n      }\n    };\n    reader.readAsDataURL(file);\n  };\n\n  // Load bio data\n  useEffect(() => {\n    const uname = user?.username || \"\";\n    if (!uname) return;\n    try {\n      setFavPlayer(localStorage.getItem(`ndn:bio:favPlayer:${uname}`) || \"\");\n      setFavTeam(localStorage.getItem(`ndn:bio:favTeam:${uname}`) || \"\");\n      setFavDarts(localStorage.getItem(`ndn:bio:favDarts:${uname}`) || \"\");\n      setBio(localStorage.getItem(`ndn:bio:bio:${uname}`) || \"\");\n      setProfilePhoto(\n        localStorage.getItem(`ndn:bio:profilePhoto:${uname}`) || \"\",\n      );\n    } catch {}\n  }, [user?.username]);\n\n  // Load achievements\n  useEffect(() => {\n    const uname = user?.username || \"\";\n    if (!uname) return;\n    setAchievements((prev) =>\n      prev.map((a) => ({\n        ...a,\n        unlocked: !!localStorage.getItem(`ndn:achieve:${a.key}:${uname}`),\n      })),\n    );\n  }, [user?.username]);\n\n  // Load subscription\n  useEffect(() => {\n    if (!user?.email) return;\n    apiFetch(`/api/subscription?email=${encodeURIComponent(user.email)}`)\n      .then((r) => r.json())\n      .then(setSubscription)\n      .catch(() => {});\n  }, [user?.email]);\n\n  const saveBio = () => {\n    const uname = user?.username || \"\";\n    if (!uname) return;\n    try {\n      localStorage.setItem(`ndn:bio:favPlayer:${uname}`, favPlayer);\n      localStorage.setItem(`ndn:bio:favTeam:${uname}`, favTeam);\n      localStorage.setItem(`ndn:bio:favDarts:${uname}`, favDarts);\n      localStorage.setItem(`ndn:bio:bio:${uname}`, bio);\n      localStorage.setItem(`ndn:bio:profilePhoto:${uname}`, profilePhoto);\n      window.dispatchEvent(\n        new CustomEvent(\"ndn:avatar-updated\", {\n          detail: { username: uname, avatar: profilePhoto },\n        }),\n      );\n      // Sync avatar to server\n      if (profilePhoto) {\n        apiFetch(\"/api/user/avatar\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ avatar: profilePhoto }),\n        }).catch(() => {});\n      }\n      setIsEditing(false);\n    } catch {}\n  };\n\n  // Get stats\n  const username = user?.username || \"Player 1\";\n  const allTimeStats = getAllTime(username);\n  const allTimeAvg = getAllTimeAvg(username);\n  const rollingAvg = getRollingAvg(username);\n  const gameModeStats = getGameModeStats(username);\n\n  // Calculate derived stats\n  const totalGames = Object.values(gameModeStats).reduce(\n    (sum, s) => sum + (s.played || 0),\n    0,\n  );\n  const totalWins = Object.values(gameModeStats).reduce(\n    (sum, s) => sum + (s.won || 0),\n    0,\n  );\n\n  // Toggle section handler\n  const handleSectionToggle = (id: string) => {\n    setExpandedSection((prev) => (prev === id ? null : id));\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-4 p-4\">\n      {/* Header with avatar and basic info */}\n      <div className=\"relative rounded-2xl bg-gradient-to-br from-indigo-600/30 to-purple-600/30 border border-white/20 p-6 overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-purple-500/10\" />\n        <div className=\"relative flex flex-col sm:flex-row items-center gap-6\">\n          {/* Avatar */}\n          <div className=\"relative group\">\n            <div className=\"w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center overflow-hidden border-4 border-white/20 shadow-xl relative\">\n              {profilePhoto ? (\n                <img\n                  src={profilePhoto}\n                  alt=\"Avatar\"\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <User className=\"w-12 h-12 sm:w-16 sm:h-16 text-white/80\" />\n              )}\n\n              {/* Hover overlay */}\n              <div\n                className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer\"\n                onClick={() => fileInputRef.current?.click()}\n              >\n                <Camera className=\"w-8 h-8 text-white/80\" />\n              </div>\n            </div>\n\n            {/* Pencil Button */}\n            <button\n              className=\"absolute bottom-0 right-0 bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-full shadow-lg border-2 border-slate-900 z-10 transition-transform hover:scale-110\"\n              onClick={() => fileInputRef.current?.click()}\n              title=\"Change Profile Photo\"\n            >\n              <Edit3 className=\"w-4 h-4\" />\n            </button>\n\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              className=\"hidden\"\n              accept=\"image/*\"\n              onChange={handlePhotoUpload}\n            />\n\n            {subscription?.status === \"active\" && (\n              <div className=\"absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full p-1.5 shadow-lg z-20\">\n                <Crown className=\"w-4 h-4 text-white\" />\n              </div>\n            )}\n          </div>\n\n          {/* User info */}\n          <div className=\"flex-1 text-center sm:text-left\">\n            <h1 className=\"text-2xl sm:text-3xl font-bold text-white mb-1\">\n              {user?.username || \"Guest\"}\n            </h1>\n            <p className=\"text-white/60 text-sm mb-3\">{user?.email || \"\"}</p>\n\n            {/* Quick stats row */}\n            <div className=\"flex flex-wrap justify-center sm:justify-start gap-4\">\n              <div className=\"text-center\">\n                <div className=\"text-lg font-bold text-white\">\n                  {formatAvg(allTimeAvg)}\n                </div>\n                <div className=\"text-xs text-white/60\">All-Time Avg</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-lg font-bold text-white\">{totalGames}</div>\n                <div className=\"text-xs text-white/60\">Games</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-lg font-bold text-white\">\n                  {allTimeStats.num180s || 0}\n                </div>\n                <div className=\"text-xs text-white/60\">180s</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-lg font-bold text-white\">\n                  {allTimeStats.bestCheckout || 0}\n                </div>\n                <div className=\"text-xs text-white/60\">High CO</div>\n              </div>\n            </div>\n          </div>\n\n          {/* Status badges */}\n          <div className=\"flex flex-col gap-2\">\n            {subscription?.status === \"active\" ? (\n              <span className=\"px-3 py-1 rounded-full bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-sm font-semibold flex items-center gap-1\">\n                <Crown className=\"w-4 h-4\" /> Premium\n              </span>\n            ) : (\n              <button\n                onClick={() => {\n                  window.dispatchEvent(\n                    new CustomEvent(\"ndn:change-tab\", {\n                      detail: { tab: \"premium\" },\n                    }),\n                  );\n                }}\n                className=\"px-3 py-1 rounded-full bg-gradient-to-r from-gray-600 to-gray-700 text-white text-sm font-semibold hover:from-yellow-500 hover:to-orange-500 transition-all\"\n              >\n                Upgrade to Premium\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Profile Overview Section */}\n      <Section\n        id=\"overview\"\n        title=\"Profile Overview\"\n        icon={User}\n        color=\"indigo\"\n        isOpen={expandedSection === \"overview\"}\n        onToggle={handleSectionToggle}\n      >\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"font-medium\">Edit Profile</span>\n            {!isEditing ? (\n              <button\n                onClick={() => setIsEditing(true)}\n                className=\"flex items-center gap-2 px-3 py-1.5 bg-blue-500/20 hover:bg-blue-500/30 rounded-lg text-blue-400 text-sm transition-colors\"\n              >\n                <Edit3 className=\"w-4 h-4\" /> Edit\n              </button>\n            ) : (\n              <button\n                onClick={saveBio}\n                className=\"flex items-center gap-2 px-3 py-1.5 bg-green-500/20 hover:bg-green-500/30 rounded-lg text-green-400 text-sm transition-colors\"\n              >\n                <Save className=\"w-4 h-4\" /> Save\n              </button>\n            )}\n          </div>\n\n          {isEditing ? (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"text-xs text-white/60 mb-1 block\">\n                  Favourite Player\n                </label>\n                <input\n                  className=\"input w-full\"\n                  value={favPlayer}\n                  onChange={(e) => setFavPlayer(e.target.value)}\n                  placeholder=\"e.g., Michael van Gerwen\"\n                />\n              </div>\n              <div>\n                <label className=\"text-xs text-white/60 mb-1 block\">\n                  Favourite Team\n                </label>\n                <input\n                  className=\"input w-full\"\n                  value={favTeam}\n                  onChange={(e) => setFavTeam(e.target.value)}\n                  placeholder=\"e.g., Netherlands\"\n                />\n              </div>\n              <div>\n                <label className=\"text-xs text-white/60 mb-1 block\">\n                  Favourite Darts\n                </label>\n                <input\n                  className=\"input w-full\"\n                  value={favDarts}\n                  onChange={(e) => setFavDarts(e.target.value)}\n                  placeholder=\"e.g., Target Bolide 22g\"\n                />\n              </div>\n              <div>\n                <label className=\"text-xs text-white/60 mb-1 block\">\n                  Profile Photo\n                </label>\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={(e) => {\n                    const file = e.target.files?.[0];\n                    if (file) {\n                      const reader = new FileReader();\n                      reader.onload = () =>\n                        setProfilePhoto(reader.result as string);\n                      reader.readAsDataURL(file);\n                    }\n                  }}\n                  className=\"text-xs text-slate-100\"\n                />\n              </div>\n              <div className=\"sm:col-span-2\">\n                <label className=\"text-xs text-white/60 mb-1 block\">Bio</label>\n                <textarea\n                  className=\"input w-full h-20 resize-none\"\n                  value={bio}\n                  onChange={(e) => setBio(e.target.value)}\n                  placeholder=\"Tell us about yourself...\"\n                />\n              </div>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm\">\n              {favPlayer && (\n                <div>\n                  <div className=\"text-white/60 text-xs\">Favourite Player</div>\n                  <div className=\"font-medium\">{favPlayer}</div>\n                </div>\n              )}\n              {favTeam && (\n                <div>\n                  <div className=\"text-white/60 text-xs\">Favourite Team</div>\n                  <div className=\"font-medium\">{favTeam}</div>\n                </div>\n              )}\n              {favDarts && (\n                <div>\n                  <div className=\"text-white/60 text-xs\">Favourite Darts</div>\n                  <div className=\"font-medium\">{favDarts}</div>\n                </div>\n              )}\n              {bio && (\n                <div className=\"col-span-2 sm:col-span-4\">\n                  <div className=\"text-white/60 text-xs\">Bio</div>\n                  <div className=\"font-medium\">{bio}</div>\n                </div>\n              )}\n              {!favPlayer && !favTeam && !favDarts && !bio && (\n                <div className=\"col-span-4 text-white/40 text-center py-4\">\n                  Click Edit to add your profile info\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </Section>\n\n      {/* Statistics Section */}\n      <Section\n        id=\"stats\"\n        title=\"My Statistics\"\n        icon={BarChart3}\n        color=\"blue\"\n        isOpen={expandedSection === \"stats\"}\n        onToggle={handleSectionToggle}\n      >\n        <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4\">\n          <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n            <Target className=\"w-6 h-6 mx-auto mb-1 text-blue-400\" />\n            <div className=\"text-lg font-bold\">{formatAvg(allTimeAvg)}</div>\n            <div className=\"text-xs text-white/60\">All-Time Average</div>\n          </div>\n          <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n            <TrendingUp className=\"w-6 h-6 mx-auto mb-1 text-green-400\" />\n            <div className=\"text-lg font-bold\">{formatAvg(rollingAvg)}</div>\n            <div className=\"text-xs text-white/60\">Rolling Average</div>\n          </div>\n          <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n            <Hash className=\"w-6 h-6 mx-auto mb-1 text-purple-400\" />\n            <div className=\"text-lg font-bold\">{totalGames}</div>\n            <div className=\"text-xs text-white/60\">Games Played</div>\n          </div>\n          <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n            <Zap className=\"w-6 h-6 mx-auto mb-1 text-yellow-400\" />\n            <div className=\"text-lg font-bold\">{allTimeStats.num180s || 0}</div>\n            <div className=\"text-xs text-white/60\">180s Hit</div>\n          </div>\n          <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n            <Star className=\"w-6 h-6 mx-auto mb-1 text-orange-400\" />\n            <div className=\"text-lg font-bold\">\n              {allTimeStats.bestCheckout || 0}\n            </div>\n            <div className=\"text-xs text-white/60\">Highest Checkout</div>\n          </div>\n          <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n            <Percent className=\"w-6 h-6 mx-auto mb-1 text-cyan-400\" />\n            <div className=\"text-lg font-bold\">\n              {allTimeStats.best3?.toFixed(1) || 0}\n            </div>\n            <div className=\"text-xs text-white/60\">Best 3-Dart Avg</div>\n          </div>\n          <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n            <Trophy className=\"w-6 h-6 mx-auto mb-1 text-amber-400\" />\n            <div className=\"text-lg font-bold\">{totalWins}</div>\n            <div className=\"text-xs text-white/60\">Wins</div>\n          </div>\n          <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n            <Clock className=\"w-6 h-6 mx-auto mb-1 text-rose-400\" />\n            <div className=\"text-lg font-bold\">\n              {allTimeStats.bestLegDarts || \"-\"}\n            </div>\n            <div className=\"text-xs text-white/60\">Best Leg (darts)</div>\n          </div>\n        </div>\n        <button\n          onClick={() =>\n            window.dispatchEvent(\n              new CustomEvent(\"ndn:change-tab\", { detail: { tab: \"stats\" } }),\n            )\n          }\n          className=\"mt-4 w-full py-2 bg-blue-500/20 hover:bg-blue-500/30 rounded-lg text-blue-400 text-sm transition-colors\"\n        >\n          View Detailed Statistics ‚Üí\n        </button>\n      </Section>\n\n      {/* Achievements Section */}\n      <Section\n        id=\"achievements\"\n        title=\"Achievements & Badges\"\n        icon={Award}\n        color=\"yellow\"\n        isOpen={expandedSection === \"achievements\"}\n        onToggle={handleSectionToggle}\n      >\n        <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n          {achievements.map((a) => (\n            <div\n              key={a.key}\n              className={`relative rounded-lg p-3 text-center transition-all ${\n                a.unlocked\n                  ? \"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border border-yellow-500/40\"\n                  : \"bg-white/5 border border-white/10 opacity-50\"\n              }`}\n            >\n              <div className=\"text-2xl mb-1\">{a.icon}</div>\n              <div className=\"text-xs font-semibold\">{a.label}</div>\n              <div className=\"text-[10px] text-white/60 mt-1\">{a.desc}</div>\n              {a.unlocked && (\n                <div className=\"absolute top-1 right-1 text-green-400\">\n                  <Unlock className=\"w-3 h-3\" />\n                </div>\n              )}\n              {!a.unlocked && (\n                <div className=\"absolute top-1 right-1 text-white/30\">\n                  <Lock className=\"w-3 h-3\" />\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </Section>\n\n      {/* Preferences Section */}\n      <Section\n        id=\"preferences\"\n        title=\"Game Preferences\"\n        icon={Settings}\n        color=\"purple\"\n        isOpen={expandedSection === \"preferences\"}\n        onToggle={handleSectionToggle}\n      >\n        <div className=\"space-y-4\">\n          {/* Favourite Double */}\n          <div className=\"flex items-center justify-between\">\n            <label className=\"text-sm\">Favourite Double</label>\n            <select\n              className=\"input w-32\"\n              value={favoriteDouble ?? \"\"}\n              onChange={(e) => setFavoriteDouble(e.target.value)}\n            >\n              <option value=\"\">None</option>\n              {[\n                1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,\n                19, 20,\n              ].map((n) => (\n                <option key={n} value={String(n)}>\n                  D{n}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Average Mode */}\n          <div className=\"flex items-center justify-between\">\n            <label className=\"text-sm\">Average Display</label>\n            <select\n              className=\"input w-40\"\n              value={avgMode}\n              onChange={(e) => setAvgMode(e.target.value as any)}\n            >\n              <option value=\"3-dart\">3-Dart Average</option>\n              <option value=\"per-dart\">Per-Dart Average</option>\n            </select>\n          </div>\n\n          {/* Voice Caller */}\n          <div className=\"flex items-center justify-between\">\n            <label className=\"text-sm\">Voice Caller</label>\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                checked={callerEnabled}\n                onChange={(e) => setCallerEnabled(e.target.checked)}\n                className=\"w-4 h-4\"\n              />\n              <span className=\"text-xs text-white/60\">\n                {callerEnabled ? \"On\" : \"Off\"}\n              </span>\n            </div>\n          </div>\n\n          {callerEnabled && (\n            <div className=\"flex items-center justify-between pl-4\">\n              <label className=\"text-sm text-white/60\">Volume</label>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"1\"\n                step=\"0.1\"\n                value={callerVolume}\n                onChange={(e) => setCallerVolume(Number(e.target.value))}\n                className=\"w-32\"\n              />\n            </div>\n          )}\n\n          {callerEnabled && (\n            <div className=\"flex items-center justify-between pl-4 gap-3\">\n              <label className=\"text-sm text-white/60\">Voice</label>\n              <select\n                className=\"input flex-1 text-sm\"\n                value={callerVoice || \"\"}\n                onChange={(e) => setCallerVoice(e.target.value)}\n              >\n                <option value=\"\">Default</option>\n                {availableVoices.map((voice) => (\n                  <option key={voice.voiceURI} value={voice.voiceURI}>\n                    {voice.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n\n          {/* Theme is available in Settings (keeps Profile panel focused) */}\n        </div>\n      </Section>\n\n      {/* Account & Subscription Section */}\n      <Section\n        id=\"account\"\n        title=\"Account & Subscription\"\n        icon={CreditCard}\n        color=\"green\"\n        isOpen={expandedSection === \"account\"}\n        onToggle={handleSectionToggle}\n      >\n        <div className=\"space-y-4\">\n          {/* Subscription Status */}\n          <div className=\"flex items-center justify-between p-3 bg-white/5 rounded-lg\">\n            <div>\n              <div className=\"font-medium\">Subscription Status</div>\n              <div\n                className={`text-sm ${subscription?.status === \"active\" ? \"text-green-400\" : \"text-white/60\"}`}\n              >\n                {subscription?.status === \"active\"\n                  ? \"Premium Active\"\n                  : \"Free Plan\"}\n              </div>\n            </div>\n            {subscription?.status !== \"active\" && (\n              <button\n                onClick={() =>\n                  window.dispatchEvent(\n                    new CustomEvent(\"ndn:change-tab\", {\n                      detail: { tab: \"premium\" },\n                    }),\n                  )\n                }\n                className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg text-sm font-semibold hover:opacity-90 transition-opacity\"\n              >\n                Upgrade\n              </button>\n            )}\n          </div>\n\n          {/* Username Change */}\n          <div className=\"p-3 bg-white/5 rounded-lg\">\n            <div className=\"font-medium mb-2\">\n              Change Username\n              <span className=\"text-xs text-white/60 ml-2\">\n                ({user?.usernameChangeCount || 0}/2 free changes used)\n              </span>\n            </div>\n            <div className=\"flex gap-2\">\n              <input\n                className=\"input flex-1\"\n                placeholder=\"New username\"\n                value={newUsername}\n                onChange={(e) => setNewUsername(e.target.value)}\n                disabled={changingUsername}\n              />\n              <button\n                onClick={async () => {\n                  if (!newUsername.trim()) return;\n                  setChangingUsername(true);\n                  setUsernameError(\"\");\n                  try {\n                    const token = localStorage.getItem(\"authToken\");\n                    const res = await apiFetch(\"/api/user/change-username\", {\n                      method: \"POST\",\n                      headers: {\n                        \"Content-Type\": \"application/json\",\n                        ...(token ? { Authorization: `Bearer ${token}` } : {}),\n                      },\n                      body: JSON.stringify({\n                        email: user?.email,\n                        newUsername: newUsername.trim(),\n                      }),\n                    });\n                    if (!res.ok) {\n                      const data = await res.json();\n                      throw new Error(\n                        data.error || \"Failed to change username\",\n                      );\n                    }\n                    setNewUsername(\"\");\n                    window.location.reload();\n                  } catch (err: any) {\n                    setUsernameError(err.message);\n                  } finally {\n                    setChangingUsername(false);\n                  }\n                }}\n                disabled={changingUsername || !newUsername.trim()}\n                className=\"btn bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\n              >\n                {changingUsername ? \"...\" : \"Change\"}\n              </button>\n            </div>\n            {usernameError && (\n              <div className=\"text-red-400 text-xs mt-1\">{usernameError}</div>\n            )}\n          </div>\n\n          {/* Logout & Data Export */}\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() =>\n                window.dispatchEvent(new CustomEvent(\"ndn:logout\"))\n              }\n              className=\"flex-1 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2\"\n            >\n              <LogOut className=\"w-4 h-4\" /> Logout\n            </button>\n            <button\n              onClick={() => {\n                const data = {\n                  username: user?.username,\n                  stats: allTimeStats,\n                  achievements: achievements.filter((a) => a.unlocked),\n                  bio: { favPlayer, favTeam, favDarts, bio },\n                  exportedAt: new Date().toISOString(),\n                };\n                const blob = new Blob([JSON.stringify(data, null, 2)], {\n                  type: \"application/json\",\n                });\n                const url = URL.createObjectURL(blob);\n                const a = document.createElement(\"a\");\n                a.href = url;\n                a.download = `ndn-profile-${user?.username || \"guest\"}.json`;\n                a.click();\n                URL.revokeObjectURL(url);\n              }}\n              className=\"flex-1 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2\"\n            >\n              <Download className=\"w-4 h-4\" /> Export Data\n            </button>\n          </div>\n        </div>\n      </Section>\n\n      {/* Close button if in modal */}\n      {onClose && (\n        <button\n          onClick={onClose}\n          className=\"w-full py-3 bg-white/10 hover:bg-white/20 rounded-xl text-white font-medium transition-colors\"\n        >\n          Close\n        </button>\n      )}\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useToast } from \"../store/toast.js\";\nimport { formatAvg } from \"../utils/stats.js\";\nimport { getAllTime } from \"../store/profileStats.js\";\nimport { useUserSettings } from \"../store/userSettings.js\";\nimport ProfilePanel from \"./ProfilePanel.js\";\nimport { sym } from \"../ui/icons.js\";\nimport { getApiBaseUrl } from \"../utils/api.js\";\nimport { dispatchOpenNotifications } from \"../utils/events.js\";\n\nfunction goTab(tab: string) {\n  try {\n    window.dispatchEvent(\n      new CustomEvent(\"ndn:change-tab\", { detail: { tab } }),\n    );\n  } catch {}\n}\n\nconst API_URL = getApiBaseUrl();\n\nexport default function Home({ user }: { user?: any }) {\n  const [showLegal, setShowLegal] = useState(false);\n  const [showHowTo, setShowHowTo] = useState(false);\n  const [showProfile, setShowProfile] = useState(false);\n  const [fact, setFact] = useState<string>(\"\");\n  const { lastOffline } = useUserSettings();\n  const toast = useToast();\n\n  // Force re-render when stats are synced from the server so the BEST/WORST\n  // table updates without a full page reload.\n  const [, setStatsRev] = useState(0);\n  useEffect(() => {\n    const onStatsUpdated = () => setStatsRev((r) => r + 1);\n    window.addEventListener(\"ndn:stats-updated\", onStatsUpdated as any);\n    return () =>\n      window.removeEventListener(\"ndn:stats-updated\", onStatsUpdated as any);\n  }, []);\n\n  const openNotifications = () => {\n    dispatchOpenNotifications();\n  };\n\n  // Listen for profile open events\n  useEffect(() => {\n    const onOpenProfile = () => setShowProfile(true);\n    window.addEventListener(\"ndn:open-profile\", onOpenProfile as any);\n    return () =>\n      window.removeEventListener(\"ndn:open-profile\", onOpenProfile as any);\n  }, []);\n\n  // Rotate a random \"Did you know?\" each time Home mounts\n  useEffect(() => {\n    const facts: string[] = [\n      \"The fastest televised 9-darter took roughly 25 seconds!\",\n      \"A perfect leg (501) can be finished in nine darts.\",\n      \"Standard dartboards are made from compressed sisal fibers.\",\n      \"Doubles and trebles are the thin outer and middle rings.\",\n      \"Professional oche (throw line) distance is 7 ft 9¬º in (2.37 m).\",\n      \"‚ÄúDartitis‚Äù is a real condition affecting a player‚Äôs throwing motion.\",\n      \"Phil Taylor holds a record number of World Championship titles.\",\n      \"Checkout routes often end on a double‚Äîclassic ‚Äúdouble-out‚Äù.\",\n      \"The highest 3-dart score is 180 (triple 20, triple 20, triple 20).\",\n    ];\n    const idx = Math.floor(Math.random() * facts.length);\n    setFact(facts[idx]);\n  }, []);\n  return (\n    <div\n      className={`${user?.fullAccess ? \"premium-main\" : \"\"} home-shell relative min-h-screen flex flex-col items-center justify-start overflow-hidden px-4 pb-20`}\n    >\n      <div className=\"home-background\" aria-hidden>\n        <div className=\"home-background__gradient\"></div>\n        <div className=\"home-background__pulse home-background__pulse--one\"></div>\n        <div className=\"home-background__pulse home-background__pulse--two\"></div>\n      </div>\n\n      <div className=\"home-content relative z-10 w-full max-w-6xl mx-auto bg-white/10 backdrop-blur-lg rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-6 md:p-8 lg:p-10 flex flex-col\">\n        <div className=\"home-intro space-y-3 text-center flex flex-col items-center\">\n          <div className=\"home-brand-row flex w-full items-center justify-center gap-3 text-xs sm:text-sm uppercase tracking-[0.25em] text-white/80 font-semibold flex-wrap\">\n            <span className=\"home-brand-tag\">Nine Dart Nation üéØ</span>\n            <button\n              onClick={openNotifications}\n              className=\"home-menu-button btn px-4 py-2 text-sm rounded-full bg-amber-400 text-slate-900 font-bold transition hover:scale-105 active:scale-95\"\n            >\n              Notifications üîî\n            </button>\n          </div>\n          <h2 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 via-purple-400 to-blue-400 drop-shadow-xl leading-tight px-2\">\n            Welcome to Nine Dart Nation üéØ\n          </h2>\n          <p className=\"text-base sm:text-lg md:text-xl lg:text-2xl text-white/80 font-semibold px-2\">\n            Your home for competitive darts, stats, and online play.\n          </p>\n          <p className=\"text-sm sm:text-base md:text-lg text-white/60 italic px-2\">\n            \"Where every dart counts and every player matters.\"\n          </p>\n        </div>\n\n        {/* Did You Know */}\n        {fact && (\n          <div className=\"w-full my-4 sm:my-6 px-2 sm:px-0\">\n            <div className=\"mx-auto max-w-full sm:max-w-xl rounded-full px-4 sm:px-5 py-3 text-center text-indigo-100 bg-gradient-to-r from-indigo-600/80 to-fuchsia-600/80 shadow-md\">\n              <span className=\"font-semibold text-sm sm:text-base block sm:inline\">\n                Did you know? üí°\n              </span>{\" \"}\n              <span className=\"opacity-90 text-sm sm:text-base block sm:inline mt-1 sm:mt-0\">\n                {fact}\n              </span>\n            </div>\n          </div>\n        )}\n\n        <div className=\"w-full max-w-4xl mx-auto mb-6 sm:mb-8\">\n          <div className=\"home-actions-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4\">\n            <button\n              onClick={() => {\n                goTab(\"offline\");\n                try {\n                  window.dispatchEvent(\n                    new CustomEvent(\"ndn:offline-format\", {\n                      detail: {\n                        formatType: \"first\",\n                        formatCount: Number(lastOffline?.firstTo) || 1,\n                        startScore: Number(lastOffline?.x01Start) || 501,\n                      },\n                    }),\n                  );\n                } catch {}\n                try {\n                  setTimeout(() => {\n                    window.dispatchEvent(\n                      new CustomEvent(\"ndn:auto-start\", {\n                        detail: { mode: lastOffline?.mode || \"X01\" },\n                      }),\n                    );\n                  }, 50);\n                } catch {}\n              }}\n              className=\"w-full px-5 py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold shadow-xl hover:scale-105 active:scale-95 transition-transform duration-150 flex items-center justify-center gap-2 text-base sm:text-lg touch-manipulation\"\n            >\n              <span aria-hidden>{sym(\"target\")}</span>\n              <span>Start New Match ‚öîÔ∏è</span>\n            </button>\n            <button\n              onClick={() => goTab(\"stats\")}\n              className=\"w-full px-5 py-4 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold shadow-xl hover:scale-105 active:scale-95 transition-transform duration-150 flex items-center justify-center gap-2 text-base sm:text-lg touch-manipulation\"\n            >\n              <span aria-hidden>{sym(\"info\")}</span>\n              <span>View Stats üìä</span>\n            </button>\n            <button\n              onClick={() => goTab(\"online\")}\n              className=\"w-full px-5 py-4 rounded-2xl bg-gradient-to-r from-green-500 to-blue-400 text-white font-bold shadow-xl hover:scale-105 active:scale-95 transition-transform duration-150 flex items-center justify-center gap-2 text-base sm:text-lg touch-manipulation\"\n            >\n              <span aria-hidden>{sym(\"ok\")}</span>\n              <span>Join Online Match üéØ</span>\n            </button>\n            <button\n              onClick={() => setShowProfile(true)}\n              className=\"w-full px-5 py-4 rounded-2xl bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-bold shadow-xl hover:scale-105 active:scale-95 transition-transform duration-150 flex items-center justify-center gap-2 text-base sm:text-lg touch-manipulation\"\n            >\n              <span aria-hidden>{sym(\"bullet\")}</span>\n              <span>Profile üë§</span>\n            </button>\n            <button\n              onClick={() => {\n                goTab(\"offline\");\n                try {\n                  window.dispatchEvent(\n                    new CustomEvent(\"ndn:auto-start\", {\n                      detail: { mode: \"Double Practice\" },\n                    }),\n                  );\n                } catch {}\n              }}\n              className=\"w-full px-5 py-4 rounded-2xl bg-gradient-to-r from-pink-500 to-indigo-500 text-white font-bold shadow-xl hover:scale-105 active:scale-95 transition-transform duration-150 flex items-center justify-center gap-2 text-base sm:text-lg touch-manipulation\"\n            >\n              <span aria-hidden>{sym(\"dash\")}</span>\n              <span>Practice Doubles üéØ</span>\n            </button>\n          </div>\n          <p className=\"mt-3 text-center text-xs sm:text-sm text-white/60\">\n            Tip: rotate your phone for more room ‚Äî the buttons auto-reflow.\n          </p>\n        </div>\n\n        {/* Removed older stat pill grid; now using BEST/WORST grid below */}\n\n        {/* Replaced Free/Premium cards with BEST/WORST vertical grid */}\n        {(() => {\n          const name = user?.username || \"Player 1\";\n          const all = getAllTime(name);\n          const isPremium = !!user?.fullAccess;\n          const GRID =\n            \"grid grid-cols-[120px,1fr,1fr] sm:grid-cols-[160px,1fr,1fr]\";\n          const Row = ({\n            label,\n            left,\n            right,\n            lock,\n          }: {\n            label: string;\n            left: string;\n            right: string;\n            lock?: boolean;\n          }) => (\n            <div\n              className={`relative ${GRID} gap-2 items-center p-2 rounded-lg ${lock ? \"bg-white/5 border border-white/10 overflow-hidden\" : \"bg-indigo-500/10 border border-indigo-500/40\"} mb-2`}\n            >\n              <div className=\"text-[12px] opacity-80 pl-2 text-left\">\n                {label}\n              </div>\n              <div\n                className={`text-sm font-semibold text-center ${lock ? \"opacity-50 blur-[0.5px]\" : \"\"}`}\n              >\n                {left}\n              </div>\n              <div\n                className={`text-sm font-semibold text-center ${lock ? \"opacity-50 blur-[0.5px]\" : \"\"}`}\n              >\n                {right}\n              </div>\n              {lock && (\n                <button\n                  className=\"absolute inset-0 flex items-center justify-center rounded-lg bg-slate-900/35 hover:bg-slate-900/45 transition\"\n                  onClick={async () => {\n                    try {\n                      const res = await fetch(\n                        `${API_URL}/api/stripe/create-checkout-session`,\n                        {\n                          method: \"POST\",\n                          headers: { \"Content-Type\": \"application/json\" },\n                          body: JSON.stringify({ email: user.email }),\n                        },\n                      );\n                      const data = await res.json();\n                      if (data.ok && data.url) {\n                        window.location.href = data.url;\n                      } else if (data.error === \"STRIPE_NOT_CONFIGURED\") {\n                        toast(\n                          \"Premium purchases are not available in this development environment. Please visit the production site to upgrade.\",\n                          { type: \"error\", timeout: 4000 },\n                        );\n                      } else {\n                        toast(\n                          \"Failed to create checkout session. Please try again.\",\n                          { type: \"error\", timeout: 4000 },\n                        );\n                      }\n                    } catch (err) {\n                      toast(\"Error creating checkout. Please try again.\", {\n                        type: \"error\",\n                        timeout: 4000,\n                      });\n                    }\n                  }}\n                  title=\"Unlock with PREMIUM\"\n                >\n                  <span className=\"text-[12px] font-semibold\">\n                    Unlock PREMIUM ‚ú®\n                  </span>\n                </button>\n              )}\n            </div>\n          );\n          return (\n            <div className=\"w-full mt-2 rounded-2xl p-2 sm:p-3 bg-white/5 border border-white/10 overflow-x-auto\">\n              <div\n                className={`${GRID} gap-2 mb-2 px-1 items-center min-w-[280px] sm:min-w-0`}\n              >\n                <div className=\"text-[12px] opacity-0 select-none\">label</div>\n                <div className=\"text-[12px] font-semibold text-center\">\n                  BEST\n                </div>\n                <div className=\"text-[12px] font-semibold text-center\">\n                  WORST\n                </div>\n              </div>\n              <Row\n                label=\"3-dart avg\"\n                left={formatAvg(all.best3 || 0)}\n                right={formatAvg(all.worst3 || 0)}\n              />\n              <Row\n                label=\"9-dart avg\"\n                left={formatAvg(all.bestFNAvg || 0)}\n                right={formatAvg(all.worstFNAvg || 0)}\n                lock={!isPremium}\n              />\n              <Row\n                label=\"Leg (darts)\"\n                left={String(all.bestLegDarts || 0)}\n                right={String(all.worstLegDarts || 0)}\n                lock={!isPremium}\n              />\n              <Row\n                label=\"Checkout\"\n                left={String(all.bestCheckout || 0)}\n                right={\"‚Äî\"}\n                lock={!isPremium}\n              />\n            </div>\n          );\n        })()}\n\n        <button\n          className=\"mt-5 sm:mt-8 md:mt-10 px-6 sm:px-8 md:px-10 py-3 md:py-4 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-transform duration-150 text-base sm:text-lg md:text-xl touch-manipulation\"\n          onClick={() => setShowHowTo(true)}\n        >\n          How to Play / Getting Started üìñ\n        </button>\n      </div>\n\n      {/* Footer */}\n      <footer\n        className=\"w-full py-2 md:py-2 text-center text-white/80 text-xs md:text-sm font-medium absolute left-0 z-20 flex items-center justify-center gap-1 md:gap-2\"\n        style={{\n          bottom:\n            \"calc(var(--ndn-bottomnav-h, 0px) + env(safe-area-inset-bottom, 0px))\",\n        }}\n      >\n        <button\n          className=\"flex items-center gap-1 md:gap-2 hover:text-white transition\"\n          onClick={() => setShowLegal(true)}\n        >\n          <span>¬©</span>\n          <span style={{ letterSpacing: \"0.05em\" }}>NINEDARTNATION üéØ</span>\n        </button>\n      </footer>\n\n      {/* Legal Dialog */}\n      {showLegal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\n          <div className=\"card max-w-lg w-full relative text-left bg-[#2d2250] text-white p-6 rounded-xl shadow-xl\">\n            <button\n              className=\"absolute top-2 right-2 btn px-2 py-1 bg-purple-500 text-white font-bold\"\n              onClick={() => setShowLegal(false)}\n            >\n              Close ‚úï\n            </button>\n            <h3 className=\"text-xl font-bold mb-2\">Legal Information ‚öñÔ∏è</h3>\n            <ul className=\"list-disc pl-5 mb-2\">\n              <li>\n                Terms & Conditions: All users must follow fair play and site\n                rules.\n              </li>\n              <li>\n                Privacy Policy: Your data is protected and never shared without\n                consent.\n              </li>\n              <li>\n                Copyright ¬© {new Date().getFullYear()} NINEDARTNATION üéØ. All\n                rights reserved.\n              </li>\n              <li>Contact: support@ninedartnation.com</li>\n            </ul>\n            <p className=\"text-sm text-purple-200\">\n              For full legal details, please contact us or visit our legal page.\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* How to Play Dialog */}\n      {showHowTo && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\n          <div className=\"card max-w-lg w-full relative text-left bg-[#2d2250] text-white p-6 rounded-xl shadow-xl\">\n            <button\n              className=\"absolute top-2 right-2 btn px-2 py-1 bg-purple-500 text-white font-bold\"\n              onClick={() => setShowHowTo(false)}\n            >\n              Close ‚úï\n            </button>\n            <h3 className=\"text-xl font-bold mb-2\">Getting Started üìñ</h3>\n            <ul className=\"list-disc pl-5 mb-2\">\n              <li>Choose a game mode and invite friends or play solo.</li>\n              <li>Track your stats and progress in the Stats tab.</li>\n              <li>Join the Bullseye Darts League for online competition.</li>\n              <li>Upgrade to PREMIUM for advanced features and modes.</li>\n              <li>Need help? Visit the Settings tab for support and tips.</li>\n            </ul>\n            <p className=\"text-sm text-purple-200\">\n              Ready to play? Hit \"Start New Match\" and let the darts fly! üöÄ\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Profile Modal */}\n      {showProfile && (\n        <div className=\"fixed inset-0 z-[9999]\">\n          <button\n            className=\"absolute inset-0 bg-black/80 backdrop-blur-sm\"\n            aria-label=\"Close profile\"\n            onClick={() => setShowProfile(false)}\n          />\n          <div className=\"absolute inset-0 flex items-center justify-center p-0 sm:p-4\">\n            <div className=\"relative w-full h-full sm:h-auto sm:max-w-4xl bg-gradient-to-br from-slate-900 to-slate-800 sm:rounded-2xl shadow-2xl border-0 sm:border border-white/10 sm:max-h-[90vh] overflow-y-auto\">\n              <button\n                className=\"sticky top-3 float-right mr-3 z-10 w-10 h-10 flex items-center justify-center rounded-full bg-rose-600 hover:bg-rose-700 text-white transition-colors\"\n                aria-label=\"Close\"\n                onClick={() => setShowProfile(false)}\n              >\n                ‚úï\n              </button>\n              <ProfilePanel user={user} onClose={() => setShowProfile(false)} />\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["Section","id","title","Icon","children","color","isOpen","onToggle","colorClasses","jsxs","jsx","ChevronUp","ChevronDown","ProfilePanel","user","onClose","availableVoices","setAvailableVoices","useState","isEditing","setIsEditing","favPlayer","setFavPlayer","favTeam","setFavTeam","favDarts","setFavDarts","bio","setBio","profilePhoto","setProfilePhoto","subscription","setSubscription","achievements","setAchievements","newUsername","setNewUsername","changingUsername","setChangingUsername","usernameError","setUsernameError","expandedSection","setExpandedSection","favoriteDouble","setFavoriteDouble","callerEnabled","setCallerEnabled","callerVoice","setCallerVoice","callerVolume","setCallerVolume","avgMode","setAvgMode","useUserSettings","fileInputRef","useRef","useEffect","synth","loadVoices","voices","v","handlePhotoUpload","e","file","reader","result","uname","apiFetch","prev","a","r","saveBio","username","allTimeStats","getAllTime","allTimeAvg","getAllTimeAvg","rollingAvg","getRollingAvg","gameModeStats","getGameModeStats","totalGames","sum","s","totalWins","handleSectionToggle","User","Camera","Edit3","Crown","formatAvg","Save","BarChart3","Target","TrendingUp","Hash","Zap","Star","Percent","Trophy","Clock","Award","Unlock","Lock","Settings","n","voice","CreditCard","token","res","data","err","LogOut","blob","url","Download","goTab","tab","API_URL","getApiBaseUrl","Home","showLegal","setShowLegal","showHowTo","setShowHowTo","showProfile","setShowProfile","fact","setFact","lastOffline","toast","useToast","setStatsRev","onStatsUpdated","openNotifications","dispatchOpenNotifications","onOpenProfile","facts","idx","sym","name","all","isPremium","GRID","Row","label","left","right","lock"],"mappings":"mZAqCA,MAAMA,EAAU,CAAC,CACf,GAAAC,EACA,MAAAC,EACA,KAAMC,EACN,SAAAC,EACA,MAAAC,EAAQ,SACR,OAAAC,EACA,SAAAC,CACF,IAQM,CACJ,MAAMC,EAAuC,CAC3C,OAAQ,wDACR,MAAO,qDACP,OAAQ,wDACR,KAAM,kDACN,OAAQ,wDACR,OAAQ,wDACR,IAAK,+CACL,KAAM,iDAAA,EAGR,cACG,MAAA,CAAI,UAAW,qBAAqBA,EAAaH,CAAK,CAAC,mBACtD,SAAA,CAAAI,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMF,EAASN,CAAE,EAC1B,UAAU,0IAEV,SAAA,CAAAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACP,EAAA,CAAK,UAAU,SAAA,CAAU,EACzBD,CAAA,EACH,EACAQ,EAAAA,IAAC,MAAA,CACE,SAAAJ,EACCI,EAAAA,IAACC,GAAA,CAAU,UAAU,SAAA,CAAU,EAE/BD,EAAAA,IAACE,GAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAErC,CAAA,CAAA,CAAA,EAEDN,GACCI,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAqC,SAAAN,CAAA,CAAS,CAAA,EAEjE,CAEJ,EAOA,SAAwBS,GAAa,CAAE,KAAAC,EAAM,QAAAC,GAA8B,CACzE,KAAM,CAACC,EAAiBC,CAAkB,EAAIC,EAAAA,SAE5C,CAAA,CAAE,EAEE,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAS,EAAK,EAC1C,CAACG,EAAWC,CAAY,EAAIJ,EAAAA,SAAS,EAAE,EACvC,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAS,EAAE,EACnC,CAACO,EAAUC,CAAW,EAAIR,EAAAA,SAAS,EAAE,EACrC,CAACS,EAAKC,CAAM,EAAIV,EAAAA,SAAS,EAAE,EAC3B,CAACW,EAAcC,CAAe,EAAIZ,EAAAA,SAAS,EAAE,EAG7C,CAACa,EAAcC,CAAe,EAAId,EAAAA,SAAc,IAAI,EAGpD,CAACe,EAAcC,CAAe,EAAIhB,WAAS,CAC/C,CACE,IAAK,WACL,MAAO,YACP,SAAU,GACV,KAAM,KACN,KAAM,uBAAA,EAER,CACE,IAAK,eACL,MAAO,YACP,SAAU,GACV,KAAM,KACN,KAAM,iBAAA,EAER,CACE,IAAK,gBACL,MAAO,oBACP,SAAU,GACV,KAAM,KACN,KAAM,mBAAA,EAER,CACE,IAAK,UACL,MAAO,WACP,SAAU,GACV,KAAM,IACN,KAAM,mCAAA,EAER,CACE,IAAK,WACL,MAAO,WACP,SAAU,GACV,KAAM,KACN,KAAM,+BAAA,EAER,CACE,IAAK,cACL,MAAO,eACP,SAAU,GACV,KAAM,KACN,KAAM,uCAAA,EAER,CACE,IAAK,eACL,MAAO,gBACP,SAAU,GACV,KAAM,KACN,KAAM,yBAAA,EAER,CACE,IAAK,WACL,MAAO,YACP,SAAU,GACV,KAAM,KACN,KAAM,8BAAA,CACR,CACD,EAGK,CAACiB,EAAaC,CAAc,EAAIlB,EAAAA,SAAS,EAAE,EAC3C,CAACmB,EAAkBC,CAAmB,EAAIpB,EAAAA,SAAS,EAAK,EACxD,CAACqB,EAAeC,CAAgB,EAAItB,EAAAA,SAAS,EAAE,EAG/C,CAACuB,EAAiBC,CAAkB,EAAIxB,EAAAA,SAC5C,UAAA,EAII,CACJ,eAAAyB,EACA,kBAAAC,GACA,cAAAC,EACA,iBAAAC,GACA,YAAAC,GACA,eAAAC,GACA,aAAAC,GACA,gBAAAC,GACA,QAAAC,GACA,WAAAC,EAAA,EACEC,EAAA,EAEEC,EAAeC,EAAAA,OAAyB,IAAI,EAElDC,EAAAA,UAAU,IAAM,CACd,GAAI,OAAO,OAAW,KAAe,CAAC,OAAO,gBAAiB,OAC9D,MAAMC,EAAQ,OAAO,gBACfC,EAAa,IAAM,CACvB,GAAI,CACF,MAAMC,EAASF,EAAM,UAAA,EACrBxC,EACE0C,EAAO,OAAQC,IAAOA,EAAE,MAAQ,IAAI,YAAA,EAAc,WAAW,IAAI,CAAC,CAAA,CAEtE,MAAQ,CAAC,CACX,EACA,OAAAF,EAAA,EACAD,EAAM,mBAAmB,gBAAiBC,CAAU,EAC7C,IAAMD,EAAM,sBAAsB,gBAAiBC,CAAU,CACtE,EAAG,CAAA,CAAE,EAEL,MAAMG,GAAqBC,GAA2C,CACpE,MAAMC,EAAOD,EAAE,OAAO,QAAQ,CAAC,EAC/B,GAAI,CAACC,EAAM,OAGX,GAAIA,EAAK,KAAO,EAAI,KAAO,KAAM,CAC/B,MAAM,yDAAyD,EAC/D,MACF,CAEA,MAAMC,EAAS,IAAI,WACnBA,EAAO,UAAY,IAAM,CACvB,MAAMC,EAASD,EAAO,OACtBlC,EAAgBmC,CAAM,EAEtB,MAAMC,EAAQpD,GAAM,UAAY,GAC5BoD,IACF,aAAa,QAAQ,wBAAwBA,CAAK,GAAID,CAAM,EAC5D,OAAO,cACL,IAAI,YAAY,qBAAsB,CACpC,OAAQ,CAAE,SAAUC,EAAO,OAAQD,CAAA,CAAO,CAC3C,CAAA,EAGHE,EAAS,mBAAoB,CAC3B,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,OAAQF,EAAQ,CAAA,CACxC,EAAE,MAAM,IAAM,CAAC,CAAC,EAErB,EACAD,EAAO,cAAcD,CAAI,CAC3B,EAGAP,EAAAA,UAAU,IAAM,CACd,MAAMU,EAAQpD,GAAM,UAAY,GAChC,GAAKoD,EACL,GAAI,CACF5C,EAAa,aAAa,QAAQ,qBAAqB4C,CAAK,EAAE,GAAK,EAAE,EACrE1C,EAAW,aAAa,QAAQ,mBAAmB0C,CAAK,EAAE,GAAK,EAAE,EACjExC,EAAY,aAAa,QAAQ,oBAAoBwC,CAAK,EAAE,GAAK,EAAE,EACnEtC,EAAO,aAAa,QAAQ,eAAesC,CAAK,EAAE,GAAK,EAAE,EACzDpC,EACE,aAAa,QAAQ,wBAAwBoC,CAAK,EAAE,GAAK,EAAA,CAE7D,MAAQ,CAAC,CACX,EAAG,CAACpD,GAAM,QAAQ,CAAC,EAGnB0C,EAAAA,UAAU,IAAM,CACd,MAAMU,EAAQpD,GAAM,UAAY,GAC3BoD,GACLhC,EAAiBkC,GACfA,EAAK,IAAKC,IAAO,CACf,GAAGA,EACH,SAAU,CAAC,CAAC,aAAa,QAAQ,eAAeA,EAAE,GAAG,IAAIH,CAAK,EAAE,CAAA,EAChE,CAAA,CAEN,EAAG,CAACpD,GAAM,QAAQ,CAAC,EAGnB0C,EAAAA,UAAU,IAAM,CACT1C,GAAM,OACXqD,EAAS,2BAA2B,mBAAmBrD,EAAK,KAAK,CAAC,EAAE,EACjE,KAAMwD,GAAMA,EAAE,MAAM,EACpB,KAAKtC,CAAe,EACpB,MAAM,IAAM,CAAC,CAAC,CACnB,EAAG,CAAClB,GAAM,KAAK,CAAC,EAEhB,MAAMyD,GAAU,IAAM,CACpB,MAAML,EAAQpD,GAAM,UAAY,GAChC,GAAKoD,EACL,GAAI,CACF,aAAa,QAAQ,qBAAqBA,CAAK,GAAI7C,CAAS,EAC5D,aAAa,QAAQ,mBAAmB6C,CAAK,GAAI3C,CAAO,EACxD,aAAa,QAAQ,oBAAoB2C,CAAK,GAAIzC,CAAQ,EAC1D,aAAa,QAAQ,eAAeyC,CAAK,GAAIvC,CAAG,EAChD,aAAa,QAAQ,wBAAwBuC,CAAK,GAAIrC,CAAY,EAClE,OAAO,cACL,IAAI,YAAY,qBAAsB,CACpC,OAAQ,CAAE,SAAUqC,EAAO,OAAQrC,CAAA,CAAa,CACjD,CAAA,EAGCA,GACFsC,EAAS,mBAAoB,CAC3B,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,OAAQtC,EAAc,CAAA,CAC9C,EAAE,MAAM,IAAM,CAAC,CAAC,EAEnBT,EAAa,EAAK,CACpB,MAAQ,CAAC,CACX,EAGMoD,EAAW1D,GAAM,UAAY,WAC7B2D,EAAeC,EAAWF,CAAQ,EAClCG,EAAaC,GAAcJ,CAAQ,EACnCK,GAAaC,GAAcN,CAAQ,EACnCO,EAAgBC,GAAiBR,CAAQ,EAGzCS,EAAa,OAAO,OAAOF,CAAa,EAAE,OAC9C,CAACG,EAAKC,IAAMD,GAAOC,EAAE,QAAU,GAC/B,CAAA,EAEIC,GAAY,OAAO,OAAOL,CAAa,EAAE,OAC7C,CAACG,EAAKC,IAAMD,GAAOC,EAAE,KAAO,GAC5B,CAAA,EAIIE,EAAuBpF,GAAe,CAC1CyC,EAAoB0B,GAAUA,IAASnE,EAAK,KAAOA,CAAG,CACxD,EAEA,OACEQ,EAAAA,KAAC,MAAA,CAAI,UAAU,kCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wHACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,uEAAA,CAAwE,EACvFD,EAAAA,KAAC,MAAA,CAAI,UAAU,wDAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sLACZ,SAAA,CAAAoB,EACCnB,EAAAA,IAAC,MAAA,CACC,IAAKmB,EACL,IAAI,SACJ,UAAU,4BAAA,CAAA,EAGZnB,EAAAA,IAAC4E,EAAA,CAAK,UAAU,yCAAA,CAA0C,EAI5D5E,EAAAA,IAAC,MAAA,CACC,UAAU,oIACV,QAAS,IAAM4C,EAAa,SAAS,MAAA,EAErC,SAAA5C,EAAAA,IAAC6E,GAAA,CAAO,UAAU,uBAAA,CAAwB,CAAA,CAAA,CAC5C,EACF,EAGA7E,EAAAA,IAAC,SAAA,CACC,UAAU,wKACV,QAAS,IAAM4C,EAAa,SAAS,MAAA,EACrC,MAAM,uBAEN,SAAA5C,EAAAA,IAAC8E,EAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAAA,EAG7B9E,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,IAAK4C,EACL,UAAU,SACV,OAAO,UACP,SAAUO,EAAA,CAAA,EAGX9B,GAAc,SAAW,UACxBrB,EAAAA,IAAC,MAAA,CAAI,UAAU,4GACb,SAAAA,EAAAA,IAAC+E,EAAA,CAAM,UAAU,oBAAA,CAAqB,CAAA,CACxC,CAAA,EAEJ,EAGAhF,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,MAAC,KAAA,CAAG,UAAU,iDACX,SAAAI,GAAM,UAAY,QACrB,QACC,IAAA,CAAE,UAAU,6BAA8B,SAAAA,GAAM,OAAS,GAAG,EAG7DL,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,+BACZ,SAAAgF,EAAUf,CAAU,EACvB,EACAjE,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,EACrD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAAgC,SAAAuE,EAAW,EAC1DvE,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,OAAA,CAAK,CAAA,EAC9C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,+BACZ,SAAA+D,EAAa,SAAW,EAC3B,EACA/D,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,EAC7C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,+BACZ,SAAA+D,EAAa,cAAgB,EAChC,EACA/D,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,SAAA,CAAO,CAAA,CAAA,CAChD,CAAA,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,sBACZ,SAAAqB,GAAc,SAAW,SACxBtB,EAAAA,KAAC,OAAA,CAAK,UAAU,iIACd,SAAA,CAAAC,EAAAA,IAAC+E,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,UAAA,CAAA,CAC/B,EAEA/E,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb,OAAO,cACL,IAAI,YAAY,iBAAkB,CAChC,OAAQ,CAAE,IAAK,SAAA,CAAU,CAC1B,CAAA,CAEL,EACA,UAAU,8JACX,SAAA,oBAAA,CAAA,CAED,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAACV,EAAA,CACC,GAAG,WACH,MAAM,mBACN,KAAMsF,EACN,MAAM,SACN,OAAQ7C,IAAoB,WAC5B,SAAU4C,EAEV,SAAA5E,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,eAAY,EACxCS,EAQAV,EAAAA,KAAC,SAAA,CACC,QAAS8D,GACT,UAAU,gIAEV,SAAA,CAAA7D,EAAAA,IAACiF,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAAA,EAX9BlF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMW,EAAa,EAAI,EAChC,UAAU,6HAEV,SAAA,CAAAV,EAAAA,IAAC8E,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAAA,CAQ/B,EAEJ,EAECrE,EACCV,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,mCAAmC,SAAA,mBAEpD,EACAA,EAAAA,IAAC,QAAA,CACC,UAAU,eACV,MAAOW,EACP,SAAWyC,GAAMxC,EAAawC,EAAE,OAAO,KAAK,EAC5C,YAAY,0BAAA,CAAA,CACd,EACF,SACC,MAAA,CACC,SAAA,CAAApD,EAAAA,IAAC,QAAA,CAAM,UAAU,mCAAmC,SAAA,iBAEpD,EACAA,EAAAA,IAAC,QAAA,CACC,UAAU,eACV,MAAOa,EACP,SAAWuC,GAAMtC,EAAWsC,EAAE,OAAO,KAAK,EAC1C,YAAY,mBAAA,CAAA,CACd,EACF,SACC,MAAA,CACC,SAAA,CAAApD,EAAAA,IAAC,QAAA,CAAM,UAAU,mCAAmC,SAAA,kBAEpD,EACAA,EAAAA,IAAC,QAAA,CACC,UAAU,eACV,MAAOe,EACP,SAAWqC,GAAMpC,EAAYoC,EAAE,OAAO,KAAK,EAC3C,YAAY,yBAAA,CAAA,CACd,EACF,SACC,MAAA,CACC,SAAA,CAAApD,EAAAA,IAAC,QAAA,CAAM,UAAU,mCAAmC,SAAA,gBAEpD,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,UACP,SAAWoD,GAAM,CACf,MAAMC,EAAOD,EAAE,OAAO,QAAQ,CAAC,EAC/B,GAAIC,EAAM,CACR,MAAMC,EAAS,IAAI,WACnBA,EAAO,OAAS,IACdlC,EAAgBkC,EAAO,MAAgB,EACzCA,EAAO,cAAcD,CAAI,CAC3B,CACF,EACA,UAAU,wBAAA,CAAA,CACZ,EACF,EACAtD,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,mCAAmC,SAAA,MAAG,EACvDA,EAAAA,IAAC,WAAA,CACC,UAAU,gCACV,MAAOiB,EACP,SAAWmC,GAAMlC,EAAOkC,EAAE,OAAO,KAAK,EACtC,YAAY,2BAAA,CAAA,CACd,CAAA,CACF,CAAA,CAAA,CACF,EAEArD,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACZ,SAAA,CAAAY,UACE,MAAA,CACC,SAAA,CAAAX,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,mBAAgB,EACvDA,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAe,SAAAW,CAAA,CAAU,CAAA,EAC1C,EAEDE,UACE,MAAA,CACC,SAAA,CAAAb,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,iBAAc,EACrDA,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAe,SAAAa,CAAA,CAAQ,CAAA,EACxC,EAEDE,UACE,MAAA,CACC,SAAA,CAAAf,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,kBAAe,EACtDA,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAe,SAAAe,CAAA,CAAS,CAAA,EACzC,EAEDE,GACClB,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,MAAG,EAC1CA,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAe,SAAAiB,CAAA,CAAI,CAAA,EACpC,EAED,CAACN,GAAa,CAACE,GAAW,CAACE,GAAY,CAACE,GACvCjB,MAAC,MAAA,CAAI,UAAU,4CAA4C,SAAA,qCAAA,CAE3D,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,EAIFD,EAAAA,KAACT,EAAA,CACC,GAAG,QACH,MAAM,gBACN,KAAM4F,GACN,MAAM,OACN,OAAQnD,IAAoB,QAC5B,SAAU4C,EAEV,SAAA,CAAA5E,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACmF,GAAA,CAAO,UAAU,oCAAA,CAAqC,QACtD,MAAA,CAAI,UAAU,oBAAqB,SAAAH,EAAUf,CAAU,EAAE,EAC1DjE,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,EACzD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACoF,GAAA,CAAW,UAAU,qCAAA,CAAsC,QAC3D,MAAA,CAAI,UAAU,oBAAqB,SAAAJ,EAAUb,EAAU,EAAE,EAC1DnE,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,EACxD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACqF,GAAA,CAAK,UAAU,sCAAA,CAAuC,EACvDrF,EAAAA,IAAC,MAAA,CAAI,UAAU,oBAAqB,SAAAuE,EAAW,EAC/CvE,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,EACrD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACsF,GAAA,CAAI,UAAU,sCAAA,CAAuC,QACrD,MAAA,CAAI,UAAU,oBAAqB,SAAAvB,EAAa,SAAW,EAAE,EAC9D/D,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,UAAA,CAAQ,CAAA,EACjD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACuF,GAAA,CAAK,UAAU,sCAAA,CAAuC,QACtD,MAAA,CAAI,UAAU,oBACZ,SAAAxB,EAAa,cAAgB,EAChC,EACA/D,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,EACzD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACwF,GAAA,CAAQ,UAAU,oCAAA,CAAqC,EACxDxF,EAAAA,IAAC,OAAI,UAAU,oBACZ,WAAa,OAAO,QAAQ,CAAC,GAAK,CAAA,CACrC,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,EACxD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAACyF,GAAA,CAAO,UAAU,qCAAA,CAAsC,EACxDzF,EAAAA,IAAC,MAAA,CAAI,UAAU,oBAAqB,SAAA0E,GAAU,EAC9C1E,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,EAC7C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC0F,GAAA,CAAM,UAAU,oCAAA,CAAqC,QACrD,MAAA,CAAI,UAAU,oBACZ,SAAA3B,EAAa,cAAgB,IAChC,EACA/D,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,kBAAA,CAAgB,CAAA,CAAA,CACzD,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IACP,OAAO,cACL,IAAI,YAAY,iBAAkB,CAAE,OAAQ,CAAE,IAAK,QAAQ,CAAG,CAAA,EAGlE,UAAU,0GACX,SAAA,4BAAA,CAAA,CAED,CAAA,CAAA,EAIFA,EAAAA,IAACV,EAAA,CACC,GAAG,eACH,MAAM,wBACN,KAAMqG,GACN,MAAM,SACN,OAAQ5D,IAAoB,eAC5B,SAAU4C,EAEV,eAAC,MAAA,CAAI,UAAU,wCACZ,SAAApD,EAAa,IAAKoC,GACjB5D,EAAAA,KAAC,MAAA,CAEC,UAAW,sDACT4D,EAAE,SACE,oFACA,8CACN,GAEA,SAAA,CAAA3D,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAiB,SAAA2D,EAAE,KAAK,EACvC3D,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAyB,WAAE,MAAM,EAChDA,EAAAA,IAAC,MAAA,CAAI,UAAU,iCAAkC,WAAE,KAAK,EACvD2D,EAAE,UACD3D,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,SAAAA,EAAAA,IAAC4F,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAC9B,EAED,CAACjC,EAAE,UACF3D,EAAAA,IAAC,MAAA,CAAI,UAAU,uCACb,SAAAA,EAAAA,IAAC6F,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAC5B,CAAA,CAAA,EAlBGlC,EAAE,GAAA,CAqBV,CAAA,CACH,CAAA,CAAA,EAIF3D,EAAAA,IAACV,EAAA,CACC,GAAG,cACH,MAAM,mBACN,KAAMwG,GACN,MAAM,SACN,OAAQ/D,IAAoB,cAC5B,SAAU4C,EAEV,SAAA5E,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,UAAU,SAAA,mBAAgB,EAC3CD,EAAAA,KAAC,SAAA,CACC,UAAU,aACV,MAAOkC,GAAkB,GACzB,SAAWmB,GAAMlB,GAAkBkB,EAAE,OAAO,KAAK,EAEjD,SAAA,CAAApD,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,OAAI,EACpB,CACC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC3D,GAAI,EAAA,EACJ,IAAK+F,UACJ,SAAA,CAAe,MAAO,OAAOA,CAAC,EAAG,SAAA,CAAA,IAC9BA,CAAA,CAAA,EADSA,CAEb,CACD,CAAA,CAAA,CAAA,CACH,EACF,EAGAhG,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,UAAU,SAAA,kBAAe,EAC1CD,EAAAA,KAAC,SAAA,CACC,UAAU,aACV,MAAO0C,GACP,SAAWW,GAAMV,GAAWU,EAAE,OAAO,KAAY,EAEjD,SAAA,CAAApD,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,iBAAc,EACrCA,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,kBAAA,CAAgB,CAAA,CAAA,CAAA,CAC3C,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,UAAU,SAAA,eAAY,EACvCD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAASmC,EACT,SAAWiB,GAAMhB,GAAiBgB,EAAE,OAAO,OAAO,EAClD,UAAU,SAAA,CAAA,QAEX,OAAA,CAAK,UAAU,wBACb,SAAAjB,EAAgB,KAAO,KAAA,CAC1B,CAAA,CAAA,CACF,CAAA,EACF,EAECA,GACCpC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,wBAAwB,SAAA,SAAM,EAC/CA,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,IAAI,IACJ,IAAI,IACJ,KAAK,MACL,MAAOuC,GACP,SAAWa,GAAMZ,GAAgB,OAAOY,EAAE,OAAO,KAAK,CAAC,EACvD,UAAU,MAAA,CAAA,CACZ,EACF,EAGDjB,GACCpC,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,wBAAwB,SAAA,QAAK,EAC9CD,EAAAA,KAAC,SAAA,CACC,UAAU,uBACV,MAAOsC,IAAe,GACtB,SAAWe,GAAMd,GAAec,EAAE,OAAO,KAAK,EAE9C,SAAA,CAAApD,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,UAAO,EACvBM,EAAgB,IAAK0F,GACpBhG,EAAAA,IAAC,SAAA,CAA4B,MAAOgG,EAAM,SACvC,SAAAA,EAAM,IAAA,EADIA,EAAM,QAEnB,CACD,CAAA,CAAA,CAAA,CACH,CAAA,CACF,CAAA,CAAA,CAIJ,CAAA,CAAA,EAIFhG,EAAAA,IAACV,EAAA,CACC,GAAG,UACH,MAAM,yBACN,KAAM2G,GACN,MAAM,QACN,OAAQlE,IAAoB,UAC5B,SAAU4C,EAEV,SAAA5E,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAc,SAAA,sBAAmB,EAChDA,EAAAA,IAAC,MAAA,CACC,UAAW,WAAWqB,GAAc,SAAW,SAAW,iBAAmB,eAAe,GAE3F,SAAAA,GAAc,SAAW,SACtB,iBACA,WAAA,CAAA,CACN,EACF,EACCA,GAAc,SAAW,UACxBrB,EAAAA,IAAC,SAAA,CACC,QAAS,IACP,OAAO,cACL,IAAI,YAAY,iBAAkB,CAChC,OAAQ,CAAE,IAAK,SAAA,CAAU,CAC1B,CAAA,EAGL,UAAU,2IACX,SAAA,SAAA,CAAA,CAED,EAEJ,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBAAmB,SAAA,CAAA,kBAEhCA,EAAAA,KAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,CAAA,IACzCK,GAAM,qBAAuB,EAAE,uBAAA,CAAA,CACnC,CAAA,EACF,EACAL,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,UAAU,eACV,YAAY,eACZ,MAAOyB,EACP,SAAW2B,GAAM1B,EAAe0B,EAAE,OAAO,KAAK,EAC9C,SAAUzB,CAAA,CAAA,EAEZ3B,EAAAA,IAAC,SAAA,CACC,QAAS,SAAY,CACnB,GAAKyB,EAAY,OACjB,CAAAG,EAAoB,EAAI,EACxBE,EAAiB,EAAE,EACnB,GAAI,CACF,MAAMoE,EAAQ,aAAa,QAAQ,WAAW,EACxCC,EAAM,MAAM1C,EAAS,4BAA6B,CACtD,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,GAAIyC,EAAQ,CAAE,cAAe,UAAUA,CAAK,IAAO,CAAA,CAAC,EAEtD,KAAM,KAAK,UAAU,CACnB,MAAO9F,GAAM,MACb,YAAaqB,EAAY,KAAA,CAAK,CAC/B,CAAA,CACF,EACD,GAAI,CAAC0E,EAAI,GAAI,CACX,MAAMC,EAAO,MAAMD,EAAI,KAAA,EACvB,MAAM,IAAI,MACRC,EAAK,OAAS,2BAAA,CAElB,CACA1E,EAAe,EAAE,EACjB,OAAO,SAAS,OAAA,CAClB,OAAS2E,EAAU,CACjBvE,EAAiBuE,EAAI,OAAO,CAC9B,QAAA,CACEzE,EAAoB,EAAK,CAC3B,EACF,EACA,SAAUD,GAAoB,CAACF,EAAY,KAAA,EAC3C,UAAU,4DAET,WAAmB,MAAQ,QAAA,CAAA,CAC9B,EACF,EACCI,GACC7B,EAAAA,IAAC,MAAA,CAAI,UAAU,4BAA6B,SAAA6B,CAAA,CAAc,CAAA,EAE9D,EAGA9B,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IACP,OAAO,cAAc,IAAI,YAAY,YAAY,CAAC,EAEpD,UAAU,qJAEV,SAAA,CAAAC,EAAAA,IAACsG,GAAA,CAAO,UAAU,SAAA,CAAU,EAAE,SAAA,CAAA,CAAA,EAEhCvG,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb,MAAMqG,EAAO,CACX,SAAUhG,GAAM,SAChB,MAAO2D,EACP,aAAcxC,EAAa,OAAQoC,GAAMA,EAAE,QAAQ,EACnD,IAAK,CAAE,UAAAhD,EAAW,QAAAE,EAAS,SAAAE,EAAU,IAAAE,CAAA,EACrC,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,EAE/BsF,EAAO,IAAI,KAAK,CAAC,KAAK,UAAUH,EAAM,KAAM,CAAC,CAAC,EAAG,CACrD,KAAM,kBAAA,CACP,EACKI,EAAM,IAAI,gBAAgBD,CAAI,EAC9B5C,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAO6C,EACT7C,EAAE,SAAW,eAAevD,GAAM,UAAY,OAAO,QACrDuD,EAAE,MAAA,EACF,IAAI,gBAAgB6C,CAAG,CACzB,EACA,UAAU,wJAEV,SAAA,CAAAxG,EAAAA,IAACyG,GAAA,CAAS,UAAU,SAAA,CAAU,EAAE,cAAA,CAAA,CAAA,CAClC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAIDpG,GACCL,EAAAA,IAAC,SAAA,CACC,QAASK,EACT,UAAU,gGACX,SAAA,OAAA,CAAA,CAED,EAEJ,CAEJ,CC34BA,SAASqG,EAAMC,EAAa,CAC1B,GAAI,CACF,OAAO,cACL,IAAI,YAAY,iBAAkB,CAAE,OAAQ,CAAE,IAAAA,CAAA,EAAO,CAAA,CAEzD,MAAQ,CAAC,CACX,CAEA,MAAMC,GAAUC,GAAA,EAEhB,SAAwBC,GAAK,CAAE,KAAA1G,GAAwB,CACrD,KAAM,CAAC2G,EAAWC,CAAY,EAAIxG,EAAAA,SAAS,EAAK,EAC1C,CAACyG,EAAWC,CAAY,EAAI1G,EAAAA,SAAS,EAAK,EAC1C,CAAC2G,EAAaC,CAAc,EAAI5G,EAAAA,SAAS,EAAK,EAC9C,CAAC6G,EAAMC,CAAO,EAAI9G,EAAAA,SAAiB,EAAE,EACrC,CAAE,YAAA+G,CAAA,EAAgB5E,EAAA,EAClB6E,EAAQC,GAAA,EAIR,EAAGC,CAAW,EAAIlH,EAAAA,SAAS,CAAC,EAClCsC,EAAAA,UAAU,IAAM,CACd,MAAM6E,EAAiB,IAAMD,EAAa9D,GAAMA,EAAI,CAAC,EACrD,cAAO,iBAAiB,oBAAqB+D,CAAqB,EAC3D,IACL,OAAO,oBAAoB,oBAAqBA,CAAqB,CACzE,EAAG,CAAA,CAAE,EAEL,MAAMC,EAAoB,IAAM,CAC9BC,GAAA,CACF,EAGA/E,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMgF,EAAgB,IAAMV,EAAe,EAAI,EAC/C,cAAO,iBAAiB,mBAAoBU,CAAoB,EACzD,IACL,OAAO,oBAAoB,mBAAoBA,CAAoB,CACvE,EAAG,CAAA,CAAE,EAGLhF,EAAAA,UAAU,IAAM,CACd,MAAMiF,EAAkB,CACtB,0DACA,qDACA,6DACA,2DACA,kEACA,uEACA,kEACA,8DACA,oEAAA,EAEIC,EAAM,KAAK,MAAM,KAAK,OAAA,EAAWD,EAAM,MAAM,EACnDT,EAAQS,EAAMC,CAAG,CAAC,CACpB,EAAG,CAAA,CAAE,EAEHjI,EAAAA,KAAC,MAAA,CACC,UAAW,GAAGK,GAAM,WAAa,eAAiB,EAAE,wGAEpD,SAAA,CAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,kBAAkB,cAAW,GAC1C,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2BAAA,CAA4B,EAC3CA,EAAAA,IAAC,MAAA,CAAI,UAAU,oDAAA,CAAqD,EACpEA,EAAAA,IAAC,MAAA,CAAI,UAAU,oDAAA,CAAqD,CAAA,EACtE,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iKACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oJACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAiB,SAAA,sBAAmB,EACpDA,EAAAA,IAAC,SAAA,CACC,QAAS4H,EACT,UAAU,uIACX,SAAA,kBAAA,CAAA,CAED,EACF,EACA5H,EAAAA,IAAC,KAAA,CAAG,UAAU,0LAA0L,SAAA,iCAExM,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,+EAA+E,SAAA,2DAE5F,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,4DAA4D,SAAA,qDAAA,CAEzE,CAAA,EACF,EAGCqH,SACE,MAAA,CAAI,UAAU,mCACb,SAAAtH,EAAAA,KAAC,MAAA,CAAI,UAAU,4JACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,qDAAqD,SAAA,mBAErE,EAAQ,IACRA,EAAAA,IAAC,OAAA,CAAK,UAAU,+DACb,SAAAqH,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,EAGFtH,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iGACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb2G,EAAM,SAAS,EACf,GAAI,CACF,OAAO,cACL,IAAI,YAAY,qBAAsB,CACpC,OAAQ,CACN,WAAY,QACZ,YAAa,OAAOa,GAAa,OAAO,GAAK,EAC7C,WAAY,OAAOA,GAAa,QAAQ,GAAK,GAAA,CAC/C,CACD,CAAA,CAEL,MAAQ,CAAC,CACT,GAAI,CACF,WAAW,IAAM,CACf,OAAO,cACL,IAAI,YAAY,iBAAkB,CAChC,OAAQ,CAAE,KAAMA,GAAa,MAAQ,KAAA,CAAM,CAC5C,CAAA,CAEL,EAAG,EAAE,CACP,MAAQ,CAAC,CACX,EACA,UAAU,8PAEV,SAAA,CAAAvH,MAAC,OAAA,CAAK,cAAW,GAAE,SAAAiI,EAAI,QAAQ,EAAE,EACjCjI,EAAAA,IAAC,QAAK,SAAA,oBAAA,CAAkB,CAAA,CAAA,CAAA,EAE1BD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM2G,EAAM,OAAO,EAC5B,UAAU,4PAEV,SAAA,CAAA1G,MAAC,OAAA,CAAK,cAAW,GAAE,SAAAiI,EAAI,MAAM,EAAE,EAC/BjI,EAAAA,IAAC,QAAK,SAAA,eAAA,CAAa,CAAA,CAAA,CAAA,EAErBD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM2G,EAAM,QAAQ,EAC7B,UAAU,2PAEV,SAAA,CAAA1G,MAAC,OAAA,CAAK,cAAW,GAAE,SAAAiI,EAAI,IAAI,EAAE,EAC7BjI,EAAAA,IAAC,QAAK,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAAA,EAE5BD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMqH,EAAe,EAAI,EAClC,UAAU,8PAEV,SAAA,CAAApH,MAAC,OAAA,CAAK,cAAW,GAAE,SAAAiI,EAAI,QAAQ,EAAE,EACjCjI,EAAAA,IAAC,QAAK,SAAA,YAAA,CAAU,CAAA,CAAA,CAAA,EAElBD,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACb2G,EAAM,SAAS,EACf,GAAI,CACF,OAAO,cACL,IAAI,YAAY,iBAAkB,CAChC,OAAQ,CAAE,KAAM,iBAAA,CAAkB,CACnC,CAAA,CAEL,MAAQ,CAAC,CACX,EACA,UAAU,4PAEV,SAAA,CAAA1G,MAAC,OAAA,CAAK,cAAW,GAAE,SAAAiI,EAAI,MAAM,EAAE,EAC/BjI,EAAAA,IAAC,QAAK,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAAA,CAC3B,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oDAAoD,SAAA,iEAAA,CAEjE,CAAA,EACF,GAKE,IAAM,CACN,MAAMkI,EAAO9H,GAAM,UAAY,WACzB+H,EAAMnE,EAAWkE,CAAI,EACrBE,EAAY,CAAC,CAAChI,GAAM,WACpBiI,EACJ,8DACIC,EAAM,CAAC,CACX,MAAAC,EACA,KAAAC,EACA,MAAAC,EACA,KAAAC,CAAA,IAOA3I,EAAAA,KAAC,MAAA,CACC,UAAW,YAAYsI,CAAI,sCAAsCK,EAAO,oDAAsD,8CAA8C,QAE5K,SAAA,CAAA1I,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,SAAAuI,EACH,EACAvI,EAAAA,IAAC,MAAA,CACC,UAAW,qCAAqC0I,EAAO,0BAA4B,EAAE,GAEpF,SAAAF,CAAA,CAAA,EAEHxI,EAAAA,IAAC,MAAA,CACC,UAAW,qCAAqC0I,EAAO,0BAA4B,EAAE,GAEpF,SAAAD,CAAA,CAAA,EAEFC,GACC1I,EAAAA,IAAC,SAAA,CACC,UAAU,gHACV,QAAS,SAAY,CACnB,GAAI,CASF,MAAMoG,EAAO,MARD,MAAM,MAChB,GAAGQ,EAAO,sCACV,CACE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,MAAOxG,EAAK,MAAO,CAAA,CAC5C,GAEqB,KAAA,EACnBgG,EAAK,IAAMA,EAAK,IAClB,OAAO,SAAS,KAAOA,EAAK,IACnBA,EAAK,QAAU,wBACxBoB,EACE,oHACA,CAAE,KAAM,QAAS,QAAS,GAAA,CAAK,EAGjCA,EACE,uDACA,CAAE,KAAM,QAAS,QAAS,GAAA,CAAK,CAGrC,MAAc,CACZA,EAAM,6CAA8C,CAClD,KAAM,QACN,QAAS,GAAA,CACV,CACH,CACF,EACA,MAAM,sBAEN,SAAAxH,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,kBAAA,CAE5C,CAAA,CAAA,CACF,CAAA,CAAA,EAIN,OACED,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CACC,UAAW,GAAGsI,CAAI,yDAElB,SAAA,CAAArI,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAoC,SAAA,QAAK,EACxDA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAwC,SAAA,OAEvD,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAwC,SAAA,OAAA,CAEvD,CAAA,CAAA,CAAA,EAEFA,EAAAA,IAACsI,EAAA,CACC,MAAM,aACN,KAAMtD,EAAUmD,EAAI,OAAS,CAAC,EAC9B,MAAOnD,EAAUmD,EAAI,QAAU,CAAC,CAAA,CAAA,EAElCnI,EAAAA,IAACsI,EAAA,CACC,MAAM,aACN,KAAMtD,EAAUmD,EAAI,WAAa,CAAC,EAClC,MAAOnD,EAAUmD,EAAI,YAAc,CAAC,EACpC,KAAM,CAACC,CAAA,CAAA,EAETpI,EAAAA,IAACsI,EAAA,CACC,MAAM,cACN,KAAM,OAAOH,EAAI,cAAgB,CAAC,EAClC,MAAO,OAAOA,EAAI,eAAiB,CAAC,EACpC,KAAM,CAACC,CAAA,CAAA,EAETpI,EAAAA,IAACsI,EAAA,CACC,MAAM,WACN,KAAM,OAAOH,EAAI,cAAgB,CAAC,EAClC,MAAO,IACP,KAAM,CAACC,CAAA,CAAA,CACT,EACF,CAEJ,GAAA,EAEApI,EAAAA,IAAC,SAAA,CACC,UAAU,kRACV,QAAS,IAAMkH,EAAa,EAAI,EACjC,SAAA,kCAAA,CAAA,CAED,EACF,EAGAlH,EAAAA,IAAC,SAAA,CACC,UAAU,oJACV,MAAO,CACL,OACE,sEAAA,EAGJ,SAAAD,EAAAA,KAAC,SAAA,CACC,UAAU,+DACV,QAAS,IAAMiH,EAAa,EAAI,EAEhC,SAAA,CAAAhH,EAAAA,IAAC,QAAK,SAAA,GAAA,CAAC,QACN,OAAA,CAAK,MAAO,CAAE,cAAe,QAAA,EAAY,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAAA,CAC7D,CAAA,EAID+G,SACE,MAAA,CAAI,UAAU,6EACb,SAAAhH,EAAAA,KAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,UAAU,0EACV,QAAS,IAAMgH,EAAa,EAAK,EAClC,SAAA,SAAA,CAAA,EAGDhH,EAAAA,IAAC,KAAA,CAAG,UAAU,yBAAyB,SAAA,uBAAoB,EAC3DD,EAAAA,KAAC,KAAA,CAAG,UAAU,sBACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,qEAAA,CAGJ,EACAA,EAAAA,IAAC,MAAG,SAAA,0EAAA,CAGJ,SACC,KAAA,CAAG,SAAA,CAAA,eACW,IAAI,KAAA,EAAO,YAAA,EAAc,0CAAA,EAExC,EACAA,EAAAA,IAAC,MAAG,SAAA,qCAAA,CAAmC,CAAA,EACzC,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,oEAAA,CAEvC,CAAA,CAAA,CACF,CAAA,CACF,EAIDiH,SACE,MAAA,CAAI,UAAU,6EACb,SAAAlH,EAAAA,KAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,UAAU,0EACV,QAAS,IAAMkH,EAAa,EAAK,EAClC,SAAA,SAAA,CAAA,EAGDlH,EAAAA,IAAC,KAAA,CAAG,UAAU,yBAAyB,SAAA,qBAAkB,EACzDD,EAAAA,KAAC,KAAA,CAAG,UAAU,sBACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,qDAAA,CAAmD,EACvDA,EAAAA,IAAC,MAAG,SAAA,iDAAA,CAA+C,EACnDA,EAAAA,IAAC,MAAG,SAAA,wDAAA,CAAsD,EAC1DA,EAAAA,IAAC,MAAG,SAAA,qDAAA,CAAmD,EACvDA,EAAAA,IAAC,MAAG,SAAA,yDAAA,CAAuD,CAAA,EAC7D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,gEAAA,CAEvC,CAAA,CAAA,CACF,CAAA,CACF,EAIDmH,GACCpH,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,UAAU,gDACV,aAAW,gBACX,QAAS,IAAMoH,EAAe,EAAK,CAAA,CAAA,QAEpC,MAAA,CAAI,UAAU,+DACb,SAAArH,EAAAA,KAAC,MAAA,CAAI,UAAU,2LACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,UAAU,wJACV,aAAW,QACX,QAAS,IAAMoH,EAAe,EAAK,EACpC,SAAA,GAAA,CAAA,QAGAjH,GAAA,CAAa,KAAAC,EAAY,QAAS,IAAMgH,EAAe,EAAK,CAAA,CAAG,CAAA,CAAA,CAClE,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAIR"}