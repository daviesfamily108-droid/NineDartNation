(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(l){if(l.ep)return;l.ep=!0;const a=s(l);fetch(l.href,a)}})();function vh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yh={exports:{}},Bo={},bh={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ti=Symbol.for("react.element"),eg=Symbol.for("react.portal"),tg=Symbol.for("react.fragment"),ng=Symbol.for("react.strict_mode"),sg=Symbol.for("react.profiler"),rg=Symbol.for("react.provider"),lg=Symbol.for("react.context"),ag=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),og=Symbol.for("react.memo"),cg=Symbol.for("react.lazy"),Vm=Symbol.iterator;function dg(e){return e===null||typeof e!="object"?null:(e=Vm&&e[Vm]||e["@@iterator"],typeof e=="function"?e:null)}var Nh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wh=Object.assign,jh={};function Wl(e,t,s){this.props=e,this.context=t,this.refs=jh,this.updater=s||Nh}Wl.prototype.isReactComponent={};Wl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sh(){}Sh.prototype=Wl.prototype;function au(e,t,s){this.props=e,this.context=t,this.refs=jh,this.updater=s||Nh}var iu=au.prototype=new Sh;iu.constructor=au;wh(iu,Wl.prototype);iu.isPureReactComponent=!0;var Km=Array.isArray,kh=Object.prototype.hasOwnProperty,ou={current:null},Ch={key:!0,ref:!0,__self:!0,__source:!0};function Eh(e,t,s){var r,l={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)kh.call(t,r)&&!Ch.hasOwnProperty(r)&&(l[r]=t[r]);var o=arguments.length-2;if(o===1)l.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];l.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)l[r]===void 0&&(l[r]=o[r]);return{$$typeof:ti,type:e,key:a,ref:i,props:l,_owner:ou.current}}function ug(e,t){return{$$typeof:ti,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ti}function mg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Gm=/\/+/g;function gc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mg(""+e.key):t.toString(36)}function zi(e,t,s,r,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ti:case eg:i=!0}}if(i)return i=e,l=l(i),e=r===""?"."+gc(i,0):r,Km(l)?(s="",e!=null&&(s=e.replace(Gm,"$&/")+"/"),zi(l,t,s,"",function(d){return d})):l!=null&&(cu(l)&&(l=ug(l,s+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Gm,"$&/")+"/")+e)),t.push(l)),1;if(i=0,r=r===""?".":r+":",Km(e))for(var o=0;o<e.length;o++){a=e[o];var c=r+gc(a,o);i+=zi(a,t,s,c,l)}else if(c=dg(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=r+gc(a,o++),i+=zi(a,t,s,c,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function bi(e,t,s){if(e==null)return e;var r=[],l=0;return zi(e,r,"","",function(a){return t.call(s,a,l++)}),r}function fg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var an={current:null},Hi={transition:null},hg={ReactCurrentDispatcher:an,ReactCurrentBatchConfig:Hi,ReactCurrentOwner:ou};function Th(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:bi,forEach:function(e,t,s){bi(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return bi(e,function(){t++}),t},toArray:function(e){return bi(e,function(t){return t})||[]},only:function(e){if(!cu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=Wl;_e.Fragment=tg;_e.Profiler=sg;_e.PureComponent=au;_e.StrictMode=ng;_e.Suspense=ig;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hg;_e.act=Th;_e.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=wh({},e.props),l=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=ou.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)kh.call(t,c)&&!Ch.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:ti,type:e.type,key:l,ref:a,props:r,_owner:i}};_e.createContext=function(e){return e={$$typeof:lg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rg,_context:e},e.Consumer=e};_e.createElement=Eh;_e.createFactory=function(e){var t=Eh.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:ag,render:e}};_e.isValidElement=cu;_e.lazy=function(e){return{$$typeof:cg,_payload:{_status:-1,_result:e},_init:fg}};_e.memo=function(e,t){return{$$typeof:og,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=Hi.transition;Hi.transition={};try{e()}finally{Hi.transition=t}};_e.unstable_act=Th;_e.useCallback=function(e,t){return an.current.useCallback(e,t)};_e.useContext=function(e){return an.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return an.current.useDeferredValue(e)};_e.useEffect=function(e,t){return an.current.useEffect(e,t)};_e.useId=function(){return an.current.useId()};_e.useImperativeHandle=function(e,t,s){return an.current.useImperativeHandle(e,t,s)};_e.useInsertionEffect=function(e,t){return an.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return an.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return an.current.useMemo(e,t)};_e.useReducer=function(e,t,s){return an.current.useReducer(e,t,s)};_e.useRef=function(e){return an.current.useRef(e)};_e.useState=function(e){return an.current.useState(e)};_e.useSyncExternalStore=function(e,t,s){return an.current.useSyncExternalStore(e,t,s)};_e.useTransition=function(){return an.current.useTransition()};_e.version="18.3.1";bh.exports=_e;var u=bh.exports;const pg=vh(u);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg=u,gg=Symbol.for("react.element"),vg=Symbol.for("react.fragment"),yg=Object.prototype.hasOwnProperty,bg=xg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ng={key:!0,ref:!0,__self:!0,__source:!0};function Dh(e,t,s){var r,l={},a=null,i=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)yg.call(t,r)&&!Ng.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:gg,type:e,key:a,ref:i,props:l,_owner:bg.current}}Bo.Fragment=vg;Bo.jsx=Dh;Bo.jsxs=Dh;yh.exports=Bo;var n=yh.exports,Zc={},Ih={exports:{}},Sn={},Mh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,ae){var X=Y.length;Y.push(ae);e:for(;0<X;){var re=X-1>>>1,G=Y[re];if(0<l(G,ae))Y[re]=ae,Y[X]=G,X=re;else break e}}function s(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ae=Y[0],X=Y.pop();if(X!==ae){Y[0]=X;e:for(var re=0,G=Y.length,ce=G>>>1;re<ce;){var je=2*(re+1)-1,Oe=Y[je],Se=je+1,Pe=Y[Se];if(0>l(Oe,X))Se<G&&0>l(Pe,Oe)?(Y[re]=Pe,Y[Se]=X,re=Se):(Y[re]=Oe,Y[je]=X,re=je);else if(Se<G&&0>l(Pe,X))Y[re]=Pe,Y[Se]=X,re=Se;else break e}}return ae}function l(Y,ae){var X=Y.sortIndex-ae.sortIndex;return X!==0?X:Y.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],d=[],x=1,w=null,g=3,b=!1,C=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(Y){for(var ae=s(d);ae!==null;){if(ae.callback===null)r(d);else if(ae.startTime<=Y)r(d),ae.sortIndex=ae.expirationTime,t(c,ae);else break;ae=s(d)}}function j(Y){if(k=!1,y(Y),!C)if(s(c)!==null)C=!0,le(D);else{var ae=s(d);ae!==null&&Ne(j,ae.startTime-Y)}}function D(Y,ae){C=!1,k&&(k=!1,N(O),O=-1),b=!0;var X=g;try{for(y(ae),w=s(c);w!==null&&(!(w.expirationTime>ae)||Y&&!A());){var re=w.callback;if(typeof re=="function"){w.callback=null,g=w.priorityLevel;var G=re(w.expirationTime<=ae);ae=e.unstable_now(),typeof G=="function"?w.callback=G:w===s(c)&&r(c),y(ae)}else r(c);w=s(c)}if(w!==null)var ce=!0;else{var je=s(d);je!==null&&Ne(j,je.startTime-ae),ce=!1}return ce}finally{w=null,g=X,b=!1}}var h=!1,I=null,O=-1,P=5,F=-1;function A(){return!(e.unstable_now()-F<P)}function V(){if(I!==null){var Y=e.unstable_now();F=Y;var ae=!0;try{ae=I(!0,Y)}finally{ae?T():(h=!1,I=null)}}else h=!1}var T;if(typeof f=="function")T=function(){f(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,oe=z.port2;z.port1.onmessage=V,T=function(){oe.postMessage(null)}}else T=function(){R(V,0)};function le(Y){I=Y,h||(h=!0,T())}function Ne(Y,ae){O=R(function(){Y(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){C||b||(C=!0,le(D))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var X=g;g=ae;try{return Y()}finally{g=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var X=g;g=Y;try{return ae()}finally{g=X}},e.unstable_scheduleCallback=function(Y,ae,X){var re=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?re+X:re):X=re,Y){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=X+G,Y={id:x++,callback:ae,priorityLevel:Y,startTime:X,expirationTime:G,sortIndex:-1},X>re?(Y.sortIndex=X,t(d,Y),s(c)===null&&Y===s(d)&&(k?(N(O),O=-1):k=!0,Ne(j,X-re))):(Y.sortIndex=G,t(c,Y),C||b||(C=!0,le(D))),Y},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(Y){var ae=g;return function(){var X=g;g=ae;try{return Y.apply(this,arguments)}finally{g=X}}}})(Lh);Mh.exports=Lh;var wg=Mh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg=u,jn=wg;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ph=new Set,Ra={};function Rr(e,t){Ml(e,t),Ml(e+"Capture",t)}function Ml(e,t){for(Ra[e]=t,e=0;e<t.length;e++)Ph.add(t[e])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=Object.prototype.hasOwnProperty,Sg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jm={},Ym={};function kg(e){return ed.call(Ym,e)?!0:ed.call(Jm,e)?!1:Sg.test(e)?Ym[e]=!0:(Jm[e]=!0,!1)}function Cg(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Eg(e,t,s,r){if(t===null||typeof t>"u"||Cg(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(e,t,s,r,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qt[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qt[t]=new on(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qt[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qt[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qt[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qt[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qt[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qt[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qt[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var du=/[\-:]([a-z])/g;function uu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(du,uu);Qt[t]=new on(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(du,uu);Qt[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(du,uu);Qt[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qt[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qt[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function mu(e,t,s,r){var l=Qt.hasOwnProperty(t)?Qt[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Eg(t,s,l,r)&&(s=null),r||l===null?kg(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):l.mustUseProperty?e[l.propertyName]=s===null?l.type===3?!1:"":s:(t=l.attributeName,r=l.attributeNamespace,s===null?e.removeAttribute(t):(l=l.type,s=l===3||l===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var Ms=jg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ni=Symbol.for("react.element"),fl=Symbol.for("react.portal"),hl=Symbol.for("react.fragment"),fu=Symbol.for("react.strict_mode"),td=Symbol.for("react.profiler"),Ah=Symbol.for("react.provider"),Rh=Symbol.for("react.context"),hu=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),sd=Symbol.for("react.suspense_list"),pu=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),Oh=Symbol.for("react.offscreen"),qm=Symbol.iterator;function oa(e){return e===null||typeof e!="object"?null:(e=qm&&e[qm]||e["@@iterator"],typeof e=="function"?e:null)}var Et=Object.assign,vc;function xa(e){if(vc===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);vc=t&&t[1]||""}return`
`+vc+e}var yc=!1;function bc(e,t){if(!e||yc)return"";yc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var l=d.stack.split(`
`),a=r.stack.split(`
`),i=l.length-1,o=a.length-1;1<=i&&0<=o&&l[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==a[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==a[o]){var c=`
`+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{yc=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?xa(e):""}function Tg(e){switch(e.tag){case 5:return xa(e.type);case 16:return xa("Lazy");case 13:return xa("Suspense");case 19:return xa("SuspenseList");case 0:case 2:case 15:return e=bc(e.type,!1),e;case 11:return e=bc(e.type.render,!1),e;case 1:return e=bc(e.type,!0),e;default:return""}}function rd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hl:return"Fragment";case fl:return"Portal";case td:return"Profiler";case fu:return"StrictMode";case nd:return"Suspense";case sd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rh:return(e.displayName||"Context")+".Consumer";case Ah:return(e._context.displayName||"Context")+".Provider";case hu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pu:return t=e.displayName||null,t!==null?t:rd(e.type)||"Memo";case $s:t=e._payload,e=e._init;try{return rd(e(t))}catch{}}return null}function Dg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rd(t);case 8:return t===fu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ig(e){var t=Bh(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wi(e){e._valueTracker||(e._valueTracker=Ig(e))}function _h(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=Bh(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function ao(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ld(e,t){var s=t.checked;return Et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Qm(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=rr(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uh(e,t){t=t.checked,t!=null&&mu(e,"checked",t,!1)}function ad(e,t){Uh(e,t);var s=rr(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?id(e,t.type,s):t.hasOwnProperty("defaultValue")&&id(e,t.type,rr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xm(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function id(e,t,s){(t!=="number"||ao(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var ga=Array.isArray;function kl(e,t,s,r){if(e=e.options,t){t={};for(var l=0;l<s.length;l++)t["$"+s[l]]=!0;for(s=0;s<e.length;s++)l=t.hasOwnProperty("$"+e[s].value),e[s].selected!==l&&(e[s].selected=l),l&&r&&(e[s].defaultSelected=!0)}else{for(s=""+rr(s),t=null,l=0;l<e.length;l++){if(e[l].value===s){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function od(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zm(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Q(92));if(ga(s)){if(1<s.length)throw Error(Q(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:rr(s)}}function $h(e,t){var s=rr(t.value),r=rr(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function ef(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ji,zh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ji=ji||document.createElement("div"),ji.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ji.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oa(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mg=["Webkit","ms","Moz","O"];Object.keys(ba).forEach(function(e){Mg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ba[t]=ba[e]})});function Hh(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||ba.hasOwnProperty(e)&&ba[e]?(""+t).trim():t+"px"}function Wh(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,l=Hh(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,l):e[s]=l}}var Lg=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dd(e,t){if(t){if(Lg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function ud(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=null;function xu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fd=null,Cl=null,El=null;function tf(e){if(e=ri(e)){if(typeof fd!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=zo(t),fd(e.stateNode,e.type,t))}}function Vh(e){Cl?El?El.push(e):El=[e]:Cl=e}function Kh(){if(Cl){var e=Cl,t=El;if(El=Cl=null,tf(e),t)for(e=0;e<t.length;e++)tf(t[e])}}function Gh(e,t){return e(t)}function Jh(){}var Nc=!1;function Yh(e,t,s){if(Nc)return e(t,s);Nc=!0;try{return Gh(e,t,s)}finally{Nc=!1,(Cl!==null||El!==null)&&(Jh(),Kh())}}function Ba(e,t){var s=e.stateNode;if(s===null)return null;var r=zo(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Q(231,t,typeof s));return s}var hd=!1;if(Es)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){hd=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{hd=!1}function Pg(e,t,s,r,l,a,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(x){this.onError(x)}}var Na=!1,io=null,oo=!1,pd=null,Ag={onError:function(e){Na=!0,io=e}};function Rg(e,t,s,r,l,a,i,o,c){Na=!1,io=null,Pg.apply(Ag,arguments)}function Og(e,t,s,r,l,a,i,o,c){if(Rg.apply(this,arguments),Na){if(Na){var d=io;Na=!1,io=null}else throw Error(Q(198));oo||(oo=!0,pd=d)}}function Or(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function qh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nf(e){if(Or(e)!==e)throw Error(Q(188))}function Bg(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var s=e,r=t;;){var l=s.return;if(l===null)break;var a=l.alternate;if(a===null){if(r=l.return,r!==null){s=r;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===s)return nf(l),e;if(a===r)return nf(l),t;a=a.sibling}throw Error(Q(188))}if(s.return!==r.return)s=l,r=a;else{for(var i=!1,o=l.child;o;){if(o===s){i=!0,s=l,r=a;break}if(o===r){i=!0,r=l,s=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===s){i=!0,s=a,r=l;break}if(o===r){i=!0,r=a,s=l;break}o=o.sibling}if(!i)throw Error(Q(189))}}if(s.alternate!==r)throw Error(Q(190))}if(s.tag!==3)throw Error(Q(188));return s.stateNode.current===s?e:t}function Qh(e){return e=Bg(e),e!==null?Xh(e):null}function Xh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xh(e);if(t!==null)return t;e=e.sibling}return null}var Zh=jn.unstable_scheduleCallback,sf=jn.unstable_cancelCallback,_g=jn.unstable_shouldYield,Ug=jn.unstable_requestPaint,At=jn.unstable_now,$g=jn.unstable_getCurrentPriorityLevel,gu=jn.unstable_ImmediatePriority,e0=jn.unstable_UserBlockingPriority,co=jn.unstable_NormalPriority,Fg=jn.unstable_LowPriority,t0=jn.unstable_IdlePriority,_o=null,cs=null;function zg(e){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(_o,e,void 0,(e.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:Vg,Hg=Math.log,Wg=Math.LN2;function Vg(e){return e>>>=0,e===0?32:31-(Hg(e)/Wg|0)|0}var Si=64,ki=4194304;function va(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uo(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,l=e.suspendedLanes,a=e.pingedLanes,i=s&268435455;if(i!==0){var o=i&~l;o!==0?r=va(o):(a&=i,a!==0&&(r=va(a)))}else i=s&~l,i!==0?r=va(i):a!==0&&(r=va(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-Gn(t),l=1<<s,r|=e[s],t&=~l;return r}function Kg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gg(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Gn(a),o=1<<i,c=l[i];c===-1?(!(o&s)||o&r)&&(l[i]=Kg(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function xd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n0(){var e=Si;return Si<<=1,!(Si&4194240)&&(Si=64),e}function wc(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ni(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Gn(t),e[t]=s}function Jg(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var l=31-Gn(s),a=1<<l;t[l]=0,r[l]=-1,e[l]=-1,s&=~a}}function vu(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-Gn(s),l=1<<r;l&t|e[r]&t&&(e[r]|=t),s&=~l}}var nt=0;function s0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var r0,yu,l0,a0,i0,gd=!1,Ci=[],qs=null,Qs=null,Xs=null,_a=new Map,Ua=new Map,zs=[],Yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rf(e,t){switch(e){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":_a.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(t.pointerId)}}function da(e,t,s,r,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},t!==null&&(t=ri(t),t!==null&&yu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function qg(e,t,s,r,l){switch(t){case"focusin":return qs=da(qs,e,t,s,r,l),!0;case"dragenter":return Qs=da(Qs,e,t,s,r,l),!0;case"mouseover":return Xs=da(Xs,e,t,s,r,l),!0;case"pointerover":var a=l.pointerId;return _a.set(a,da(_a.get(a)||null,e,t,s,r,l)),!0;case"gotpointercapture":return a=l.pointerId,Ua.set(a,da(Ua.get(a)||null,e,t,s,r,l)),!0}return!1}function o0(e){var t=jr(e.target);if(t!==null){var s=Or(t);if(s!==null){if(t=s.tag,t===13){if(t=qh(s),t!==null){e.blockedOn=t,i0(e.priority,function(){l0(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=vd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);md=r,s.target.dispatchEvent(r),md=null}else return t=ri(s),t!==null&&yu(t),e.blockedOn=s,!1;t.shift()}return!0}function lf(e,t,s){Wi(e)&&s.delete(t)}function Qg(){gd=!1,qs!==null&&Wi(qs)&&(qs=null),Qs!==null&&Wi(Qs)&&(Qs=null),Xs!==null&&Wi(Xs)&&(Xs=null),_a.forEach(lf),Ua.forEach(lf)}function ua(e,t){e.blockedOn===t&&(e.blockedOn=null,gd||(gd=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,Qg)))}function $a(e){function t(l){return ua(l,e)}if(0<Ci.length){ua(Ci[0],e);for(var s=1;s<Ci.length;s++){var r=Ci[s];r.blockedOn===e&&(r.blockedOn=null)}}for(qs!==null&&ua(qs,e),Qs!==null&&ua(Qs,e),Xs!==null&&ua(Xs,e),_a.forEach(t),Ua.forEach(t),s=0;s<zs.length;s++)r=zs[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<zs.length&&(s=zs[0],s.blockedOn===null);)o0(s),s.blockedOn===null&&zs.shift()}var Tl=Ms.ReactCurrentBatchConfig,mo=!0;function Xg(e,t,s,r){var l=nt,a=Tl.transition;Tl.transition=null;try{nt=1,bu(e,t,s,r)}finally{nt=l,Tl.transition=a}}function Zg(e,t,s,r){var l=nt,a=Tl.transition;Tl.transition=null;try{nt=4,bu(e,t,s,r)}finally{nt=l,Tl.transition=a}}function bu(e,t,s,r){if(mo){var l=vd(e,t,s,r);if(l===null)Lc(e,t,r,fo,s),rf(e,r);else if(qg(l,e,t,s,r))r.stopPropagation();else if(rf(e,r),t&4&&-1<Yg.indexOf(e)){for(;l!==null;){var a=ri(l);if(a!==null&&r0(a),a=vd(e,t,s,r),a===null&&Lc(e,t,r,fo,s),a===l)break;l=a}l!==null&&r.stopPropagation()}else Lc(e,t,r,null,s)}}var fo=null;function vd(e,t,s,r){if(fo=null,e=xu(r),e=jr(e),e!==null)if(t=Or(e),t===null)e=null;else if(s=t.tag,s===13){if(e=qh(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fo=e,null}function c0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($g()){case gu:return 1;case e0:return 4;case co:case Fg:return 16;case t0:return 536870912;default:return 16}default:return 16}}var Gs=null,Nu=null,Vi=null;function d0(){if(Vi)return Vi;var e,t=Nu,s=t.length,r,l="value"in Gs?Gs.value:Gs.textContent,a=l.length;for(e=0;e<s&&t[e]===l[e];e++);var i=s-e;for(r=1;r<=i&&t[s-r]===l[a-r];r++);return Vi=l.slice(e,1<r?1-r:void 0)}function Ki(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ei(){return!0}function af(){return!1}function kn(e){function t(s,r,l,a,i){this._reactName=s,this._targetInst=l,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(s=e[o],this[o]=s?s(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ei:af,this.isPropagationStopped=af,this}return Et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),t}var Vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=kn(Vl),si=Et({},Vl,{view:0,detail:0}),ev=kn(si),jc,Sc,ma,Uo=Et({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ma&&(ma&&e.type==="mousemove"?(jc=e.screenX-ma.screenX,Sc=e.screenY-ma.screenY):Sc=jc=0,ma=e),jc)},movementY:function(e){return"movementY"in e?e.movementY:Sc}}),of=kn(Uo),tv=Et({},Uo,{dataTransfer:0}),nv=kn(tv),sv=Et({},si,{relatedTarget:0}),kc=kn(sv),rv=Et({},Vl,{animationName:0,elapsedTime:0,pseudoElement:0}),lv=kn(rv),av=Et({},Vl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iv=kn(av),ov=Et({},Vl,{data:0}),cf=kn(ov),cv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uv[e])?!!t[e]:!1}function ju(){return mv}var fv=Et({},si,{key:function(e){if(e.key){var t=cv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ki(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(e){return e.type==="keypress"?Ki(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ki(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hv=kn(fv),pv=Et({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=kn(pv),xv=Et({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),gv=kn(xv),vv=Et({},Vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),yv=kn(vv),bv=Et({},Uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nv=kn(bv),wv=[9,13,27,32],Su=Es&&"CompositionEvent"in window,wa=null;Es&&"documentMode"in document&&(wa=document.documentMode);var jv=Es&&"TextEvent"in window&&!wa,u0=Es&&(!Su||wa&&8<wa&&11>=wa),uf=" ",mf=!1;function m0(e,t){switch(e){case"keyup":return wv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pl=!1;function Sv(e,t){switch(e){case"compositionend":return f0(t);case"keypress":return t.which!==32?null:(mf=!0,uf);case"textInput":return e=t.data,e===uf&&mf?null:e;default:return null}}function kv(e,t){if(pl)return e==="compositionend"||!Su&&m0(e,t)?(e=d0(),Vi=Nu=Gs=null,pl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return u0&&t.locale!=="ko"?null:t.data;default:return null}}var Cv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ff(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cv[e.type]:t==="textarea"}function h0(e,t,s,r){Vh(r),t=ho(t,"onChange"),0<t.length&&(s=new wu("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var ja=null,Fa=null;function Ev(e){k0(e,0)}function $o(e){var t=vl(e);if(_h(t))return e}function Tv(e,t){if(e==="change")return t}var p0=!1;if(Es){var Cc;if(Es){var Ec="oninput"in document;if(!Ec){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),Ec=typeof hf.oninput=="function"}Cc=Ec}else Cc=!1;p0=Cc&&(!document.documentMode||9<document.documentMode)}function pf(){ja&&(ja.detachEvent("onpropertychange",x0),Fa=ja=null)}function x0(e){if(e.propertyName==="value"&&$o(Fa)){var t=[];h0(t,Fa,e,xu(e)),Yh(Ev,t)}}function Dv(e,t,s){e==="focusin"?(pf(),ja=t,Fa=s,ja.attachEvent("onpropertychange",x0)):e==="focusout"&&pf()}function Iv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $o(Fa)}function Mv(e,t){if(e==="click")return $o(t)}function Lv(e,t){if(e==="input"||e==="change")return $o(t)}function Pv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yn=typeof Object.is=="function"?Object.is:Pv;function za(e,t){if(Yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var l=s[r];if(!ed.call(t,l)||!Yn(e[l],t[l]))return!1}return!0}function xf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gf(e,t){var s=xf(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=xf(s)}}function g0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function v0(){for(var e=window,t=ao();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ao(e.document)}return t}function ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Av(e){var t=v0(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&g0(s.ownerDocument.documentElement,s)){if(r!==null&&ku(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=s.textContent.length,a=Math.min(r.start,l);r=r.end===void 0?a:Math.min(r.end,l),!e.extend&&a>r&&(l=r,r=a,a=l),l=gf(s,a);var i=gf(s,r);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rv=Es&&"documentMode"in document&&11>=document.documentMode,xl=null,yd=null,Sa=null,bd=!1;function vf(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;bd||xl==null||xl!==ao(r)||(r=xl,"selectionStart"in r&&ku(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sa&&za(Sa,r)||(Sa=r,r=ho(yd,"onSelect"),0<r.length&&(t=new wu("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=xl)))}function Ti(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var gl={animationend:Ti("Animation","AnimationEnd"),animationiteration:Ti("Animation","AnimationIteration"),animationstart:Ti("Animation","AnimationStart"),transitionend:Ti("Transition","TransitionEnd")},Tc={},y0={};Es&&(y0=document.createElement("div").style,"AnimationEvent"in window||(delete gl.animationend.animation,delete gl.animationiteration.animation,delete gl.animationstart.animation),"TransitionEvent"in window||delete gl.transitionend.transition);function Fo(e){if(Tc[e])return Tc[e];if(!gl[e])return e;var t=gl[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in y0)return Tc[e]=t[s];return e}var b0=Fo("animationend"),N0=Fo("animationiteration"),w0=Fo("animationstart"),j0=Fo("transitionend"),S0=new Map,yf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(e,t){S0.set(e,t),Rr(t,[e])}for(var Dc=0;Dc<yf.length;Dc++){var Ic=yf[Dc],Ov=Ic.toLowerCase(),Bv=Ic[0].toUpperCase()+Ic.slice(1);ar(Ov,"on"+Bv)}ar(b0,"onAnimationEnd");ar(N0,"onAnimationIteration");ar(w0,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(j0,"onTransitionEnd");Ml("onMouseEnter",["mouseout","mouseover"]);Ml("onMouseLeave",["mouseout","mouseover"]);Ml("onPointerEnter",["pointerout","pointerover"]);Ml("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_v=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function bf(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,Og(r,t,void 0,e),e.currentTarget=null}function k0(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],l=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==a&&l.isPropagationStopped())break e;bf(l,o,d),a=c}else for(i=0;i<r.length;i++){if(o=r[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==a&&l.isPropagationStopped())break e;bf(l,o,d),a=c}}}if(oo)throw e=pd,oo=!1,pd=null,e}function gt(e,t){var s=t[kd];s===void 0&&(s=t[kd]=new Set);var r=e+"__bubble";s.has(r)||(C0(t,e,2,!1),s.add(r))}function Mc(e,t,s){var r=0;t&&(r|=4),C0(s,e,r,t)}var Di="_reactListening"+Math.random().toString(36).slice(2);function Ha(e){if(!e[Di]){e[Di]=!0,Ph.forEach(function(s){s!=="selectionchange"&&(_v.has(s)||Mc(s,!1,e),Mc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Di]||(t[Di]=!0,Mc("selectionchange",!1,t))}}function C0(e,t,s,r){switch(c0(t)){case 1:var l=Xg;break;case 4:l=Zg;break;default:l=bu}s=l.bind(null,t,s,e),l=void 0,!hd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,s,{capture:!0,passive:l}):e.addEventListener(t,s,!0):l!==void 0?e.addEventListener(t,s,{passive:l}):e.addEventListener(t,s,!1)}function Lc(e,t,s,r,l){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;i=i.return}for(;o!==null;){if(i=jr(o),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}o=o.parentNode}}r=r.return}Yh(function(){var d=a,x=xu(s),w=[];e:{var g=S0.get(e);if(g!==void 0){var b=wu,C=e;switch(e){case"keypress":if(Ki(s)===0)break e;case"keydown":case"keyup":b=hv;break;case"focusin":C="focus",b=kc;break;case"focusout":C="blur",b=kc;break;case"beforeblur":case"afterblur":b=kc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=nv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=gv;break;case b0:case N0:case w0:b=lv;break;case j0:b=yv;break;case"scroll":b=ev;break;case"wheel":b=Nv;break;case"copy":case"cut":case"paste":b=iv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=df}var k=(t&4)!==0,R=!k&&e==="scroll",N=k?g!==null?g+"Capture":null:g;k=[];for(var f=d,y;f!==null;){y=f;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,N!==null&&(j=Ba(f,N),j!=null&&k.push(Wa(f,j,y)))),R)break;f=f.return}0<k.length&&(g=new b(g,C,null,s,x),w.push({event:g,listeners:k}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",g&&s!==md&&(C=s.relatedTarget||s.fromElement)&&(jr(C)||C[Ts]))break e;if((b||g)&&(g=x.window===x?x:(g=x.ownerDocument)?g.defaultView||g.parentWindow:window,b?(C=s.relatedTarget||s.toElement,b=d,C=C?jr(C):null,C!==null&&(R=Or(C),C!==R||C.tag!==5&&C.tag!==6)&&(C=null)):(b=null,C=d),b!==C)){if(k=of,j="onMouseLeave",N="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(k=df,j="onPointerLeave",N="onPointerEnter",f="pointer"),R=b==null?g:vl(b),y=C==null?g:vl(C),g=new k(j,f+"leave",b,s,x),g.target=R,g.relatedTarget=y,j=null,jr(x)===d&&(k=new k(N,f+"enter",C,s,x),k.target=y,k.relatedTarget=R,j=k),R=j,b&&C)t:{for(k=b,N=C,f=0,y=k;y;y=cl(y))f++;for(y=0,j=N;j;j=cl(j))y++;for(;0<f-y;)k=cl(k),f--;for(;0<y-f;)N=cl(N),y--;for(;f--;){if(k===N||N!==null&&k===N.alternate)break t;k=cl(k),N=cl(N)}k=null}else k=null;b!==null&&Nf(w,g,b,k,!1),C!==null&&R!==null&&Nf(w,R,C,k,!0)}}e:{if(g=d?vl(d):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var D=Tv;else if(ff(g))if(p0)D=Lv;else{D=Iv;var h=Dv}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=Mv);if(D&&(D=D(e,d))){h0(w,D,s,x);break e}h&&h(e,g,d),e==="focusout"&&(h=g._wrapperState)&&h.controlled&&g.type==="number"&&id(g,"number",g.value)}switch(h=d?vl(d):window,e){case"focusin":(ff(h)||h.contentEditable==="true")&&(xl=h,yd=d,Sa=null);break;case"focusout":Sa=yd=xl=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,vf(w,s,x);break;case"selectionchange":if(Rv)break;case"keydown":case"keyup":vf(w,s,x)}var I;if(Su)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else pl?m0(e,s)&&(O="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(O="onCompositionStart");O&&(u0&&s.locale!=="ko"&&(pl||O!=="onCompositionStart"?O==="onCompositionEnd"&&pl&&(I=d0()):(Gs=x,Nu="value"in Gs?Gs.value:Gs.textContent,pl=!0)),h=ho(d,O),0<h.length&&(O=new cf(O,e,null,s,x),w.push({event:O,listeners:h}),I?O.data=I:(I=f0(s),I!==null&&(O.data=I)))),(I=jv?Sv(e,s):kv(e,s))&&(d=ho(d,"onBeforeInput"),0<d.length&&(x=new cf("onBeforeInput","beforeinput",null,s,x),w.push({event:x,listeners:d}),x.data=I))}k0(w,t)})}function Wa(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ho(e,t){for(var s=t+"Capture",r=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=Ba(e,s),a!=null&&r.unshift(Wa(e,a,l)),a=Ba(e,t),a!=null&&r.push(Wa(e,a,l))),e=e.return}return r}function cl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nf(e,t,s,r,l){for(var a=t._reactName,i=[];s!==null&&s!==r;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,l?(c=Ba(s,a),c!=null&&i.unshift(Wa(s,c,o))):l||(c=Ba(s,a),c!=null&&i.push(Wa(s,c,o)))),s=s.return}i.length!==0&&e.push({event:t,listeners:i})}var Uv=/\r\n?/g,$v=/\u0000|\uFFFD/g;function wf(e){return(typeof e=="string"?e:""+e).replace(Uv,`
`).replace($v,"")}function Ii(e,t,s){if(t=wf(t),wf(e)!==t&&s)throw Error(Q(425))}function po(){}var Nd=null,wd=null;function jd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sd=typeof setTimeout=="function"?setTimeout:void 0,Fv=typeof clearTimeout=="function"?clearTimeout:void 0,jf=typeof Promise=="function"?Promise:void 0,zv=typeof queueMicrotask=="function"?queueMicrotask:typeof jf<"u"?function(e){return jf.resolve(null).then(e).catch(Hv)}:Sd;function Hv(e){setTimeout(function(){throw e})}function Pc(e,t){var s=t,r=0;do{var l=s.nextSibling;if(e.removeChild(s),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(r===0){e.removeChild(l),$a(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=l}while(s);$a(t)}function Zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),os="__reactFiber$"+Kl,Va="__reactProps$"+Kl,Ts="__reactContainer$"+Kl,kd="__reactEvents$"+Kl,Wv="__reactListeners$"+Kl,Vv="__reactHandles$"+Kl;function jr(e){var t=e[os];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ts]||s[os]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Sf(e);e!==null;){if(s=e[os])return s;e=Sf(e)}return t}e=s,s=e.parentNode}return null}function ri(e){return e=e[os]||e[Ts],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function zo(e){return e[Va]||null}var Cd=[],yl=-1;function ir(e){return{current:e}}function vt(e){0>yl||(e.current=Cd[yl],Cd[yl]=null,yl--)}function ft(e,t){yl++,Cd[yl]=e.current,e.current=t}var lr={},tn=ir(lr),hn=ir(!1),Ir=lr;function Ll(e,t){var s=e.type.contextTypes;if(!s)return lr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in s)l[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function pn(e){return e=e.childContextTypes,e!=null}function xo(){vt(hn),vt(tn)}function kf(e,t,s){if(tn.current!==lr)throw Error(Q(168));ft(tn,t),ft(hn,s)}function E0(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(Q(108,Dg(e)||"Unknown",l));return Et({},s,r)}function go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lr,Ir=tn.current,ft(tn,e),ft(hn,hn.current),!0}function Cf(e,t,s){var r=e.stateNode;if(!r)throw Error(Q(169));s?(e=E0(e,t,Ir),r.__reactInternalMemoizedMergedChildContext=e,vt(hn),vt(tn),ft(tn,e)):vt(hn),ft(hn,s)}var Ns=null,Ho=!1,Ac=!1;function T0(e){Ns===null?Ns=[e]:Ns.push(e)}function Kv(e){Ho=!0,T0(e)}function or(){if(!Ac&&Ns!==null){Ac=!0;var e=0,t=nt;try{var s=Ns;for(nt=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}Ns=null,Ho=!1}catch(l){throw Ns!==null&&(Ns=Ns.slice(e+1)),Zh(gu,or),l}finally{nt=t,Ac=!1}}return null}var bl=[],Nl=0,vo=null,yo=0,Pn=[],An=0,Mr=null,ws=1,js="";function br(e,t){bl[Nl++]=yo,bl[Nl++]=vo,vo=e,yo=t}function D0(e,t,s){Pn[An++]=ws,Pn[An++]=js,Pn[An++]=Mr,Mr=e;var r=ws;e=js;var l=32-Gn(r)-1;r&=~(1<<l),s+=1;var a=32-Gn(t)+l;if(30<a){var i=l-l%5;a=(r&(1<<i)-1).toString(32),r>>=i,l-=i,ws=1<<32-Gn(t)+l|s<<l|r,js=a+e}else ws=1<<a|s<<l|r,js=e}function Cu(e){e.return!==null&&(br(e,1),D0(e,1,0))}function Eu(e){for(;e===vo;)vo=bl[--Nl],bl[Nl]=null,yo=bl[--Nl],bl[Nl]=null;for(;e===Mr;)Mr=Pn[--An],Pn[An]=null,js=Pn[--An],Pn[An]=null,ws=Pn[--An],Pn[An]=null}var wn=null,Nn=null,wt=!1,Kn=null;function I0(e,t){var s=Rn(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Ef(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wn=e,Nn=Zs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wn=e,Nn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Mr!==null?{id:ws,overflow:js}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Rn(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,wn=e,Nn=null,!0):!1;default:return!1}}function Ed(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Td(e){if(wt){var t=Nn;if(t){var s=t;if(!Ef(e,t)){if(Ed(e))throw Error(Q(418));t=Zs(s.nextSibling);var r=wn;t&&Ef(e,t)?I0(r,s):(e.flags=e.flags&-4097|2,wt=!1,wn=e)}}else{if(Ed(e))throw Error(Q(418));e.flags=e.flags&-4097|2,wt=!1,wn=e}}}function Tf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wn=e}function Mi(e){if(e!==wn)return!1;if(!wt)return Tf(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jd(e.type,e.memoizedProps)),t&&(t=Nn)){if(Ed(e))throw M0(),Error(Q(418));for(;t;)I0(e,t),t=Zs(t.nextSibling)}if(Tf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Nn=Zs(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Nn=null}}else Nn=wn?Zs(e.stateNode.nextSibling):null;return!0}function M0(){for(var e=Nn;e;)e=Zs(e.nextSibling)}function Pl(){Nn=wn=null,wt=!1}function Tu(e){Kn===null?Kn=[e]:Kn.push(e)}var Gv=Ms.ReactCurrentBatchConfig;function fa(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Q(309));var r=s.stateNode}if(!r)throw Error(Q(147,e));var l=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var o=l.refs;i===null?delete o[a]:o[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(Q(284));if(!s._owner)throw Error(Q(290,e))}return e}function Li(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Df(e){var t=e._init;return t(e._payload)}function L0(e){function t(N,f){if(e){var y=N.deletions;y===null?(N.deletions=[f],N.flags|=16):y.push(f)}}function s(N,f){if(!e)return null;for(;f!==null;)t(N,f),f=f.sibling;return null}function r(N,f){for(N=new Map;f!==null;)f.key!==null?N.set(f.key,f):N.set(f.index,f),f=f.sibling;return N}function l(N,f){return N=sr(N,f),N.index=0,N.sibling=null,N}function a(N,f,y){return N.index=y,e?(y=N.alternate,y!==null?(y=y.index,y<f?(N.flags|=2,f):y):(N.flags|=2,f)):(N.flags|=1048576,f)}function i(N){return e&&N.alternate===null&&(N.flags|=2),N}function o(N,f,y,j){return f===null||f.tag!==6?(f=Fc(y,N.mode,j),f.return=N,f):(f=l(f,y),f.return=N,f)}function c(N,f,y,j){var D=y.type;return D===hl?x(N,f,y.props.children,j,y.key):f!==null&&(f.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===$s&&Df(D)===f.type)?(j=l(f,y.props),j.ref=fa(N,f,y),j.return=N,j):(j=Zi(y.type,y.key,y.props,null,N.mode,j),j.ref=fa(N,f,y),j.return=N,j)}function d(N,f,y,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=zc(y,N.mode,j),f.return=N,f):(f=l(f,y.children||[]),f.return=N,f)}function x(N,f,y,j,D){return f===null||f.tag!==7?(f=Dr(y,N.mode,j,D),f.return=N,f):(f=l(f,y),f.return=N,f)}function w(N,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Fc(""+f,N.mode,y),f.return=N,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ni:return y=Zi(f.type,f.key,f.props,null,N.mode,y),y.ref=fa(N,null,f),y.return=N,y;case fl:return f=zc(f,N.mode,y),f.return=N,f;case $s:var j=f._init;return w(N,j(f._payload),y)}if(ga(f)||oa(f))return f=Dr(f,N.mode,y,null),f.return=N,f;Li(N,f)}return null}function g(N,f,y,j){var D=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return D!==null?null:o(N,f,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ni:return y.key===D?c(N,f,y,j):null;case fl:return y.key===D?d(N,f,y,j):null;case $s:return D=y._init,g(N,f,D(y._payload),j)}if(ga(y)||oa(y))return D!==null?null:x(N,f,y,j,null);Li(N,y)}return null}function b(N,f,y,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return N=N.get(y)||null,o(f,N,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ni:return N=N.get(j.key===null?y:j.key)||null,c(f,N,j,D);case fl:return N=N.get(j.key===null?y:j.key)||null,d(f,N,j,D);case $s:var h=j._init;return b(N,f,y,h(j._payload),D)}if(ga(j)||oa(j))return N=N.get(y)||null,x(f,N,j,D,null);Li(f,j)}return null}function C(N,f,y,j){for(var D=null,h=null,I=f,O=f=0,P=null;I!==null&&O<y.length;O++){I.index>O?(P=I,I=null):P=I.sibling;var F=g(N,I,y[O],j);if(F===null){I===null&&(I=P);break}e&&I&&F.alternate===null&&t(N,I),f=a(F,f,O),h===null?D=F:h.sibling=F,h=F,I=P}if(O===y.length)return s(N,I),wt&&br(N,O),D;if(I===null){for(;O<y.length;O++)I=w(N,y[O],j),I!==null&&(f=a(I,f,O),h===null?D=I:h.sibling=I,h=I);return wt&&br(N,O),D}for(I=r(N,I);O<y.length;O++)P=b(I,N,O,y[O],j),P!==null&&(e&&P.alternate!==null&&I.delete(P.key===null?O:P.key),f=a(P,f,O),h===null?D=P:h.sibling=P,h=P);return e&&I.forEach(function(A){return t(N,A)}),wt&&br(N,O),D}function k(N,f,y,j){var D=oa(y);if(typeof D!="function")throw Error(Q(150));if(y=D.call(y),y==null)throw Error(Q(151));for(var h=D=null,I=f,O=f=0,P=null,F=y.next();I!==null&&!F.done;O++,F=y.next()){I.index>O?(P=I,I=null):P=I.sibling;var A=g(N,I,F.value,j);if(A===null){I===null&&(I=P);break}e&&I&&A.alternate===null&&t(N,I),f=a(A,f,O),h===null?D=A:h.sibling=A,h=A,I=P}if(F.done)return s(N,I),wt&&br(N,O),D;if(I===null){for(;!F.done;O++,F=y.next())F=w(N,F.value,j),F!==null&&(f=a(F,f,O),h===null?D=F:h.sibling=F,h=F);return wt&&br(N,O),D}for(I=r(N,I);!F.done;O++,F=y.next())F=b(I,N,O,F.value,j),F!==null&&(e&&F.alternate!==null&&I.delete(F.key===null?O:F.key),f=a(F,f,O),h===null?D=F:h.sibling=F,h=F);return e&&I.forEach(function(V){return t(N,V)}),wt&&br(N,O),D}function R(N,f,y,j){if(typeof y=="object"&&y!==null&&y.type===hl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ni:e:{for(var D=y.key,h=f;h!==null;){if(h.key===D){if(D=y.type,D===hl){if(h.tag===7){s(N,h.sibling),f=l(h,y.props.children),f.return=N,N=f;break e}}else if(h.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===$s&&Df(D)===h.type){s(N,h.sibling),f=l(h,y.props),f.ref=fa(N,h,y),f.return=N,N=f;break e}s(N,h);break}else t(N,h);h=h.sibling}y.type===hl?(f=Dr(y.props.children,N.mode,j,y.key),f.return=N,N=f):(j=Zi(y.type,y.key,y.props,null,N.mode,j),j.ref=fa(N,f,y),j.return=N,N=j)}return i(N);case fl:e:{for(h=y.key;f!==null;){if(f.key===h)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){s(N,f.sibling),f=l(f,y.children||[]),f.return=N,N=f;break e}else{s(N,f);break}else t(N,f);f=f.sibling}f=zc(y,N.mode,j),f.return=N,N=f}return i(N);case $s:return h=y._init,R(N,f,h(y._payload),j)}if(ga(y))return C(N,f,y,j);if(oa(y))return k(N,f,y,j);Li(N,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(s(N,f.sibling),f=l(f,y),f.return=N,N=f):(s(N,f),f=Fc(y,N.mode,j),f.return=N,N=f),i(N)):s(N,f)}return R}var Al=L0(!0),P0=L0(!1),bo=ir(null),No=null,wl=null,Du=null;function Iu(){Du=wl=No=null}function Mu(e){var t=bo.current;vt(bo),e._currentValue=t}function Dd(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function Dl(e,t){No=e,Du=wl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fn=!0),e.firstContext=null)}function Bn(e){var t=e._currentValue;if(Du!==e)if(e={context:e,memoizedValue:t,next:null},wl===null){if(No===null)throw Error(Q(308));wl=e,No.dependencies={lanes:0,firstContext:e}}else wl=wl.next=e;return t}var Sr=null;function Lu(e){Sr===null?Sr=[e]:Sr.push(e)}function A0(e,t,s,r){var l=t.interleaved;return l===null?(s.next=s,Lu(t)):(s.next=l.next,l.next=s),t.interleaved=s,Ds(e,r)}function Ds(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Fs=!1;function Pu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function er(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Ds(e,s)}return l=r.interleaved,l===null?(t.next=t,Lu(r)):(t.next=l.next,l.next=t),r.interleaved=t,Ds(e,s)}function Gi(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,vu(e,s)}}function If(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var l=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?l=a=i:a=a.next=i,s=s.next}while(s!==null);a===null?l=a=t:a=a.next=t}else l=a=t;s={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function wo(e,t,s,r){var l=e.updateQueue;Fs=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==i&&(o===null?x.firstBaseUpdate=d:o.next=d,x.lastBaseUpdate=c))}if(a!==null){var w=l.baseState;i=0,x=d=c=null,o=a;do{var g=o.lane,b=o.eventTime;if((r&g)===g){x!==null&&(x=x.next={eventTime:b,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var C=e,k=o;switch(g=t,b=s,k.tag){case 1:if(C=k.payload,typeof C=="function"){w=C.call(b,w,g);break e}w=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=k.payload,g=typeof C=="function"?C.call(b,w,g):C,g==null)break e;w=Et({},w,g);break e;case 2:Fs=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=l.effects,g===null?l.effects=[o]:g.push(o))}else b={eventTime:b,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(d=x=b,c=w):x=x.next=b,i|=g;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;g=o,o=g.next,g.next=null,l.lastBaseUpdate=g,l.shared.pending=null}}while(!0);if(x===null&&(c=w),l.baseState=c,l.firstBaseUpdate=d,l.lastBaseUpdate=x,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);Pr|=i,e.lanes=i,e.memoizedState=w}}function Mf(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=s,typeof l!="function")throw Error(Q(191,l));l.call(r)}}}var li={},ds=ir(li),Ka=ir(li),Ga=ir(li);function kr(e){if(e===li)throw Error(Q(174));return e}function Au(e,t){switch(ft(Ga,t),ft(Ka,e),ft(ds,li),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cd(t,e)}vt(ds),ft(ds,t)}function Rl(){vt(ds),vt(Ka),vt(Ga)}function O0(e){kr(Ga.current);var t=kr(ds.current),s=cd(t,e.type);t!==s&&(ft(Ka,e),ft(ds,s))}function Ru(e){Ka.current===e&&(vt(ds),vt(Ka))}var kt=ir(0);function jo(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rc=[];function Ou(){for(var e=0;e<Rc.length;e++)Rc[e]._workInProgressVersionPrimary=null;Rc.length=0}var Ji=Ms.ReactCurrentDispatcher,Oc=Ms.ReactCurrentBatchConfig,Lr=0,Ct=null,Ft=null,Kt=null,So=!1,ka=!1,Ja=0,Jv=0;function Xt(){throw Error(Q(321))}function Bu(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Yn(e[s],t[s]))return!1;return!0}function _u(e,t,s,r,l,a){if(Lr=a,Ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ji.current=e===null||e.memoizedState===null?Xv:Zv,e=s(r,l),ka){a=0;do{if(ka=!1,Ja=0,25<=a)throw Error(Q(301));a+=1,Kt=Ft=null,t.updateQueue=null,Ji.current=ey,e=s(r,l)}while(ka)}if(Ji.current=ko,t=Ft!==null&&Ft.next!==null,Lr=0,Kt=Ft=Ct=null,So=!1,t)throw Error(Q(300));return e}function Uu(){var e=Ja!==0;return Ja=0,e}function is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ct.memoizedState=Kt=e:Kt=Kt.next=e,Kt}function _n(){if(Ft===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var t=Kt===null?Ct.memoizedState:Kt.next;if(t!==null)Kt=t,Ft=e;else{if(e===null)throw Error(Q(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Kt===null?Ct.memoizedState=Kt=e:Kt=Kt.next=e}return Kt}function Ya(e,t){return typeof t=="function"?t(e):t}function Bc(e){var t=_n(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var r=Ft,l=r.baseQueue,a=s.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}r.baseQueue=l=a,s.pending=null}if(l!==null){a=l.next,r=r.baseState;var o=i=null,c=null,d=a;do{var x=d.lane;if((Lr&x)===x)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var w={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=w,i=r):c=c.next=w,Ct.lanes|=x,Pr|=x}d=d.next}while(d!==null&&d!==a);c===null?i=r:c.next=o,Yn(r,t.memoizedState)||(fn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,s.lastRenderedState=r}if(e=s.interleaved,e!==null){l=e;do a=l.lane,Ct.lanes|=a,Pr|=a,l=l.next;while(l!==e)}else l===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function _c(e){var t=_n(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var r=s.dispatch,l=s.pending,a=t.memoizedState;if(l!==null){s.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);Yn(a,t.memoizedState)||(fn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,r]}function B0(){}function _0(e,t){var s=Ct,r=_n(),l=t(),a=!Yn(r.memoizedState,l);if(a&&(r.memoizedState=l,fn=!0),r=r.queue,$u(F0.bind(null,s,r,e),[e]),r.getSnapshot!==t||a||Kt!==null&&Kt.memoizedState.tag&1){if(s.flags|=2048,qa(9,$0.bind(null,s,r,l,t),void 0,null),Gt===null)throw Error(Q(349));Lr&30||U0(s,t,l)}return l}function U0(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function $0(e,t,s,r){t.value=s,t.getSnapshot=r,z0(t)&&H0(e)}function F0(e,t,s){return s(function(){z0(t)&&H0(e)})}function z0(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Yn(e,s)}catch{return!0}}function H0(e){var t=Ds(e,1);t!==null&&Jn(t,e,1,-1)}function Lf(e){var t=is();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},t.queue=e,e=e.dispatch=Qv.bind(null,Ct,e),[t.memoizedState,e]}function qa(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function W0(){return _n().memoizedState}function Yi(e,t,s,r){var l=is();Ct.flags|=e,l.memoizedState=qa(1|t,s,void 0,r===void 0?null:r)}function Wo(e,t,s,r){var l=_n();r=r===void 0?null:r;var a=void 0;if(Ft!==null){var i=Ft.memoizedState;if(a=i.destroy,r!==null&&Bu(r,i.deps)){l.memoizedState=qa(t,s,a,r);return}}Ct.flags|=e,l.memoizedState=qa(1|t,s,a,r)}function Pf(e,t){return Yi(8390656,8,e,t)}function $u(e,t){return Wo(2048,8,e,t)}function V0(e,t){return Wo(4,2,e,t)}function K0(e,t){return Wo(4,4,e,t)}function G0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function J0(e,t,s){return s=s!=null?s.concat([e]):null,Wo(4,4,G0.bind(null,t,e),s)}function Fu(){}function Y0(e,t){var s=_n();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Bu(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function q0(e,t){var s=_n();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Bu(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function Q0(e,t,s){return Lr&21?(Yn(s,t)||(s=n0(),Ct.lanes|=s,Pr|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fn=!0),e.memoizedState=s)}function Yv(e,t){var s=nt;nt=s!==0&&4>s?s:4,e(!0);var r=Oc.transition;Oc.transition={};try{e(!1),t()}finally{nt=s,Oc.transition=r}}function X0(){return _n().memoizedState}function qv(e,t,s){var r=nr(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Z0(e))ep(t,s);else if(s=A0(e,t,s,r),s!==null){var l=ln();Jn(s,e,r,l),tp(s,t,r)}}function Qv(e,t,s){var r=nr(e),l={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Z0(e))ep(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,o=a(i,s);if(l.hasEagerState=!0,l.eagerState=o,Yn(o,i)){var c=t.interleaved;c===null?(l.next=l,Lu(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}s=A0(e,t,l,r),s!==null&&(l=ln(),Jn(s,e,r,l),tp(s,t,r))}}function Z0(e){var t=e.alternate;return e===Ct||t!==null&&t===Ct}function ep(e,t){ka=So=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function tp(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,vu(e,s)}}var ko={readContext:Bn,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},Xv={readContext:Bn,useCallback:function(e,t){return is().memoizedState=[e,t===void 0?null:t],e},useContext:Bn,useEffect:Pf,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Yi(4194308,4,G0.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Yi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yi(4,2,e,t)},useMemo:function(e,t){var s=is();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=is();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qv.bind(null,Ct,e),[r.memoizedState,e]},useRef:function(e){var t=is();return e={current:e},t.memoizedState=e},useState:Lf,useDebugValue:Fu,useDeferredValue:function(e){return is().memoizedState=e},useTransition:function(){var e=Lf(!1),t=e[0];return e=Yv.bind(null,e[1]),is().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=Ct,l=is();if(wt){if(s===void 0)throw Error(Q(407));s=s()}else{if(s=t(),Gt===null)throw Error(Q(349));Lr&30||U0(r,t,s)}l.memoizedState=s;var a={value:s,getSnapshot:t};return l.queue=a,Pf(F0.bind(null,r,a,e),[e]),r.flags|=2048,qa(9,$0.bind(null,r,a,s,t),void 0,null),s},useId:function(){var e=is(),t=Gt.identifierPrefix;if(wt){var s=js,r=ws;s=(r&~(1<<32-Gn(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ja++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Jv++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zv={readContext:Bn,useCallback:Y0,useContext:Bn,useEffect:$u,useImperativeHandle:J0,useInsertionEffect:V0,useLayoutEffect:K0,useMemo:q0,useReducer:Bc,useRef:W0,useState:function(){return Bc(Ya)},useDebugValue:Fu,useDeferredValue:function(e){var t=_n();return Q0(t,Ft.memoizedState,e)},useTransition:function(){var e=Bc(Ya)[0],t=_n().memoizedState;return[e,t]},useMutableSource:B0,useSyncExternalStore:_0,useId:X0,unstable_isNewReconciler:!1},ey={readContext:Bn,useCallback:Y0,useContext:Bn,useEffect:$u,useImperativeHandle:J0,useInsertionEffect:V0,useLayoutEffect:K0,useMemo:q0,useReducer:_c,useRef:W0,useState:function(){return _c(Ya)},useDebugValue:Fu,useDeferredValue:function(e){var t=_n();return Ft===null?t.memoizedState=e:Q0(t,Ft.memoizedState,e)},useTransition:function(){var e=_c(Ya)[0],t=_n().memoizedState;return[e,t]},useMutableSource:B0,useSyncExternalStore:_0,useId:X0,unstable_isNewReconciler:!1};function Wn(e,t){if(e&&e.defaultProps){t=Et({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Id(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:Et({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Vo={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=ln(),l=nr(e),a=Cs(r,l);a.payload=t,s!=null&&(a.callback=s),t=er(e,a,l),t!==null&&(Jn(t,e,l,r),Gi(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=ln(),l=nr(e),a=Cs(r,l);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=er(e,a,l),t!==null&&(Jn(t,e,l,r),Gi(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ln(),r=nr(e),l=Cs(s,r);l.tag=2,t!=null&&(l.callback=t),t=er(e,l,r),t!==null&&(Jn(t,e,r,s),Gi(t,e,r))}};function Af(e,t,s,r,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!za(s,r)||!za(l,a):!0}function np(e,t,s){var r=!1,l=lr,a=t.contextType;return typeof a=="object"&&a!==null?a=Bn(a):(l=pn(t)?Ir:tn.current,r=t.contextTypes,a=(r=r!=null)?Ll(e,l):lr),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function Rf(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Md(e,t,s,r){var l=e.stateNode;l.props=s,l.state=e.memoizedState,l.refs={},Pu(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=Bn(a):(a=pn(t)?Ir:tn.current,l.context=Ll(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Id(e,t,a,s),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Vo.enqueueReplaceState(l,l.state,null),wo(e,s,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Ol(e,t){try{var s="",r=t;do s+=Tg(r),r=r.return;while(r);var l=s}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function Uc(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ld(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ty=typeof WeakMap=="function"?WeakMap:Map;function sp(e,t,s){s=Cs(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){Eo||(Eo=!0,zd=r),Ld(e,t)},s}function rp(e,t,s){s=Cs(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;s.payload=function(){return r(l)},s.callback=function(){Ld(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Ld(e,t),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),s}function Of(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new ty;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(s)||(l.add(s),e=py.bind(null,e,t,s),t.then(e,e))}function Bf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _f(e,t,s,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Cs(-1,1),t.tag=2,er(s,t,1))),s.lanes|=1),e)}var ny=Ms.ReactCurrentOwner,fn=!1;function rn(e,t,s,r){t.child=e===null?P0(t,null,s,r):Al(t,e.child,s,r)}function Uf(e,t,s,r,l){s=s.render;var a=t.ref;return Dl(t,l),r=_u(e,t,s,r,a,l),s=Uu(),e!==null&&!fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Is(e,t,l)):(wt&&s&&Cu(t),t.flags|=1,rn(e,t,r,l),t.child)}function $f(e,t,s,r,l){if(e===null){var a=s.type;return typeof a=="function"&&!Yu(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,lp(e,t,a,r,l)):(e=Zi(s.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var i=a.memoizedProps;if(s=s.compare,s=s!==null?s:za,s(i,r)&&e.ref===t.ref)return Is(e,t,l)}return t.flags|=1,e=sr(a,r),e.ref=t.ref,e.return=t,t.child=e}function lp(e,t,s,r,l){if(e!==null){var a=e.memoizedProps;if(za(a,r)&&e.ref===t.ref)if(fn=!1,t.pendingProps=r=a,(e.lanes&l)!==0)e.flags&131072&&(fn=!0);else return t.lanes=e.lanes,Is(e,t,l)}return Pd(e,t,s,r,l)}function ap(e,t,s){var r=t.pendingProps,l=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Sl,bn),bn|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ft(Sl,bn),bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,ft(Sl,bn),bn|=r}else a!==null?(r=a.baseLanes|s,t.memoizedState=null):r=s,ft(Sl,bn),bn|=r;return rn(e,t,l,s),t.child}function ip(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Pd(e,t,s,r,l){var a=pn(s)?Ir:tn.current;return a=Ll(t,a),Dl(t,l),s=_u(e,t,s,r,a,l),r=Uu(),e!==null&&!fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Is(e,t,l)):(wt&&r&&Cu(t),t.flags|=1,rn(e,t,s,l),t.child)}function Ff(e,t,s,r,l){if(pn(s)){var a=!0;go(t)}else a=!1;if(Dl(t,l),t.stateNode===null)qi(e,t),np(t,s,r),Md(t,s,r,l),r=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,d=s.contextType;typeof d=="object"&&d!==null?d=Bn(d):(d=pn(s)?Ir:tn.current,d=Ll(t,d));var x=s.getDerivedStateFromProps,w=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function";w||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||c!==d)&&Rf(t,i,r,d),Fs=!1;var g=t.memoizedState;i.state=g,wo(t,r,i,l),c=t.memoizedState,o!==r||g!==c||hn.current||Fs?(typeof x=="function"&&(Id(t,s,x,r),c=t.memoizedState),(o=Fs||Af(t,s,o,r,g,c,d))?(w||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=d,r=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,R0(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Wn(t.type,o),i.props=d,w=t.pendingProps,g=i.context,c=s.contextType,typeof c=="object"&&c!==null?c=Bn(c):(c=pn(s)?Ir:tn.current,c=Ll(t,c));var b=s.getDerivedStateFromProps;(x=typeof b=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==w||g!==c)&&Rf(t,i,r,c),Fs=!1,g=t.memoizedState,i.state=g,wo(t,r,i,l);var C=t.memoizedState;o!==w||g!==C||hn.current||Fs?(typeof b=="function"&&(Id(t,s,b,r),C=t.memoizedState),(d=Fs||Af(t,s,d,r,g,C,c)||!1)?(x||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,C,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,C,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=C),i.props=r,i.state=C,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Ad(e,t,s,r,a,l)}function Ad(e,t,s,r,l,a){ip(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return l&&Cf(t,s,!1),Is(e,t,a);r=t.stateNode,ny.current=t;var o=i&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Al(t,e.child,null,a),t.child=Al(t,null,o,a)):rn(e,t,o,a),t.memoizedState=r.state,l&&Cf(t,s,!0),t.child}function op(e){var t=e.stateNode;t.pendingContext?kf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kf(e,t.context,!1),Au(e,t.containerInfo)}function zf(e,t,s,r,l){return Pl(),Tu(l),t.flags|=256,rn(e,t,s,r),t.child}var Rd={dehydrated:null,treeContext:null,retryLane:0};function Od(e){return{baseLanes:e,cachePool:null,transitions:null}}function cp(e,t,s){var r=t.pendingProps,l=kt.current,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),ft(kt,l&1),e===null)return Td(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Jo(i,r,0,null),e=Dr(e,r,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Od(s),t.memoizedState=Rd,e):zu(t,i));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return sy(e,t,i,r,o,l,s);if(a){a=r.fallback,i=t.mode,l=e.child,o=l.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=sr(l,c),r.subtreeFlags=l.subtreeFlags&14680064),o!==null?a=sr(o,a):(a=Dr(a,i,s,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?Od(s):{baseLanes:i.baseLanes|s,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~s,t.memoizedState=Rd,r}return a=e.child,e=a.sibling,r=sr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function zu(e,t){return t=Jo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pi(e,t,s,r){return r!==null&&Tu(r),Al(t,e.child,null,s),e=zu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sy(e,t,s,r,l,a,i){if(s)return t.flags&256?(t.flags&=-257,r=Uc(Error(Q(422))),Pi(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,l=t.mode,r=Jo({mode:"visible",children:r.children},l,0,null),a=Dr(a,l,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Al(t,e.child,null,i),t.child.memoizedState=Od(i),t.memoizedState=Rd,a);if(!(t.mode&1))return Pi(e,t,i,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(Q(419)),r=Uc(a,r,void 0),Pi(e,t,i,r)}if(o=(i&e.childLanes)!==0,fn||o){if(r=Gt,r!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,Ds(e,l),Jn(r,e,l,-1))}return Ju(),r=Uc(Error(Q(421))),Pi(e,t,i,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=xy.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,Nn=Zs(l.nextSibling),wn=t,wt=!0,Kn=null,e!==null&&(Pn[An++]=ws,Pn[An++]=js,Pn[An++]=Mr,ws=e.id,js=e.overflow,Mr=t),t=zu(t,r.children),t.flags|=4096,t)}function Hf(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Dd(e.return,t,s)}function $c(e,t,s,r,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=l)}function dp(e,t,s){var r=t.pendingProps,l=r.revealOrder,a=r.tail;if(rn(e,t,r.children,s),r=kt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hf(e,s,t);else if(e.tag===19)Hf(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ft(kt,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(s=t.child,l=null;s!==null;)e=s.alternate,e!==null&&jo(e)===null&&(l=s),s=s.sibling;s=l,s===null?(l=t.child,t.child=null):(l=s.sibling,s.sibling=null),$c(t,!1,l,s,a);break;case"backwards":for(s=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&jo(e)===null){t.child=l;break}e=l.sibling,l.sibling=s,s=l,l=e}$c(t,!0,s,null,a);break;case"together":$c(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Is(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Pr|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,s=sr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=sr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ry(e,t,s){switch(t.tag){case 3:op(t),Pl();break;case 5:O0(t);break;case 1:pn(t.type)&&go(t);break;case 4:Au(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;ft(bo,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ft(kt,kt.current&1),t.flags|=128,null):s&t.child.childLanes?cp(e,t,s):(ft(kt,kt.current&1),e=Is(e,t,s),e!==null?e.sibling:null);ft(kt,kt.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return dp(e,t,s);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ft(kt,kt.current),r)break;return null;case 22:case 23:return t.lanes=0,ap(e,t,s)}return Is(e,t,s)}var up,Bd,mp,fp;up=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bd=function(){};mp=function(e,t,s,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,kr(ds.current);var a=null;switch(s){case"input":l=ld(e,l),r=ld(e,r),a=[];break;case"select":l=Et({},l,{value:void 0}),r=Et({},r,{value:void 0}),a=[];break;case"textarea":l=od(e,l),r=od(e,r),a=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=po)}dd(s,r);var i;s=null;for(d in l)if(!r.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!=null)if(d==="style"){var o=l[d];for(i in o)o.hasOwnProperty(i)&&(s||(s={}),s[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ra.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(o=l!=null?l[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(s||(s={}),s[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(s||(s={}),s[i]=c[i])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ra.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&gt("scroll",e),a||o===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};fp=function(e,t,s,r){s!==r&&(t.flags|=4)};function ha(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var l=e.child;l!==null;)s|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)s|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function ly(e,t,s){var r=t.pendingProps;switch(Eu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return pn(t.type)&&xo(),Zt(t),null;case 3:return r=t.stateNode,Rl(),vt(hn),vt(tn),Ou(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Mi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Kn!==null&&(Vd(Kn),Kn=null))),Bd(e,t),Zt(t),null;case 5:Ru(t);var l=kr(Ga.current);if(s=t.type,e!==null&&t.stateNode!=null)mp(e,t,s,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return Zt(t),null}if(e=kr(ds.current),Mi(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[os]=t,r[Va]=a,e=(t.mode&1)!==0,s){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(l=0;l<ya.length;l++)gt(ya[l],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":Qm(r,a),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},gt("invalid",r);break;case"textarea":Zm(r,a),gt("invalid",r)}dd(s,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ii(r.textContent,o,e),l=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ii(r.textContent,o,e),l=["children",""+o]):Ra.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&gt("scroll",r)}switch(s){case"input":wi(r),Xm(r,a,!0);break;case"textarea":wi(r),ef(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=po)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fh(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(s,{is:r.is}):(e=i.createElement(s),s==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,s),e[os]=t,e[Va]=r,up(e,t,!1,!1),t.stateNode=e;e:{switch(i=ud(s,r),s){case"dialog":gt("cancel",e),gt("close",e),l=r;break;case"iframe":case"object":case"embed":gt("load",e),l=r;break;case"video":case"audio":for(l=0;l<ya.length;l++)gt(ya[l],e);l=r;break;case"source":gt("error",e),l=r;break;case"img":case"image":case"link":gt("error",e),gt("load",e),l=r;break;case"details":gt("toggle",e),l=r;break;case"input":Qm(e,r),l=ld(e,r),gt("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=Et({},r,{value:void 0}),gt("invalid",e);break;case"textarea":Zm(e,r),l=od(e,r),gt("invalid",e);break;default:l=r}dd(s,l),o=l;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Wh(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zh(e,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Oa(e,c):typeof c=="number"&&Oa(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ra.hasOwnProperty(a)?c!=null&&a==="onScroll"&&gt("scroll",e):c!=null&&mu(e,a,c,i))}switch(s){case"input":wi(e),Xm(e,r,!1);break;case"textarea":wi(e),ef(e);break;case"option":r.value!=null&&e.setAttribute("value",""+rr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?kl(e,!!r.multiple,a,!1):r.defaultValue!=null&&kl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=po)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)fp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(s=kr(Ga.current),kr(ds.current),Mi(t)){if(r=t.stateNode,s=t.memoizedProps,r[os]=t,(a=r.nodeValue!==s)&&(e=wn,e!==null))switch(e.tag){case 3:Ii(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ii(r.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[os]=t,t.stateNode=r}return Zt(t),null;case 13:if(vt(kt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&Nn!==null&&t.mode&1&&!(t.flags&128))M0(),Pl(),t.flags|=98560,a=!1;else if(a=Mi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Q(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Q(317));a[os]=t}else Pl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zt(t),a=!1}else Kn!==null&&(Vd(Kn),Kn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||kt.current&1?zt===0&&(zt=3):Ju())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return Rl(),Bd(e,t),e===null&&Ha(t.stateNode.containerInfo),Zt(t),null;case 10:return Mu(t.type._context),Zt(t),null;case 17:return pn(t.type)&&xo(),Zt(t),null;case 19:if(vt(kt),a=t.memoizedState,a===null)return Zt(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)ha(a,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=jo(e),i!==null){for(t.flags|=128,ha(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)a=s,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ft(kt,kt.current&1|2),t.child}e=e.sibling}a.tail!==null&&At()>Bl&&(t.flags|=128,r=!0,ha(a,!1),t.lanes=4194304)}else{if(!r)if(e=jo(i),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),ha(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!wt)return Zt(t),null}else 2*At()-a.renderingStartTime>Bl&&s!==1073741824&&(t.flags|=128,r=!0,ha(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(s=a.last,s!==null?s.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=At(),t.sibling=null,s=kt.current,ft(kt,r?s&1|2:s&1),t):(Zt(t),null);case 22:case 23:return Gu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?bn&1073741824&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function ay(e,t){switch(Eu(t),t.tag){case 1:return pn(t.type)&&xo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rl(),vt(hn),vt(tn),Ou(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ru(t),null;case 13:if(vt(kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Pl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vt(kt),null;case 4:return Rl(),null;case 10:return Mu(t.type._context),null;case 22:case 23:return Gu(),null;case 24:return null;default:return null}}var Ai=!1,en=!1,iy=typeof WeakSet=="function"?WeakSet:Set,me=null;function jl(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Mt(e,t,r)}else s.current=null}function _d(e,t,s){try{s()}catch(r){Mt(e,t,r)}}var Wf=!1;function oy(e,t){if(Nd=mo,e=v0(),ku(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var l=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var i=0,o=-1,c=-1,d=0,x=0,w=e,g=null;t:for(;;){for(var b;w!==s||l!==0&&w.nodeType!==3||(o=i+l),w!==a||r!==0&&w.nodeType!==3||(c=i+r),w.nodeType===3&&(i+=w.nodeValue.length),(b=w.firstChild)!==null;)g=w,w=b;for(;;){if(w===e)break t;if(g===s&&++d===l&&(o=i),g===a&&++x===r&&(c=i),(b=w.nextSibling)!==null)break;w=g,g=w.parentNode}w=b}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(wd={focusedElem:e,selectionRange:s},mo=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,R=C.memoizedState,N=t.stateNode,f=N.getSnapshotBeforeUpdate(t.elementType===t.type?k:Wn(t.type,k),R);N.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(j){Mt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return C=Wf,Wf=!1,C}function Ca(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&_d(t,s,a)}l=l.next}while(l!==r)}}function Ko(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function Ud(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function hp(e){var t=e.alternate;t!==null&&(e.alternate=null,hp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[os],delete t[Va],delete t[kd],delete t[Wv],delete t[Vv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pp(e){return e.tag===5||e.tag===3||e.tag===4}function Vf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $d(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=po));else if(r!==4&&(e=e.child,e!==null))for($d(e,t,s),e=e.sibling;e!==null;)$d(e,t,s),e=e.sibling}function Fd(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fd(e,t,s),e=e.sibling;e!==null;)Fd(e,t,s),e=e.sibling}var Yt=null,Vn=!1;function _s(e,t,s){for(s=s.child;s!==null;)xp(e,t,s),s=s.sibling}function xp(e,t,s){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(_o,s)}catch{}switch(s.tag){case 5:en||jl(s,t);case 6:var r=Yt,l=Vn;Yt=null,_s(e,t,s),Yt=r,Vn=l,Yt!==null&&(Vn?(e=Yt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Yt.removeChild(s.stateNode));break;case 18:Yt!==null&&(Vn?(e=Yt,s=s.stateNode,e.nodeType===8?Pc(e.parentNode,s):e.nodeType===1&&Pc(e,s),$a(e)):Pc(Yt,s.stateNode));break;case 4:r=Yt,l=Vn,Yt=s.stateNode.containerInfo,Vn=!0,_s(e,t,s),Yt=r,Vn=l;break;case 0:case 11:case 14:case 15:if(!en&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&_d(s,t,i),l=l.next}while(l!==r)}_s(e,t,s);break;case 1:if(!en&&(jl(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(o){Mt(s,t,o)}_s(e,t,s);break;case 21:_s(e,t,s);break;case 22:s.mode&1?(en=(r=en)||s.memoizedState!==null,_s(e,t,s),en=r):_s(e,t,s);break;default:_s(e,t,s)}}function Kf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new iy),t.forEach(function(r){var l=gy.bind(null,e,r);s.has(r)||(s.add(r),r.then(l,l))})}}function Hn(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];try{var a=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Yt=o.stateNode,Vn=!1;break e;case 3:Yt=o.stateNode.containerInfo,Vn=!0;break e;case 4:Yt=o.stateNode.containerInfo,Vn=!0;break e}o=o.return}if(Yt===null)throw Error(Q(160));xp(a,i,l),Yt=null,Vn=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(d){Mt(l,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gp(t,e),t=t.sibling}function gp(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hn(t,e),ls(e),r&4){try{Ca(3,e,e.return),Ko(3,e)}catch(k){Mt(e,e.return,k)}try{Ca(5,e,e.return)}catch(k){Mt(e,e.return,k)}}break;case 1:Hn(t,e),ls(e),r&512&&s!==null&&jl(s,s.return);break;case 5:if(Hn(t,e),ls(e),r&512&&s!==null&&jl(s,s.return),e.flags&32){var l=e.stateNode;try{Oa(l,"")}catch(k){Mt(e,e.return,k)}}if(r&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=s!==null?s.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Uh(l,a),ud(o,i);var d=ud(o,a);for(i=0;i<c.length;i+=2){var x=c[i],w=c[i+1];x==="style"?Wh(l,w):x==="dangerouslySetInnerHTML"?zh(l,w):x==="children"?Oa(l,w):mu(l,x,w,d)}switch(o){case"input":ad(l,a);break;case"textarea":$h(l,a);break;case"select":var g=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?kl(l,!!a.multiple,b,!1):g!==!!a.multiple&&(a.defaultValue!=null?kl(l,!!a.multiple,a.defaultValue,!0):kl(l,!!a.multiple,a.multiple?[]:"",!1))}l[Va]=a}catch(k){Mt(e,e.return,k)}}break;case 6:if(Hn(t,e),ls(e),r&4){if(e.stateNode===null)throw Error(Q(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(k){Mt(e,e.return,k)}}break;case 3:if(Hn(t,e),ls(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{$a(t.containerInfo)}catch(k){Mt(e,e.return,k)}break;case 4:Hn(t,e),ls(e);break;case 13:Hn(t,e),ls(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(Vu=At())),r&4&&Kf(e);break;case 22:if(x=s!==null&&s.memoizedState!==null,e.mode&1?(en=(d=en)||x,Hn(t,e),en=d):Hn(t,e),ls(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!x&&e.mode&1)for(me=e,x=e.child;x!==null;){for(w=me=x;me!==null;){switch(g=me,b=g.child,g.tag){case 0:case 11:case 14:case 15:Ca(4,g,g.return);break;case 1:jl(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,s=g.return;try{t=r,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(k){Mt(r,s,k)}}break;case 5:jl(g,g.return);break;case 22:if(g.memoizedState!==null){Jf(w);continue}}b!==null?(b.return=g,me=b):Jf(w)}x=x.sibling}e:for(x=null,w=e;;){if(w.tag===5){if(x===null){x=w;try{l=w.stateNode,d?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=w.stateNode,c=w.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Hh("display",i))}catch(k){Mt(e,e.return,k)}}}else if(w.tag===6){if(x===null)try{w.stateNode.nodeValue=d?"":w.memoizedProps}catch(k){Mt(e,e.return,k)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;x===w&&(x=null),w=w.return}x===w&&(x=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Hn(t,e),ls(e),r&4&&Kf(e);break;case 21:break;default:Hn(t,e),ls(e)}}function ls(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(pp(s)){var r=s;break e}s=s.return}throw Error(Q(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Oa(l,""),r.flags&=-33);var a=Vf(e);Fd(e,a,l);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Vf(e);$d(e,o,i);break;default:throw Error(Q(161))}}catch(c){Mt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cy(e,t,s){me=e,vp(e)}function vp(e,t,s){for(var r=(e.mode&1)!==0;me!==null;){var l=me,a=l.child;if(l.tag===22&&r){var i=l.memoizedState!==null||Ai;if(!i){var o=l.alternate,c=o!==null&&o.memoizedState!==null||en;o=Ai;var d=en;if(Ai=i,(en=c)&&!d)for(me=l;me!==null;)i=me,c=i.child,i.tag===22&&i.memoizedState!==null?Yf(l):c!==null?(c.return=i,me=c):Yf(l);for(;a!==null;)me=a,vp(a),a=a.sibling;me=l,Ai=o,en=d}Gf(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,me=a):Gf(e)}}function Gf(e){for(;me!==null;){var t=me;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:en||Ko(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!en)if(s===null)r.componentDidMount();else{var l=t.elementType===t.type?s.memoizedProps:Wn(t.type,s.memoizedProps);r.componentDidUpdate(l,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Mf(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Mf(t,i,s)}break;case 5:var o=t.stateNode;if(s===null&&t.flags&4){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var x=d.memoizedState;if(x!==null){var w=x.dehydrated;w!==null&&$a(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}en||t.flags&512&&Ud(t)}catch(g){Mt(t,t.return,g)}}if(t===e){me=null;break}if(s=t.sibling,s!==null){s.return=t.return,me=s;break}me=t.return}}function Jf(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var s=t.sibling;if(s!==null){s.return=t.return,me=s;break}me=t.return}}function Yf(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ko(4,t)}catch(c){Mt(t,s,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(c){Mt(t,l,c)}}var a=t.return;try{Ud(t)}catch(c){Mt(t,a,c)}break;case 5:var i=t.return;try{Ud(t)}catch(c){Mt(t,i,c)}}}catch(c){Mt(t,t.return,c)}if(t===e){me=null;break}var o=t.sibling;if(o!==null){o.return=t.return,me=o;break}me=t.return}}var dy=Math.ceil,Co=Ms.ReactCurrentDispatcher,Hu=Ms.ReactCurrentOwner,On=Ms.ReactCurrentBatchConfig,qe=0,Gt=null,Ot=null,qt=0,bn=0,Sl=ir(0),zt=0,Qa=null,Pr=0,Go=0,Wu=0,Ea=null,mn=null,Vu=0,Bl=1/0,bs=null,Eo=!1,zd=null,tr=null,Ri=!1,Js=null,To=0,Ta=0,Hd=null,Qi=-1,Xi=0;function ln(){return qe&6?At():Qi!==-1?Qi:Qi=At()}function nr(e){return e.mode&1?qe&2&&qt!==0?qt&-qt:Gv.transition!==null?(Xi===0&&(Xi=n0()),Xi):(e=nt,e!==0||(e=window.event,e=e===void 0?16:c0(e.type)),e):1}function Jn(e,t,s,r){if(50<Ta)throw Ta=0,Hd=null,Error(Q(185));ni(e,s,r),(!(qe&2)||e!==Gt)&&(e===Gt&&(!(qe&2)&&(Go|=s),zt===4&&Hs(e,qt)),xn(e,r),s===1&&qe===0&&!(t.mode&1)&&(Bl=At()+500,Ho&&or()))}function xn(e,t){var s=e.callbackNode;Gg(e,t);var r=uo(e,e===Gt?qt:0);if(r===0)s!==null&&sf(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&sf(s),t===1)e.tag===0?Kv(qf.bind(null,e)):T0(qf.bind(null,e)),zv(function(){!(qe&6)&&or()}),s=null;else{switch(s0(r)){case 1:s=gu;break;case 4:s=e0;break;case 16:s=co;break;case 536870912:s=t0;break;default:s=co}s=Cp(s,yp.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function yp(e,t){if(Qi=-1,Xi=0,qe&6)throw Error(Q(327));var s=e.callbackNode;if(Il()&&e.callbackNode!==s)return null;var r=uo(e,e===Gt?qt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Do(e,r);else{t=r;var l=qe;qe|=2;var a=Np();(Gt!==e||qt!==t)&&(bs=null,Bl=At()+500,Tr(e,t));do try{fy();break}catch(o){bp(e,o)}while(!0);Iu(),Co.current=a,qe=l,Ot!==null?t=0:(Gt=null,qt=0,t=zt)}if(t!==0){if(t===2&&(l=xd(e),l!==0&&(r=l,t=Wd(e,l))),t===1)throw s=Qa,Tr(e,0),Hs(e,r),xn(e,At()),s;if(t===6)Hs(e,r);else{if(l=e.current.alternate,!(r&30)&&!uy(l)&&(t=Do(e,r),t===2&&(a=xd(e),a!==0&&(r=a,t=Wd(e,a))),t===1))throw s=Qa,Tr(e,0),Hs(e,r),xn(e,At()),s;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:Nr(e,mn,bs);break;case 3:if(Hs(e,r),(r&130023424)===r&&(t=Vu+500-At(),10<t)){if(uo(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){ln(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Sd(Nr.bind(null,e,mn,bs),t);break}Nr(e,mn,bs);break;case 4:if(Hs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var i=31-Gn(r);a=1<<i,i=t[i],i>l&&(l=i),r&=~a}if(r=l,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dy(r/1960))-r,10<r){e.timeoutHandle=Sd(Nr.bind(null,e,mn,bs),r);break}Nr(e,mn,bs);break;case 5:Nr(e,mn,bs);break;default:throw Error(Q(329))}}}return xn(e,At()),e.callbackNode===s?yp.bind(null,e):null}function Wd(e,t){var s=Ea;return e.current.memoizedState.isDehydrated&&(Tr(e,t).flags|=256),e=Do(e,t),e!==2&&(t=mn,mn=s,t!==null&&Vd(t)),e}function Vd(e){mn===null?mn=e:mn.push.apply(mn,e)}function uy(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var l=s[r],a=l.getSnapshot;l=l.value;try{if(!Yn(a(),l))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hs(e,t){for(t&=~Wu,t&=~Go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Gn(t),r=1<<s;e[s]=-1,t&=~r}}function qf(e){if(qe&6)throw Error(Q(327));Il();var t=uo(e,0);if(!(t&1))return xn(e,At()),null;var s=Do(e,t);if(e.tag!==0&&s===2){var r=xd(e);r!==0&&(t=r,s=Wd(e,r))}if(s===1)throw s=Qa,Tr(e,0),Hs(e,t),xn(e,At()),s;if(s===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nr(e,mn,bs),xn(e,At()),null}function Ku(e,t){var s=qe;qe|=1;try{return e(t)}finally{qe=s,qe===0&&(Bl=At()+500,Ho&&or())}}function Ar(e){Js!==null&&Js.tag===0&&!(qe&6)&&Il();var t=qe;qe|=1;var s=On.transition,r=nt;try{if(On.transition=null,nt=1,e)return e()}finally{nt=r,On.transition=s,qe=t,!(qe&6)&&or()}}function Gu(){bn=Sl.current,vt(Sl)}function Tr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Fv(s)),Ot!==null)for(s=Ot.return;s!==null;){var r=s;switch(Eu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xo();break;case 3:Rl(),vt(hn),vt(tn),Ou();break;case 5:Ru(r);break;case 4:Rl();break;case 13:vt(kt);break;case 19:vt(kt);break;case 10:Mu(r.type._context);break;case 22:case 23:Gu()}s=s.return}if(Gt=e,Ot=e=sr(e.current,null),qt=bn=t,zt=0,Qa=null,Wu=Go=Pr=0,mn=Ea=null,Sr!==null){for(t=0;t<Sr.length;t++)if(s=Sr[t],r=s.interleaved,r!==null){s.interleaved=null;var l=r.next,a=s.pending;if(a!==null){var i=a.next;a.next=l,r.next=i}s.pending=r}Sr=null}return e}function bp(e,t){do{var s=Ot;try{if(Iu(),Ji.current=ko,So){for(var r=Ct.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}So=!1}if(Lr=0,Kt=Ft=Ct=null,ka=!1,Ja=0,Hu.current=null,s===null||s.return===null){zt=1,Qa=t,Ot=null;break}e:{var a=e,i=s.return,o=s,c=t;if(t=qt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,x=o,w=x.tag;if(!(x.mode&1)&&(w===0||w===11||w===15)){var g=x.alternate;g?(x.updateQueue=g.updateQueue,x.memoizedState=g.memoizedState,x.lanes=g.lanes):(x.updateQueue=null,x.memoizedState=null)}var b=Bf(i);if(b!==null){b.flags&=-257,_f(b,i,o,a,t),b.mode&1&&Of(a,d,t),t=b,c=d;var C=t.updateQueue;if(C===null){var k=new Set;k.add(c),t.updateQueue=k}else C.add(c);break e}else{if(!(t&1)){Of(a,d,t),Ju();break e}c=Error(Q(426))}}else if(wt&&o.mode&1){var R=Bf(i);if(R!==null){!(R.flags&65536)&&(R.flags|=256),_f(R,i,o,a,t),Tu(Ol(c,o));break e}}a=c=Ol(c,o),zt!==4&&(zt=2),Ea===null?Ea=[a]:Ea.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var N=sp(a,c,t);If(a,N);break e;case 1:o=c;var f=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(tr===null||!tr.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=rp(a,o,t);If(a,j);break e}}a=a.return}while(a!==null)}jp(s)}catch(D){t=D,Ot===s&&s!==null&&(Ot=s=s.return);continue}break}while(!0)}function Np(){var e=Co.current;return Co.current=ko,e===null?ko:e}function Ju(){(zt===0||zt===3||zt===2)&&(zt=4),Gt===null||!(Pr&268435455)&&!(Go&268435455)||Hs(Gt,qt)}function Do(e,t){var s=qe;qe|=2;var r=Np();(Gt!==e||qt!==t)&&(bs=null,Tr(e,t));do try{my();break}catch(l){bp(e,l)}while(!0);if(Iu(),qe=s,Co.current=r,Ot!==null)throw Error(Q(261));return Gt=null,qt=0,zt}function my(){for(;Ot!==null;)wp(Ot)}function fy(){for(;Ot!==null&&!_g();)wp(Ot)}function wp(e){var t=kp(e.alternate,e,bn);e.memoizedProps=e.pendingProps,t===null?jp(e):Ot=t,Hu.current=null}function jp(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=ay(s,t),s!==null){s.flags&=32767,Ot=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zt=6,Ot=null;return}}else if(s=ly(s,t,bn),s!==null){Ot=s;return}if(t=t.sibling,t!==null){Ot=t;return}Ot=t=e}while(t!==null);zt===0&&(zt=5)}function Nr(e,t,s){var r=nt,l=On.transition;try{On.transition=null,nt=1,hy(e,t,s,r)}finally{On.transition=l,nt=r}return null}function hy(e,t,s,r){do Il();while(Js!==null);if(qe&6)throw Error(Q(327));s=e.finishedWork;var l=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(Jg(e,a),e===Gt&&(Ot=Gt=null,qt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ri||(Ri=!0,Cp(co,function(){return Il(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=On.transition,On.transition=null;var i=nt;nt=1;var o=qe;qe|=4,Hu.current=null,oy(e,s),gp(s,e),Av(wd),mo=!!Nd,wd=Nd=null,e.current=s,cy(s),Ug(),qe=o,nt=i,On.transition=a}else e.current=s;if(Ri&&(Ri=!1,Js=e,To=l),a=e.pendingLanes,a===0&&(tr=null),zg(s.stateNode),xn(e,At()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)l=t[s],r(l.value,{componentStack:l.stack,digest:l.digest});if(Eo)throw Eo=!1,e=zd,zd=null,e;return To&1&&e.tag!==0&&Il(),a=e.pendingLanes,a&1?e===Hd?Ta++:(Ta=0,Hd=e):Ta=0,or(),null}function Il(){if(Js!==null){var e=s0(To),t=On.transition,s=nt;try{if(On.transition=null,nt=16>e?16:e,Js===null)var r=!1;else{if(e=Js,Js=null,To=0,qe&6)throw Error(Q(331));var l=qe;for(qe|=4,me=e.current;me!==null;){var a=me,i=a.child;if(me.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(me=d;me!==null;){var x=me;switch(x.tag){case 0:case 11:case 15:Ca(8,x,a)}var w=x.child;if(w!==null)w.return=x,me=w;else for(;me!==null;){x=me;var g=x.sibling,b=x.return;if(hp(x),x===d){me=null;break}if(g!==null){g.return=b,me=g;break}me=b}}}var C=a.alternate;if(C!==null){var k=C.child;if(k!==null){C.child=null;do{var R=k.sibling;k.sibling=null,k=R}while(k!==null)}}me=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,me=i;else e:for(;me!==null;){if(a=me,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ca(9,a,a.return)}var N=a.sibling;if(N!==null){N.return=a.return,me=N;break e}me=a.return}}var f=e.current;for(me=f;me!==null;){i=me;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,me=y;else e:for(i=f;me!==null;){if(o=me,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ko(9,o)}}catch(D){Mt(o,o.return,D)}if(o===i){me=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,me=j;break e}me=o.return}}if(qe=l,or(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(_o,e)}catch{}r=!0}return r}finally{nt=s,On.transition=t}}return!1}function Qf(e,t,s){t=Ol(s,t),t=sp(e,t,1),e=er(e,t,1),t=ln(),e!==null&&(ni(e,1,t),xn(e,t))}function Mt(e,t,s){if(e.tag===3)Qf(e,e,s);else for(;t!==null;){if(t.tag===3){Qf(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){e=Ol(s,e),e=rp(t,e,1),t=er(t,e,1),e=ln(),t!==null&&(ni(t,1,e),xn(t,e));break}}t=t.return}}function py(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=ln(),e.pingedLanes|=e.suspendedLanes&s,Gt===e&&(qt&s)===s&&(zt===4||zt===3&&(qt&130023424)===qt&&500>At()-Vu?Tr(e,0):Wu|=s),xn(e,t)}function Sp(e,t){t===0&&(e.mode&1?(t=ki,ki<<=1,!(ki&130023424)&&(ki=4194304)):t=1);var s=ln();e=Ds(e,t),e!==null&&(ni(e,t,s),xn(e,s))}function xy(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Sp(e,s)}function gy(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(s=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),Sp(e,s)}var kp;kp=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||hn.current)fn=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return fn=!1,ry(e,t,s);fn=!!(e.flags&131072)}else fn=!1,wt&&t.flags&1048576&&D0(t,yo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qi(e,t),e=t.pendingProps;var l=Ll(t,tn.current);Dl(t,s),l=_u(null,t,r,e,l,s);var a=Uu();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pn(r)?(a=!0,go(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Pu(t),l.updater=Vo,t.stateNode=l,l._reactInternals=t,Md(t,r,e,s),t=Ad(null,t,r,!0,a,s)):(t.tag=0,wt&&a&&Cu(t),rn(null,t,l,s),t=t.child),t;case 16:r=t.elementType;e:{switch(qi(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=yy(r),e=Wn(r,e),l){case 0:t=Pd(null,t,r,e,s);break e;case 1:t=Ff(null,t,r,e,s);break e;case 11:t=Uf(null,t,r,e,s);break e;case 14:t=$f(null,t,r,Wn(r.type,e),s);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Wn(r,l),Pd(e,t,r,l,s);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Wn(r,l),Ff(e,t,r,l,s);case 3:e:{if(op(t),e===null)throw Error(Q(387));r=t.pendingProps,a=t.memoizedState,l=a.element,R0(e,t),wo(t,r,null,s);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=Ol(Error(Q(423)),t),t=zf(e,t,r,s,l);break e}else if(r!==l){l=Ol(Error(Q(424)),t),t=zf(e,t,r,s,l);break e}else for(Nn=Zs(t.stateNode.containerInfo.firstChild),wn=t,wt=!0,Kn=null,s=P0(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Pl(),r===l){t=Is(e,t,s);break e}rn(e,t,r,s)}t=t.child}return t;case 5:return O0(t),e===null&&Td(t),r=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,jd(r,l)?i=null:a!==null&&jd(r,a)&&(t.flags|=32),ip(e,t),rn(e,t,i,s),t.child;case 6:return e===null&&Td(t),null;case 13:return cp(e,t,s);case 4:return Au(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Al(t,null,r,s):rn(e,t,r,s),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Wn(r,l),Uf(e,t,r,l,s);case 7:return rn(e,t,t.pendingProps,s),t.child;case 8:return rn(e,t,t.pendingProps.children,s),t.child;case 12:return rn(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,ft(bo,r._currentValue),r._currentValue=i,a!==null)if(Yn(a.value,i)){if(a.children===l.children&&!hn.current){t=Is(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){i=a.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Cs(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var x=d.pending;x===null?c.next=c:(c.next=x.next,x.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Dd(a.return,s,t),o.lanes|=s;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(Q(341));i.lanes|=s,o=i.alternate,o!==null&&(o.lanes|=s),Dd(i,s,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}rn(e,t,l.children,s),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Dl(t,s),l=Bn(l),r=r(l),t.flags|=1,rn(e,t,r,s),t.child;case 14:return r=t.type,l=Wn(r,t.pendingProps),l=Wn(r.type,l),$f(e,t,r,l,s);case 15:return lp(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Wn(r,l),qi(e,t),t.tag=1,pn(r)?(e=!0,go(t)):e=!1,Dl(t,s),np(t,r,l),Md(t,r,l,s),Ad(null,t,r,!0,e,s);case 19:return dp(e,t,s);case 22:return ap(e,t,s)}throw Error(Q(156,t.tag))};function Cp(e,t){return Zh(e,t)}function vy(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,t,s,r){return new vy(e,t,s,r)}function Yu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yy(e){if(typeof e=="function")return Yu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hu)return 11;if(e===pu)return 14}return 2}function sr(e,t){var s=e.alternate;return s===null?(s=Rn(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Zi(e,t,s,r,l,a){var i=2;if(r=e,typeof e=="function")Yu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case hl:return Dr(s.children,l,a,t);case fu:i=8,l|=8;break;case td:return e=Rn(12,s,t,l|2),e.elementType=td,e.lanes=a,e;case nd:return e=Rn(13,s,t,l),e.elementType=nd,e.lanes=a,e;case sd:return e=Rn(19,s,t,l),e.elementType=sd,e.lanes=a,e;case Oh:return Jo(s,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ah:i=10;break e;case Rh:i=9;break e;case hu:i=11;break e;case pu:i=14;break e;case $s:i=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Rn(i,s,t,l),t.elementType=e,t.type=r,t.lanes=a,t}function Dr(e,t,s,r){return e=Rn(7,e,r,t),e.lanes=s,e}function Jo(e,t,s,r){return e=Rn(22,e,r,t),e.elementType=Oh,e.lanes=s,e.stateNode={isHidden:!1},e}function Fc(e,t,s){return e=Rn(6,e,null,t),e.lanes=s,e}function zc(e,t,s){return t=Rn(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function by(e,t,s,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wc(0),this.expirationTimes=wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wc(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function qu(e,t,s,r,l,a,i,o,c){return e=new by(e,t,s,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Rn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pu(a),e}function Ny(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function Ep(e){if(!e)return lr;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var s=e.type;if(pn(s))return E0(e,s,t)}return t}function Tp(e,t,s,r,l,a,i,o,c){return e=qu(s,r,!0,e,l,a,i,o,c),e.context=Ep(null),s=e.current,r=ln(),l=nr(s),a=Cs(r,l),a.callback=t??null,er(s,a,l),e.current.lanes=l,ni(e,l,r),xn(e,r),e}function Yo(e,t,s,r){var l=t.current,a=ln(),i=nr(l);return s=Ep(s),t.context===null?t.context=s:t.pendingContext=s,t=Cs(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=er(l,t,i),e!==null&&(Jn(e,l,i,a),Gi(e,l,i)),i}function Io(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Qu(e,t){Xf(e,t),(e=e.alternate)&&Xf(e,t)}function wy(){return null}var Dp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}qo.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));Yo(e,t,null,null)};qo.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ar(function(){Yo(null,e,null,null)}),t[Ts]=null}};function qo(e){this._internalRoot=e}qo.prototype.unstable_scheduleHydration=function(e){if(e){var t=a0();e={blockedOn:null,target:e,priority:t};for(var s=0;s<zs.length&&t!==0&&t<zs[s].priority;s++);zs.splice(s,0,e),s===0&&o0(e)}};function Zu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zf(){}function jy(e,t,s,r,l){if(l){if(typeof r=="function"){var a=r;r=function(){var d=Io(i);a.call(d)}}var i=Tp(t,r,e,0,null,!1,!1,"",Zf);return e._reactRootContainer=i,e[Ts]=i.current,Ha(e.nodeType===8?e.parentNode:e),Ar(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var o=r;r=function(){var d=Io(c);o.call(d)}}var c=qu(e,0,!1,null,null,!1,!1,"",Zf);return e._reactRootContainer=c,e[Ts]=c.current,Ha(e.nodeType===8?e.parentNode:e),Ar(function(){Yo(t,c,s,r)}),c}function Xo(e,t,s,r,l){var a=s._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var o=l;l=function(){var c=Io(i);o.call(c)}}Yo(t,i,e,l)}else i=jy(s,t,e,l,r);return Io(i)}r0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=va(t.pendingLanes);s!==0&&(vu(t,s|1),xn(t,At()),!(qe&6)&&(Bl=At()+500,or()))}break;case 13:Ar(function(){var r=Ds(e,1);if(r!==null){var l=ln();Jn(r,e,1,l)}}),Qu(e,1)}};yu=function(e){if(e.tag===13){var t=Ds(e,134217728);if(t!==null){var s=ln();Jn(t,e,134217728,s)}Qu(e,134217728)}};l0=function(e){if(e.tag===13){var t=nr(e),s=Ds(e,t);if(s!==null){var r=ln();Jn(s,e,t,r)}Qu(e,t)}};a0=function(){return nt};i0=function(e,t){var s=nt;try{return nt=e,t()}finally{nt=s}};fd=function(e,t,s){switch(t){case"input":if(ad(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var l=zo(r);if(!l)throw Error(Q(90));_h(r),ad(r,l)}}}break;case"textarea":$h(e,s);break;case"select":t=s.value,t!=null&&kl(e,!!s.multiple,t,!1)}};Gh=Ku;Jh=Ar;var Sy={usingClientEntryPoint:!1,Events:[ri,vl,zo,Vh,Kh,Ku]},pa={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ky={bundleType:pa.bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qh(e),e===null?null:e.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||wy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oi.isDisabled&&Oi.supportsFiber)try{_o=Oi.inject(ky),cs=Oi}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sy;Sn.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zu(t))throw Error(Q(200));return Ny(e,t,null,s)};Sn.createRoot=function(e,t){if(!Zu(e))throw Error(Q(299));var s=!1,r="",l=Dp;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=qu(e,1,!1,null,null,s,!1,r,l),e[Ts]=t.current,Ha(e.nodeType===8?e.parentNode:e),new Xu(t)};Sn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=Qh(t),e=e===null?null:e.stateNode,e};Sn.flushSync=function(e){return Ar(e)};Sn.hydrate=function(e,t,s){if(!Qo(t))throw Error(Q(200));return Xo(null,e,t,!0,s)};Sn.hydrateRoot=function(e,t,s){if(!Zu(e))throw Error(Q(405));var r=s!=null&&s.hydratedSources||null,l=!1,a="",i=Dp;if(s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(i=s.onRecoverableError)),t=Tp(t,null,e,1,s??null,l,!1,a,i),e[Ts]=t.current,Ha(e),r)for(e=0;e<r.length;e++)s=r[e],l=s._getVersion,l=l(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,l]:t.mutableSourceEagerHydrationData.push(s,l);return new qo(t)};Sn.render=function(e,t,s){if(!Qo(t))throw Error(Q(200));return Xo(null,e,t,!1,s)};Sn.unmountComponentAtNode=function(e){if(!Qo(e))throw Error(Q(40));return e._reactRootContainer?(Ar(function(){Xo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ts]=null})}),!0):!1};Sn.unstable_batchedUpdates=Ku;Sn.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Qo(s))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Xo(e,t,s,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function Ip(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ip)}catch(e){console.error(e)}}Ip(),Ih.exports=Sn;var Mp=Ih.exports,eh=Mp;Zc.createRoot=eh.createRoot,Zc.hydrateRoot=eh.hydrateRoot;/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lp=(...e)=>e.filter((t,s,r)=>!!t&&r.indexOf(t)===s).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ey={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:l="",children:a,iconNode:i,...o},c)=>u.createElement("svg",{ref:c,...Ey,width:t,height:t,stroke:e,strokeWidth:r?Number(s)*24/Number(t):s,className:Lp("lucide",l),...o},[...i.map(([d,x])=>u.createElement(d,x)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=(e,t)=>{const s=u.forwardRef(({className:r,...l},a)=>u.createElement(Ty,{ref:a,iconNode:t,className:Lp(`lucide-${Cy(e)}`,r),...l}));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Lt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Lt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=Lt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=Lt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Lt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Lt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Lt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Lt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Lt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Lt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Lt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Lt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=Lt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Lt("PoundSterling",[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Lt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Lt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Lt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Lt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Lt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=Lt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Lt("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Lt("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),Rp=e=>`ndn_online_quota_${e}`;function to(e=new Date){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),s=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-s);const r=new Date(Date.UTC(t.getUTCFullYear(),0,1)),l=Math.ceil(((t.getTime()-r.getTime())/864e5+1)/7),a=String(l).padStart(2,"0");return`${t.getUTCFullYear()}-${a}`}function Op(e){try{const t=localStorage.getItem(Rp(e));if(!t)return{week:to(),used:0};const s=JSON.parse(t),r=to();return!s.week||s.week!==r?{week:r,used:0}:{week:String(s.week),used:Number(s.used)||0}}catch{return{week:to(),used:0}}}function Wy(e,t){try{localStorage.setItem(Rp(e),JSON.stringify(t))}catch{}}function nh(e,t=3){const s=to(),r=Op(e),l={week:s,used:(r.week===s?r.used:0)+1};return Wy(e,l),l}function Bp(e,t=3){const s=Op(e);return Math.max(0,t-(s.used||0))}const _p="ndn:isAdmin:v1";function Up(){try{const e=localStorage.getItem(_p);return e?JSON.parse(e):{}}catch{return{}}}function Vy(e,t){try{const s=Up();s[(e||"").toLowerCase()]={v:t,ts:Date.now()},localStorage.setItem(_p,JSON.stringify(s))}catch{}}async function Ky(e){var l,a;const t=String(e||"").toLowerCase();if(!t)return!1;try{const i=String(((a=(l=import.meta)==null?void 0:l.env)==null?void 0:a.VITE_OWNER_EMAIL)||"").toLowerCase();if(i&&t===i)return!0}catch{}if(t==="daviesfamily108@gmail.com")return!0;try{const i=localStorage.getItem("ndn:forceAdmin");if(i==="1"||i==="true")return!0}catch{}const r=Up()[t];if(r&&Date.now()-r.ts<5*60*1e3)return!!r.v;try{const o=await(await fetch(`/api/admins/check?email=${encodeURIComponent(t)}`)).json().catch(()=>({})),c=!!(o!=null&&o.isAdmin);return Vy(t,c),c}catch{return!!(r!=null&&r.v)}}function em(e){const t=String(e||"").toLowerCase(),[s,r]=u.useState(!1);return u.useEffect(()=>{var a,i;let l=!0;if(!t){r(!1);return}try{const o=String(((i=(a=import.meta)==null?void 0:a.env)==null?void 0:i.VITE_OWNER_EMAIL)||"").toLowerCase(),c=(()=>{try{const d=localStorage.getItem("ndn:forceAdmin");return d==="1"||d==="true"}catch{return!1}})();if(o&&t===o){r(!0);return}if(c){r(!0);return}}catch{}if(t==="daviesfamily108@gmail.com"){r(!0);return}return Ky(t).then(o=>{l&&r(!!o)}),()=>{l=!1}},[t]),s}const Wc={},Gy=5,Jy={GBP:1,EUR:1.16,USD:1.26,AUD:1.92,NZD:2.08,CAD:1.73};function $p(e,t=Gy){const s=(e||"GBP").toUpperCase(),r=Jy[s]??1,l=t*r;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:s}).format(l)}catch{return`${s} ${l.toFixed(2)}`}}function Fp(){try{const e=new Intl.NumberFormat().resolvedOptions(),t=String(e.locale).toLowerCase();return t.includes("-gb")?"GBP":t.includes("-ie")||t.includes("-de")||t.includes("-fr")||t.includes("-es")||t.includes("-it")||t.includes("-nl")?"EUR":t.includes("-us")?"USD":t.includes("-au")?"AUD":t.includes("-nz")?"NZD":t.includes("-ca")?"CAD":"GBP"}catch{return"GBP"}}const Yy=(Wc==null?void 0:Wc.VITE_DISCORD_INVITE_URL)||"https://discord.gg/bx4KEF8U";function qy(e){const t=[{key:"score",label:"Home",icon:_y},{key:"online",label:"Online",icon:Gd},{key:"offline",label:"Offline",icon:eo},{key:"tournaments",label:"Tournaments",icon:eo},{key:"friends",label:"Friends",icon:Gd},{key:"stats",label:"Stats",icon:eo},{key:"calibrate",label:"Calibrate",icon:Iy},{key:"settings",label:"Settings",icon:Ap}];return e!=null&&e.fullAccess||t.push({key:"fullaccess",label:"PREMIUM $",icon:Uy}),t}function zp({active:e,onChange:t,user:s,className:r}){const l=qy(s),a=em(s==null?void 0:s.email);if(a&&!l.some(d=>d.key==="admin")){const d=l.findIndex(w=>w.key==="settings"),x={key:"admin",label:"Admin",icon:Ap};d>=0?l.splice(d,0,x):l.push(x)}const[i,o]=u.useState(!1),c=s!=null&&s.username&&!(s!=null&&s.fullAccess)?Bp(s.username):1/0;return u.useEffect(()=>{if(!i)return;const d=x=>{(x.key==="Escape"||x.key==="Enter")&&o(!1)};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[i]),n.jsxs("aside",{className:`${s!=null&&s.fullAccess?"premium-sidebar":""} sidebar glass ${r?"":"w-60"} p-2 sm:p-4 rounded-2xl ${r??"hidden sm:flex"} flex-col gap-2 overflow-y-auto overflow-x-hidden ${r?"":"fixed top-2 bottom-2 sm:top-4 sm:bottom-4"}`,children:[l.map(({key:d,label:x,icon:w})=>d==="admin"&&!a?null:n.jsxs("button",{className:`tab whitespace-nowrap flex items-center justify-start gap-3 ${e===d?"tab--active":"tab--inactive"} `,onClick:()=>t(d),title:x,style:{fontWeight:700,fontSize:"1.1rem",color:e===d?"#fff":"#E5E7EB",letterSpacing:"0.02em"},children:[n.jsx(w,{className:"w-6 h-6"}),n.jsxs("span",{className:"flex items-center gap-2",children:[x,d==="online"&&!(s!=null&&s.fullAccess)&&c<=0&&n.jsxs("span",{title:"Weekly free games used",className:"inline-flex items-center gap-1 text-[0.65rem] px-2 py-0.5 rounded-full bg-rose-600 text-white",children:[n.jsx(Pp,{className:"w-3 h-3"}),"Locked"]})]})]},d)),n.jsxs("button",{className:"tab tab--compact whitespace-nowrap flex items-center justify-start gap-3 bg-[#5865F2] text-white mt-2",onClick:()=>o(!0),title:"BullseyeDartsLeague",style:{fontWeight:700,fontSize:"1.1rem",letterSpacing:"0.02em"},children:[n.jsx(Kd,{className:"w-6 h-6"}),n.jsx("span",{className:"truncate",children:"BullseyeDartsLeague"})]}),i&&Mp.createPortal(n.jsxs("div",{className:"fixed inset-0 z-[1000]",children:[n.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>o(!1),onTouchStart:()=>o(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{role:"dialog","aria-modal":"true",className:"card max-w-md w-full relative text-left p-6 rounded-xl",children:[n.jsx("button",{className:"absolute -top-3 -right-3 btn px-3 py-1","aria-label":"Close",onClick:()=>o(!1),children:""}),n.jsxs("h3",{className:"text-xl font-bold mb-2 flex items-center gap-2 text-[#8ea1e1]",children:[n.jsx(Kd,{className:"w-6 h-6"})," BullseyeDartsLeague"]}),n.jsx("div",{className:"mb-4 text-lg font-semibold",children:"Join this fantastic Online Darts League with divisions and other cool stuff included"}),n.jsx("a",{href:Yy,target:"_blank",rel:"noopener noreferrer",className:"btn bg-[#5865F2] text-white w-full font-bold text-lg",children:"Join Discord"})]})})]}),document.body)]})}function Ge(e){return(e??0).toFixed(2)}const Hp=e=>`ndn_stats_${e}`,tm=e=>`ndn_stats_ts_${e}`,Qy=e=>`ndn_stats_daily_${e}`;function un(e){try{const t=localStorage.getItem(Hp(e));if(!t)return{darts:0,scored:0};const s=JSON.parse(t);return{darts:Number(s.darts)||0,scored:Number(s.scored)||0,fnDarts:Number(s.fnDarts)||0,fnScored:Number(s.fnScored)||0,best3:typeof s.best3=="number"?s.best3:0,worst3:typeof s.worst3=="number"?s.worst3:0,bestLegDarts:typeof s.bestLegDarts=="number"?s.bestLegDarts:0,bestCheckout:typeof s.bestCheckout=="number"?s.bestCheckout:0,worstLegDarts:typeof s.worstLegDarts=="number"?s.worstLegDarts:0,bestFNAvg:typeof s.bestFNAvg=="number"?s.bestFNAvg:0,worstFNAvg:typeof s.worstFNAvg=="number"?s.worstFNAvg:0}}catch{return{darts:0,scored:0}}}function Xy(e){try{localStorage.removeItem(Hp(e)),localStorage.removeItem(tm(e)),localStorage.removeItem(Qy(e))}catch{}try{window.dispatchEvent(new CustomEvent("ndn:stats-updated",{detail:{name:e,cleared:!0}}))}catch{}}function Ss(e){const{darts:t,scored:s}=un(e);return t?s/t*3:0}function no(e){const{fnDarts:t=0,fnScored:s=0}=un(e);return t?s/t*3:0}const Wp="ndn_game_mode_stats";function nm(e){let t={};try{const s=localStorage.getItem(Wp);s&&(t=JSON.parse(s))}catch{}if(Array.isArray(e))for(const s of e)t[s]||(t[s]={played:0,won:0});return t}function Zy(e){try{localStorage.setItem(Wp,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("ndn:stats-updated",{detail:{gameModes:!0}}))}catch{}}function e1(e,t){const s=nm(),r=s[e]||{played:0,won:0};r.played+=1,t&&(r.won+=1),s[e]=r,Zy(s)}function Zo(e){try{const t=localStorage.getItem(tm(e));if(!t)return[];const s=JSON.parse(t);return Array.isArray(s)?s.map(r=>({t:Number(r.t)||0,darts:Number(r.darts)||0,scored:Number(r.scored)||0,fnDarts:Number(r.fnDarts)||0,fnScored:Number(r.fnScored)||0})).filter(r=>r.t>0):[]}catch{return[]}}function t1(e,t){try{localStorage.setItem(tm(e),JSON.stringify(t)),window.dispatchEvent(new CustomEvent("ndn:stats-updated",{detail:{name:e}}))}catch{}}function n1(e,t){const s=Date.now();return e.filter(r=>s-r.t<=t)}function Cr(e,t,s,r=Date.now(),l,a){if(t<=0)return;const i=Zo(e),o=n1([...i,{t:r,darts:t,scored:s,fnDarts:l,fnScored:a}],1e3*60*60*24*30);t1(e,o)}function s1(e,t=1e3*60*60*24){const s=Zo(e);if(!s.length)return 0;const r=Date.now();let l=0,a=0;for(const i of s)r-i.t<=t&&(l+=i.darts,a+=i.scored);return l<=0?0:a/l*3}function r1(e,t=1e3*60*60*24*30){const s=Zo(e);if(!s.length)return 0;const r=Date.now();let l=0,a=0;for(const i of s)r-i.t<=t&&(l+=i.fnDarts||0,a+=i.fnScored||0);return l<=0?0:a/l*3}function so(e){const s=Zo(e);if(!s.length)return 0;const r=Date.now(),l=s.filter(d=>r-d.t<=2592e6),a=l.filter(d=>typeof d.fnDarts=="number"),i=a.length?a:l;let o=0,c=0;for(const d of i)o+=d.darts,c+=d.scored;return o<=0?0:c/o*3}function ro(e){return r1(e,2592e6)}const Vp="https://buy.stripe.com/test_8wM8yK7wA0gQeEw5kk",l1={},sh=e=>{let t;const s=new Set,r=(x,w)=>{const g=typeof x=="function"?x(t):x;if(!Object.is(g,t)){const b=t;t=w??(typeof g!="object"||g===null)?g:Object.assign({},t,g),s.forEach(C=>C(t,b))}},l=()=>t,c={setState:r,getState:l,getInitialState:()=>d,subscribe:x=>(s.add(x),()=>s.delete(x)),destroy:()=>{(l1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},d=t=e(r,l,c);return c},a1=e=>e?sh(e):sh;var Kp={exports:{}},Gp={},Jp={exports:{}},Yp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=u;function i1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var o1=typeof Object.is=="function"?Object.is:i1,c1=_l.useState,d1=_l.useEffect,u1=_l.useLayoutEffect,m1=_l.useDebugValue;function f1(e,t){var s=t(),r=c1({inst:{value:s,getSnapshot:t}}),l=r[0].inst,a=r[1];return u1(function(){l.value=s,l.getSnapshot=t,Vc(l)&&a({inst:l})},[e,s,t]),d1(function(){return Vc(l)&&a({inst:l}),e(function(){Vc(l)&&a({inst:l})})},[e]),m1(s),s}function Vc(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!o1(e,s)}catch{return!0}}function h1(e,t){return t()}var p1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h1:f1;Yp.useSyncExternalStore=_l.useSyncExternalStore!==void 0?_l.useSyncExternalStore:p1;Jp.exports=Yp;var x1=Jp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ec=u,g1=x1;function v1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var y1=typeof Object.is=="function"?Object.is:v1,b1=g1.useSyncExternalStore,N1=ec.useRef,w1=ec.useEffect,j1=ec.useMemo,S1=ec.useDebugValue;Gp.useSyncExternalStoreWithSelector=function(e,t,s,r,l){var a=N1(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=j1(function(){function c(b){if(!d){if(d=!0,x=b,b=r(b),l!==void 0&&i.hasValue){var C=i.value;if(l(C,b))return w=C}return w=b}if(C=w,y1(x,b))return C;var k=r(b);return l!==void 0&&l(C,k)?(x=b,C):(x=b,w=k)}var d=!1,x,w,g=s===void 0?null:s;return[function(){return c(t())},g===null?void 0:function(){return c(g())}]},[t,s,r,l]);var o=b1(e,a[0],a[1]);return w1(function(){i.hasValue=!0,i.value=o},[o]),S1(o),o};Kp.exports=Gp;var k1=Kp.exports;const C1=vh(k1),qp={},{useDebugValue:E1}=pg,{useSyncExternalStoreWithSelector:T1}=C1;let rh=!1;const D1=e=>e;function I1(e,t=D1,s){(qp?"production":void 0)!=="production"&&s&&!rh&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),rh=!0);const r=T1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return E1(r),r}const lh=e=>{(qp?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?a1(e):e,s=(r,l)=>I1(t,r,l);return Object.assign(s,t),s},Gl=e=>e?lh(e):lh,Qp="ndn_user_settings";function Jd(){try{const e=localStorage.getItem(Qp);if(!e)return{favoriteDouble:"D16",callerEnabled:!0,callerVoice:"",callerVolume:1,speakCheckoutOnly:!1,avgMode:"all-time",autoStartOffline:!1,rememberLastOffline:!0,lastOffline:{mode:"X01",x01Start:501,firstTo:1,aiLevel:"None"},reducedMotion:!1,compactHeader:!1,allowSpectate:!0,cameraScale:1,cameraAspect:"wide",calibrationGuide:!0,preferredCameraId:void 0,preferredCameraLabel:void 0,offlineLayout:"modern",autoscoreProvider:"built-in",autoscoreWsUrl:""};const t=JSON.parse(e);return{favoriteDouble:t.favoriteDouble||"D16",callerEnabled:typeof t.callerEnabled=="boolean"?t.callerEnabled:!0,callerVoice:t.callerVoice||"",callerVolume:typeof t.callerVolume=="number"?Math.max(0,Math.min(1,t.callerVolume)):1,speakCheckoutOnly:!!t.speakCheckoutOnly,avgMode:t.avgMode==="24h"?"24h":"all-time",autoStartOffline:!!t.autoStartOffline,rememberLastOffline:typeof t.rememberLastOffline=="boolean"?t.rememberLastOffline:!0,lastOffline:t.lastOffline&&typeof t.lastOffline=="object"?{mode:t.lastOffline.mode||"X01",x01Start:Number(t.lastOffline.x01Start)||501,firstTo:Number(t.lastOffline.firstTo)||1,aiLevel:t.lastOffline.aiLevel||"None"}:{mode:"X01",x01Start:501,firstTo:1,aiLevel:"None"},reducedMotion:!!t.reducedMotion,compactHeader:!!t.compactHeader,allowSpectate:typeof t.allowSpectate=="boolean"?t.allowSpectate:!0,cameraScale:typeof t.cameraScale=="number"&&isFinite(t.cameraScale)?Math.max(.5,Math.min(1.25,t.cameraScale)):1,cameraAspect:t.cameraAspect==="square"?"square":"wide",autoscoreProvider:t.autoscoreProvider==="external-ws"?"external-ws":"built-in",autoscoreWsUrl:typeof t.autoscoreWsUrl=="string"?t.autoscoreWsUrl:"",calibrationGuide:typeof t.calibrationGuide=="boolean"?t.calibrationGuide:!0,preferredCameraId:typeof t.preferredCameraId=="string"?t.preferredCameraId:void 0,preferredCameraLabel:typeof t.preferredCameraLabel=="string"?t.preferredCameraLabel:void 0,offlineLayout:t.offlineLayout==="classic"?"classic":"modern"}}catch{return{favoriteDouble:"D16",callerEnabled:!0,callerVoice:"",callerVolume:1,speakCheckoutOnly:!1,avgMode:"all-time",autoStartOffline:!1,rememberLastOffline:!0,lastOffline:{mode:"X01",x01Start:501,firstTo:1,aiLevel:"None"},reducedMotion:!1,compactHeader:!1,allowSpectate:!0,cameraScale:1,cameraAspect:"wide",calibrationGuide:!0,preferredCameraId:void 0,preferredCameraLabel:void 0,offlineLayout:"modern",autoscoreProvider:"built-in",autoscoreWsUrl:""}}}function $t(e){try{const t=Jd();localStorage.setItem(Qp,JSON.stringify({...t,...e}))}catch{}}const qn=Gl(e=>({...Jd(),setFavoriteDouble:t=>{$t({favoriteDouble:t}),e({favoriteDouble:t})},setCallerEnabled:t=>{$t({callerEnabled:t}),e({callerEnabled:t})},setCallerVoice:t=>{$t({callerVoice:t}),e({callerVoice:t})},setAvgMode:t=>{$t({avgMode:t}),e({avgMode:t})},setCallerVolume:t=>{const s=Math.max(0,Math.min(1,t));$t({callerVolume:s}),e({callerVolume:s})},setSpeakCheckoutOnly:t=>{$t({speakCheckoutOnly:t}),e({speakCheckoutOnly:t})},setAutoStartOffline:t=>{$t({autoStartOffline:t}),e({autoStartOffline:t})},setRememberLastOffline:t=>{$t({rememberLastOffline:t}),e({rememberLastOffline:t})},setLastOffline:t=>{const r={...Jd().lastOffline,...t};$t({lastOffline:r}),e({lastOffline:r})},setReducedMotion:t=>{$t({reducedMotion:t}),e({reducedMotion:t})},setCompactHeader:t=>{$t({compactHeader:t}),e({compactHeader:t})},setAllowSpectate:t=>{$t({allowSpectate:t}),e({allowSpectate:t})},setCameraScale:t=>{const s=Math.max(.5,Math.min(1.25,t));$t({cameraScale:s}),e({cameraScale:s})},setCameraAspect:t=>{const s=t==="square"?"square":"wide";$t({cameraAspect:s}),e({cameraAspect:s})},setAutoscoreProvider:t=>{$t({autoscoreProvider:t}),e({autoscoreProvider:t})},setAutoscoreWsUrl:t=>{$t({autoscoreWsUrl:t}),e({autoscoreWsUrl:t})},setCalibrationGuide:t=>{$t({calibrationGuide:t}),e({calibrationGuide:t})},setPreferredCamera:(t,s)=>{$t({preferredCameraId:t,preferredCameraLabel:s}),e({preferredCameraId:t,preferredCameraLabel:s})},setOfflineLayout:t=>{$t({offlineLayout:t}),e({offlineLayout:t})}}));function Bi(e){try{window.dispatchEvent(new CustomEvent("ndn:change-tab",{detail:{tab:e}}))}catch{}}function M1({user:e}){const[t,s]=u.useState(!1),[r,l]=u.useState(!1),[a,i]=u.useState(""),{lastOffline:o}=qn();return u.useEffect(()=>{const c=["The fastest televised 9-darter took roughly 25 seconds!","A perfect leg (501) can be finished in nine darts.","The inner bull is worth 50; the outer bull is 25.","Standard dartboards are made from compressed sisal fibers.","Doubles and trebles are the thin outer and middle rings.","Professional oche (throw line) distance is 7 ft 9 in (2.37 m).","Dartitis is a real condition affecting a players throwing motion.","Phil Taylor holds a record number of World Championship titles.","Checkout routes often end on a doubleclassic double-out.","The highest 3-dart score is 180 (triple 20, triple 20, triple 20)."],d=Math.floor(Math.random()*c.length);i(c[d])},[]),n.jsxs("div",{className:`${e!=null&&e.fullAccess?"premium-main":""} relative min-h-[600px] flex flex-col items-center justify-center overflow-hidden`,children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-700 via-indigo-500 to-blue-600 opacity-60 blur-2xl"}),n.jsx("div",{className:"absolute top-20 left-1/4 w-40 h-40 bg-pink-400 rounded-full opacity-30 blur-2xl animate-pulse"}),n.jsx("div",{className:"absolute bottom-10 right-1/4 w-32 h-32 bg-blue-400 rounded-full opacity-30 blur-2xl animate-pulse"})]}),n.jsxs("div",{className:"relative z-10 w-full max-w-3xl mx-auto bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 flex flex-col items-center",children:[n.jsx("h2",{className:"text-3xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 via-purple-400 to-blue-400 mb-3 md:mb-4 drop-shadow-xl text-center",children:"Welcome to Nine Dart Nation"}),n.jsx("p",{className:"text-lg md:text-2xl text-white/80 mb-2 font-semibold text-center",children:"Your home for competitive darts, stats, and online play."}),n.jsx("p",{className:"text-sm md:text-lg text-white/60 mb-4 italic text-center",children:'"Where every dart counts and every player matters."'}),a&&n.jsx("div",{className:"w-full mb-6",children:n.jsxs("div",{className:"mx-auto max-w-xl rounded-full px-5 py-2 text-center text-indigo-100 bg-gradient-to-r from-indigo-600/80 to-fuchsia-600/80 shadow-md",children:[n.jsx("span",{className:"font-semibold",children:"Did you know?"})," ",n.jsx("span",{className:"opacity-90",children:a})]})}),n.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 md:gap-6 justify-center mb-6 md:mb-8 w-full",children:[n.jsxs("button",{onClick:()=>{Bi("offline");try{window.dispatchEvent(new CustomEvent("ndn:offline-format",{detail:{formatType:"first",formatCount:Number(o==null?void 0:o.firstTo)||1,startScore:Number(o==null?void 0:o.x01Start)||501}}))}catch{}try{setTimeout(()=>{window.dispatchEvent(new CustomEvent("ndn:auto-start",{detail:{mode:(o==null?void 0:o.mode)||"X01"}}))},50)}catch{}},className:"px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold shadow-xl hover:scale-105 transition-transform flex items-center gap-2 text-lg md:text-xl",children:[n.jsx("span",{"aria-hidden":!0,children:""})," Start New Match"]}),n.jsxs("button",{onClick:()=>Bi("stats"),className:"px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold shadow-xl hover:scale-105 transition-transform flex items-center gap-2 text-lg md:text-xl",children:[n.jsx("span",{"aria-hidden":!0,children:""})," View Stats"]}),n.jsxs("button",{onClick:()=>Bi("online"),className:"px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-green-500 to-blue-400 text-white font-bold shadow-xl hover:scale-105 transition-transform flex items-center gap-2 text-lg md:text-xl",children:[n.jsx("span",{"aria-hidden":!0,children:""})," Join Online League"]}),n.jsxs("button",{onClick:()=>{Bi("offline");try{window.dispatchEvent(new CustomEvent("ndn:auto-start",{detail:{mode:"Double Practice"}}))}catch{}},className:"px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-pink-500 to-indigo-500 text-white font-bold shadow-xl hover:scale-105 transition-transform flex items-center gap-2 text-lg md:text-xl",children:[n.jsx("span",{"aria-hidden":!0,children:""})," Practice Doubles"]})]}),(()=>{const c=(e==null?void 0:e.username)||"Player 1",d=un(c),x=!!(e!=null&&e.fullAccess),w="grid grid-cols-[160px,1fr,1fr]",g=({label:b,left:C,right:k,lock:R})=>n.jsxs("div",{className:`relative ${w} gap-2 items-center p-2 rounded-lg ${R?"bg-white/5 border border-white/10 overflow-hidden":"bg-indigo-500/10 border border-indigo-500/40"} mb-2`,children:[n.jsx("div",{className:"text-[12px] opacity-80 pl-2 text-left",children:b}),n.jsx("div",{className:`text-sm font-semibold text-center ${R?"opacity-50 blur-[0.5px]":""}`,children:C}),n.jsx("div",{className:`text-sm font-semibold text-center ${R?"opacity-50 blur-[0.5px]":""}`,children:k}),R&&n.jsx("button",{className:"absolute inset-0 flex items-center justify-center rounded-lg bg-slate-900/35 hover:bg-slate-900/45 transition",onClick:()=>window.open(Vp,"_blank","noopener"),title:"Unlock with PREMIUM",children:n.jsx("span",{className:"text-[12px] font-semibold",children:"Unlock PREMIUM"})})]});return n.jsxs("div",{className:"w-full mt-2 rounded-2xl p-3 bg-white/5 border border-white/10",children:[n.jsxs("div",{className:`${w} gap-2 mb-2 px-1 items-center`,children:[n.jsx("div",{className:"text-[12px] opacity-0 select-none",children:"label"}),n.jsx("div",{className:"text-[12px] font-semibold text-center",children:"BEST"}),n.jsx("div",{className:"text-[12px] font-semibold text-center",children:"WORST"})]}),n.jsx(g,{label:"3-dart avg",left:Ge(d.best3||0),right:Ge(d.worst3||0)}),n.jsx(g,{label:"9-dart avg",left:Ge(d.bestFNAvg||0),right:Ge(d.worstFNAvg||0),lock:!x}),n.jsx(g,{label:"Leg (darts)",left:String(d.bestLegDarts||0),right:String(d.worstLegDarts||0),lock:!x}),n.jsx(g,{label:"Checkout",left:String(d.bestCheckout||0),right:"",lock:!x})]})})(),n.jsx("button",{className:"mt-8 md:mt-10 px-8 md:px-10 py-3 md:py-4 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold shadow-xl hover:scale-110 transition-transform text-lg md:text-xl",onClick:()=>l(!0),children:"How to Play / Getting Started"})]}),n.jsx("footer",{className:"w-full py-2 md:py-2 text-center text-white/80 text-xs md:text-sm font-medium absolute bottom-0 left-0 z-20 flex items-center justify-center gap-1 md:gap-2",children:n.jsxs("button",{className:"flex items-center gap-1 md:gap-2 hover:text-white transition",onClick:()=>s(!0),children:[n.jsx("span",{children:""}),n.jsx("span",{style:{letterSpacing:"0.05em"},children:"NINEDARTNATION"})]})}),t&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"card max-w-lg w-full relative text-left bg-[#2d2250] text-white p-6 rounded-xl shadow-xl",children:[n.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1 bg-purple-500 text-white font-bold",onClick:()=>s(!1),children:"Close"}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:"Legal Information"}),n.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[n.jsx("li",{children:"Terms & Conditions: All users must follow fair play and site rules."}),n.jsx("li",{children:"Privacy Policy: Your data is protected and never shared without consent."}),n.jsxs("li",{children:["Copyright  ",new Date().getFullYear()," NINEDARTNATION. All rights reserved."]}),n.jsx("li",{children:"Contact: support@ninedartnation.com"})]}),n.jsx("p",{className:"text-sm text-purple-200",children:"For full legal details, please contact us or visit our legal page."})]})}),r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"card max-w-lg w-full relative text-left bg-[#2d2250] text-white p-6 rounded-xl shadow-xl",children:[n.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1 bg-purple-500 text-white font-bold",onClick:()=>l(!1),children:"Close"}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:"Getting Started"}),n.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[n.jsx("li",{children:"Choose a game mode and invite friends or play solo."}),n.jsx("li",{children:"Track your stats and progress in the Stats tab."}),n.jsx("li",{children:"Join the BullseyeDartsLeague for online competition."}),n.jsx("li",{children:"Upgrade to PREMIUM for advanced features and modes."}),n.jsx("li",{children:"Need help? Visit the Settings tab for support and tips."})]}),n.jsx("p",{className:"text-sm text-purple-200",children:'Ready to play? Hit "Start New Match" and let the darts fly!'})]})})]})}function as({children:e,className:t,style:s}){const r=u.useRef(null);return u.useEffect(()=>{let l=0;const a=()=>{const c=r.current;if(!c)return;const d=document.getElementById("ndn-header");if(!d){c.style.clipPath="";return}const x=document.getElementById("ndn-main-scroll"),w=x?x.scrollTop:window.scrollY||0,g=d.getBoundingClientRect().height,b=w>0?g:0;c.style.marginTop=b>0?`${b}px`:"0px"};a();const i=()=>{l&&cancelAnimationFrame(l),l=requestAnimationFrame(a)},o=document.getElementById("ndn-main-scroll");return o==null||o.addEventListener("scroll",i,{passive:!0}),window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",i),()=>{o==null||o.removeEventListener("scroll",i),window.removeEventListener("scroll",i),window.removeEventListener("resize",i),l&&cancelAnimationFrame(l)}},[]),n.jsx("div",{ref:r,className:t,style:s,children:e})}var Jl={},L1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Xp={},Cn={};let sm;const P1=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Cn.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Cn.getSymbolTotalCodewords=function(t){return P1[t]};Cn.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Cn.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');sm=t};Cn.isKanjiModeEnabled=function(){return typeof sm<"u"};Cn.toSJIS=function(t){return sm(t)};var tc={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+s)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,l){if(e.isValid(r))return r;try{return t(r)}catch{return l}}})(tc);function Zp(){this.buffer=[],this.length=0}Zp.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var A1=Zp;function ai(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}ai.prototype.set=function(e,t,s,r){const l=e*this.size+t;this.data[l]=s,r&&(this.reservedBit[l]=!0)};ai.prototype.get=function(e,t){return this.data[e*this.size+t]};ai.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s};ai.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var R1=ai,ex={};(function(e){const t=Cn.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const l=Math.floor(r/7)+2,a=t(r),i=a===145?26:Math.ceil((a-13)/(2*l-2))*2,o=[a-7];for(let c=1;c<l-1;c++)o[c]=o[c-1]-i;return o.push(6),o.reverse()},e.getPositions=function(r){const l=[],a=e.getRowColCoords(r),i=a.length;for(let o=0;o<i;o++)for(let c=0;c<i;c++)o===0&&c===0||o===0&&c===i-1||o===i-1&&c===0||l.push([a[o],a[c]]);return l}})(ex);var tx={};const O1=Cn.getSymbolSize,ah=7;tx.getPositions=function(t){const s=O1(t);return[[0,0],[s-ah,0],[0,s-ah]]};var nx={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},e.from=function(l){return e.isValid(l)?parseInt(l,10):void 0},e.getPenaltyN1=function(l){const a=l.size;let i=0,o=0,c=0,d=null,x=null;for(let w=0;w<a;w++){o=c=0,d=x=null;for(let g=0;g<a;g++){let b=l.get(w,g);b===d?o++:(o>=5&&(i+=t.N1+(o-5)),d=b,o=1),b=l.get(g,w),b===x?c++:(c>=5&&(i+=t.N1+(c-5)),x=b,c=1)}o>=5&&(i+=t.N1+(o-5)),c>=5&&(i+=t.N1+(c-5))}return i},e.getPenaltyN2=function(l){const a=l.size;let i=0;for(let o=0;o<a-1;o++)for(let c=0;c<a-1;c++){const d=l.get(o,c)+l.get(o,c+1)+l.get(o+1,c)+l.get(o+1,c+1);(d===4||d===0)&&i++}return i*t.N2},e.getPenaltyN3=function(l){const a=l.size;let i=0,o=0,c=0;for(let d=0;d<a;d++){o=c=0;for(let x=0;x<a;x++)o=o<<1&2047|l.get(d,x),x>=10&&(o===1488||o===93)&&i++,c=c<<1&2047|l.get(x,d),x>=10&&(c===1488||c===93)&&i++}return i*t.N3},e.getPenaltyN4=function(l){let a=0;const i=l.data.length;for(let c=0;c<i;c++)a+=l.data[c];return Math.abs(Math.ceil(a*100/i/5)-10)*t.N4};function s(r,l,a){switch(r){case e.Patterns.PATTERN000:return(l+a)%2===0;case e.Patterns.PATTERN001:return l%2===0;case e.Patterns.PATTERN010:return a%3===0;case e.Patterns.PATTERN011:return(l+a)%3===0;case e.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(a/3))%2===0;case e.Patterns.PATTERN101:return l*a%2+l*a%3===0;case e.Patterns.PATTERN110:return(l*a%2+l*a%3)%2===0;case e.Patterns.PATTERN111:return(l*a%3+(l+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(l,a){const i=a.size;for(let o=0;o<i;o++)for(let c=0;c<i;c++)a.isReserved(c,o)||a.xor(c,o,s(l,c,o))},e.getBestMask=function(l,a){const i=Object.keys(e.Patterns).length;let o=0,c=1/0;for(let d=0;d<i;d++){a(d),e.applyMask(d,l);const x=e.getPenaltyN1(l)+e.getPenaltyN2(l)+e.getPenaltyN3(l)+e.getPenaltyN4(l);e.applyMask(d,l),x<c&&(c=x,o=d)}return o}})(nx);var nc={};const Ys=tc,_i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ui=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];nc.getBlocksCount=function(t,s){switch(s){case Ys.L:return _i[(t-1)*4+0];case Ys.M:return _i[(t-1)*4+1];case Ys.Q:return _i[(t-1)*4+2];case Ys.H:return _i[(t-1)*4+3];default:return}};nc.getTotalCodewordsCount=function(t,s){switch(s){case Ys.L:return Ui[(t-1)*4+0];case Ys.M:return Ui[(t-1)*4+1];case Ys.Q:return Ui[(t-1)*4+2];case Ys.H:return Ui[(t-1)*4+3];default:return}};var sx={},sc={};const Da=new Uint8Array(512),Mo=new Uint8Array(256);(function(){let t=1;for(let s=0;s<255;s++)Da[s]=t,Mo[t]=s,t<<=1,t&256&&(t^=285);for(let s=255;s<512;s++)Da[s]=Da[s-255]})();sc.log=function(t){if(t<1)throw new Error("log("+t+")");return Mo[t]};sc.exp=function(t){return Da[t]};sc.mul=function(t,s){return t===0||s===0?0:Da[Mo[t]+Mo[s]]};(function(e){const t=sc;e.mul=function(r,l){const a=new Uint8Array(r.length+l.length-1);for(let i=0;i<r.length;i++)for(let o=0;o<l.length;o++)a[i+o]^=t.mul(r[i],l[o]);return a},e.mod=function(r,l){let a=new Uint8Array(r);for(;a.length-l.length>=0;){const i=a[0];for(let c=0;c<l.length;c++)a[c]^=t.mul(l[c],i);let o=0;for(;o<a.length&&a[o]===0;)o++;a=a.slice(o)}return a},e.generateECPolynomial=function(r){let l=new Uint8Array([1]);for(let a=0;a<r;a++)l=e.mul(l,new Uint8Array([1,t.exp(a)]));return l}})(sx);const rx=sx;function rm(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}rm.prototype.initialize=function(t){this.degree=t,this.genPoly=rx.generateECPolynomial(this.degree)};rm.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(t.length+this.degree);s.set(t);const r=rx.mod(s,this.genPoly),l=this.degree-r.length;if(l>0){const a=new Uint8Array(this.degree);return a.set(r,l),a}return r};var B1=rm,lx={},cr={},lm={};lm.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var us={};const ax="[0-9]+",_1="[A-Z $%*+\\-./:]+";let Xa="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Xa=Xa.replace(/u/g,"\\u");const U1="(?:(?![A-Z0-9 $%*+\\-./:]|"+Xa+`)(?:.|[\r
]))+`;us.KANJI=new RegExp(Xa,"g");us.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");us.BYTE=new RegExp(U1,"g");us.NUMERIC=new RegExp(ax,"g");us.ALPHANUMERIC=new RegExp(_1,"g");const $1=new RegExp("^"+Xa+"$"),F1=new RegExp("^"+ax+"$"),z1=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");us.testKanji=function(t){return $1.test(t)};us.testNumeric=function(t){return F1.test(t)};us.testAlphanumeric=function(t){return z1.test(t)};(function(e){const t=lm,s=us;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(a,i){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!t.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?a.ccBits[0]:i<27?a.ccBits[1]:a.ccBits[2]},e.getBestModeForData=function(a){return s.testNumeric(a)?e.NUMERIC:s.testAlphanumeric(a)?e.ALPHANUMERIC:s.testKanji(a)?e.KANJI:e.BYTE},e.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},e.isValid=function(a){return a&&a.bit&&a.ccBits};function r(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+l)}}e.from=function(a,i){if(e.isValid(a))return a;try{return r(a)}catch{return i}}})(cr);(function(e){const t=Cn,s=nc,r=tc,l=cr,a=lm,i=7973,o=t.getBCHDigit(i);function c(g,b,C){for(let k=1;k<=40;k++)if(b<=e.getCapacity(k,C,g))return k}function d(g,b){return l.getCharCountIndicator(g,b)+4}function x(g,b){let C=0;return g.forEach(function(k){const R=d(k.mode,b);C+=R+k.getBitsLength()}),C}function w(g,b){for(let C=1;C<=40;C++)if(x(g,C)<=e.getCapacity(C,b,l.MIXED))return C}e.from=function(b,C){return a.isValid(b)?parseInt(b,10):C},e.getCapacity=function(b,C,k){if(!a.isValid(b))throw new Error("Invalid QR Code version");typeof k>"u"&&(k=l.BYTE);const R=t.getSymbolTotalCodewords(b),N=s.getTotalCodewordsCount(b,C),f=(R-N)*8;if(k===l.MIXED)return f;const y=f-d(k,b);switch(k){case l.NUMERIC:return Math.floor(y/10*3);case l.ALPHANUMERIC:return Math.floor(y/11*2);case l.KANJI:return Math.floor(y/13);case l.BYTE:default:return Math.floor(y/8)}},e.getBestVersionForData=function(b,C){let k;const R=r.from(C,r.M);if(Array.isArray(b)){if(b.length>1)return w(b,R);if(b.length===0)return 1;k=b[0]}else k=b;return c(k.mode,k.getLength(),R)},e.getEncodedBits=function(b){if(!a.isValid(b)||b<7)throw new Error("Invalid QR Code version");let C=b<<12;for(;t.getBCHDigit(C)-o>=0;)C^=i<<t.getBCHDigit(C)-o;return b<<12|C}})(lx);var ix={};const Yd=Cn,ox=1335,H1=21522,ih=Yd.getBCHDigit(ox);ix.getEncodedBits=function(t,s){const r=t.bit<<3|s;let l=r<<10;for(;Yd.getBCHDigit(l)-ih>=0;)l^=ox<<Yd.getBCHDigit(l)-ih;return(r<<10|l)^H1};var cx={};const W1=cr;function Ul(e){this.mode=W1.NUMERIC,this.data=e.toString()}Ul.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Ul.prototype.getLength=function(){return this.data.length};Ul.prototype.getBitsLength=function(){return Ul.getBitsLength(this.data.length)};Ul.prototype.write=function(t){let s,r,l;for(s=0;s+3<=this.data.length;s+=3)r=this.data.substr(s,3),l=parseInt(r,10),t.put(l,10);const a=this.data.length-s;a>0&&(r=this.data.substr(s),l=parseInt(r,10),t.put(l,a*3+1))};var V1=Ul;const K1=cr,Kc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function $l(e){this.mode=K1.ALPHANUMERIC,this.data=e}$l.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};$l.prototype.getLength=function(){return this.data.length};$l.prototype.getBitsLength=function(){return $l.getBitsLength(this.data.length)};$l.prototype.write=function(t){let s;for(s=0;s+2<=this.data.length;s+=2){let r=Kc.indexOf(this.data[s])*45;r+=Kc.indexOf(this.data[s+1]),t.put(r,11)}this.data.length%2&&t.put(Kc.indexOf(this.data[s]),6)};var G1=$l;const J1=cr;function Fl(e){this.mode=J1.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Fl.getBitsLength=function(t){return t*8};Fl.prototype.getLength=function(){return this.data.length};Fl.prototype.getBitsLength=function(){return Fl.getBitsLength(this.data.length)};Fl.prototype.write=function(e){for(let t=0,s=this.data.length;t<s;t++)e.put(this.data[t],8)};var Y1=Fl;const q1=cr,Q1=Cn;function zl(e){this.mode=q1.KANJI,this.data=e}zl.getBitsLength=function(t){return t*13};zl.prototype.getLength=function(){return this.data.length};zl.prototype.getBitsLength=function(){return zl.getBitsLength(this.data.length)};zl.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let s=Q1.toSJIS(this.data[t]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),e.put(s,13)}};var X1=zl,dx={exports:{}};(function(e){var t={single_source_shortest_paths:function(s,r,l){var a={},i={};i[r]=0;var o=t.PriorityQueue.make();o.push(r,0);for(var c,d,x,w,g,b,C,k,R;!o.empty();){c=o.pop(),d=c.value,w=c.cost,g=s[d]||{};for(x in g)g.hasOwnProperty(x)&&(b=g[x],C=w+b,k=i[x],R=typeof i[x]>"u",(R||k>C)&&(i[x]=C,o.push(x,C),a[x]=d))}if(typeof l<"u"&&typeof i[l]>"u"){var N=["Could not find a path from ",r," to ",l,"."].join("");throw new Error(N)}return a},extract_shortest_path_from_predecessor_list:function(s,r){for(var l=[],a=r;a;)l.push(a),s[a],a=s[a];return l.reverse(),l},find_path:function(s,r,l){var a=t.single_source_shortest_paths(s,r,l);return t.extract_shortest_path_from_predecessor_list(a,l)},PriorityQueue:{make:function(s){var r=t.PriorityQueue,l={},a;s=s||{};for(a in r)r.hasOwnProperty(a)&&(l[a]=r[a]);return l.queue=[],l.sorter=s.sorter||r.default_sorter,l},default_sorter:function(s,r){return s.cost-r.cost},push:function(s,r){var l={value:s,cost:r};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(dx);var Z1=dx.exports;(function(e){const t=cr,s=V1,r=G1,l=Y1,a=X1,i=us,o=Cn,c=Z1;function d(N){return unescape(encodeURIComponent(N)).length}function x(N,f,y){const j=[];let D;for(;(D=N.exec(y))!==null;)j.push({data:D[0],index:D.index,mode:f,length:D[0].length});return j}function w(N){const f=x(i.NUMERIC,t.NUMERIC,N),y=x(i.ALPHANUMERIC,t.ALPHANUMERIC,N);let j,D;return o.isKanjiModeEnabled()?(j=x(i.BYTE,t.BYTE,N),D=x(i.KANJI,t.KANJI,N)):(j=x(i.BYTE_KANJI,t.BYTE,N),D=[]),f.concat(y,j,D).sort(function(I,O){return I.index-O.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function g(N,f){switch(f){case t.NUMERIC:return s.getBitsLength(N);case t.ALPHANUMERIC:return r.getBitsLength(N);case t.KANJI:return a.getBitsLength(N);case t.BYTE:return l.getBitsLength(N)}}function b(N){return N.reduce(function(f,y){const j=f.length-1>=0?f[f.length-1]:null;return j&&j.mode===y.mode?(f[f.length-1].data+=y.data,f):(f.push(y),f)},[])}function C(N){const f=[];for(let y=0;y<N.length;y++){const j=N[y];switch(j.mode){case t.NUMERIC:f.push([j,{data:j.data,mode:t.ALPHANUMERIC,length:j.length},{data:j.data,mode:t.BYTE,length:j.length}]);break;case t.ALPHANUMERIC:f.push([j,{data:j.data,mode:t.BYTE,length:j.length}]);break;case t.KANJI:f.push([j,{data:j.data,mode:t.BYTE,length:d(j.data)}]);break;case t.BYTE:f.push([{data:j.data,mode:t.BYTE,length:d(j.data)}])}}return f}function k(N,f){const y={},j={start:{}};let D=["start"];for(let h=0;h<N.length;h++){const I=N[h],O=[];for(let P=0;P<I.length;P++){const F=I[P],A=""+h+P;O.push(A),y[A]={node:F,lastCount:0},j[A]={};for(let V=0;V<D.length;V++){const T=D[V];y[T]&&y[T].node.mode===F.mode?(j[T][A]=g(y[T].lastCount+F.length,F.mode)-g(y[T].lastCount,F.mode),y[T].lastCount+=F.length):(y[T]&&(y[T].lastCount=F.length),j[T][A]=g(F.length,F.mode)+4+t.getCharCountIndicator(F.mode,f))}}D=O}for(let h=0;h<D.length;h++)j[D[h]].end=0;return{map:j,table:y}}function R(N,f){let y;const j=t.getBestModeForData(N);if(y=t.from(f,j),y!==t.BYTE&&y.bit<j.bit)throw new Error('"'+N+'" cannot be encoded with mode '+t.toString(y)+`.
 Suggested mode is: `+t.toString(j));switch(y===t.KANJI&&!o.isKanjiModeEnabled()&&(y=t.BYTE),y){case t.NUMERIC:return new s(N);case t.ALPHANUMERIC:return new r(N);case t.KANJI:return new a(N);case t.BYTE:return new l(N)}}e.fromArray=function(f){return f.reduce(function(y,j){return typeof j=="string"?y.push(R(j,null)):j.data&&y.push(R(j.data,j.mode)),y},[])},e.fromString=function(f,y){const j=w(f,o.isKanjiModeEnabled()),D=C(j),h=k(D,y),I=c.find_path(h.map,"start","end"),O=[];for(let P=1;P<I.length-1;P++)O.push(h.table[I[P]].node);return e.fromArray(b(O))},e.rawSplit=function(f){return e.fromArray(w(f,o.isKanjiModeEnabled()))}})(cx);const rc=Cn,Gc=tc,eb=A1,tb=R1,nb=ex,sb=tx,qd=nx,Qd=nc,rb=B1,Lo=lx,lb=ix,ab=cr,Jc=cx;function ib(e,t){const s=e.size,r=sb.getPositions(t);for(let l=0;l<r.length;l++){const a=r[l][0],i=r[l][1];for(let o=-1;o<=7;o++)if(!(a+o<=-1||s<=a+o))for(let c=-1;c<=7;c++)i+c<=-1||s<=i+c||(o>=0&&o<=6&&(c===0||c===6)||c>=0&&c<=6&&(o===0||o===6)||o>=2&&o<=4&&c>=2&&c<=4?e.set(a+o,i+c,!0,!0):e.set(a+o,i+c,!1,!0))}}function ob(e){const t=e.size;for(let s=8;s<t-8;s++){const r=s%2===0;e.set(s,6,r,!0),e.set(6,s,r,!0)}}function cb(e,t){const s=nb.getPositions(t);for(let r=0;r<s.length;r++){const l=s[r][0],a=s[r][1];for(let i=-2;i<=2;i++)for(let o=-2;o<=2;o++)i===-2||i===2||o===-2||o===2||i===0&&o===0?e.set(l+i,a+o,!0,!0):e.set(l+i,a+o,!1,!0)}}function db(e,t){const s=e.size,r=Lo.getEncodedBits(t);let l,a,i;for(let o=0;o<18;o++)l=Math.floor(o/3),a=o%3+s-8-3,i=(r>>o&1)===1,e.set(l,a,i,!0),e.set(a,l,i,!0)}function Yc(e,t,s){const r=e.size,l=lb.getEncodedBits(t,s);let a,i;for(a=0;a<15;a++)i=(l>>a&1)===1,a<6?e.set(a,8,i,!0):a<8?e.set(a+1,8,i,!0):e.set(r-15+a,8,i,!0),a<8?e.set(8,r-a-1,i,!0):a<9?e.set(8,15-a-1+1,i,!0):e.set(8,15-a-1,i,!0);e.set(r-8,8,1,!0)}function ub(e,t){const s=e.size;let r=-1,l=s-1,a=7,i=0;for(let o=s-1;o>0;o-=2)for(o===6&&o--;;){for(let c=0;c<2;c++)if(!e.isReserved(l,o-c)){let d=!1;i<t.length&&(d=(t[i]>>>a&1)===1),e.set(l,o-c,d),a--,a===-1&&(i++,a=7)}if(l+=r,l<0||s<=l){l-=r,r=-r;break}}}function mb(e,t,s){const r=new eb;s.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),ab.getCharCountIndicator(c.mode,e)),c.write(r)});const l=rc.getSymbolTotalCodewords(e),a=Qd.getTotalCodewordsCount(e,t),i=(l-a)*8;for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const o=(i-r.getLengthInBits())/8;for(let c=0;c<o;c++)r.put(c%2?17:236,8);return fb(r,e,t)}function fb(e,t,s){const r=rc.getSymbolTotalCodewords(t),l=Qd.getTotalCodewordsCount(t,s),a=r-l,i=Qd.getBlocksCount(t,s),o=r%i,c=i-o,d=Math.floor(r/i),x=Math.floor(a/i),w=x+1,g=d-x,b=new rb(g);let C=0;const k=new Array(i),R=new Array(i);let N=0;const f=new Uint8Array(e.buffer);for(let I=0;I<i;I++){const O=I<c?x:w;k[I]=f.slice(C,C+O),R[I]=b.encode(k[I]),C+=O,N=Math.max(N,O)}const y=new Uint8Array(r);let j=0,D,h;for(D=0;D<N;D++)for(h=0;h<i;h++)D<k[h].length&&(y[j++]=k[h][D]);for(D=0;D<g;D++)for(h=0;h<i;h++)y[j++]=R[h][D];return y}function hb(e,t,s,r){let l;if(Array.isArray(e))l=Jc.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const x=Jc.rawSplit(e);d=Lo.getBestVersionForData(x,s)}l=Jc.fromString(e,d||40)}else throw new Error("Invalid data");const a=Lo.getBestVersionForData(l,s);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=a;else if(t<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const i=mb(t,s,l),o=rc.getSymbolSize(t),c=new tb(o);return ib(c,t),ob(c),cb(c,t),Yc(c,s,0),t>=7&&db(c,t),ub(c,i),isNaN(r)&&(r=qd.getBestMask(c,Yc.bind(null,c,s))),qd.applyMask(r,c),Yc(c,s,r),{modules:c,version:t,errorCorrectionLevel:s,maskPattern:r,segments:l}}Xp.create=function(t,s){if(typeof t>"u"||t==="")throw new Error("No input text");let r=Gc.M,l,a;return typeof s<"u"&&(r=Gc.from(s.errorCorrectionLevel,Gc.M),l=Lo.from(s.version),a=qd.from(s.maskPattern),s.toSJISFunc&&rc.setToSJISFunction(s.toSJISFunc)),hb(t,l,r,a)};var ux={},am={};(function(e){function t(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let r=s.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+s);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const l=parseInt(r.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const l=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,i=r.scale||4;return{width:a,scale:a?4:i,margin:l,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,l){return l.width&&l.width>=r+l.margin*2?l.width/(r+l.margin*2):l.scale},e.getImageWidth=function(r,l){const a=e.getScale(r,l);return Math.floor((r+l.margin*2)*a)},e.qrToImageData=function(r,l,a){const i=l.modules.size,o=l.modules.data,c=e.getScale(i,a),d=Math.floor((i+a.margin*2)*c),x=a.margin*c,w=[a.color.light,a.color.dark];for(let g=0;g<d;g++)for(let b=0;b<d;b++){let C=(g*d+b)*4,k=a.color.light;if(g>=x&&b>=x&&g<d-x&&b<d-x){const R=Math.floor((g-x)/c),N=Math.floor((b-x)/c);k=w[o[R*i+N]?1:0]}r[C++]=k.r,r[C++]=k.g,r[C++]=k.b,r[C]=k.a}}})(am);(function(e){const t=am;function s(l,a,i){l.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=i,a.width=i,a.style.height=i+"px",a.style.width=i+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(a,i,o){let c=o,d=i;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),i||(d=r()),c=t.getOptions(c);const x=t.getImageWidth(a.modules.size,c),w=d.getContext("2d"),g=w.createImageData(x,x);return t.qrToImageData(g.data,a,c),s(w,d,x),w.putImageData(g,0,0),d},e.renderToDataURL=function(a,i,o){let c=o;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),c||(c={});const d=e.render(a,i,c),x=c.type||"image/png",w=c.rendererOpts||{};return d.toDataURL(x,w.quality)}})(ux);var mx={};const pb=am;function oh(e,t){const s=e.a/255,r=t+'="'+e.hex+'"';return s<1?r+" "+t+'-opacity="'+s.toFixed(2).slice(1)+'"':r}function qc(e,t,s){let r=e+t;return typeof s<"u"&&(r+=" "+s),r}function xb(e,t,s){let r="",l=0,a=!1,i=0;for(let o=0;o<e.length;o++){const c=Math.floor(o%t),d=Math.floor(o/t);!c&&!a&&(a=!0),e[o]?(i++,o>0&&c>0&&e[o-1]||(r+=a?qc("M",c+s,.5+d+s):qc("m",l,0),l=0,a=!1),c+1<t&&e[o+1]||(r+=qc("h",i),i=0)):l++}return r}mx.render=function(t,s,r){const l=pb.getOptions(s),a=t.modules.size,i=t.modules.data,o=a+l.margin*2,c=l.color.light.a?"<path "+oh(l.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",d="<path "+oh(l.color.dark,"stroke")+' d="'+xb(i,a,l.margin)+'"/>',x='viewBox="0 0 '+o+" "+o+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+x+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,g),g};const gb=L1,Xd=Xp,fx=ux,vb=mx;function im(e,t,s,r,l){const a=[].slice.call(arguments,1),i=a.length,o=typeof a[i-1]=="function";if(!o&&!gb())throw new Error("Callback required as last argument");if(o){if(i<2)throw new Error("Too few arguments provided");i===2?(l=s,s=t,t=r=void 0):i===3&&(t.getContext&&typeof l>"u"?(l=r,r=void 0):(l=r,r=s,s=t,t=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(s=t,t=r=void 0):i===2&&!t.getContext&&(r=s,s=t,t=void 0),new Promise(function(c,d){try{const x=Xd.create(s,r);c(e(x,t,r))}catch(x){d(x)}})}try{const c=Xd.create(s,r);l(null,e(c,t,r))}catch(c){l(c)}}Jl.create=Xd.create;Jl.toCanvas=im.bind(null,fx.render);Jl.toDataURL=im.bind(null,fx.renderToDataURL);Jl.toString=im.bind(null,function(e,t,s){return vb.render(e,s)});const yb={};function hx(e,t){let s;try{s=e()}catch{return}return{getItem:l=>{var a;const i=c=>c===null?null:JSON.parse(c,void 0),o=(a=s.getItem(l))!=null?a:null;return o instanceof Promise?o.then(i):i(o)},setItem:(l,a)=>s.setItem(l,JSON.stringify(a,void 0)),removeItem:l=>s.removeItem(l)}}const Za=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then(r){return Za(r)(s)},catch(r){return this}}}catch(s){return{then(r){return this},catch(r){return Za(r)(s)}}}},bb=(e,t)=>(s,r,l)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:R=>R,version:0,merge:(R,N)=>({...N,...R}),...t},i=!1;const o=new Set,c=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return e((...R)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),s(...R)},r,l);const x=Za(a.serialize),w=()=>{const R=a.partialize({...r()});let N;const f=x({state:R,version:a.version}).then(y=>d.setItem(a.name,y)).catch(y=>{N=y});if(N)throw N;return f},g=l.setState;l.setState=(R,N)=>{g(R,N),w()};const b=e((...R)=>{s(...R),w()},r,l);let C;const k=()=>{var R;if(!d)return;i=!1,o.forEach(f=>f(r()));const N=((R=a.onRehydrateStorage)==null?void 0:R.call(a,r()))||void 0;return Za(d.getItem.bind(d))(a.name).then(f=>{if(f)return a.deserialize(f)}).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==a.version){if(a.migrate)return a.migrate(f.state,f.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return f.state}).then(f=>{var y;return C=a.merge(f,(y=r())!=null?y:b),s(C,!0),w()}).then(()=>{N==null||N(C,void 0),i=!0,c.forEach(f=>f(C))}).catch(f=>{N==null||N(void 0,f)})};return l.persist={setOptions:R=>{a={...a,...R},R.getStorage&&(d=R.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>k(),hasHydrated:()=>i,onHydrate:R=>(o.add(R),()=>{o.delete(R)}),onFinishHydration:R=>(c.add(R),()=>{c.delete(R)})},k(),C||b},Nb=(e,t)=>(s,r,l)=>{let a={storage:hx(()=>localStorage),partialize:k=>k,version:0,merge:(k,R)=>({...R,...k}),...t},i=!1;const o=new Set,c=new Set;let d=a.storage;if(!d)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),s(...k)},r,l);const x=()=>{const k=a.partialize({...r()});return d.setItem(a.name,{state:k,version:a.version})},w=l.setState;l.setState=(k,R)=>{w(k,R),x()};const g=e((...k)=>{s(...k),x()},r,l);l.getInitialState=()=>g;let b;const C=()=>{var k,R;if(!d)return;i=!1,o.forEach(f=>{var y;return f((y=r())!=null?y:g)});const N=((R=a.onRehydrateStorage)==null?void 0:R.call(a,(k=r())!=null?k:g))||void 0;return Za(d.getItem.bind(d))(a.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==a.version){if(a.migrate)return[!0,a.migrate(f.state,f.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,f.state];return[!1,void 0]}).then(f=>{var y;const[j,D]=f;if(b=a.merge(D,(y=r())!=null?y:g),s(b,!0),j)return x()}).then(()=>{N==null||N(b,void 0),b=r(),i=!0,c.forEach(f=>f(b))}).catch(f=>{N==null||N(void 0,f)})};return l.persist={setOptions:k=>{a={...a,...k},k.storage&&(d=k.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>C(),hasHydrated:()=>i,onHydrate:k=>(o.add(k),()=>{o.delete(k)}),onFinishHydration:k=>(c.add(k),()=>{c.delete(k)})},a.skipHydration||C(),b||g},wb=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((yb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),bb(e,t)):Nb(e,t),jb=wb,om=Gl()(jb((e,t)=>({H:null,createdAt:null,errorPx:null,imageSize:null,anchors:null,locked:!1,setCalibration:s=>e(r=>({...r,...s})),reset:()=>e({H:null,createdAt:null,errorPx:null,imageSize:null,anchors:null,locked:!1})}),{name:"ndn-calibration-v1",storage:hx(()=>localStorage),onRehydrateStorage:()=>e=>{try{if(!get().H){const s=localStorage.getItem("ndn:calibration:v1");if(s){const r=JSON.parse(s);r&&(r.H||r.imageSize)&&set({H:r.H??null,createdAt:r.createdAt??null,errorPx:r.errorPx??null,imageSize:r.imageSize??null,anchors:r.anchors??null,locked:!!r.locked})}}}catch{}}})),Ye={bullInner:6.35,bullOuter:15.9,trebleInner:99,trebleOuter:107,doubleInner:162,doubleOuter:170},Sb=[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5];function cm(e,t){const s=t.x,r=t.y,l=e[6]*s+e[7]*r+e[8],a=(e[0]*s+e[1]*r+e[2])/l,i=(e[3]*s+e[4]*r+e[5])/l;return{x:a,y:i}}function kb(e,t,s){return[t*e[0],t*e[1],t*e[2],s*e[3],s*e[4],s*e[5],e[6],e[7],e[8]]}function Cb(e){const t=e,s=t[0],r=t[1],l=t[2],a=t[3],i=t[4],o=t[5],c=t[6],d=t[7],x=t[8],w=i*x-o*d,g=l*d-r*x,b=r*o-l*i,C=o*c-a*x,k=s*x-l*c,R=l*a-s*o,N=a*d-i*c,f=r*c-s*d,y=s*i-r*a,j=s*w+r*C+l*N;if(Math.abs(j)<1e-12)throw new Error("Singular homography");return[w/j,g/j,b/j,C/j,k/j,R/j,N/j,f/j,y/j]}function Eb(e,t){if(e.length!==4||t.length!==4)throw new Error("Need exactly 4 correspondences");const s=[],r=[];for(let i=0;i<4;i++){const{x:o,y:c}=e[i],{x:d,y:x}=t[i];s.push([o,c,1,0,0,0,-d*o,-d*c]),r.push(d),s.push([0,0,0,o,c,1,-x*o,-x*c]),r.push(x)}const l=Tb(s,r);return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],1]}function Tb(e,t){const s=e.length,r=e[0].length,l=Array.from({length:r},()=>new Array(r).fill(0)),a=new Array(r).fill(0);for(let i=0;i<s;i++)for(let o=0;o<r;o++){a[o]+=e[i][o]*t[i];for(let c=0;c<r;c++)l[o][c]+=e[i][o]*e[i][c]}return Db(l,a)}function Db(e,t){const s=t.length,r=e.map((a,i)=>a.concat([t[i]]));for(let a=0;a<s;a++){let i=a;for(let o=a+1;o<s;o++)Math.abs(r[o][a])>Math.abs(r[i][a])&&(i=o);if(Math.abs(r[i][a])<1e-12)throw new Error("Singular matrix");if(i!==a){const o=r[a];r[a]=r[i],r[i]=o}for(let o=a+1;o<s;o++){const c=r[o][a]/r[a][a];for(let d=a;d<=s;d++)r[o][d]-=c*r[a][d]}}const l=new Array(s).fill(0);for(let a=s-1;a>=0;a--){let i=r[a][s];for(let o=a+1;o<s;o++)i-=r[a][o]*l[o];l[a]=i/r[a][a]}return l}function Ib(){const e=Ye.doubleOuter;return[{x:0,y:-e},{x:e,y:0},{x:0,y:e},{x:-e,y:0}]}function px(e,t,s=256){const r=[];for(let l=0;l<s;l++){const a=l/s*Math.PI*2,i=cm(e,{x:t*Math.cos(a),y:t*Math.sin(a)});r.push(i)}return r}function Mb(e,t,s){let r=0;for(let l=0;l<t.length;l++){const a=cm(e,t[l]),i=a.x-s[l].x,o=a.y-s[l].y;r+=i*i+o*o}return Math.sqrt(r/t.length)}function Lb(e,t){const s=Cb(e);return cm(s,t)}function Pb(e){const t=Math.hypot(e.x,e.y);let r=Math.atan2(e.y,e.x)*180/Math.PI;r=(r+360+90)%360;const l=Sb[Math.floor((360-r)%360/18)];return t<=Ye.bullInner?{base:50,ring:"INNER_BULL",sector:25,mult:2}:t<=Ye.bullOuter?{base:25,ring:"BULL",sector:25,mult:1}:t>=Ye.doubleOuter?{base:0,ring:"MISS",sector:null,mult:0}:t>=Ye.doubleInner?{base:l*2,ring:"DOUBLE",sector:l,mult:2}:t>=Ye.trebleOuter?{base:l,ring:"SINGLE",sector:l,mult:1}:t>=Ye.trebleInner?{base:l*3,ring:"TRIPLE",sector:l,mult:3}:{base:l,ring:"SINGLE",sector:l,mult:1}}function xx(e,t,s="#10b981",r=2){if(t.length){e.save(),e.strokeStyle=s,e.lineWidth=r,e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let l=1;l<t.length;l++)e.lineTo(t[l].x,t[l].y);e.closePath(),e.stroke(),e.restore()}}function Ab(e,t,s="#f59e0b"){e.save(),e.strokeStyle=s,e.lineWidth=2,e.beginPath(),e.moveTo(t.x-8,t.y),e.lineTo(t.x+8,t.y),e.moveTo(t.x,t.y-8),e.lineTo(t.x,t.y+8),e.stroke(),e.restore()}function Po(e,t,s){return Math.max(t,Math.min(s,e))}function Rb(e,t,s){const{width:r,data:l}=e,a=[[-1,0,1],[-2,0,2],[-1,0,1]],i=[[-1,-2,-1],[0,0,0],[1,2,1]];let o=0,c=0;for(let d=-1;d<=1;d++)for(let x=-1;x<=1;x++){const w=Po(t+x,0,r-1),b=(Po(s+d,0,e.height-1)*r+w)*4,C=l[b],k=l[b+1],R=l[b+2],N=.299*C+.587*k+.114*R;o+=N*a[d+1][x+1],c+=N*i[d+1][x+1]}return Math.hypot(o,c)}function Ob(e,t,s=6){const l=e.getContext("2d").getImageData(0,0,e.width,e.height),a=Po(Math.round(t.x),1,e.width-2),i=Po(Math.round(t.y),1,e.height-2);let o={x:a,y:i,mag:-1};for(let c=i-s;c<=i+s;c++)for(let d=a-s;d<=a+s;d++){if(d<=0||c<=0||d>=e.width-1||c>=e.height-1)continue;const x=Rb(l,d,c);x>o.mag&&(o={x:d,y:c,mag:x})}return{x:o.x,y:o.y}}function Bb(e,t,s=6){return t.map(r=>Ob(e,r,s))}const dl={};function _b(){const e=u.useRef(null),t=u.useRef(null),s=u.useRef(null),r=u.useRef(null),[l,a]=u.useState(!1),[i,o]=u.useState("camera"),[c,d]=u.useState(()=>localStorage.getItem("ndn:cal:mode")||"local"),[x,w]=u.useState([]),[g,b]=u.useState(!1),[C,k]=u.useState(null),[R,N]=u.useState(1),{H:f,setCalibration:y,reset:j,errorPx:D,locked:h}=om(),{calibrationGuide:I,setCalibrationGuide:O}=qn(),[P,F]=u.useState(null),[A,V]=u.useState(!1),[T,z]=u.useState(0),[oe,le]=u.useState(null),[Ne,Y]=u.useState(null),[ae,X]=u.useState(null),[re,G]=u.useState(Date.now()),[ce,je]=u.useState(!1),[Oe,Se]=u.useState(null),[Pe,Ee]=u.useState(""),[We,ue]=u.useState(null),[ve,ze]=u.useState(null),[yt,st]=u.useState(!0);u.useEffect(()=>{const q=window.location.hostname;(q==="localhost"||q==="127.0.0.1")&&fetch("/api/hosts").then(de=>de.json()).then(de=>{const fe=Array.isArray(de==null?void 0:de.hosts)&&de.hosts.find(J=>J);fe&&ue(fe)}).catch(()=>{}),fetch("/api/https-info").then(de=>de.json()).then(de=>{de&&typeof de.https=="boolean"&&ze({https:!!de.https,port:Number(de.port)||8788})}).catch(()=>{})},[]),u.useEffect(()=>{c==="phone"&&!ce&&!l&&Ue()},[c]);const Ht=u.useMemo(()=>{const q=Ne||"____",de=dl==null?void 0:dl.VITE_WS_URL;if(de&&de.length>0)try{const xe=new URL(de);return`${`${xe.protocol==="wss:"?"https":"http"}://${xe.host}${xe.pathname.endsWith("/ws")?"":xe.pathname}`.replace(/\/?ws$/i,"")}/mobile-cam.html?code=${q}`}catch{}const fe=We||window.location.hostname,J=!!(ve!=null&&ve.https),Z=J?(ve==null?void 0:ve.port)||8788:8787;return`${J?"https":"http"}://${fe}:${Z}/mobile-cam.html?code=${q}`},[Ne,We,ve]);u.useEffect(()=>{localStorage.setItem("ndn:cal:mode",c)},[c]),u.useEffect(()=>{if(!Ne){Ee("");return}Jl.toDataURL(Ht,{width:160,margin:1,color:{dark:"#000000",light:"#ffffff"}}).then(Ee).catch(()=>Ee(""))},[Ht,Ne]),u.useEffect(()=>{if(!ae)return;const q=setInterval(()=>G(Date.now()),1e3);return()=>clearInterval(q)},[ae]);const M=u.useMemo(()=>ae?Math.max(0,Math.ceil((ae-re)/1e3)):null,[ae,re]);u.useEffect(()=>{M!==null&&M<=0&&!ce&&!l&&c==="phone"&&Tt()},[M,ce,l,c]),u.useEffect(()=>()=>ot(),[]);function ne(){if(oe&&oe.readyState===WebSocket.OPEN)return oe;const q=dl==null?void 0:dl.VITE_WS_URL,de=q&&q.length>0?q.endsWith("/ws")?q:q.replace(/\/$/,"")+"/ws":void 0,fe=window.location.protocol==="https:"?"wss":"ws",J=`${fe}://${window.location.host}/ws`,Z=window.location.hostname,lt=[J,`${fe}://${Z}:8787/ws`,`${fe}://${Z}:3000/ws`],xe=de||lt[0];let Ve=new WebSocket(xe);return le(Ve),Ve}async function Ue(){je(!1);const q=ne();q.readyState===WebSocket.OPEN?q.send(JSON.stringify({type:"cam-create"})):q.onopen=()=>q.send(JSON.stringify({type:"cam-create"})),q.onerror=()=>{},q.onclose=()=>{},q.onmessage=async de=>{const fe=JSON.parse(de.data);if(fe.type==="cam-code")Y(fe.code),fe.expiresAt&&X(fe.expiresAt);else if(fe.type==="cam-peer-joined"){je(!0);const J=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});Se(J),J.onicecandidate=lt=>{lt.candidate&&Ne&&q.send(JSON.stringify({type:"cam-ice",code:Ne,payload:lt.candidate}))},J.ontrack=lt=>{var xe;if(e.current){const Ve=(xe=lt.streams)==null?void 0:xe[0];Ve&&(e.current.srcObject=Ve,e.current.play().catch(()=>{}),a(!0),o("capture"))}};const Z=await J.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!0});await J.setLocalDescription(Z),Ne&&q.send(JSON.stringify({type:"cam-offer",code:Ne,payload:Z}))}else if(fe.type==="cam-answer")Oe&&await Oe.setRemoteDescription(new RTCSessionDescription(fe.payload));else if(fe.type==="cam-ice"){if(Oe)try{await Oe.addIceCandidate(fe.payload)}catch{}}else fe.type==="cam-error"&&alert(fe.code==="EXPIRED"?"Code expired. Generate a new code.":"Invalid code")}}async function Ze(){if(c==="phone")return Ue();try{const q=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});e.current&&(e.current.srcObject=q,await e.current.play()),a(!0),o("capture")}catch{alert("Camera permission denied or not available.")}}function ot(){if(e.current&&e.current.srcObject&&(e.current.srcObject.getTracks().forEach(de=>de.stop()),e.current.srcObject=null,a(!1)),Oe){try{Oe.close()}catch{}Se(null)}Y(null),X(null),je(!1)}function Tt(){Y(null),X(null),je(!1),oe&&oe.readyState===WebSocket.OPEN?oe.send(JSON.stringify({type:"cam-create"})):Ue()}function bt(){var q;try{(q=r.current)==null||q.click()}catch{}}function Qe(q){var J;const de=(J=q.target.files)==null?void 0:J[0];if(!de)return;const fe=new Image;fe.onload=()=>{try{if(!t.current)return;const Z=t.current;Z.width=fe.naturalWidth,Z.height=fe.naturalHeight,Z.getContext("2d").drawImage(fe,0,0,Z.width,Z.height),b(!0),k({w:Z.width,h:Z.height}),o("select"),w([]),ot()}catch{}},fe.onerror=()=>{alert("Could not load image. Please try a different photo.")},fe.src=URL.createObjectURL(de);try{q.target.value=""}catch{}}function ht(){if(!e.current||!t.current)return;const q=e.current,de=t.current;de.width=q.videoWidth,de.height=q.videoHeight,de.getContext("2d").drawImage(q,0,0,de.width,de.height),b(!0),k({w:de.width,h:de.height}),o("select"),w([]),A&&setTimeout(()=>{dn()},0)}function ct(q=x,de=null){if(!t.current||!s.current)return;const fe=t.current,J=s.current;J.width=fe.width,J.height=fe.height;const Z=J.getContext("2d");Z.clearRect(0,0,J.width,J.height),q.forEach((xe,Ve)=>{Ab(Z,xe,"#f472b6"),Z.save(),Z.fillStyle="#f472b6",Z.font="14px sans-serif",Z.fillText(String(Ve+1),xe.x+6,xe.y-6),Z.restore()});const lt=de||f;if(lt){const xe=[Ye.bullInner,Ye.bullOuter,Ye.trebleInner,Ye.trebleOuter,Ye.doubleInner,Ye.doubleOuter];for(const Ve of xe){const et=px(lt,Ve,360);xx(Z,et,Ve===Ye.doubleOuter?"#22d3ee":"#a78bfa",Ve===Ye.doubleOuter?3:2)}}if(!lt&&P){const xe=(Ve,et,B=2)=>{Z.save(),Z.strokeStyle=et,Z.lineWidth=B,Z.beginPath(),Z.arc(P.cx,P.cy,Ve,0,Math.PI*2),Z.stroke(),Z.restore()};xe(P.doubleOuter,"#22d3ee",3),xe(P.doubleInner,"#22d3ee",2),xe(P.trebleOuter,"#fde047",2),xe(P.trebleInner,"#fde047",2),xe(P.bullOuter,"#34d399",2),xe(P.bullInner,"#10b981",3)}if(I){Z.save(),Z.fillStyle="rgba(59,130,246,0.10)";const xe=Math.round(Math.min(J.width,J.height)*.08),Ve=J.width-xe*2,et=J.height-xe*2;Z.fillRect(xe,xe,Ve,et),Z.strokeStyle="rgba(34,197,94,0.9)",Z.lineWidth=2,Z.beginPath(),Z.moveTo(xe,J.height/2),Z.lineTo(J.width-xe,J.height/2),Z.stroke(),Z.beginPath(),Z.moveTo(J.width/2,xe),Z.lineTo(J.width/2,J.height-xe),Z.stroke(),Z.strokeStyle="rgba(234,179,8,0.9)",Z.setLineDash([6,4]);const B=xe+30,W=xe+30;Z.beginPath(),Z.moveTo(B,W+30),Z.lineTo(B+60,W),Z.stroke(),Z.beginPath(),Z.moveTo(J.width-B,W+30),Z.lineTo(J.width-B-60,W),Z.stroke(),Z.restore(),Z.fillStyle="rgba(255,255,255,0.85)",Z.font="12px sans-serif",Z.fillText("Tip: Frame board centered, edges parallel; slight top-down is okay. Keep bull near center.",xe+6,xe+18)}}function rt(q){if(i!=="select")return;const de=q.target,fe=de.getBoundingClientRect(),J=q.clientX-fe.left,Z=q.clientY-fe.top,lt=de.width>0?de.width/fe.width:1,xe=de.height>0?de.height/fe.height:1,Ve=J*lt,et=Z*xe,B=[...x,{x:Ve,y:et}];B.length<=4&&(w(B),ct(B))}function Wt(){const q=x.slice(0,-1);w(q),ct(q)}function En(){if(!t.current||x.length===0)return;const q=Bb(t.current,x,8);w(q),ct(q)}function pt(){if(!t.current)return;if(x.length!==4)return alert("Please click 4 points: TOP, RIGHT, BOTTOM, LEFT corners of the double rim.");const q=Ib(),de=Eb(q,x);ct(x,de);const fe=Mb(de,q,x);y({H:de,createdAt:Date.now(),errorPx:fe,imageSize:{w:t.current.width,h:t.current.height},anchors:{src:q,dst:x}}),o("computed")}function cn(){w([]),b(!1),o("camera"),ct([]),j()}async function dn(){if(!t.current)return alert("Load a photo or capture a frame first.");const q=t.current,fe=Math.min(1,800/q.width),J=Math.max(1,Math.round(q.width*fe)),Z=Math.max(1,Math.round(q.height*fe)),lt=document.createElement("canvas");lt.width=J,lt.height=Z;const xe=lt.getContext("2d");xe.drawImage(q,0,0,J,Z);const Ve=xe.getImageData(0,0,J,Z),et=new Float32Array(J*Z);for(let Ae=0,Be=0;Ae<Ve.data.length;Ae+=4,Be++){const He=Ve.data[Ae],Dt=Ve.data[Ae+1],It=Ve.data[Ae+2];et[Be]=.299*He+.587*Dt+.114*It}const B=new Float32Array(J*Z),W=new Float32Array(J*Z);for(let Ae=1;Ae<Z-1;Ae++)for(let Be=1;Be<J-1;Be++){const He=Ae*J+Be,Dt=et[He-J-1],It=et[He-J],St=et[He-J+1],at=et[He-1],Jt=et[He+1],sn=et[He+J-1],Ps=et[He+J],ps=et[He+J+1];B[He]=-Dt-2*at-sn+(St+2*Jt+ps),W[He]=-Dt-2*It-St+(sn+2*Ps+ps)}const he=new Float32Array(J*Z);let Ie=1;for(let Ae=0;Ae<he.length;Ae++){const Be=Math.hypot(B[Ae],W[Ae]);he[Ae]=Be,Be>Ie&&(Ie=Be)}const ye=Math.floor(J/2),Ce=Math.floor(Z/2),ge=Math.floor(Math.min(J,Z)*.35),U=Math.floor(Math.min(J,Z)*.52);let ie={score:-1,cx:ye,cy:Ce,r:Math.floor((ge+U)/2)};const $e=Math.max(2,Math.floor(Math.min(J,Z)*.01)),tt=Math.max(2,Math.floor(Math.min(J,Z)*.01));for(let Ae=Ce-Math.floor(Z*.08);Ae<=Ce+Math.floor(Z*.08);Ae+=$e)for(let Be=ye-Math.floor(J*.08);Be<=ye+Math.floor(J*.08);Be+=$e)for(let He=ge;He<=U;He+=tt){let Dt=0;const It=360;for(let St=0;St<It;St++){const at=St*Math.PI/180,Jt=Math.round(Be+He*Math.cos(at)),sn=Math.round(Ae+He*Math.sin(at));Jt<=0||Jt>=J-1||sn<=0||sn>=Z-1||(Dt+=he[sn*J+Jt])}Dt>ie.score&&(ie={score:Dt,cx:Be,cy:Ae,r:He})}const Je=1/fe,jt=ie.cx*Je,Xe=ie.cy*Je,dr=ie.r*Je;function dt(Ae){let Be=0;const He=Ae*fe,Dt=360;for(let It=0;It<Dt;It++){const St=It*Math.PI/180,at=Math.round(ie.cx+He*Math.cos(St)),Jt=Math.round(ie.cy+He*Math.sin(St));at<=0||at>=J-1||Jt<=0||Jt>=Z-1||(Be+=he[Jt*J+at])}return Be}const gn={bullInner:Ye.bullInner/Ye.doubleOuter,bullOuter:Ye.bullOuter/Ye.doubleOuter,trebleInner:Ye.trebleInner/Ye.doubleOuter,trebleOuter:Ye.trebleOuter/Ye.doubleOuter,doubleInner:Ye.doubleInner/Ye.doubleOuter};function ms(Ae,Be=.1){const He=Math.max(1,Math.floor(Ae*(1-Be))),Dt=Math.max(He+1,Math.floor(Ae*(1+Be)));let It=He,St=-1;for(let at=He;at<=Dt;at++){const Jt=dt(at);Jt>St&&(St=Jt,It=at)}return It}const Vt=dr,nn=ms(Vt*gn.doubleInner),Ls=ms(Vt*gn.trebleOuter),fs=ms(Vt*gn.trebleInner),Qn=ms(Vt*gn.bullOuter),Bt=ms(Vt*gn.bullInner);F({cx:jt,cy:Xe,bullInner:Bt,bullOuter:Qn,trebleInner:fs,trebleOuter:Ls,doubleInner:nn,doubleOuter:Vt});const _t=Ae=>{let He=0;for(let Dt=0;Dt<180;Dt++){const It=Dt*Math.PI/90,St=Math.round(ie.cx+Ae*fe*Math.cos(It)),at=Math.round(ie.cy+Ae*fe*Math.sin(It));St<=0||St>=J-1||at<=0||at>=Z-1||(He+=he[at*J+St])}return He/180},Te=(_t(ie.r)+_t(Ls)+_t(fs)+_t(nn)+_t(Qn)+_t(Bt))/(Ie*6),hs=Math.max(0,Math.min(1,Te));z(Math.round(hs*100));const Xn=[{x:jt,y:Xe-Vt},{x:jt+Vt,y:Xe},{x:jt,y:Xe+Vt},{x:jt-Vt,y:Xe}];w(Xn),ct(Xn);try{pt()}catch{}const ur=hs>=.85;y({locked:ur})}return u.useEffect(()=>{ct()},[g,f]),u.useEffect(()=>{if(!A||!l)return;let q=0;const de=()=>{try{ht()}catch{}q=requestAnimationFrame(de)};return q=requestAnimationFrame(de),()=>cancelAnimationFrame(q)},[A,l]),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Board Calibrator"}),n.jsx("p",{className:"text-sm opacity-80 mb-3",children:"Click the four points where the outer edge of the double ring touches TOP, RIGHT, BOTTOM, LEFT. Then compute to fit the board overlay. Aim for error < 2px for best accuracy."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 mb-2 items-start",children:[n.jsxs("div",{className:"md:col-span-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-xs opacity-70",children:"Video Source:"}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx("button",{className:`btn px-2 py-1 ${c==="local"?"bg-emerald-600":""}`,onClick:()=>d("local"),children:"Local"}),n.jsx("button",{className:`btn px-2 py-1 ${c==="phone"?"bg-emerald-600":""}`,onClick:()=>d("phone"),children:"Phone"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[n.jsx("span",{className:"opacity-70",children:"View Zoom"}),n.jsx("input",{type:"range",min:50,max:200,step:5,value:Math.round((R||1)*100),onChange:q=>N(Math.max(.5,Math.min(2,Number(q.target.value)/100)))}),n.jsxs("span",{className:"w-10 text-center",children:[Math.round((R||1)*100),"%"]}),n.jsx("button",{className:"btn px-2 py-0.5",onClick:()=>N(1),children:"Actual"})]}),n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[n.jsxs("label",{className:"inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:A,onChange:q=>V(q.target.checked)})," Live auto-detect"]}),n.jsxs("span",{className:`px-2 py-0.5 rounded-full border ${T>=85?"bg-emerald-500/15 border-emerald-400/30":"bg-white/10 border-white/20"}`,children:["Confidence: ",T,"%"]})]}),n.jsxs("label",{className:"mt-2 flex items-center gap-2 text-xs",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:I,onChange:q=>O(q.target.checked)}),"Show preferred-view guide overlay"]}),n.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[l?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:ot,children:"Stop Camera"}),n.jsx("button",{className:"btn",onClick:ht,disabled:!l,children:"Capture Frame"})]}):n.jsx("button",{className:"btn",onClick:Ze,children:c==="local"?"Start Camera":"Pair Phone Camera"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("input",{ref:r,type:"file",accept:"image/*",className:"hidden",onChange:Qe}),n.jsx("button",{className:"btn",onClick:bt,children:"Upload Photo"}),n.jsx("button",{className:"btn",disabled:!g,onClick:dn,children:"Auto Detect"})]}),n.jsx("button",{className:"btn",disabled:x.length!==4,onClick:pt,children:"Compute"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("button",{className:`btn ${h?"bg-emerald-600 hover:bg-emerald-700":""}`,onClick:()=>y({locked:!h}),children:h?"Unlock":"Lock In"}),h&&n.jsxs("span",{className:"text-xs opacity-80",children:["Calibration saved",D!=null?`  error ${D.toFixed(2)}px`:""]})]}),n.jsx("button",{className:"btn",disabled:x.length===0,onClick:Wt,children:"Undo"}),n.jsx("button",{className:"btn",disabled:x.length===0,onClick:En,children:"Refine Points"}),n.jsx("button",{className:"btn",onClick:cn,children:"Reset"})]})]}),n.jsx("div",{className:"md:col-span-8 flex items-center justify-end",children:n.jsx("div",{className:"relative w-full max-w-[min(100%,60vh)] rounded-2xl overflow-hidden border border-indigo-400/30 bg-black",style:{aspectRatio:C?`${C.w} / ${C.h}`:"16 / 9"},children:n.jsxs("div",{className:"absolute inset-0",style:{transform:`scale(${R||1})`,transformOrigin:"center center"},children:[n.jsx("video",{ref:e,onLoadedMetadata:q=>{try{const de=q.currentTarget;de.videoWidth&&de.videoHeight&&k({w:de.videoWidth,h:de.videoHeight})}catch{}},className:`absolute inset-0 w-full h-full ${g?"opacity-0 -z-10":"opacity-100"}`}),n.jsx("canvas",{ref:t,className:`absolute inset-0 w-full h-full ${g?"opacity-100":"opacity-0 -z-10"}`}),n.jsx("canvas",{ref:s,onClick:rt,className:"absolute inset-0 w-full h-full"})]})})})]}),c==="phone"&&!l&&n.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-black/40 border border-white/10 text-white text-xs",children:[n.jsx("div",{children:"Open on your phone:"}),n.jsx("div",{className:"font-mono break-all",children:Ht}),n.jsxs("div",{className:"mt-1 opacity-80",children:["WS: ",oe?oe.readyState===1?"open":oe.readyState===0?"connecting":oe.readyState===2?"closing":"closed":"not started","  ",ve!=null&&ve.https?"HTTPS on":"HTTP only"]}),Ne&&n.jsxs("div",{children:["Code: ",n.jsx("span",{className:"font-mono",children:Ne})]}),Pe&&n.jsx("img",{className:"mt-1 w-[160px] h-[160px] bg-white rounded",alt:"Scan to open",src:Pe}),n.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[M!==null&&n.jsxs("span",{children:["Expires in ",M,"s"]}),n.jsx("button",{className:"btn px-2 py-1 text-xs",onClick:Tt,children:"Regenerate"})]}),yt&&n.jsxs("div",{className:"mt-2 p-2 rounded bg-slate-900/60 border border-slate-700/50 text-slate-200",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Troubleshooting"}),n.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[n.jsx("li",{children:"Phone and desktop must be on the same WiFi network."}),n.jsxs("li",{children:["Allow the server through your firewall (ports 8787 and ",ve!=null&&ve.https?ve.port:8788,")."]}),n.jsx("li",{children:"On iPhone, use HTTPS links (QR will prefer https when enabled)."})]}),n.jsx("div",{className:"mt-2 text-right",children:n.jsx("button",{className:"btn btn--ghost px-2 py-1 text-xs",onClick:()=>st(!1),children:"Hide tips"})})]})]}),n.jsxs("div",{className:"mt-2 text-sm opacity-80",children:[n.jsxs("div",{children:["Phase: ",i]}),n.jsxs("div",{children:["Clicked: ",x.length," / 4"]}),D!=null&&n.jsxs("div",{children:["Fit error: ",D.toFixed(2)," px"]})]})]})})}const Ub=["D1","D2","D3","D4","D5","D6","D7","D8","D9","D10","D11","D12","D13","D14","D15","D16","D17","D18","D19","D20","DB"];function $b(e){return e==="DB"?50:Number(e.slice(1))*2}function Fb(e){return Ub.includes(e)?$b(e):32}function Ao(e,t="D16"){if(e>170||e<=1)return[];const s={170:["T20 T20 DB"],167:["T20 T19 DB"],164:["T20 T18 DB"],161:["T20 T17 DB"],160:["T20 T20 D20"],158:["T20 T20 D19"],157:["T20 T19 D20"],156:["T20 T20 D18"],155:["T20 T19 D19"],154:["T20 T18 D20"],153:["T20 T19 D18"],152:["T20 T20 D16"],151:["T20 T17 D20"],150:["T20 T18 D18"],149:["T20 T19 D16"],148:["T20 T16 D20"],147:["T20 T17 D18"],146:["T20 T18 D16"],145:["T20 T15 D20"],144:["T20 T20 D12"],141:["T20 T19 D12"],140:["T20 T20 D10"],137:["T20 T19 D10"],136:["T20 T20 D8"],132:["BULL T14 D20","T20 T12 D8"],130:["T20 T20 D5","T20 T18 D8"],129:["T19 T16 D12"],128:["T18 T14 D16"],127:["T20 T17 D8"],126:["T19 T19 D6"],121:["T20 11 D20","T20 T15 D8"],120:["T20 20 D20","T20 S20 D20"],110:["T20 10 D20"],100:["T20 D20"],99:["T19 10 D16","T19 S10 D16"],97:["T19 D20"],96:["T20 D18"],95:["T19 D19"],94:["T18 D20"],92:["T20 D16"],90:["T18 D18","T20 D15"],86:["T18 D16"],84:["T20 D12","T16 D18"],82:["BULL D16","T14 D20"],81:["T19 D12"],80:["T20 D10","D20 D20"],78:["T18 D12"],76:["T20 D8","T16 D14"],74:["T14 D16","T18 D10"],72:["T16 D12","T20 D6"],70:["T18 D8","S20 BULL"],68:["T20 D4","T16 D10"],66:["T10 D18","T14 D12"],64:["T16 D8","D16 D16"],62:["T10 D16","T12 D13"],60:["20 D20","S20 D20"],58:["18 D20","S18 D20"],56:["16 D20","S16 D20"],54:["14 D20","S14 D20"],52:["20 D16","S20 D16"],50:["BULL","10 D20"],48:["16 D16","S16 D16"],46:["14 D16"],44:["12 D16"],42:["10 D16"],40:["D20"],38:["D19"],36:["D18"],34:["D17"],32:["D16"],30:["D15"],28:["D14"],26:["D13"],24:["D12"],22:["D11"],20:["D10"],18:["D9"],16:["D8"],14:["D7"],12:["D6"],10:["D5"],8:["D4"],6:["D3"],4:["D2"],2:["D1"]};if(s[e])return s[e];const r=Fb(t),l=[];for(const a of[60,57,54,51,48])if(e-a===r){l.push(`T${a/3} ${t}`);break}if(!l.length){for(const a of[20,19,18,17,16,15])if(e-a===r){l.push(`${a} ${t}`);break}}return l}function lo(e,t,s,r,l){try{const a=window.speechSynthesis;if(!a)return;const i=new SpeechSynthesisUtterance,o=s<=170&&s>0;if(l!=null&&l.checkoutOnly&&!o)return;if(i.text=o?`${e}, you have ${s} remaining.`:`${t}`,r){const c=a.getVoices().find(d=>d.name===r);c&&(i.voice=c)}typeof(l==null?void 0:l.volume)=="number"&&(i.volume=Math.max(0,Math.min(1,l.volume))),i.rate=1,i.pitch=1,a.speak(i)}catch{}}const ul={};function Ro({label:e,autoStart:t=!1,scale:s}){const r=u.useRef(null),[l,a]=u.useState(!1),[i,o]=u.useState(null),[c,d]=u.useState(null),[x,w]=u.useState(null),[g,b]=u.useState(()=>localStorage.getItem("ndn:camera:mode")||"local"),[C,k]=u.useState(null),[R,N]=u.useState(Date.now()),[f,y]=u.useState(!1),[j,D]=u.useState(null),[h,I]=u.useState(null),[O,P]=u.useState(!0);u.useEffect(()=>{const X=window.location.hostname;(X==="localhost"||X==="127.0.0.1")&&fetch("/api/hosts").then(re=>re.json()).then(re=>{const G=Array.isArray(re==null?void 0:re.hosts)&&re.hosts.find(ce=>ce);G&&D(G)}).catch(()=>{}),fetch("/api/https-info").then(re=>re.json()).then(re=>{re&&typeof re.https=="boolean"&&I({https:!!re.https,port:Number(re.port)||8788})}).catch(()=>{})},[]);const F=u.useMemo(()=>{const X=c||"____",re=ul==null?void 0:ul.VITE_WS_URL;if(re&&re.length>0)try{const Se=new URL(re);return`${`${Se.protocol==="wss:"?"https":"http"}://${Se.host}${Se.pathname.endsWith("/ws")?"":Se.pathname}`.replace(/\/?ws$/i,"")}/mobile-cam.html?code=${X}`}catch{}const G=j||window.location.hostname,ce=!!(h!=null&&h.https),je=ce?(h==null?void 0:h.port)||8788:8787;return`${ce?"https":"http"}://${G}:${je}/mobile-cam.html?code=${X}`},[c,j,h]);u.useEffect(()=>{localStorage.setItem("ndn:camera:mode",g)},[g]);const[A,V]=u.useState("");u.useEffect(()=>{if(!c){V("");return}Jl.toDataURL(F,{width:160,margin:1,color:{dark:"#000000",light:"#ffffff"}}).then(V).catch(()=>V(""))},[F,c]),u.useEffect(()=>{if(!C)return;const X=setInterval(()=>N(Date.now()),1e3);return()=>clearInterval(X)},[C]);const T=u.useMemo(()=>C?Math.max(0,Math.ceil((C-R)/1e3)):null,[C,R]);u.useEffect(()=>{T!==null&&T<=0&&!f&&!l&&g==="phone"&&Y()},[T,f,l,g]),u.useEffect(()=>{if(t)return z().catch(()=>{}),()=>oe()},[t]);async function z(){var X,re,G;try{const{preferredCameraId:ce,setPreferredCamera:je}=qn.getState(),Oe=ce?{video:{deviceId:{exact:ce}},audio:!1}:{video:!0,audio:!1};let Se;try{Se=await navigator.mediaDevices.getUserMedia(Oe)}catch(Pe){const Ee=Pe&&(Pe.name||Pe.code)||"";if(ce&&(Ee==="OverconstrainedError"||Ee==="NotFoundError"))Se=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});else throw Pe}r.current&&(r.current.srcObject=Se,await r.current.play(),a(!0));try{const Pe=await navigator.mediaDevices.enumerateDevices(),Ee=(((X=Se.getVideoTracks)==null?void 0:X.call(Se))||[])[0],We=(re=Ee==null?void 0:Ee.getSettings)==null?void 0:re.call(Ee),ue=We==null?void 0:We.deviceId;if(ue){const ve=(G=Pe.find(ze=>ze.deviceId===ue))==null?void 0:G.label;je(ue,ve||"")}}catch{}}catch{}}function oe(){r.current&&r.current.srcObject&&(r.current.srcObject.getTracks().forEach(re=>re.stop()),r.current.srcObject=null,a(!1))}function le(){if(i&&i.readyState===WebSocket.OPEN)return i;const X=ul==null?void 0:ul.VITE_WS_URL,re=X&&X.length>0?X.endsWith("/ws")?X:X.replace(/\/$/,"")+"/ws":void 0,G=window.location.protocol==="https:"?"wss":"ws",ce=`${G}://${window.location.host}/ws`,je=window.location.hostname,Oe=[ce,`${G}://${je}:8787/ws`,`${G}://${je}:3000/ws`],Se=re||Oe[0],Pe=new WebSocket(Se);return o(Pe),Pe}async function Ne(){b("phone"),y(!1);const X=le();X.readyState===WebSocket.OPEN?X.send(JSON.stringify({type:"cam-create"})):X.onopen=()=>X.send(JSON.stringify({type:"cam-create"})),X.onmessage=async re=>{const G=JSON.parse(re.data);if(G.type==="cam-code")d(G.code),G.expiresAt&&k(G.expiresAt);else if(G.type==="cam-peer-joined"){y(!0);const ce=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});w(ce),ce.onicecandidate=Oe=>{Oe.candidate&&c&&X.send(JSON.stringify({type:"cam-ice",code:c,payload:Oe.candidate}))},ce.ontrack=Oe=>{var Se;if(r.current){const Pe=(Se=Oe.streams)==null?void 0:Se[0];Pe&&(r.current.srcObject=Pe,r.current.play().catch(()=>{}),a(!0))}};const je=await ce.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!0});await ce.setLocalDescription(je),c&&X.send(JSON.stringify({type:"cam-offer",code:c,payload:je}))}else if(G.type==="cam-answer")x&&await x.setRemoteDescription(new RTCSessionDescription(G.payload));else if(G.type==="cam-ice"&&x)try{await x.addIceCandidate(G.payload)}catch{}}}function Y(){d(null),k(null),y(!1),i&&i.readyState===WebSocket.OPEN?i.send(JSON.stringify({type:"cam-create"})):Ne()}function ae(){if(oe(),d(null),y(!1),k(null),x){try{x.close()}catch{}w(null)}}return n.jsx(zb,{label:e,autoStart:t,start:z,stopAll:ae,startPhonePairing:Ne,videoRef:r,streaming:l,mode:g,setMode:b,pairCode:c,mobileUrl:F,ttl:T,qrDataUrl:A,regenerateCode:Y,httpsInfo:h,showTips:O,setShowTips:P,scaleOverride:s})}function zb(e){const{cameraScale:t}=qn(),s=Math.max(.5,Math.min(1.25,Number(e.scaleOverride??t??1))),{label:r,start:l,stopAll:a,startPhonePairing:i,videoRef:o,streaming:c,mode:d,setMode:x,pairCode:w,mobileUrl:g,ttl:b,qrDataUrl:C,regenerateCode:k,httpsInfo:R,showTips:N,setShowTips:f}=e;return n.jsxs("div",{className:"rounded-2xl overflow-hidden bg-black w-full mx-auto",style:{aspectRatio:"16 / 9",transform:`scale(${s})`,transformOrigin:"center"},children:[n.jsx("video",{ref:o,className:"w-full h-full object-contain object-center bg-black"}),n.jsxs("div",{className:"p-1 flex items-center justify-between bg-black/60 text-white text-[10px] gap-1",children:[n.jsx("span",{className:"truncate",children:r||(c?d==="phone"?"PHONE LIVE":"LIVE":"Camera")}),n.jsxs("div",{className:"flex items-center gap-1",children:[!c&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:`px-1 py-0.5 rounded ${d==="local"?"bg-emerald-600":"bg-slate-700"}`,onClick:()=>{x("local"),l()},children:"Local"}),n.jsx("button",{className:`px-1 py-0.5 rounded ${d==="phone"?"bg-emerald-600":"bg-slate-700"}`,onClick:i,children:"Phone"})]}),c?n.jsx("button",{className:"px-1 py-0.5 rounded bg-rose-600",onClick:a,children:"Stop"}):null]})]}),d==="phone"&&w&&!c&&n.jsxs("div",{className:"p-2 text-white text-[10px] bg-black/50",children:[n.jsx("div",{children:"Open on your phone:"}),n.jsx("div",{className:"font-mono",children:g}),n.jsxs("div",{children:["Code: ",n.jsx("span",{className:"font-mono",children:w})]}),C&&n.jsx("img",{className:"mt-1 w-[160px] h-[160px] bg-white rounded",alt:"Scan to open",src:C}),n.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[b!==null&&n.jsxs("span",{children:["Expires in ",b,"s"]}),n.jsx("button",{className:"px-1 py-0.5 rounded bg-slate-700",onClick:k,children:"Regenerate"})]}),N&&n.jsxs("div",{className:"mt-2 p-2 rounded bg-slate-900/60 border border-slate-700/50 text-slate-200",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Troubleshooting"}),n.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[n.jsx("li",{children:"Phone and desktop must be on the same WiFi network."}),n.jsxs("li",{children:["Allow the server through your firewall (ports 8787 and ",R!=null&&R.https?R.port:8788,")."]}),n.jsx("li",{children:"On iPhone, use HTTPS links (QR will prefer https when enabled)."})]}),n.jsx("div",{className:"mt-2 text-right",children:n.jsx("button",{className:"btn btn--ghost px-2 py-1 text-xs",onClick:()=>f(!1),children:"Hide tips"})})]})]})]})}function Hb(e){return e.dartsThrown===0?0:(e.totalScoreStart-e.totalScoreRemaining)/e.dartsThrown*3}function Wb(e){const t=Hb(e),s=e.finished;return{avg:t,isCompleted:s,darts:e.dartsThrown,checkout:e.checkoutScore??0}}function Vb(e){if(e.legs.length===0)return;const t=[];let s,r=e.bestCheckout??0;for(const l of e.legs){if(!l.finished)continue;const a=Wb(l);t.push(a.avg),(!s||a.darts<s.darts||a.darts===s.darts&&(l.endTime??0)<s.timestamp)&&(s={darts:a.darts,timestamp:l.endTime??Date.now()}),a.checkout>r&&(r=a.checkout)}t.length&&(e.bestThreeDartAvg=Math.max(...t),e.worstThreeDartAvg=Math.min(...t)),s&&(e.bestNineDart=s),e.bestCheckout=r}const Ia=Gl((e,t)=>({roomId:"",players:[],currentPlayerIdx:0,startingScore:501,inProgress:!1,newMatch:(s,r,l="")=>e(()=>({players:s.map((i,o)=>({id:`${o}`,name:i,legsWon:0,legs:[]})),currentPlayerIdx:0,startingScore:r,inProgress:!0,roomId:l,bestLegThisMatch:void 0})),addVisit:(s,r)=>e(l=>{if(!l.inProgress)return l;const a=l.players[l.currentPlayerIdx];let i=a.legs[a.legs.length-1];return(!i||i.finished)&&(i={visits:[],totalScoreStart:l.startingScore,totalScoreRemaining:l.startingScore,dartsThrown:0,finished:!1,checkoutScore:null,startTime:Date.now()},a.legs.push(i)),i.visits.push({darts:r,score:s}),i.dartsThrown+=r,i.totalScoreRemaining=Math.max(0,i.totalScoreRemaining-s),{...l}}),undoVisit:()=>e(s=>{const r=s.players[s.currentPlayerIdx],l=r.legs[r.legs.length-1];if(!l||l.finished||l.visits.length===0)return s;const a=l.visits.pop();return l.dartsThrown-=a.darts,l.totalScoreRemaining+=a.score,{...s}}),endLeg:s=>e(r=>{const l=r.players[r.currentPlayerIdx],a=l.legs[l.legs.length-1];if(!a||a.finished)return r;if(a.finished=!0,a.checkoutScore=s,a.endTime=Date.now(),a.totalScoreRemaining===0){l.legsWon+=1;const i=r.bestLegThisMatch;(!i||a.dartsThrown<i.darts)&&(r.bestLegThisMatch={playerId:l.id,darts:a.dartsThrown,timestamp:a.endTime})}return{...r}}),nextPlayer:()=>e(s=>({...s,currentPlayerIdx:(s.currentPlayerIdx+1)%s.players.length})),endGame:()=>e(s=>{for(const r of s.players)Vb(r);return{...s,inProgress:!1}}),importState:s=>e(()=>({...s}))}));function Kb(e,t){const s=Lb(e,t);return Pb(s)}function Gb(e){try{if(!e||typeof e!="object")return null;if((e.type==="dart"||e.kind==="dart"||e.event==="dart")&&typeof e.value=="number"){const t=ch(e.ring);return dh(e.value,t)}if(typeof e.value=="number"&&e.ring){const t=ch(e.ring);return dh(e.value,t)}if(typeof e.score=="string"){const t=e.score.trim().toUpperCase();if(t==="50"||t==="DBULL"||t==="INNER_BULL")return{value:50,ring:"INNER_BULL",sector:null,mult:0};if(t==="25"||t==="BULL"||t==="OBULL")return{value:25,ring:"BULL",sector:null,mult:0};const s=t.match(/^(S|D|T)(\d{1,2})$/);if(s){const r=s[1]==="S"?1:s[1]==="D"?2:3,l=parseInt(s[2],10);if(l>=1&&l<=20)return{value:l*r,ring:r===1?"SINGLE":r===2?"DOUBLE":"TRIPLE",sector:l,mult:r}}}if(typeof e.sector=="number"&&typeof e.mult=="number"){const t=Math.max(1,Math.min(20,Math.floor(e.sector))),s=e.mult===1?1:e.mult===2?2:3;return{value:t*s,ring:s===1?"SINGLE":s===2?"DOUBLE":"TRIPLE",sector:t,mult:s}}if(e.bull){const t=String(e.bull).toLowerCase()==="inner"||e.bull===!0;return{value:t?50:25,ring:t?"INNER_BULL":"BULL",sector:null,mult:0}}}catch{}return null}function ch(e){const t=String(e||"").toUpperCase();return t.startsWith("TR")?"TRIPLE":t.startsWith("DO")?"DOUBLE":t.startsWith("SI")?"SINGLE":t==="INNER_BULL"||t==="DBULL"||t==="50"||t==="IBULL"?"INNER_BULL":t==="BULL"||t==="25"||t==="OBULL"||t==="OUTER_BULL"?"BULL":t==="MISS"||t==="0"?"MISS":"SINGLE"}function dh(e,t){const s=Math.max(0,Math.min(60,Math.round(Number(e)||0)));return t==="INNER_BULL"?{value:50,ring:t}:t==="BULL"?{value:25,ring:t}:{value:s,ring:t}}function Jb(e,t){let s=null,r=!0;function l(){if(r)try{s=new WebSocket(e),s.onmessage=a=>{try{const i=JSON.parse(a.data),o=Gb(i);o&&t(o)}catch{}},s.onclose=()=>{s=null,setTimeout(l,1500)},s.onerror=()=>{}}catch{setTimeout(l,2e3)}}return l(),{close:()=>{r=!1;try{s==null||s.close()}catch{}}}}function uh({storageKey:e,children:t,className:s,defaultWidth:r=640,defaultHeight:l=360,minWidth:a=320,minHeight:i=200,maxWidth:o=1600,maxHeight:c=1200}){const[d,x]=u.useState(()=>{try{const f=localStorage.getItem(e);if(f)return JSON.parse(f)}catch{}return{width:r,height:l}}),w=u.useRef(null),g=u.useRef(null);u.useEffect(()=>{function f(){try{localStorage.removeItem(e)}catch{}x({width:r,height:l})}return window.addEventListener("ndn:layout-reset",f),window.addEventListener("ndn:camera-reset",f),()=>{window.removeEventListener("ndn:layout-reset",f),window.removeEventListener("ndn:camera-reset",f)}},[e,r,l]),u.useEffect(()=>{try{localStorage.setItem(e,JSON.stringify(d))}catch{}},[d,e]);function b(f,y,j){return Math.max(y,Math.min(j,f))}function C(f,y){f.preventDefault();const j=g.current;if(!j)return;const D=j.getBoundingClientRect();w.current={x:f.clientX,y:f.clientY,w:D.width,h:D.height,dir:y},window.addEventListener("mousemove",k),window.addEventListener("mouseup",R)}function k(f){const y=w.current;if(!y)return;const j=f.clientX-y.x,D=f.clientY-y.y;let h=y.w,I=y.h;y.dir.includes("e")&&(h=b(y.w+j,a,o)),y.dir.includes("s")&&(I=b(y.h+D,i,c)),y.dir.includes("w")&&(h=b(y.w-j,a,o)),y.dir.includes("n")&&(I=b(y.h-D,i,c)),x({width:Math.round(h),height:Math.round(I)})}function R(){window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",R),w.current=null}const N={width:d.width?`${d.width}px`:void 0,height:d.height?`${d.height}px`:void 0,maxWidth:"100%",maxHeight:"80vh",position:"relative"};return n.jsxs("div",{ref:g,className:`${s||""}`,style:N,children:[t,n.jsx("div",{className:"resizer resizer-nw",onMouseDown:f=>C(f,"nw")}),n.jsx("div",{className:"resizer resizer-ne",onMouseDown:f=>C(f,"ne")}),n.jsx("div",{className:"resizer resizer-sw",onMouseDown:f=>C(f,"sw")}),n.jsx("div",{className:"resizer resizer-se",onMouseDown:f=>C(f,"se")})]})}function ks({storageKey:e,children:t,className:s,defaultWidth:r=520,defaultHeight:l,minWidth:a=360,minHeight:i=200,maxWidth:o=1100,maxHeight:c=900,fullScreen:d=!1,initialFitHeight:x=!1}){const[w,g]=u.useState(()=>{if(!d){try{const D=localStorage.getItem(e);if(D)return JSON.parse(D)}catch{}return{width:r,height:l}}return{}}),b=u.useRef(null);u.useEffect(()=>{if(d)return;function D(){var h;try{localStorage.removeItem(e)}catch{}if(x&&((h=f.current)!=null&&h.parentElement)){const I=f.current.parentElement,O=window.getComputedStyle(I),P=parseFloat(O.paddingTop||"0")||0,F=parseFloat(O.paddingBottom||"0")||0,A=Math.max(0,I.clientHeight-P-F),V=Math.max(i,Math.min(c,Math.round(A)));g({width:r,height:V});return}g({width:r,height:l})}return window.addEventListener("ndn:layout-reset",D),()=>window.removeEventListener("ndn:layout-reset",D)},[e,r,l,d]),u.useEffect(()=>{if(!d)try{localStorage.setItem(e,JSON.stringify(w))}catch{}},[w,e,d]),u.useEffect(()=>{var A;if(d||!x)return;const D=(A=f.current)==null?void 0:A.parentElement;if(!D)return;const h=window.getComputedStyle(D),I=parseFloat(h.paddingTop||"0")||0,O=parseFloat(h.paddingBottom||"0")||0,P=Math.max(0,D.clientHeight-I-O),F=Math.max(i,Math.min(c,Math.round(P)));try{const V=localStorage.getItem(e);if(V){const T=JSON.parse(V),z=(T==null?void 0:T.height)||0;(!z||z<F)&&g(oe=>({...oe,height:F}));return}}catch{}g(V=>({...V,height:F}))},[x,d,e,i,c]);function C(D,h,I){return Math.max(h,Math.min(I,D))}function k(D,h){D.preventDefault();const I=f.current;if(!I)return;const O=I.getBoundingClientRect();b.current={x:D.clientX,y:D.clientY,w:O.width,h:O.height,dir:h},window.addEventListener("mousemove",R),window.addEventListener("mouseup",N)}function R(D){var oe;const h=b.current;if(!h)return;const I=D.clientX-h.x,O=D.clientY-h.y,P=h.dir;let F=h.w,A=h.h,V=1/0;const T=(oe=f.current)==null?void 0:oe.parentElement;if(T){const le=window.getComputedStyle(T),Ne=parseFloat(le.paddingTop||"0")||0,Y=parseFloat(le.paddingBottom||"0")||0;V=Math.max(0,T.clientHeight-Ne-Y)}const z=Math.min(c,isFinite(V)?V:c);P.includes("e")&&(F=C(h.w+I,a,o)),P.includes("s")&&(A=C(h.h+O,i,z)),P.includes("w")&&(F=C(h.w-I,a,o)),P.includes("n")&&(A=C(h.h-O,i,z)),g({width:Math.round(F),height:Math.round(A)})}function N(){window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",N),b.current=null}const f=u.useRef(null),y=d?{width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%"}:{width:w.width?`${w.width}px`:void 0,height:w.height?`${w.height}px`:void 0,maxWidth:`${o}px`,maxHeight:"100%"},j=d?"card relative ndn-modal-full":"card relative";return n.jsxs("div",{ref:f,className:`${j} ${s||""}`,style:y,children:[t,!d&&n.jsx("div",{className:"resizer resizer-nw",onMouseDown:D=>k(D,"nw")}),!d&&n.jsx("div",{className:"resizer resizer-ne",onMouseDown:D=>k(D,"ne")}),!d&&n.jsx("div",{className:"resizer resizer-sw",onMouseDown:D=>k(D,"sw")}),!d&&n.jsx("div",{className:"resizer resizer-se",onMouseDown:D=>k(D,"se")}),!d&&n.jsx("div",{className:"resizer-edge resizer-s",onMouseDown:D=>k(D,"s")})]})}function Fe({onVisitCommitted:e,showToolbar:t=!0,onAutoDart:s,immediateAutoCommit:r=!1,hideInlinePanels:l=!1,scoringMode:a="x01",onGenericDart:i,onGenericReplace:o}){const c=u.useRef(null),{preferredCameraId:d,setPreferredCamera:x,autoscoreProvider:w,autoscoreWsUrl:g}=qn(),[b,C]=u.useState([]),k=u.useRef(null),R=u.useRef(null),[N,f]=u.useState(!1),[y,j]=u.useState(null),{H:D,imageSize:h,reset:I}=om(),[O,P]=u.useState(""),[F,A]=u.useState(""),[V,T]=u.useState(0),[z,oe]=u.useState("MISS"),[le,Ne]=u.useState(0),[Y,ae]=u.useState(0),[X,re]=u.useState([]),G=Ia(B=>B.addVisit),ce=Ia(B=>B.endLeg),je=Ia(B=>B),[Oe,Se]=u.useState(""),[Pe,Ee]=u.useState(""),[We,ue]=u.useState(0),[ve,ze]=u.useState(!1),[yt,st]=u.useState(!1),[Ht,M]=u.useState("auto"),[ne,Ue]=u.useState(!1),[Ze,ot]=u.useState(!1),[Tt,bt]=u.useState(!1),Qe=u.useRef(null);u.useEffect(()=>{const B=()=>ot(!0);return window.addEventListener("ndn:open-autoscore",B),()=>window.removeEventListener("ndn:open-autoscore",B)},[]),u.useEffect(()=>{const B=()=>bt(!0);return window.addEventListener("ndn:open-scoring",B),()=>window.removeEventListener("ndn:open-scoring",B)},[]),u.useEffect(()=>{const B=()=>{M("manual"),Ue(!0)},W=()=>{M("auto"),Ue(!1)};return window.addEventListener("ndn:open-manual",B),window.addEventListener("ndn:close-manual",W),()=>{window.removeEventListener("ndn:open-manual",B),window.removeEventListener("ndn:close-manual",W)}},[]),u.useEffect(()=>{if(!ne)return;const B=setInterval(()=>{try{const W=c.current,he=Qe.current;if(!W||!he)return;const Ie=W.videoWidth||0,ye=W.videoHeight||0;if(!Ie||!ye)return;const Ce=he.clientWidth||640,ge=he.clientHeight||360;he.width!==Ce&&(he.width=Ce),he.height!==ge&&(he.height=ge);const U=he.getContext("2d");U.imageSmoothingEnabled=!0;const ie=Math.min(Ce/Ie,ge/ye),$e=Math.round(Ie*ie),tt=Math.round(ye*ie),Je=Math.floor((Ce-$e)/2),jt=Math.floor((ge-tt)/2);U.fillStyle="#000",U.fillRect(0,0,Ce,ge),U.drawImage(W,Je,jt,$e,tt)}catch{}},120);return()=>clearInterval(B)},[ne]),u.useEffect(()=>()=>ct(),[]);async function ht(){var B,W,he;try{const Ie=d?{video:{deviceId:{exact:d}},audio:!1}:{video:!0,audio:!1};let ye;try{ye=await navigator.mediaDevices.getUserMedia(Ie)}catch(Ce){const ge=Ce&&(Ce.name||Ce.code)||"";if(d&&(ge==="OverconstrainedError"||ge==="NotFoundError"))ye=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});else throw Ce}c.current&&(c.current.srcObject=ye,await c.current.play()),f(!0);try{const Ce=await navigator.mediaDevices.enumerateDevices();C(Ce.filter($e=>$e.kind==="videoinput"));const ge=(((B=ye.getVideoTracks)==null?void 0:B.call(ye))||[])[0],U=(W=ge==null?void 0:ge.getSettings)==null?void 0:W.call(ge),ie=U==null?void 0:U.deviceId;if(ie){const $e=(he=Ce.find(tt=>tt.deviceId===ie))==null?void 0:he.label;x(ie,$e||"")}}catch{}}catch{alert("Camera permission denied or not available.")}}function ct(){c.current&&c.current.srcObject&&(c.current.srcObject.getTracks().forEach(W=>W.stop()),c.current.srcObject=null,f(!1))}function rt(){if(!c.current||!k.current)return;const B=c.current,W=k.current;W.width=B.videoWidth,W.height=B.videoHeight,W.getContext("2d").drawImage(B,0,0,W.width,W.height);const Ie=W.toDataURL("image/png");j(Ie)}function Wt(){return b.length?n.jsxs("div",{className:"absolute top-2 right-2 z-20 flex items-center gap-2 bg-black/40 rounded px-2 py-1 text-xs",children:[n.jsx("span",{children:"Cam:"}),n.jsxs("select",{className:"bg-black/20 rounded px-1 py-0.5",value:d||"",onChange:async B=>{var Ie;const W=B.target.value||void 0,he=(Ie=b.find(ye=>ye.deviceId===W))==null?void 0:Ie.label;x(W,he||""),ct(),await ht()},children:[n.jsx("option",{value:"",children:"Auto"}),b.map(B=>n.jsx("option",{value:B.deviceId,children:B.label||"Camera"},B.deviceId))]})]}):null}function En(){if(!R.current||!c.current||!D||!h)return;const B=R.current,W=c.current,he=W.clientWidth,Ie=W.clientHeight;B.width=he,B.height=Ie;const ye=B.getContext("2d");ye.clearRect(0,0,he,Ie);const Ce=he/h.w,ge=Ie/h.h,U=kb(D,Ce,ge),ie=[Ye.bullInner,Ye.bullOuter,Ye.trebleInner,Ye.trebleOuter,Ye.doubleInner,Ye.doubleOuter];for(const $e of ie){const tt=px(U,$e,360);xx(ye,tt,$e===Ye.doubleOuter?"#22d3ee":"#a78bfa",$e===Ye.doubleOuter?3:2)}}u.useEffect(()=>{const B=setInterval(En,250);return()=>clearInterval(B)},[D,h,N]),u.useEffect(()=>{if(w!=="external-ws"||!g)return;const B=Jb(g,W=>{if(s)try{s(W.value,W.ring,{sector:W.sector??null,mult:W.mult??0})}catch{}else{const he=W.ring==="INNER_BULL"?"INNER_BULL 50":W.ring==="BULL"?"BULL 25":`${W.ring[0]}${W.value/(W.mult||1)||W.value} ${W.value}`;q(W.value,he,W.ring)}});return()=>B.close()},[w,g]);function pt(B){if(!R.current||!D||!h)return;const W=R.current.getBoundingClientRect(),he=B.clientX-W.left,Ie=B.clientY-W.top,ye=R.current.width/h.w,Ce=R.current.height/h.h,ge={x:he/ye,y:Ie/Ce},U=Kb(D,ge),ie=`${U.ring} ${U.base>0?U.base:""}`.trim();P(ie),T(U.base),oe(U.ring),st(!0);try{r&&s&&(s(U.base,U.ring,{sector:U.sector,mult:U.mult}),st(!1))}catch{}}function cn(B){const W=B.trim().toUpperCase();if(!W)return null;const he=W==="BULL"||W==="50"||W==="DBULL"||W==="IBULL",Ie=W==="25"||W==="OBULL";if(he)return{label:"INNER_BULL 50",value:50,ring:"INNER_BULL"};if(Ie)return{label:"BULL 25",value:25,ring:"BULL"};const ye=W.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!ye)return null;const Ce=ye[1]||"S",ge=parseInt(ye[2],10);if(ge<1||ge>20)return null;const U=Ce==="S"?1:Ce==="D"?2:3,ie=Ce==="S"?"SINGLE":Ce==="D"?"DOUBLE":"TRIPLE";return{label:`${Ce}${ge} ${ge*U}`,value:ge*U,ring:ie}}function dn(){const B=je;if(!B.players.length)return B.startingScore;const W=B.players[B.currentPlayerIdx],he=W.legs[W.legs.length-1];return he?he.totalScoreRemaining:B.startingScore}function q(B,W,he){if(a==="custom"){if(i)try{i(B,he,{label:W})}catch{}if(le>=3)return;const $e=le+1;Ne($e),ae(tt=>tt+B),re(tt=>[...tt,{label:W,value:B,ring:he}]);return}if(le>=3)return;const Ie=le+1,ye=Y+B,ge=dn()-ye,U=ge===0&&(he==="DOUBLE"||he==="INNER_BULL");if(ge<0||ge===1||ge===0&&!U){G(0,Ie),Ne(0),ae(0),re([]),e&&e(0,Ie,!1);return}if(Ne(Ie),ae(ye),re($e=>[...$e,{label:W,value:B,ring:he}]),U){G(ye,Ie),ce(ye),Ne(0),ae(0),re([]),e&&e(ye,Ie,!0);return}Ie>=3&&(G(ye,Ie),Ne(0),ae(0),re([]),e&&e(ye,Ie,!1))}function de(){if(O){if(s)try{s(V,z,void 0)}catch{}else q(V,O,z);ue(0),st(!1)}}function fe(){const B=cn(F);if(!B){alert("Enter like T20, D16, 5, 25, 50");return}if(!yt||!O||z==="MISS"||V===0){const W=We+1;ue(W),W>=3&&ze(!0)}else ue(0);q(B.value,B.label,B.ring),A(""),st(!1)}function J(){var tt,Je,jt;const B=cn(F);if(!B){alert("Enter like T20, D16, 5, 25, 50");return}if(le===0||X.length===0){fe();return}if(a==="custom"){if(!yt||!O||z==="MISS"||V===0){const Xe=We+1;ue(Xe),Xe>=3&&ze(!0)}else ue(0);if(re(Xe=>[...Xe.slice(0,-1),{label:B.label,value:B.value,ring:B.ring}]),o)try{o(B.value,B.ring,{label:B.label})}catch{}A(""),st(!1);return}if(!yt||!O||z==="MISS"||V===0){const Xe=We+1;ue(Xe),Xe>=3&&ze(!0)}else ue(0);const W=X[X.length-1],he=le-1,Ie=Y-((W==null?void 0:W.value)||0),ye=dn(),Ce=Ie+B.value,ge=he+1,U=ye-Ce,ie=U===0&&(B.ring==="DOUBLE"||B.ring==="INNER_BULL");if(U<0||U===1||U===0&&!ie){G(0,ge);try{const Xe=(tt=je.players[je.currentPlayerIdx])==null?void 0:tt.name;Xe&&Cr(Xe,ge,0)}catch{}Ne(0),ae(0),re([]),e&&e(0,ge,!1),A(""),st(!1);return}if(Ne(ge),ae(Ce),re(Xe=>[...Xe.slice(0,-1),{label:B.label,value:B.value,ring:B.ring}]),ie){G(Ce,ge),ce(Ce);try{const Xe=(Je=je.players[je.currentPlayerIdx])==null?void 0:Je.name;Xe&&Cr(Xe,ge,Ce)}catch{}Ne(0),ae(0),re([]),e&&e(Ce,ge,!0),A(""),st(!1);return}if(ge>=3){G(Ce,ge);try{const Xe=(jt=je.players[je.currentPlayerIdx])==null?void 0:jt.name;Xe&&Cr(Xe,ge,Ce)}catch{}Ne(0),ae(0),re([]),e&&e(Ce,ge,!1)}A(""),st(!1)}function Z(){ze(!1),ue(0);try{window.dispatchEvent(new CustomEvent("ndn:request-calibrate"))}catch{}}function lt(){I(),ze(!1),ue(0)}function xe(B,W){if(le>=3)return;const he=B*(W==="S"?1:W==="D"?2:3),Ie=W==="S"?"SINGLE":W==="D"?"DOUBLE":"TRIPLE";if(!yt||!O||z==="MISS"||V===0){const ye=We+1;ue(ye),ye>=3&&ze(!0)}else ue(0);q(he,`${W}${B} ${he}`,Ie),st(!1)}function Ve(){if(le===0)return;const B=X[X.length-1];Ne(W=>W-1),ae(W=>W-((B==null?void 0:B.value)||0)),re(W=>W.slice(0,-1))}function et(){var B;if(le!==0){if(a==="custom"){Ne(0),ae(0),re([]);return}G(Y,le);try{const W=(B=je.players[je.currentPlayerIdx])==null?void 0:B.name;W&&Cr(W,le,Y)}catch{}Ne(0),ae(0),re([]),e&&e(Y,le,!1)}}return n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t&&n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{className:`btn px-3 py-1 text-sm ${Ht==="auto"?"tab--active":""}`,onClick:()=>{M("auto"),Ue(!1),ot(!0)},children:"Autoscore"}),n.jsx("button",{className:`btn px-3 py-1 text-sm ${Ht==="manual"?"tab--active":""}`,onClick:()=>{M("manual"),Ue(!0)},title:"Open Manual Correction",children:"Manual Correction"})]})}),l?null:n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Camera"}),n.jsxs(uh,{storageKey:"ndn:camera:size",className:"relative rounded-2xl overflow-hidden bg-black",defaultWidth:720,defaultHeight:405,minWidth:480,minHeight:270,maxWidth:1600,maxHeight:900,children:[n.jsx(Wt,{}),n.jsx("video",{ref:c,className:"w-full h-full object-cover"}),n.jsx("canvas",{ref:R,className:"absolute inset-0 w-full h-full",onClick:pt})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[N?n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:ct,children:"Stop Camera"}):n.jsx("button",{className:"btn",onClick:ht,children:"Start Camera"}),n.jsx("button",{className:"btn",onClick:rt,disabled:!N,children:"Capture Still"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>{try{window.dispatchEvent(new Event("ndn:camera-reset"))}catch{}},children:"Reset Camera Size"})]})]}),n.jsx("canvas",{ref:k,className:"hidden"}),Ze&&n.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100]",role:"dialog","aria-modal":"true",children:n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs(ks,{storageKey:"ndn:autoscore:size",className:"w-full max-w-3xl",defaultWidth:720,defaultHeight:520,minWidth:420,minHeight:320,maxWidth:1400,maxHeight:900,initialFitHeight:!0,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Autoscore"}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn btn--ghost",onClick:()=>ot(!1),children:"Close"})})]}),n.jsx("div",{className:"text-sm opacity-80 mb-3",children:"Click the camera overlay to autoscore. Use Manual Correction if the last auto is off."}),n.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[n.jsx("span",{className:"font-semibold",children:"Last auto:"}),n.jsx("span",{children:O||""}),n.jsx("button",{className:"btn",onClick:de,disabled:le>=3,children:"Add Auto Dart"}),We>0&&n.jsxs("span",{className:"text-sm opacity-80",children:["No-registers: ",We,"/3"]})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"text-sm font-semibold mb-2",children:"Quick entry"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsx("button",{className:"btn",disabled:le>=3,onClick:()=>{if(!yt||!O||z==="MISS"||V===0){const B=We+1;ue(B),B>=3&&ze(!0)}else ue(0);q(25,"BULL 25","BULL"),st(!1)},children:"25"}),n.jsx("button",{className:"btn",disabled:le>=3,onClick:()=>{if(!yt||!O||z==="MISS"||V===0){const B=We+1;ue(B),B>=3&&ze(!0)}else ue(0);q(50,"INNER_BULL 50","INNER_BULL"),st(!1)},children:"50"})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("input",{className:"input w-full max-w-sm",list:"autoscore-quick-list",placeholder:"Type or select (e.g., D16, T20, S5)",value:Oe,onChange:B=>Se(B.target.value.toUpperCase()),onKeyDown:B=>{if(B.key==="Enter"){const W=Oe.match(/^(S|D|T)(\d{1,2})$/);W&&xe(parseInt(W[2],10),W[1])}}}),n.jsx("datalist",{id:"autoscore-quick-list",children:["D","S","T"].map(B=>Array.from({length:20},(W,he)=>he+1).map(W=>n.jsx("option",{value:`${B}${W}`},`${B}${W}`)))}),n.jsx("button",{className:"btn",disabled:!Oe||le>=3,onClick:()=>{const B=Oe.match(/^(S|D|T)(\d{1,2})$/);if(!B)return;const W=B[1],he=parseInt(B[2],10);xe(he,W)},children:"Add"})]})]})]})})}),ne&&n.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100]",role:"dialog","aria-modal":"true",children:n.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[n.jsxs("div",{className:"p-3 md:p-4 flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl md:text-2xl font-semibold",children:"Manual Correction"}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>{Ue(!1)},children:"Close"})})]}),n.jsx("div",{className:"flex-1 p-3 md:p-4",children:n.jsxs("div",{className:"h-full grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"card relative flex flex-col",children:[n.jsx("div",{className:"text-sm font-semibold mb-2",children:"Live Preview"}),n.jsx("div",{className:"relative flex-1 rounded-2xl overflow-hidden bg-black",children:n.jsx("canvas",{ref:Qe,className:"absolute inset-0 w-full h-full"})})]}),n.jsxs("div",{className:"card flex flex-col",children:[n.jsx("div",{className:"text-sm opacity-80 mb-2",children:"Type a correction or replace the last dart. The preview updates live."}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"font-semibold",children:"Last auto:"}),n.jsx("span",{children:O||""}),n.jsx("button",{className:"btn",onClick:de,disabled:le>=3,children:"Add Auto Dart"})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("input",{className:"input flex-1",placeholder:"Manual (T20, D16, 5, 25, 50)",value:F,onChange:B=>A(B.target.value),onKeyDown:B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),fe()),B.key==="Enter"&&B.shiftKey&&(B.preventDefault(),J())}}),n.jsx("button",{className:"btn btn--ghost",onClick:J,disabled:le===0,children:"Replace Last"}),n.jsx("button",{className:"btn",onClick:fe,disabled:le>=3,children:"Add"})]}),n.jsx("div",{className:"text-xs opacity-70 mb-4",children:"Press Enter to Add  Shift+Enter to Replace Last"}),n.jsxs("div",{className:"mt-auto",children:[n.jsx("div",{className:"text-sm font-semibold mb-2",children:"Quick entry"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsx("button",{className:"btn",disabled:le>=3,onClick:()=>{if(!yt||!O||z==="MISS"||V===0){const B=We+1;ue(B),B>=3&&ze(!0)}else ue(0);q(25,"BULL 25","BULL"),st(!1)},children:"25"}),n.jsx("button",{className:"btn",disabled:le>=3,onClick:()=>{if(!yt||!O||z==="MISS"||V===0){const B=We+1;ue(B),B>=3&&ze(!0)}else ue(0);q(50,"INNER_BULL 50","INNER_BULL"),st(!1)},children:"50"})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("input",{className:"input w-full max-w-sm",list:"manual-quick-list",placeholder:"Type or select (e.g., D16, T20, S5)",value:Pe,onChange:B=>Ee(B.target.value.toUpperCase()),onKeyDown:B=>{if(B.key==="Enter"){const W=Pe.match(/^(S|D|T)(\d{1,2})$/);W&&xe(parseInt(W[2],10),W[1])}}}),n.jsx("datalist",{id:"manual-quick-list",children:["D","S","T"].map(B=>Array.from({length:20},(W,he)=>he+1).map(W=>n.jsx("option",{value:`${B}${W}`},`${B}${W}`)))}),n.jsx("button",{className:"btn",disabled:!Pe||le>=3,onClick:()=>{const B=Pe.match(/^(S|D|T)(\d{1,2})$/);if(!B)return;const W=B[1],he=parseInt(B[2],10);xe(he,W)},children:"Add"})]})]})]})]})})]})}),Tt&&n.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100]",role:"dialog","aria-modal":"true",children:n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs(ks,{storageKey:"ndn:scoring:size",className:"w-full max-w-6xl",defaultWidth:980,defaultHeight:720,minWidth:600,minHeight:420,maxWidth:1600,maxHeight:1e3,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Scoring"}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn btn--ghost",onClick:()=>bt(!1),children:"Close"})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Camera"}),n.jsxs(uh,{storageKey:"ndn:camera:size:modal",className:"relative rounded-2xl overflow-hidden bg-black",defaultWidth:720,defaultHeight:405,minWidth:480,minHeight:270,maxWidth:1600,maxHeight:900,children:[n.jsx(Wt,{}),n.jsx("video",{ref:c,className:"w-full h-full object-cover"}),n.jsx("canvas",{ref:R,className:"absolute inset-0 w-full h-full",onClick:pt})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[N?n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:ct,children:"Stop Camera"}):n.jsx("button",{className:"btn",onClick:ht,children:"Start Camera"}),n.jsx("button",{className:"btn",onClick:rt,disabled:!N,children:"Capture Still"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>{try{window.dispatchEvent(new Event("ndn:camera-reset"))}catch{}},children:"Reset Camera Size"})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Pending Visit"}),n.jsx("div",{className:"text-sm opacity-80 mb-2",children:"Up to 3 darts per visit."}),n.jsx("ul",{className:"text-sm mb-2 list-disc pl-5",children:X.length===0?n.jsx("li",{className:"opacity-60",children:"No darts yet"}):X.map((B,W)=>n.jsx("li",{children:B.label},W))}),n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsxs("div",{className:"font-semibold",children:["Darts: ",le,"/3"]}),n.jsxs("div",{className:"font-semibold",children:["Total: ",Y]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"btn",onClick:Ve,disabled:le===0,children:"Undo Dart"}),n.jsx("button",{className:"btn",onClick:et,disabled:le===0,children:"Commit Visit"}),n.jsx("button",{className:"btn",onClick:()=>{Ne(0),ae(0),re([])},disabled:le===0,children:"Clear"})]})]})]})]})})}),ve&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"card max-w-md w-full",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Recalibration Recommended"}),n.jsx("p",{className:"opacity-80 mb-3",children:"We detected 3 incorrect autoscores in a row. You can recalibrate now or reset calibration and try again."}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{className:"btn",onClick:Z,children:"Go to Calibrate"}),n.jsx("button",{className:"btn",onClick:lt,children:"Reset Calibration"}),n.jsx("button",{className:"btn bg-gray-200 text-gray-800",onClick:()=>{ze(!1),ue(0)},children:"Dismiss"})]})]})}),l?null:n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Pending Visit"}),n.jsx("div",{className:"text-sm opacity-80 mb-2",children:"Up to 3 darts per visit."}),n.jsx("ul",{className:"text-sm mb-2 list-disc pl-5",children:X.length===0?n.jsx("li",{className:"opacity-60",children:"No darts yet"}):X.map((B,W)=>n.jsx("li",{children:B.label},W))}),n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsxs("div",{className:"font-semibold",children:["Darts: ",le,"/3"]}),n.jsxs("div",{className:"font-semibold",children:["Total: ",Y]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"btn",onClick:Ve,disabled:le===0,children:"Undo Dart"}),n.jsx("button",{className:"btn",onClick:et,disabled:le===0,children:"Commit Visit"}),n.jsx("button",{className:"btn",onClick:()=>{Ne(0),ae(0),re([])},disabled:le===0,children:"Clear"})]})]})]})}const Ln=[...Array.from({length:20},(e,t)=>({label:`D${t+1}`,score:(t+1)*2})),{label:"DBULL",score:50,isBull:!0}];function Zd(e,t){const s=Ln[t];return!!s&&e===s.score}function wr(e){const t=e.trim().toUpperCase();if(!t)return null;if(t==="50"||t==="BULL"||t==="DBULL"||t==="IBULL")return 50;if(t==="25"||t==="OBULL")return 25;const s=t.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!s)return null;const r=s[1]||"S",l=parseInt(s[2],10);return l<1||l>20?null:l*(r==="S"?1:r==="D"?2:3)}const Rt=[...Array.from({length:20},(e,t)=>t+1),25,50],ei=[20,19,18,17,16,15,25];function Er(){const e={};return ei.forEach(t=>{e[t]=0}),{marks:e,points:0}}function gx(e,t,s,r,l=()=>!1){let a=null,i=0;if(s==="BULL"||s==="INNER_BULL"||t===25||t===50)a=25,i=s==="INNER_BULL"||t===50?2:1;else if(typeof r=="number"&&r>=15&&r<=20)a=r,s==="TRIPLE"?i=3:s==="DOUBLE"?i=2:i=1;else if(t){const b=[20,19,18,17,16,15];for(const C of b){if(t===C){a=C,i=1;break}if(t===C*2){a=C,i=2;break}if(t===C*3){a=C,i=3;break}}!a&&(t===25||t===50)&&(a=25,i=t===50?2:1)}if(!a)return 0;const o=e.marks[a];let c=Math.max(0,3-o);const d=Math.min(c,i),x=Math.max(0,i-d),w=o+d;e.marks[a]=w>3?3:w;let g=0;return x>0&&!l(a)&&(a===25?s==="INNER_BULL"?g+=50*x:g+=25*x:g+=a*x),e.points+=g,g}function Yb(e){return ei.every(t=>(e.marks[t]||0)>=3)}function Ws(){return{round:1,score:0,finished:!1,shanghaiAchieved:!1,turnHits:{singles:0,doubles:0,triples:0}}}function qb(e){return e.round}function vx(e,t,s,r){if(e.finished)return 0;const l=qb(e);let a=0;return typeof r=="number"&&r===l?s==="TRIPLE"?(a=l*3,e.turnHits.triples++):s==="DOUBLE"?(a=l*2,e.turnHits.doubles++):s==="SINGLE"&&(a=l*1,e.turnHits.singles++):!r&&(t===l||t===l*2||t===l*3)&&(t===l*3?(a=l*3,e.turnHits.triples++):t===l*2?(a=l*2,e.turnHits.doubles++):t===l&&(a=l,e.turnHits.singles++)),e.score+=a,a}function yx(e){if(!e.finished){if(e.turnHits.singles>0&&e.turnHits.doubles>0&&e.turnHits.triples>0){e.shanghaiAchieved=!0,e.finished=!0;return}const t=e.round+1;t>20?e.finished=!0:e.round=t}e.turnHits={singles:0,doubles:0,triples:0}}function Vs(){return{stage:0,targets:[{kind:"NUMBER",num:20},{kind:"DOUBLE",num:16},{kind:"TRIPLE",num:14},{kind:"NUMBER",num:19},{kind:"BULL"},{kind:"ANY_NUMBER"}],score:0,finished:!1,hitThisRound:!1}}function Oo(e){return e.targets[e.stage]||null}function bx(e,t,s,r){if(e.finished)return 0;const l=Oo(e);if(!l)return 0;let a=0;switch(l.kind){case"NUMBER":{typeof r=="number"&&r===l.num?s==="TRIPLE"?a=l.num*3:s==="DOUBLE"?a=l.num*2:s==="SINGLE"&&(a=l.num):!r&&(t===l.num||t===l.num*2||t===l.num*3)&&(a=t),a>0&&(e.hitThisRound=!0);break}case"DOUBLE":{(s==="DOUBLE"&&r===l.num||t===l.num*2)&&(a=l.num*2,e.hitThisRound=!0);break}case"TRIPLE":{(s==="TRIPLE"&&r===l.num||t===l.num*3)&&(a=l.num*3,e.hitThisRound=!0);break}case"BULL":{(s==="BULL"||s==="INNER_BULL"||t===25||t===50)&&(a=s==="INNER_BULL"||t===50?50:25,e.hitThisRound=!0);break}case"ANY_NUMBER":{t>0&&(a=t,e.hitThisRound=!0);break}}return e.score+=a,a}function Nx(e){e.finished||(e.hitThisRound||(e.score=Math.floor(e.score/2)),e.hitThisRound=!1,e.stage+=1,e.stage>=e.targets.length&&(e.finished=!0))}function Ks(){return{round:1,score:0,target:"HIGH",finished:!1}}function wx(e,t,s,r){if(e.finished)return 0;let l=0;if(e.target==="HIGH")if(s==="INNER_BULL")l=50;else if(typeof r=="number"){const i=r*(s==="TRIPLE"?3:s==="DOUBLE"?2:1);r>=20&&(l=i)}else t>=40&&(l=t);else if(typeof r=="number"){const i=r*(s==="TRIPLE"?3:s==="DOUBLE"?2:1);r<=10&&(l=i)}else t>0&&t<=30&&(l=t);return e.score+=l,l}function jx(e){if(!e.finished){if(e.round+=1,e.round>10){e.finished=!0;return}e.target=e.target==="HIGH"?"LOW":"HIGH"}}function Sx(e,t=3){return{number:e,lives:t,isKiller:!1,eliminated:!1}}function Qb(e){const t=Array.from({length:20},(r,l)=>l+1),s={};for(const r of e){const l=Math.floor(Math.random()*t.length),a=t.splice(l,1)[0];s[r]=a}return s}function eu(e,t,s,r){const l=t[e];if(!l||!r||!s)return{becameKiller:!1};if(!l.isKiller&&s==="DOUBLE"&&r===l.number)return l.isKiller=!0,{becameKiller:!0};if(l.isKiller&&(s==="DOUBLE"||s==="TRIPLE")){const a=Object.keys(t).find(i=>i!==e&&!t[i].eliminated&&t[i].number===r);if(a){const i=t[a],o=s==="TRIPLE"?2:1;return i.lives=Math.max(0,i.lives-o),i.lives===0&&(i.eliminated=!0),{becameKiller:!1,victimId:a,livesRemoved:o}}}return{becameKiller:!1}}function tu(e){const t=Object.entries(e).filter(([,s])=>!s.eliminated&&s.lives>0);return t.length===1?t[0][0]:null}function Ma(){return{inning:1,score:0,dartsThisInning:0,finished:!1}}function kx(e,t,s,r){if(e.finished)return 0;let l=0;if(typeof r=="number"&&r===e.inning?s==="TRIPLE"?l=3:s==="DOUBLE"?l=2:l=1:!r&&(t===e.inning||t===e.inning*2||t===e.inning*3)&&(l=t===e.inning*3?3:t===e.inning*2?2:1),e.score+=l,e.dartsThisInning+=1,e.dartsThisInning>=3){const a=e.inning+1;a>9?e.finished=!0:(e.inning=a,e.dartsThisInning=0)}return l}const Cx={1:5,2:20,3:1,4:18,5:4,6:13,7:6,8:10,9:15,10:2,11:17,12:3,13:19,14:7,15:16,16:8,17:11,18:14};function La(){return{hole:1,strokes:0,dartsThisHole:0,finished:!1}}function Ex(e,t,s,r){if(e.finished)return!1;const l=Cx[e.hole];if(e.dartsThisHole+=1,typeof r=="number"&&r===l&&(s==="SINGLE"||s==="DOUBLE"||s==="TRIPLE")||!r&&(t===l||t===l*2||t===l*3)){e.strokes+=e.dartsThisHole;const i=e.hole+1;return i>18?e.finished=!0:(e.hole=i,e.dartsThisHole=0),!0}if(e.dartsThisHole>=3){e.strokes+=3;const i=e.hole+1;i>18?e.finished=!0:(e.hole=i,e.dartsThisHole=0)}return!1}const dm={0:{type:"NUM",num:20},1:{type:"NUM",num:19},2:{type:"NUM",num:18},3:{type:"NUM",num:17},4:{type:"BULL"},5:{type:"NUM",num:16},6:{type:"NUM",num:15},7:{type:"NUM",num:14},8:{type:"NUM",num:13}};function nu(){return{board:Array(9).fill(null),turn:"X",finished:!1,winner:null}}function Xb(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[s,r,l]of t)if(e[s]&&e[s]===e[r]&&e[s]===e[l])return e[s];return e.every(s=>s)?"Draw":null}function Tx(e,t,s,r,l){if(e.finished||e.board[t])return!1;const a=dm[t];let i=!1;if(a.type==="BULL"?i=r==="BULL"||r==="INNER_BULL"||s===25||s===50:a.type==="NUM"&&typeof a.num=="number"&&(typeof l=="number"&&l===a.num||!l&&(s===a.num||s===a.num*2||s===a.num*3))&&(i=!0),!i)return!1;e.board[t]=e.turn;const o=Xb(e.board);return o?(e.finished=!0,e.winner=o,!0):(e.turn=e.turn==="X"?"O":"X",!0)}const lc=[20,19,18,17,16,15,14,13,12,25];function Pa(){const e={};return lc.forEach(t=>{e[t]=0}),{marks:e,points:0}}function Dx(e,t,s,r,l=()=>!1){let a=null,i=0;if(s==="BULL"||s==="INNER_BULL"||t===25||t===50)a=25,i=s==="INNER_BULL"||t===50?2:1;else if(typeof r=="number"&&r>=12&&r<=20)a=r,s==="TRIPLE"?i=3:s==="DOUBLE"?i=2:i=1;else if(t){for(const b of[20,19,18,17,16,15,14,13,12]){if(t===b){a=b,i=1;break}if(t===b*2){a=b,i=2;break}if(t===b*3){a=b,i=3;break}}!a&&(t===25||t===50)&&(a=25,i=t===50?2:1)}if(!a)return 0;const o=e.marks[a],c=Math.max(0,3-o),d=Math.min(c,i),x=Math.max(0,i-d),w=o+d;e.marks[a]=w>3?3:w;let g=0;return x>0&&!l(a)&&(a===25?s==="INNER_BULL"?g+=50*x:g+=25*x:g+=a*x),e.points+=g,g}function Zb(e){return lc.every(t=>(e.marks[t]||0)>=3)}const mh=["X01","Double Practice"],eN=["Around the Clock","Cricket","Halve It","Shanghai","High-Low","Killer","Bob's 27","Count-Up","High Score","Low Score","Checkout 170","Checkout 121","Treble Practice"],tN=["Easy","Medium","Hardened"];function Aa(e,t,s){return Math.max(t,Math.min(s,e))}function nN(e,t){let s=0;if(t==="Easy"){const r=[22,26,41,45,60];s=r[Math.floor(Math.random()*r.length)]}else t==="Medium"?s=Math.round(Aa(60+(Math.random()*30-15),30,100)):s=Math.round(Aa(80+(Math.random()*20-10),50,120));return e<=0?0:s>e?[100,85,81,60,57,45,41,26,22,20,1].find(l=>l<=e)??0:s}function sN({onClose:e}){return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"card max-w-lg w-full relative",children:[n.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:e,children:"Close"}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:"X01 Rules & Regulations"}),n.jsxs("ul",{className:"list-disc pl-5 text-left mb-2",children:[n.jsx("li",{children:"Double In: Start scoring only after hitting a double."}),n.jsx("li",{children:"Double Out: Finish the game by hitting a double to reach exactly zero."}),n.jsx("li",{children:"Best Of: Play a set number of legs, winner is first to reach majority."}),n.jsx("li",{children:"First To: Play until a player reaches a set number of legs."}),n.jsx("li",{children:"No Cheating: All scores must be valid, no manual score changes mid-leg."}),n.jsx("li",{children:"Competitive Standard: Follow latest WDF/PDC rules for match play."})]}),n.jsx("p",{className:"text-sm text-slate-600",children:"For full details, see official darts governing body rules."})]})})}function rN({user:e}){var $m,Fm,zm,Hm,Wm;const{offlineLayout:t}=qn(),[s,r]=u.useState("X01"),[l,a]=u.useState(501),[i,o]=u.useState("None"),[c,d]=u.useState(!1),[x,w]=u.useState(!1),[g,b]=u.useState(l),[C,k]=u.useState(l),[R,N]=u.useState(!1),[f,y]=u.useState(!1),[j,D]=u.useState(1),[h,I]=u.useState(0),[O,P]=u.useState(0),[F,A]=u.useState(null),[V,T]=u.useState(1),[z,oe]=u.useState(1),[le,Ne]=u.useState([]),[Y,ae]=u.useState(2e3),[X,re]=u.useState(!1),[G,ce]=u.useState(t==="modern"),[je,Oe]=u.useState(t==="modern");u.useEffect(()=>{ce(t==="modern"),Oe(t==="modern")},[t]);const[Se,Pe]=u.useState(1),[Ee,We]=u.useState(!0),[ue,ve]=u.useState(0),[ze,yt]=u.useState(0),[st,Ht]=u.useState(0),[M,ne]=u.useState(0),[Ue,Ze]=u.useState(0),[ot,Tt]=u.useState(Er()),[bt,Qe]=u.useState(Ws()),[ht,ct]=u.useState(Vs()),[rt,Wt]=u.useState(Ks()),[En,pt]=u.useState(0),[cn,dn]=u.useState(1),[q,de]=u.useState(27),[fe,J]=u.useState(0),[Z,lt]=u.useState(0),[xe,Ve]=u.useState(!1),[et,B]=u.useState(1),[W,he]=u.useState(0),[Ie,ye]=u.useState(0),Ce=8,[ge,U]=u.useState(1),[ie,$e]=u.useState(0),[tt,Je]=u.useState(0),jt=10,[Xe,dr]=u.useState(1),[dt,gn]=u.useState(0),[ms,Vt]=u.useState(0),nn=10,[Ls,fs]=u.useState(170),[Qn,Bt]=u.useState(0),[_t,Br]=u.useState(0),[Te,hs]=u.useState(0),[Xn,ur]=u.useState(121),[Ae,Be]=u.useState(0),[He,Dt]=u.useState(0),[It,St]=u.useState(0),[at,Jt]=u.useState(20),[sn,Ps]=u.useState(0),[ps,_r]=u.useState(0),[Ur,$r]=u.useState(Ma()),[Fr,zr]=u.useState(La()),[Un,Yl]=u.useState(nu()),[Ke,ii]=u.useState(Pa()),[mt,As]=u.useState([{id:"p1",name:"Player 1"},{id:"p2",name:"Player 2"}]),[xs,mr]=u.useState({}),[fr,Hr]=u.useState({}),[ql,ut]=u.useState(!1),[vn,Zn]=u.useState(0),[oi,es]=u.useState(0),[gs,Rs]=u.useState(null),[ci,Tn]=u.useState(""),[ts,ns]=u.useState(0),[Dn,ss]=u.useState(0),[yn,Os]=u.useState(0),[Ql,Xl]=u.useState(l),[rs,hr]=u.useState(0),[Wr,In]=u.useState(0),[Vr,Kr]=u.useState(0);u.useRef(null);const[$n,Gr]=u.useState(0),[pr,Jr]=u.useState(0),[Fn,vs]=u.useState(0),[Yr,Bs]=u.useState(0),[qr,Zl]=u.useState(0),[Qr,ea]=u.useState(0),[Xr,ta]=u.useState(0),[Zr,na]=u.useState(0),[xr,el]=u.useState(0),[gr,sa]=u.useState(0),[ra,la]=u.useState(0),[aa,ia]=u.useState(0),[di,tl]=u.useState(0),[ui,nl]=u.useState(0),[mi,sl]=u.useState(0),[m,v]=u.useState(0),[E,S]=u.useState(0),[K,te]=u.useState(0),[se,$]=u.useState(0),[xt,it]=u.useState(0),[Nt,Ut]=u.useState(!1),[Me,pe]=u.useState(""),{favoriteDouble:ys,callerEnabled:fi,callerVoice:hi,callerVolume:pi,speakCheckoutOnly:vr,rememberLastOffline:ac,setLastOffline:_x,autoStartOffline:hm,cameraScale:rl,setCameraScale:xi,cameraAspect:gi="wide",setCameraAspect:Ux}=qn(),ll=u.useRef(null),al=u.useRef(null),ic=u.useRef(null),[il,oc]=u.useState("first"),[vi,pm]=u.useState(1),$x=u.useRef(null);u.useEffect(()=>{const p=Math.max(1,Math.floor(Number(vi)||1)),L=il==="first"?p:Math.max(1,Math.ceil(p/2));D(L)},[il,vi]),u.useEffect(()=>{if(!je){Pe(1);return}const p=()=>{const H=ll.current,ee=al.current;if(!H||!ee)return;const De=ic.current?ic.current.getBoundingClientRect().height:0,Le=Math.max(0,H.clientHeight-De-6),we=Math.max(0,H.clientWidth-8),be=ee.getBoundingClientRect(),ke=Se||1,Re=be.height/ke,Pt=be.width/ke,Mn=Le>0?Le/Re:1,yr=we>0?we/Pt:1,zn=Math.min(1,Math.max(.5,Math.min(Mn,yr)));Pe(zn)};p();const L=window.ResizeObserver,_=L?new L(()=>p()):null;return _&&ll.current&&_.observe(ll.current),_&&al.current&&_.observe(al.current),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p);try{_&&ll.current&&_.unobserve(ll.current)}catch{}try{_&&al.current&&_.unobserve(al.current)}catch{}}},[je,Se]),u.useEffect(()=>{const p=L=>{var H;const _=(H=L==null?void 0:L.detail)==null?void 0:H.mode;_&&(r(_),ol())};return window.addEventListener("ndn:auto-start",p),()=>window.removeEventListener("ndn:auto-start",p)},[]),u.useEffect(()=>{const p=L=>{var De,Le,we;const _=(De=L==null?void 0:L.detail)==null?void 0:De.formatType,H=(Le=L==null?void 0:L.detail)==null?void 0:Le.formatCount,ee=(we=L==null?void 0:L.detail)==null?void 0:we.startScore;(_==="first"||_==="best")&&oc(_),typeof H=="number"&&isFinite(H)&&pm(Math.max(1,Math.floor(H))),typeof ee=="number"&&isFinite(ee)&&a(Math.max(1,Math.floor(ee)))};return window.addEventListener("ndn:offline-format",p),()=>window.removeEventListener("ndn:offline-format",p)},[]),u.useEffect(()=>{if(!hm)return;const p=setTimeout(()=>ol(),50);return()=>clearTimeout(p)},[hm]),u.useEffect(()=>{if(!X||Ee||i==="None"||Vr<=0)return;let p,L=performance.now();const _=H=>{const ee=H-L;L=H,Kr(De=>{const Le=De-ee;if(Le<=0){let we=0,be=C;for(;we<3&&be>0;){const ke=nN(be,i),Re=Aa(ke-we*20,0,Math.min(60,be)),Pt=be-Re;if(Jr(Re),Gr(zn=>zn+1),sa(zn=>zn+1),Pt<0){be=C,vs(0),Bs(0);break}vs(zn=>zn+Re),ia(zn=>zn+Re);const Mn=be,yr=Pt;if(Mn>50&&yr<=50?Bs(1):Mn<=50&&Bs(zn=>zn+1),be=Pt,we+=1,be===0)break}if(k(be),be===0){Fn===180?v(Re=>Re+1):Fn>=140?S(Re=>Re+1):Fn>=100&&te(Re=>Re+1);const ke=C;ke<=170&&it(Re=>Math.max(Re,ke)),C<=50&&(ta(Re=>Re+(Yr>0?Yr:1)),na(Re=>Re+1)),vs(0),Bs(0),A("ai"),y(!0)}return be>0&&we>=3&&(Fn===180?v(ke=>ke+1):Fn>=140?S(ke=>ke+1):Fn>=100&&te(ke=>ke+1),vs(0),Bs(0)),We(!0),0}return Le}),Vr>0&&(p=requestAnimationFrame(_))};return p=requestAnimationFrame(_),()=>cancelAnimationFrame(p)},[X,Ee,i,Vr,C]);function ol(){w(!0),b(l),k(l),N(!1),re(!0),We(!0),ve(0),ns(0),ss(0),Os(0),Xl(l),hr(0),In(0),Kr(0),Gr(0),Jr(0),vs(0),A(null),I(0),P(0),Ne([]),el(0),sa(0),la(0),ia(0),tl(0),nl(0),sl(0),v(0),S(0),te(0),$(0),it(0),Zl(0),ea(0),ta(0),na(0);const p=Math.max(1,Math.floor(Number(vi)||1));if(D(il==="first"?p:Math.max(1,Math.ceil(p/2))),ac)try{_x({mode:s,x01Start:l,firstTo:j,aiLevel:i})}catch{}}function Fx(){b(l),k(l),N(!1),re(!0),We(!0),ve(0),ns(0),ss(0),Os(0),Xl(l),hr(0),In(0),Kr(0),Gr(0),Jr(0),vs(0),A(null)}function xm(p){Os(0),Xl(p===0?l:g),In(0),i!=="None"?(We(!1),Kr(Y)):We(!1)}function cc(p){const L=g-p,_=yn+1;if(ss(p),ns(we=>we+1),el(we=>we+1),L<0){b(Ql),xm(Ql),ve(0),hr(0),In(0);return}b(L),fi&&lo((e==null?void 0:e.username)||"Player",p,Math.max(L,0),hi,{volume:pi,checkoutOnly:vr}),Os(_),hr(we=>we+p),la(we=>we+p),ve(0);const H=g,ee=L,De=H>50&&ee<=50,Le=H<=50;if(De?In(1):Le&&In(we=>we+1),L===0){rs+p===180?tl(be=>be+1):rs+p>=140?nl(be=>be+1):rs+p>=100&&sl(be=>be+1);const we=Ql;we<=170&&$(be=>Math.max(be,we)),H<=50&&(Zl(be=>be+(Wr>0?Wr:1)),ea(be=>be+1)),A("player"),y(!0);return}_>=3&&(rs+p===180?tl(we=>we+1):rs+p>=140?nl(we=>we+1):rs+p>=100&&sl(we=>we+1),xm(L),hr(0),In(0))}function gm(){const p=Aa(Math.round(Number(ue)||0),0,60);cc(p)}function vm(p){const L=Aa(Math.round(p||0),0,60);if(ss(L),ns(_=>_+1),el(_=>_+1),Zd(L,ze)){const _=st+1;Ht(_),yt(H=>Math.min(20,H+1)),_>=21&&(A("player"),y(!0))}ve(0)}function ym(){vm(Number(ue))}function bm(){const p=wr(Me);if(p==null){alert("Enter like D16, 50, 25, T20");return}vm(p),pe("")}function Nm(p,L,_){if(xe)return;const H=cn,ee=L==="DOUBLE"&&_===H||!L&&p===H*2;ee&&lt(De=>De+1),J(De=>{const Le=De+1;if(Le>=3){const we=Z+(ee?1:0);we>0?de(ke=>ke+we*H*2):de(ke=>ke-H*2);const be=H+1;return dn(be),lt(0),be>20&&Ve(!0),0}return Le})}function wm(){Nm(Math.max(0,ue|0)),ve(0)}function jm(){dn(1),de(27),J(0),lt(0),Ve(!1)}function dc(p){he(L=>L+Math.max(0,p|0)),ye(L=>{const _=L+1;return _>=3?(B(H=>H+1),0):_})}function uc(p){$e(L=>L+Math.max(0,p|0)),Je(L=>{const _=L+1;return _>=3?(U(H=>H+1),0):_})}function mc(p){gn(L=>L+Math.max(0,p|0)),Vt(L=>{const _=L+1;return _>=3?(dr(H=>H+1),0):_})}function Sm(p,L,_,H,ee,De,Le,we){const be=p-Le;if(!(be<0))if(be===0){if(we==="DOUBLE"||we==="INNER_BULL"){De(ke=>ke+1),ee(ke=>ke+1),H(()=>0),L(p);return}}else L(be);H(ke=>{const Re=ke+1;return Re>=3?(ee(Pt=>Pt+1),0):Re})}function km(p,L){Sm(Ls,fs,Qn,Bt,Br,hs,p,L),Qn+1>=3&&fs(170)}function Cm(p,L){Sm(Xn,ur,Ae,Be,Dt,St,p,L),Ae+1>=3&&ur(121)}function yi(p){const L=wr(Me);if(L==null){alert("Enter like T20, D16, 25, 50");return}const _=Me.trim().toUpperCase(),H=_.startsWith("D")||_==="50"||_==="BULL"||_==="DBULL"||_==="IBULL"||_.includes("INNER");p?km(L,H?"DOUBLE":void 0):Cm(L,H?"DOUBLE":void 0),pe("")}function zx(){fs(170),Bt(0),Br(0),hs(0)}function Hx(){ur(121),Be(0),Dt(0),St(0)}function fc(p,L,_){L==="TRIPLE"&&_===at?Ps(H=>H+1):!L&&p===at*3&&Ps(H=>H+1),_r(H=>H+1)}function Wx(){Ps(0),_r(0)}function Vx(p,L,_){$r(H=>{const ee={...H};return kx(ee,p,L,_),ee})}function Kx(){$r(Ma())}function Gx(p,L,_){zr(H=>{const ee={...H};return Ex(ee,p,L,_),ee})}function Jx(){zr(La())}function Yx(p,L,_,H){Yl(ee=>{const De={...ee,board:[...ee.board]};return Tx(De,p,L,_,H),De})}function qx(){Yl(nu())}function Qx(p,L,_){ii(H=>{const ee={...H,marks:{...H.marks}};return Dx(ee,p,L,_,()=>!1),ee})}function Em(){ii(Pa())}function hc(p,L,_){const H=Rt[M];let ee=!1;if(typeof _=="number"&&_===H&&(L==="SINGLE"||L==="DOUBLE"||L==="TRIPLE")&&(ee=!0),H===25&&(L==="BULL"||p===25)&&(ee=!0),H===50&&(L==="INNER_BULL"||p===50)&&(ee=!0),ee||(p===H||p===H*2||p===H*3)&&(ee=!0),ee){const De=Ue+1;Ze(De),ne(Le=>Le+1)}}function Tm(){hc(Math.max(0,ue|0)),ve(0)}function Dm(){const p=wr(Me);if(p==null){alert("Enter like T20, D5, 25, 50");return}hc(p),pe("")}function Im(p,L,_){Tt(H=>{const ee={...H,marks:{...H.marks}};return gx(ee,p,L,_,()=>!1),ee}),pt(H=>{const ee=H+1;return ee>=3?0:ee})}function Mm(){Im(Math.max(0,ue|0)),ve(0)}function Lm(p,L,_){Qe(H=>{const ee={...H,turnHits:{...H.turnHits}};return vx(ee,p,L,_),ee}),pt(H=>{const ee=H+1;return ee>=3?(Qe(De=>{const Le={...De,turnHits:{...De.turnHits}};return yx(Le),Le}),0):ee})}function Pm(){Lm(Math.max(0,ue|0)),ve(0)}function Am(p,L,_){ct(H=>{const ee={...H,targets:[...H.targets]};return bx(ee,p,L,_),ee}),pt(H=>{const ee=H+1;return ee>=3?(ct(De=>{const Le={...De,targets:[...De.targets]};return Nx(Le),Le}),0):ee})}function Rm(){Am(Math.max(0,ue|0)),ve(0)}function Om(p,L,_){Wt(H=>{const ee={...H};return wx(ee,p,L,_),ee}),pt(H=>{const ee=H+1;return ee>=3?(Wt(De=>{const Le={...De};return jx(Le),Le}),0):ee})}function Bm(){Om(Math.max(0,ue|0)),ve(0)}function _m(){const p=Me.trim().toUpperCase();if(!p)return null;if(p==="50"||p==="BULL"||p==="DBULL"||p==="IBULL")return 50;if(p==="25"||p==="OBULL")return 25;const L=p.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!L)return null;const _=L[1]||"S",H=parseInt(L[2],10);return H<1||H>20?null:H*(_==="S"?1:_==="D"?2:3)}function pc(){const p=_m();if(p==null){alert("Enter like T20, D16, 5, 25, 50");return}cc(p),pe("")}function Xx(){yn!==0&&(b(p=>p+Dn),Os(p=>Math.max(0,p-1)))}function Um(){const p=_m();if(p==null){alert("Enter like T20, D16, 5, 25, 50");return}if(yn===0){pc();return}const L=Dn;b(_=>_+L),Os(_=>Math.max(0,_-1)),setTimeout(()=>cc(p),0),pe("")}function Zx(){const p=F??"player",L=p==="player"?Wr||void 0:Yr||void 0;Ne([...le,{winner:p,doubleDarts:V,checkoutDarts:z,doublesAtt:L,doublesHit:1}]),y(!1);let H=h,ee=O;if(F==="player"?H+=1:F==="ai"&&(ee+=1),I(H),P(ee),A(null),H>=j||ee>=j){try{e1(s,p==="player")}catch{}re(!1),w(!1),b(l),k(l),Ut(!0);return}Fx()}const xc=!mh.includes(s)&&!(e!=null&&e.fullAccess||e!=null&&e.admin);return n.jsxs("div",{className:"card relative overflow-hidden",children:[n.jsxs("h2",{className:"text-2xl font-bold text-brand-700 mb-4",children:["Offline Game Modes ",t==="classic"?n.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-white/10 border border-white/10 align-middle",children:"Classic layout"}):n.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-400/30 text-emerald-200 align-middle",children:"Modern layout"})]}),n.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[n.jsx("label",{className:"font-semibold",children:"Select game mode:"}),n.jsxs("select",{className:"input w-full",value:s,onChange:p=>r(p.target.value),children:[mh.map(p=>n.jsx("option",{value:p,children:p},p)),eN.map(p=>n.jsxs("option",{value:p,disabled:!(e!=null&&e.fullAccess||e!=null&&e.admin),children:[p," ",e!=null&&e.fullAccess||e!=null&&e.admin?"":"(Premium)"]},p))]}),!(e!=null&&e.fullAccess)&&n.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2",children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM."})]}),s==="X01"&&n.jsxs(n.Fragment,{children:[n.jsx("label",{className:"font-semibold mt-2",children:"Enter starting score (1-1001):"}),n.jsx("input",{className:"input w-full",type:"number",min:1,max:1001,value:l,onChange:p=>a(Number(p.target.value))}),n.jsx("label",{className:"font-semibold mt-2",children:"Play against AI bot?"}),n.jsxs("select",{className:"input w-full",value:i,onChange:p=>o(p.target.value),children:[n.jsx("option",{value:"None",children:"None"}),tN.map(p=>n.jsx("option",{value:p,children:p},p))]}),i!=="None"&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2",children:[n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"font-semibold",children:"AI throw delay (seconds)"}),n.jsx("input",{className:"input w-full",type:"number",min:.5,max:10,step:.5,value:Y/1e3,onChange:p=>ae(Math.round(Number(p.target.value)*1e3))})]}),n.jsx("div",{className:"text-sm text-slate-300",children:"Controls how long the AI waits before its visit."})]}),n.jsx("button",{className:"btn mt-2",onClick:()=>d(!0),children:"X01 Rules & Regulations!"})]}),s==="Double Practice"&&n.jsx("div",{className:"mt-2 text-brand-600",children:"Hit doubles D1  D20  DBULL in as few darts as possible. AI and X01 settings dont apply."})]}),!x&&n.jsx("button",{className:"btn",disabled:xc,title:xc?"PREMIUM required for this mode":"",onClick:ol,children:"Start Match"}),X&&n.jsx("div",{className:`absolute inset-0 z-[1000] ${G?"":"flex items-center justify-center p-3 sm:p-4"}`,children:n.jsx(ks,{storageKey:"ndn:modal:offline-match",className:`${G?"w-full h-full ndn-modal-tight":""} relative flex flex-col overflow-hidden`,fullScreen:G,defaultWidth:1100,defaultHeight:720,minWidth:720,minHeight:480,maxWidth:1600,maxHeight:1200,initialFitHeight:!0,children:n.jsxs("div",{className:"flex-1 min-h-0 overflow-x-hidden pr-1 pt-2 pb-2",style:{overflowY:je?"hidden":"auto"},ref:p=>{ll.current=p},children:[n.jsxs("div",{ref:p=>{ic.current=p},className:"sticky top-0 relative overflow-hidden flex items-center justify-between gap-2 mb-2 px-2 sm:px-3 py-2 rounded-xl bg-white/10 border border-white/10 z-10 backdrop-blur-sm",children:[n.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-slate-900/30 via-slate-900/10 to-transparent"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm leading-none flex-wrap",children:[n.jsx("span",{className:"hidden xs:inline px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-[10px] sm:text-xs",children:"Game Mode"}),n.jsxs("span",{className:"font-medium whitespace-nowrap",children:[s,s==="X01"?` / ${l}`:""]}),n.jsxs("span",{className:"opacity-80 whitespace-nowrap",children:["First to ",j,"  Legs ",h,"-",O]}),n.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full border text-[10px] sm:text-xs ${t==="modern"?"bg-emerald-500/15 text-emerald-200 border-emerald-400/30":"bg-white/10 text-white/70 border-white/20"}`,children:t==="modern"?"Modern layout":"Classic layout"})]}),n.jsxs("div",{className:"flex items-center gap-1 flex-wrap justify-end",children:[n.jsxs("div",{className:"hidden items-center gap-2 mr-2 text-xs",children:[n.jsx("span",{className:"opacity-80",children:"Cam"}),n.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>xi(Math.max(.5,Math.round((rl-.05)*100)/100)),title:"Decrease camera size",children:""}),n.jsxs("span",{className:"w-9 text-center",children:[Math.round(rl*100),"%"]}),n.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>xi(Math.min(1.25,Math.round((rl+.05)*100)/100)),title:"Increase camera size",children:"+"})]}),n.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:je?"Actual Size":"Fit All",onClick:()=>Oe(p=>!p),children:je?"Actual Size":"Fit All"}),n.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:G?"Restore":"Maximize",onClick:()=>ce(p=>!p),children:G?"Restore":"Maximize"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ol()},children:"Restart"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:()=>{re(!1),w(!1)},children:"Quit"})]})]}),n.jsxs("div",{ref:p=>{al.current=p},className:"will-change-transform",style:je?{transform:`scale(${Se})`,transformOrigin:"top left",width:"100%",fontSize:`${Math.max(.8,Math.min(1,Se))}em`}:void 0,children:[n.jsx("h3",{className:"text-xl font-bold mb-2 mt-1 leading-tight",children:s==="X01"?"X01 Match":s}),n.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[n.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Mode: ",s]}),n.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Start: ",l]}),n.jsxs("div",{ref:$x,className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[n.jsx("span",{children:"Format:"}),(()=>{const p=g!==l||C!==l||yn>0,L=`px-2 py-0.5 rounded border text-xs ${p?"opacity-50 cursor-not-allowed":"cursor-pointer"} `;return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",className:`${L} ${il==="first"?"bg-indigo-500/20 text-indigo-100 border-indigo-400/30":"bg-white/10 text-white/80 border-white/20"}`,onClick:()=>{p||oc("first")},title:"First to N",children:"First to"}),n.jsx("button",{type:"button",className:`${L} ${il==="best"?"bg-indigo-500/20 text-indigo-100 border-indigo-400/30":"bg-white/10 text-white/80 border-white/20"}`,onClick:()=>{p||oc("best")},title:"Best of N (wins = ceil(N/2)",children:"Best of"})]}),n.jsx("input",{className:`input w-16 text-center ${p?"opacity-50":""}`,type:"number",min:1,step:1,value:vi,onChange:_=>pm(Math.max(1,Math.floor(Number(_.target.value)||1))),disabled:p,title:il==="first"?"First to N":"Best of N (wins = ceil(N/2))"})]})})()]}),n.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs: ",h,"",O]})]}),s!=="X01"?n.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2",children:[s==="Double Practice"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{className:"opacity-80",children:"Current Target"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:(($m=Ln[ze])==null?void 0:$m.label)||""})]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[st," / 21"]})]}),s==="Around the Clock"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{className:"opacity-80",children:"Current Target"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Rt[M]===25?"25 (Outer Bull)":Rt[M]===50?"50 (Inner Bull)":Rt[M]||""})]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[Ue," / ",Rt.length]})]}),s==="Cricket"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Cricket  Close 2015 and Bull; overflow scores points"}),n.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-[11px] mb-2",children:ei.map(p=>{var L;return n.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[n.jsx("div",{className:"opacity-70",children:p===25?"Bull":p}),n.jsxs("div",{className:"font-semibold",children:[Math.min(3,((L=ot.marks)==null?void 0:L[p])||0)," / 3"]})]},p)})}),n.jsxs("div",{className:"text-sm",children:["Points: ",n.jsx("span",{className:"font-semibold",children:ot.points})]}),Yb(ot)&&n.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",n.jsx("button",{className:"ml-2 underline",onClick:()=>{Tt(Er()),pt(0)},children:"Reset"})]})]}),s==="Shanghai"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{children:"Round"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:bt.round})]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",bt.score]}),bt.finished&&n.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",n.jsx("button",{className:"ml-2 underline",onClick:()=>{Qe(Ws()),pt(0)},children:"Reset"})]})]}),s==="Halve It"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{children:"Stage"}),n.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[ht.stage+1,"/",ht.targets.length]})]}),n.jsxs("div",{className:"text-sm",children:["Target: ",n.jsx("span",{className:"font-semibold",children:(()=>{const p=Oo(ht);return p?p.kind==="ANY_NUMBER"?"Any":p.kind==="BULL"?"Bull":p.kind==="DOUBLE"||p.kind==="TRIPLE"||p.kind==="NUMBER"?`${p.kind} ${p.num}`:"":""})()})]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ht.score]}),ht.finished&&n.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",n.jsx("button",{className:"ml-2 underline",onClick:()=>{ct(Vs()),pt(0)},children:"Reset"})]})]}),s==="High-Low"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",rt.round,"  Target ",rt.target]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",rt.score]}),rt.finished&&n.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",n.jsx("button",{className:"ml-2 underline",onClick:()=>{Wt(Ks()),pt(0)},children:"Reset"})]})]}),s==="Bob's 27"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{children:"Target"}),n.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold",children:["D",cn]})]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",q]}),xe&&n.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",n.jsx("button",{className:"ml-2 underline",onClick:jm,children:"Reset"})]})]}),s==="Count-Up"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",et,"/8"]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",W]})]}),s==="High Score"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",ge,"/10"]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ie]})]}),s==="Low Score"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Xe,"/10"]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",dt]})]}),s==="Checkout 170"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ls}),n.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",_t,"  Successes: ",Te]})]}),s==="Checkout 121"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Xn}),n.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",He,"  Successes: ",It]})]}),s==="Treble Practice"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600",children:["Treble Target: T",at]}),n.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Hits: ",sn]})]}),s==="Baseball"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs text-slate-600",children:"Inning"}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ur.inning}),n.jsxs("div",{className:"text-sm",children:["Score: ",n.jsx("span",{className:"font-semibold",children:Ur.score})]})]}),s==="Golf"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs text-slate-600",children:"Hole"}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Fr.hole}),n.jsxs("div",{className:"text-sm",children:["Strokes: ",n.jsx("span",{className:"font-semibold",children:Fr.strokes})]})]}),s==="Tic Tac Toe"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs text-slate-600",children:"Turn"}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Un.turn}),Un.finished&&n.jsxs("div",{className:"mt-1 text-xs",children:["Winner: ",Un.winner||""]})]}),s==="American Cricket"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Close 2012 and Bull; overflow scores points"}),n.jsx("div",{className:"grid grid-cols-10 gap-1 text-center text-[11px] mb-2",children:lc.map(p=>{var L;return n.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[n.jsx("div",{className:"opacity-70",children:p===25?"Bull":p}),n.jsxs("div",{className:"font-semibold",children:[Math.min(3,((L=Ke.marks)==null?void 0:L[p])||0)," / 3"]})]},p)})}),n.jsxs("div",{className:"text-sm",children:["Points: ",n.jsx("span",{className:"font-semibold",children:Ke.points})]}),Zb(Ke)&&n.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",n.jsx("button",{className:"ml-2 underline",onClick:Em,children:"Reset"})]})]}),s==="Killer"&&n.jsx(n.Fragment,{children:ql?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{children:"Turn"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:((Fm=mt[vn])==null?void 0:Fm.name)||""})]}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:gs?`${((zm=mt.find(p=>p.id===gs))==null?void 0:zm.name)||"Winner"} Wins`:ci||"Ready"})]}):n.jsx("div",{className:"text-xs text-slate-600",children:"Setup players and assign numbers"})})]}):t==="modern"?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mb-2 items-stretch min-w-0",children:[n.jsxs("div",{className:"flex flex-col gap-2 min-w-0",children:[n.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col",children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{className:"opacity-80",children:"You Remain"}),Ee?n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"}):n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"})]}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:g}),n.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:n.jsx("div",{className:"h-full bg-emerald-400/70",style:{width:`${Math.max(0,Math.min(100,(1-g/l)*100))}%`}})}),n.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",n.jsx("span",{className:"font-semibold",children:Dn})]}),n.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",n.jsx("span",{className:"font-semibold",children:ts>0?((l-g)/ts*3).toFixed(1):"0.0"})]}),n.jsxs("div",{className:"text-xs opacity-70 flex items-center gap-2",children:[n.jsxs("span",{children:["Darts thrown: ",ts]}),n.jsx("span",{className:"inline-flex items-center gap-1","aria-label":"Visit darts",children:[0,1,2].map(p=>n.jsx("span",{className:`w-2 h-2 rounded-full ${p<yn?"bg-emerald-400":"bg-white/20"}`},p))})]}),n.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",n.jsxs("span",{className:"font-semibold",children:["Att ",qr,"  Hit ",Qr]})]}),g<=170&&g>0&&(()=>{const L=Ao(g,ys)[0]||"";return n.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-sm",children:[n.jsx("span",{className:"opacity-70",children:"Checkout"}),n.jsx("span",{className:"font-semibold",children:L})]})})()]}),n.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10 text-white text-sm",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Match Summary"}),(()=>{const p=Ee?(e==null?void 0:e.username)||"You":i==="None"?"":`${i} AI`,L=Ee?g:i==="None"?0:C,_=Ee?Dn:pr,H=Ee?rs:Fn,ee=Ee?ts:$n,De=l-(Ee?g:i==="None"?l:C),Le=ee>0?De/ee*3:0,we=`${h}-${O}`,be=le.length>0?`${Math.min(...le.map(ke=>ke.doubleDarts+(ke.checkoutDarts||0)))||0} darts`:"";return n.jsxs("div",{className:"grid grid-cols-2 gap-y-1",children:[n.jsx("div",{className:"opacity-80",children:"Current score"}),n.jsx("div",{className:"font-mono text-right",children:we}),n.jsx("div",{className:"opacity-80",children:"Current thrower"}),n.jsx("div",{className:"text-right font-semibold",children:p}),n.jsx("div",{className:"opacity-80",children:"Score remaining"}),n.jsx("div",{className:"text-right font-mono",children:L}),n.jsx("div",{className:"opacity-80",children:"3-dart avg"}),n.jsx("div",{className:"text-right font-mono",children:Le.toFixed(1)}),n.jsx("div",{className:"opacity-80",children:"Last score"}),n.jsx("div",{className:"text-right font-mono",children:H||_}),n.jsx("div",{className:"opacity-80",children:"Best leg"}),n.jsx("div",{className:"text-right",children:be})]})})()]}),n.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col",children:[n.jsxs("div",{className:"text-xs flex items-center justify-between opacity-80",children:[n.jsxs("span",{children:[i==="None"?"Opponent":`${i} AI`," Remain"]}),Ee?n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"}):n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"})]}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:i!=="None"?C:"N/A"}),i!=="None"&&n.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:n.jsx("div",{className:"h-full bg-fuchsia-400/70",style:{width:`${Math.max(0,Math.min(100,(1-C/l)*100))}%`}})}),n.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",n.jsx("span",{className:"font-semibold",children:i==="None"?0:pr})]}),n.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",n.jsx("span",{className:"font-semibold",children:i!=="None"?$n>0?((l-C)/$n*3).toFixed(1):"0.0":""})]}),i!=="None"&&n.jsxs("div",{className:"text-xs opacity-70",children:["Darts thrown: ",$n]}),i!=="None"&&n.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",n.jsxs("span",{className:"font-semibold",children:["Att ",Xr,"  Hit ",Zr]})]})]})]}),n.jsxs("div",{className:"md:col-span-2 min-w-0 space-y-2",children:[n.jsx("div",{className:"flex items-center gap-1.5 mt-1",children:n.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px]",children:[n.jsx("span",{className:"opacity-70",children:"Cam"}),n.jsx("button",{className:"btn px-1 py-0.5",onClick:()=>xi(Math.max(.5,Math.round((rl-.05)*100)/100)),children:""}),n.jsxs("span",{className:"w-7 text-center",children:[Math.round(rl*100),"%"]}),n.jsx("button",{className:"btn px-1 py-0.5",onClick:()=>xi(Math.min(1.25,Math.round((rl+.05)*100)/100)),children:"+"}),n.jsx("span",{className:"opacity-50",children:"|"}),n.jsx("button",{className:"btn px-1 py-0.5",title:"Toggle camera aspect",onClick:()=>Ux(gi==="square"?"wide":"square"),children:gi==="square"?"Square":"Wide"})]})}),n.jsx("div",{className:"flex items-stretch justify-end min-w-0",children:n.jsx("div",{className:`w-full min-w-0 ${gi==="square"?"aspect-square":"aspect-video"} rounded-2xl overflow-hidden bg-black`,children:n.jsx(Ro,{label:"Your Board",autoStart:!0})})})]})]}):n.jsx("div",{className:"grid grid-cols-1 md:[grid-template-columns:1fr_1.2fr_1fr] gap-2 mb-2 items-stretch min-w-0",children:n.jsxs("div",{className:"flex items-stretch justify-center md:px-3 min-w-0",children:[n.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{className:"opacity-80",children:"You Remain"}),Ee?n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"}):n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"})]}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:g}),n.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:n.jsx("div",{className:"h-full bg-emerald-400/70",style:{width:`${Math.max(0,Math.min(100,(1-g/l)*100))}%`}})}),n.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",n.jsx("span",{className:"font-semibold",children:Dn})]}),n.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",n.jsx("span",{className:"font-semibold",children:ts>0?((l-g)/ts*3).toFixed(1):"0.0"})]}),n.jsxs("div",{className:"text-xs opacity-70 flex items-center gap-2",children:[n.jsxs("span",{children:["Darts thrown: ",ts]}),n.jsx("span",{className:"inline-flex items-center gap-1","aria-label":"Visit darts",children:[0,1,2].map(p=>n.jsx("span",{className:`w-2 h-2 rounded-full ${p<yn?"bg-emerald-400":"bg-white/20"}`},p))})]}),n.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",n.jsxs("span",{className:"font-semibold",children:["Att ",qr,"  Hit ",Qr]})]}),g<=170&&g>0&&(()=>{const L=Ao(g,ys)[0]||"";return n.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-sm",children:[n.jsx("span",{className:"opacity-70",children:"Checkout"}),n.jsx("span",{className:"font-semibold",children:L})]})})()]}),n.jsx("div",{className:"flex items-stretch justify-end md:px-3 min-w-0",children:n.jsx("div",{className:`w-full max-w-xl min-w-0 rounded-2xl overflow-hidden bg-black ${gi==="square"?"aspect-square":"aspect-video"}`,children:n.jsx(Ro,{label:"Your Board",autoStart:!0})})}),n.jsxs("div",{className:"mt-2 p-3 rounded-2xl bg-slate-900/40 border border-white/10 text-white text-sm",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Match Summary"}),(()=>{const p=Ee?(e==null?void 0:e.username)||"You":i==="None"?"":`${i} AI`,L=Ee?g:i==="None"?0:C,_=Ee?Dn:pr,H=Ee?rs:Fn,ee=Ee?ts:$n,De=l-(Ee?g:i==="None"?l:C),Le=ee>0?De/ee*3:0,we=`${h}-${O}`,be=le.length>0?`${Math.min(...le.map(ke=>ke.doubleDarts+(ke.checkoutDarts||0)))||0} darts`:"";return n.jsxs("div",{className:"grid grid-cols-2 gap-y-1",children:[n.jsx("div",{className:"opacity-80",children:"Current score"}),n.jsx("div",{className:"font-mono text-right",children:we}),n.jsx("div",{className:"opacity-80",children:"Current thrower"}),n.jsx("div",{className:"text-right font-semibold",children:p}),n.jsx("div",{className:"opacity-80",children:"Score remaining"}),n.jsx("div",{className:"text-right font-mono",children:L}),n.jsx("div",{className:"opacity-80",children:"3-dart avg"}),n.jsx("div",{className:"text-right font-mono",children:Le.toFixed(1)}),n.jsx("div",{className:"opacity-80",children:"Last score"}),n.jsx("div",{className:"text-right font-mono",children:H||_}),n.jsx("div",{className:"opacity-80",children:"Best leg"}),n.jsx("div",{className:"text-right",children:be})]})})()]}),n.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[n.jsxs("div",{className:"text-xs flex items-center justify-between opacity-80",children:[n.jsxs("span",{children:[i==="None"?"Opponent":`${i} AI`," Remain"]}),Ee?n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"}):n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"})]}),n.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:i!=="None"?C:"N/A"}),i!=="None"&&n.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:n.jsx("div",{className:"h-full bg-fuchsia-400/70",style:{width:`${Math.max(0,Math.min(100,(1-C/l)*100))}%`}})}),n.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",n.jsx("span",{className:"font-semibold",children:i==="None"?0:pr})]}),n.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",n.jsx("span",{className:"font-semibold",children:i!=="None"?$n>0?((l-C)/$n*3).toFixed(1):"0.0":""})]}),i!=="None"&&n.jsxs("div",{className:"text-xs opacity-70",children:["Darts thrown: ",$n]}),i!=="None"&&n.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",n.jsxs("span",{className:"font-semibold",children:["Att ",Xr,"  Hit ",Zr]})]})]})]})}),s!=="X01"?n.jsxs("div",{className:"space-y-2",children:[s==="Double Practice"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"font-semibold",children:["Target: ",n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:((Hm=Ln[ze])==null?void 0:Hm.label)||""})]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,onAutoDart:(p,L)=>{if((L==="DOUBLE"||L==="INNER_BULL")&&Zd(p,ze)){const H=st+1,ee=ze+1;Ht(H),yt(ee),H>=Ln.length&&setTimeout(()=>{Ht(0),yt(0)},250)}},immediateAutoCommit:!0})}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&ym()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:ym,children:"Add Dart"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:Me,onChange:p=>pe(p.target.value),onKeyDown:p=>{p.key==="Enter"&&bm()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:bm,children:"Add"})]})]}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Progress: ",st," of 21"]})]}),s==="Around the Clock"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"font-semibold",children:["Target: ",n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Rt[M]===25?"25 (Outer Bull)":Rt[M]===50?"50 (Inner Bull)":Rt[M]||""})]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{hc(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&Tm()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Tm,children:"Add Dart"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D5, 25, 50)",value:Me,onChange:p=>pe(p.target.value),onKeyDown:p=>{p.key==="Enter"&&Dm()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Dm,children:"Add"})]}),Ue>=Rt.length&&n.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",n.jsx("button",{className:"ml-2 underline",onClick:()=>{Ze(0),ne(0)},children:"Reset"})]})]}),s==="Cricket"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{Im(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&Mm()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Mm,children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Tt(Er()),pt(0)},children:"Reset"})]})]}),s==="Shanghai"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{Lm(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&Pm()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Pm,children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Qe(Ws()),pt(0)},children:"Reset"})]})]}),s==="Halve It"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{Am(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&Rm()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Rm,children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ct(Vs()),pt(0)},children:"Reset"})]})]}),s==="High-Low"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{Om(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&Bm()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Bm,children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Wt(Ks()),pt(0)},children:"Reset"})]})]}),s==="Bob's 27"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{Nm(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&wm()}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:wm,children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:jm,children:"Reset"})]})]}),s==="Count-Up"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:p=>dc(p)})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&(dc(ue),ve(0))}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{dc(ue),ve(0)},children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{B(1),he(0),ye(0)},children:"Reset"})]}),n.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",et,"/",Ce]})]}),s==="High Score"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:p=>uc(p)})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&(uc(ue),ve(0))}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{uc(ue),ve(0)},children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{U(1),$e(0),Je(0)},children:"Reset"})]}),n.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",ge,"/",jt]})]}),s==="Low Score"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:p=>mc(p)})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&(mc(ue),ve(0))}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{mc(ue),ve(0)},children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{dr(1),gn(0),Vt(0)},children:"Reset"})]}),n.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",Xe,"/",nn]})]}),s==="Checkout 170"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L)=>km(p,L==="MISS"?void 0:L)})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:Me,onChange:p=>pe(p.target.value),onKeyDown:p=>{p.key==="Enter"&&yi(!0)}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>yi(!0),children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:zx,children:"Reset"})]}),n.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Ls,"  Attempts: ",_t,"  Successes: ",Te]})]}),s==="Checkout 121"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L)=>Cm(p,L==="MISS"?void 0:L)})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:Me,onChange:p=>pe(p.target.value),onKeyDown:p=>{p.key==="Enter"&&yi(!1)}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>yi(!1),children:"Add Dart"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Hx,children:"Reset"})]}),n.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Xn,"  Attempts: ",He,"  Successes: ",It]})]}),s==="Treble Practice"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm",children:"Target"}),n.jsx("select",{className:"input w-24",value:at,onChange:p=>Jt(parseInt(p.target.value,10)),children:Array.from({length:20},(p,L)=>L+1).map(p=>n.jsx("option",{value:p,children:p},p))}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Wx,children:"Reset"})]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{fc(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (T20)",value:Me,onChange:p=>pe(p.target.value),onKeyDown:p=>{if(p.key==="Enter"){const L=wr(Me);L!=null&&fc(L,void 0,void 0),pe("")}}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{const p=wr(Me);p!=null&&fc(p,void 0,void 0),pe("")},children:"Add Dart"})]}),n.jsxs("div",{className:"text-xs text-slate-400",children:["Hits: ",sn,"  Darts: ",ps]})]}),s==="Baseball"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{Vx(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Kx,children:"Reset"})})]}),s==="Golf"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{Gx(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Jx,children:"Reset"})})]}),s==="Tic Tac Toe"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(p,L)=>L).map(p=>n.jsx("button",{className:`h-16 rounded-xl border ${Un.board[p]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(Un.finished||Un.board[p])return;const L=Number(prompt("Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)")||0),_=L%3===0?"TRIPLE":L%2===0?"DOUBLE":"SINGLE",H=p,ee=dm[H],De=ee.type==="BULL"?null:ee.num||null;Yx(H,L,_,De)},children:Un.board[p]||""},p))}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{}})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:qx,children:"Reset"})})]}),s==="American Cricket"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{Qx(p,L==="MISS"?void 0:L,(_==null?void 0:_.sector)??null)}})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Em,children:"Reset"})})]}),s==="Killer"&&n.jsx(n.Fragment,{children:ql?n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:mt.map(p=>{const L=xs[p.id],_=fr[p.id];return n.jsxs("div",{className:`p-2 rounded-xl border ${L!=null&&L.eliminated?"opacity-50 border-red-500/40 bg-red-500/10":"border-slate-700/50 bg-slate-800/50"}`,children:[n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsx("div",{className:"font-semibold",children:p.name}),n.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded ${L!=null&&L.isKiller?"bg-purple-500/20 text-purple-200 border border-purple-400/30":"bg-slate-600/30 text-slate-300"}`,children:L!=null&&L.isKiller?"Killer":"Not Killer"})]}),n.jsxs("div",{className:"mt-1 text-sm",children:["Number: ",n.jsx("span",{className:"font-semibold",children:_})]}),n.jsxs("div",{className:"text-sm",children:["Lives: ",n.jsx("span",{className:"font-semibold",children:(L==null?void 0:L.lives)??0})]})]},p.id)})}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(p,L,_)=>{if(gs)return;const H=L==="MISS"?void 0:L,ee=(_==null?void 0:_.sector)??null,De=mt[vn];De&&(mr(Le=>{const we={};Object.keys(Le).forEach(Re=>we[Re]={...Le[Re]});const be=eu(De.id,we,H,ee);if(be.becameKiller)Tn(`${De.name} became a Killer`);else if(be.victimId){const Re=mt.find(Pt=>Pt.id===be.victimId);Tn(`${De.name} hit ${Re==null?void 0:Re.name}'s ${fr[be.victimId]} (${be.livesRemoved} life${(be.livesRemoved||0)>1?"s":""})`)}else Tn("No effect");const ke=tu(we);return ke&&Rs(ke),we}),es(Le=>{const we=Le+1;if(we>=3){let be=vn;for(let ke=1;ke<=mt.length;ke++){const Re=(vn+ke)%mt.length,Pt=mt[Re].id,Mn=xs[Pt];if(Mn&&!Mn.eliminated&&Mn.lives>0){be=Re;break}}return Zn(be),0}return we}))}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-40",placeholder:"Manual (D16, T5)",value:Me,onChange:p=>pe(p.target.value),onKeyDown:p=>{if(p.key==="Enter"){if(gs)return;const _=Me.trim().toUpperCase().match(/^(S|D|T)?\s*(\d{1,2})$/);if(!_){pe("");return}const H=_[1]||"S",ee=parseInt(_[2],10),De=H==="D"?"DOUBLE":H==="T"?"TRIPLE":"SINGLE",Le=mt[vn];mr(we=>{const be={};Object.keys(we).forEach(Pt=>be[Pt]={...we[Pt]});const ke=eu(Le.id,be,De,ee);if(ke.becameKiller)Tn(`${Le.name} became a Killer`);else if(ke.victimId){const Pt=mt.find(Mn=>Mn.id===ke.victimId);Tn(`${Le.name} hit ${Pt==null?void 0:Pt.name}'s ${fr[ke.victimId]} (${ke.livesRemoved} life${(ke.livesRemoved||0)>1?"s":""})`)}else Tn("No effect");const Re=tu(be);return Re&&Rs(Re),be}),pe(""),es(we=>{const be=we+1;if(be>=3){let ke=vn;for(let Re=1;Re<=mt.length;Re++){const Pt=(vn+Re)%mt.length,Mn=mt[Pt].id,yr=xs[Mn];if(yr&&!yr.eliminated&&yr.lives>0){ke=Pt;break}}return Zn(ke),0}return be})}}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{let p=vn;for(let L=1;L<=mt.length;L++){const _=(vn+L)%mt.length,H=mt[_].id,ee=xs[H];if(ee&&!ee.eliminated&&ee.lives>0){p=_;break}}Zn(p),es(0)},children:"Next Player"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{mr({}),Hr({}),ut(!1),Zn(0),es(0),Rs(null),Tn("")},children:"Reset"})]}),gs&&n.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Winner: ",(Wm=mt.find(p=>p.id===gs))==null?void 0:Wm.name," ",n.jsx("button",{className:"ml-2 underline",onClick:()=>{mr({}),Hr({}),ut(!1),Zn(0),es(0),Rs(null),Tn("")},children:"Play Again"})]})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-semibold",children:"Players"}),n.jsx("div",{className:"space-y-1",children:mt.map((p,L)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input",value:p.name,onChange:_=>{const H=_.target.value;As(ee=>ee.map((De,Le)=>Le===L?{...De,name:H}:De))}}),n.jsx("button",{className:"btn px-2 py-1",onClick:()=>As(_=>_.filter((H,ee)=>ee!==L)),disabled:mt.length<=2,children:"Remove"})]},p.id))}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"btn px-2 py-1",onClick:()=>As(p=>{const L=`p${p.length+1}`;return[...p,{id:L,name:`Player ${p.length+1}`}]}),children:"Add Player"}),n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1",onClick:()=>{if(mt.length<2){alert("Need at least 2 players");return}const p=mt.map(H=>H.id),L=Qb(p),_={};p.forEach(H=>{_[H]=Sx(L[H])}),Hr(L),mr(_),Zn(0),es(0),Rs(null),Tn("Assigned numbers"),ut(!0)},children:"Assign Numbers & Start"})]})]})})]}):Ee?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-semibold",children:"Your Turn"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:ue,onChange:p=>ve(Number(p.target.value||0)),onKeyDown:p=>{p.key==="Enter"&&(p.shiftKey?Xx():gm())}}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:gm,children:"Add Dart"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D16, 5, 25, 50)",value:Me,onChange:p=>pe(p.target.value),onKeyDown:p=>{p.key==="Enter"&&(p.shiftKey?Um():pc())}}),n.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:Um,disabled:yn===0,children:"Replace Last"}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:pc,children:"Add"})]})]}),n.jsx("div",{className:"text-xs text-slate-300",children:"Tip: Enter to Add  Shift+Enter to Replace Last"})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"font-semibold",children:[i==="None"?"Opponent":`${i} AI`," Turn"]}),i!=="None"?n.jsxs("div",{className:"text-sm text-slate-300",children:["Throwing in ",Math.ceil(Vr/1e3),"s..."]}):n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn",onClick:()=>We(!0),children:"Switch Back to You"})})]}),n.jsx("div",{className:"h-1"})]})]})})}),c&&n.jsx(sN,{onClose:()=>d(!1)}),xc&&n.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),n.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[n.jsx("div",{className:"text-3xl mb-2",children:""}),n.jsx("div",{className:"font-semibold",children:"Premium mode locked"}),n.jsx("div",{className:"text-sm text-slate-200/80",children:"Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more."}),n.jsxs("a",{href:"https://buy.stripe.com/test_00g7vQ8Qw2gQ0wA5kk",target:"_blank",rel:"noopener noreferrer",className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM  ",$p(Fp(),5)]})]})]}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs(ks,{storageKey:"ndn:modal:offline-win",className:"w-full relative",defaultWidth:420,defaultHeight:360,minWidth:360,minHeight:300,maxWidth:800,maxHeight:700,children:[n.jsx("h3",{className:"text-lg font-bold mb-2",children:"Leg Won!"}),n.jsx("label",{className:"block mb-1",children:"Darts to hit double:"}),n.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(p=>n.jsx("button",{className:`btn ${V===p?"bg-brand-600":""}`,onClick:()=>T(p),children:p},p))}),n.jsx("label",{className:"block mb-1",children:"Darts for checkout:"}),n.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(p=>n.jsx("button",{className:`btn ${z===p?"bg-brand-600":""}`,onClick:()=>oe(p),children:p},p))}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[n.jsx("button",{className:"btn w-full",onClick:Zx,children:"Submit"}),n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 w-full",onClick:()=>{y(!1),ol()},children:"Rematch"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 w-full",onClick:()=>{y(!1),re(!1),w(!1)},children:"Back to Menu"})]})]})}),Nt&&n.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60]",children:n.jsxs(ks,{storageKey:"ndn:modal:offline-summary",className:"w-full relative",defaultWidth:820,defaultHeight:520,minWidth:600,minHeight:400,maxWidth:1400,maxHeight:1e3,children:[n.jsx("h3",{className:"text-xl font-extrabold mb-2",children:"Match Summary"}),n.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[s,"  ",l," start  First to ",j]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[n.jsx("div",{className:"text-sm font-semibold mb-1",children:"You"}),n.jsx("div",{className:"text-3xl font-extrabold",children:h}),n.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"3-Dart Avg"}),n.jsx("div",{className:"font-semibold",children:xr>0?(ra/xr*3).toFixed(1):"0.0"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"1-Dart Avg"}),n.jsx("div",{className:"font-semibold",children:xr>0?(ra/xr).toFixed(2):"0.00"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"180s"}),n.jsx("div",{className:"font-semibold",children:di})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"140+"}),n.jsx("div",{className:"font-semibold",children:ui})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"100+"}),n.jsx("div",{className:"font-semibold",children:mi})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"High Checkout"}),n.jsx("div",{className:"font-semibold",children:se||""})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"Dbl Att"}),n.jsx("div",{className:"font-semibold",children:qr})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"Dbl Hit"}),n.jsx("div",{className:"font-semibold",children:Qr})]})]})]}),n.jsx("div",{className:"hidden md:flex items-center justify-center",children:n.jsxs("div",{className:"text-4xl font-black",children:[h,"  ",O]})}),n.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[n.jsx("div",{className:"text-sm font-semibold mb-1",children:i==="None"?"Opponent":`${i} AI`}),n.jsx("div",{className:"text-3xl font-extrabold",children:O}),n.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"3-Dart Avg"}),n.jsx("div",{className:"font-semibold",children:gr>0?(aa/gr*3).toFixed(1):"0.0"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"1-Dart Avg"}),n.jsx("div",{className:"font-semibold",children:gr>0?(aa/gr).toFixed(2):"0.00"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"180s"}),n.jsx("div",{className:"font-semibold",children:m})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"140+"}),n.jsx("div",{className:"font-semibold",children:E})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"100+"}),n.jsx("div",{className:"font-semibold",children:K})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"High Checkout"}),n.jsx("div",{className:"font-semibold",children:xt||""})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"Dbl Att"}),n.jsx("div",{className:"font-semibold",children:Xr})]}),n.jsxs("div",{children:[n.jsx("span",{className:"opacity-70",children:"Dbl Hit"}),n.jsx("div",{className:"font-semibold",children:Zr})]})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"text-sm font-semibold mb-2",children:"Legs Timeline"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:le.map((p,L)=>n.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs ${p.winner==="player"?"bg-emerald-500/15 border-emerald-400/30":"bg-fuchsia-500/15 border-fuchsia-400/30"}`,children:["Leg ",L+1,": ",p.winner==="player"?"You":i==="None"?"Opp":"AI","  Dbl ",p.doubleDarts,"  CO ",p.checkoutDarts]},L))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>Ut(!1),children:"Close"}),n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{Ut(!1),ol()},children:"Rematch"})]})]})}),le.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Leg Stats"}),n.jsx("ul",{children:le.map((p,L)=>n.jsxs("li",{children:["Leg ",L+1,": Double darts: ",p.doubleDarts,", Checkout darts: ",p.checkoutDarts]},L))})]})]})}let lN=1;const su=Gl(e=>({toasts:[],push:(t,s)=>e(r=>{const l=lN++,a={id:l,message:t,type:(s==null?void 0:s.type)||"info",timeout:(s==null?void 0:s.timeout)??3e3};return a.timeout&&a.timeout>0&&setTimeout(()=>{e(i=>({toasts:i.toasts.filter(o=>o.id!==l)}))},a.timeout),{toasts:[...r.toasts,a]}}),remove:t=>e(s=>({toasts:s.toasts.filter(r=>r.id!==t)})),clear:()=>e({toasts:[]})}));function um(){return su(t=>t.push)}const Ix="ndn:messages:inbox",Mx="ndn:messages:unread";function aN(){try{const e=localStorage.getItem(Ix),t=e?JSON.parse(e):[],s=Number(localStorage.getItem(Mx)||"0")||0;return{inbox:Array.isArray(t)?t.filter(l=>l&&typeof l.id=="string").slice(0,200):[],unread:s}}catch{return{inbox:[],unread:0}}}function $i(e,t){try{localStorage.setItem(Ix,JSON.stringify(e))}catch{}try{localStorage.setItem(Mx,String(t))}catch{}}const fh=aN(),ru=Gl((e,t)=>({inbox:fh.inbox,unread:fh.unread,inGame:!1,setInGame:s=>e({inGame:s}),add:s=>e(r=>{const l=r.inbox.some(o=>o.id===s.id&&o.ts===s.ts),a=l?r.inbox:[s,...r.inbox].slice(0,200),i=r.unread+(l?0:1);return $i(a,i),{inbox:a,unread:i}}),load:s=>e(r=>{const l=[...s].sort((a,i)=>i.ts-a.ts).slice(0,200);return $i(l,r.unread),{inbox:l,unread:r.unread}}),markAllRead:()=>{const s=t();$i(s.inbox,0),e({unread:0})},remove:s=>e(r=>{const l=r.inbox.filter(i=>i.id!==s),a=r.unread;return $i(l,a),{inbox:l,unread:a}})})),Lx=[/\b(f+[\W_]*u+[\W_]*c+[\W_]*k+)\b/gi,/\b(s+[\W_]*h+[\W_]*i+[\W_]*t+)\b/gi,/\b(b+[\W_]*i+[\W_]*t+[\W_]*c+[\W_]*h+)\b/gi,/\b(a+[\W_]*s+[\W_]*s+[\W_]*h+[\W_]*o+[\W_]*l+[\W_]*e+)\b/gi,/\b(d+[\W_]*a+[\W_]*m+[\W_]*n+)\b/gi,/\b(c+[\W_]*r+[\W_]*a+[\W_]*p+)\b/gi,/\b(p+[\W_]*i+[\W_]*s+[\W_]*s+)\b/gi];function iN(e){return e.replace(/[\p{L}\p{N}]/gu,"*")}function Px(e){if(!e)return e;let t=e;for(const s of Lx)t=t.replace(s,r=>iN(r));return t}function oN(e){return e?Lx.some(t=>t.test(e)):!1}function mm({tabs:e,active:t,onChange:s,className:r}){return n.jsxs("div",{className:`relative ${r||""}`,children:[n.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/5 backdrop-blur-md border border-white/10 pointer-events-none"}),n.jsx("div",{className:"relative overflow-x-auto no-scrollbar py-1 px-1",children:n.jsx("div",{className:"flex items-center gap-2 min-w-max",children:e.map(l=>{const a=l.key===t;return n.jsx("button",{type:"button",onClick:()=>s(l.key),className:`transition-all select-none whitespace-nowrap rounded-full px-4 py-2 text-sm font-semibold shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60 active:scale-[0.98]
                  ${a?"bg-gradient-to-r from-indigo-500 to-fuchsia-500 text-white shadow-indigo-500/30":"bg-white/10 text-slate-100 hover:bg-white/15"}
                `,"aria-pressed":a,children:l.label},l.key)})})}),n.jsx("style",{children:`
        /* Hide scrollbars on WebKit/Firefox for a cleaner pill row */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `})]})}function cN(e){if(!e)return"";const t=Math.floor((Date.now()-e)/1e3);if(t<60)return`${t}s ago`;const s=Math.floor(t/60);if(s<60)return`${s}m ago`;const r=Math.floor(s/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}function dN({user:e}){const t=um(),s=String((e==null?void 0:e.email)||"").toLowerCase(),[r,l]=u.useState([]),[a,i]=u.useState([]),[o,c]=u.useState([]),[d,x]=u.useState(""),[w,g]=u.useState("all"),[b,C]=u.useState(!1),k=ru(),[R,N]=u.useState([]);async function f(){if(s)try{const[P,F,A]=await Promise.all([fetch(`/api/friends/list?email=${encodeURIComponent(s)}`).then(V=>V.json()),fetch(`/api/friends/suggested?email=${encodeURIComponent(s)}`).then(V=>V.json()),fetch(`/api/friends/requests?email=${encodeURIComponent(s)}`).then(V=>V.json())]);l(P.friends||[]),i(F.suggestions||[]),N(A.requests||[])}catch{}}u.useEffect(()=>{f()},[s]);async function y(P){if(x(P),!P){c([]);return}try{const A=await(await fetch(`/api/friends/search?q=${encodeURIComponent(P)}`)).json();c(A.results||[])}catch{}}async function j(P){if(!(!s||!P)){C(!0);try{await fetch("/api/friends/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,friend:P})}),await f(),x(""),c([]),t("Friend added",{type:"success"})}finally{C(!1)}}}async function D(P){if(!(!s||!P)){C(!0);try{await fetch("/api/friends/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,friend:P})}),await f(),t("Friend removed",{type:"info"})}finally{C(!1)}}}const h=u.useMemo(()=>w==="all"?r:r.filter(P=>(P.status||"offline")===w),[r,w]);async function I(P){if(!P){t("Room unavailable",{type:"error"});return}try{const F=new CustomEvent("ndn:spectate-request",{detail:{roomId:P}});window.dispatchEvent(F),t("Opening spectator view",{type:"info"})}catch{}}const O=R.length;return n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-2xl font-bold text-brand-700 mb-2",children:"Friends"}),n.jsx("p",{className:"mb-2 text-brand-600",children:"Manage your friends. See whos online, in-game, or offline; find new teammates; and invite people to play."}),n.jsxs("div",{className:"text-xs opacity-70 mb-3",children:["Online: ",r.filter(P=>P.status==="online").length,"  In-game: ",r.filter(P=>P.status==="ingame").length,"  Offline: ",r.filter(P=>!P.status||P.status==="offline").length]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[n.jsxs("div",{className:"md:col-span-2 p-3 rounded-2xl bg-black/30 border border-white/10",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("div",{className:"font-semibold text-white/90",children:"Your Friends"})}),n.jsx(mm,{tabs:[{key:"all",label:"All"},{key:"online",label:"Online"},{key:"ingame",label:"In-Game"},{key:"offline",label:"Offline"},{key:"requests",label:`Requests ${O>0?"("+O+")":""}`}],active:w,onChange:P=>g(P),className:"mb-3"}),w==="requests"?n.jsx("ul",{className:"space-y-2",children:O>0?R.map(P=>n.jsxs("li",{className:"p-2 rounded bg-black/20 flex items-center justify-between",children:[n.jsx("span",{className:"font-semibold",children:P.username||P.email}),n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:async()=>{C(!0);try{await fetch("/api/friends/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,requester:P.email})}),await f(),t("Friend request accepted",{type:"success"})}finally{C(!1)}},children:"Accept"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:async()=>{C(!0);try{await fetch("/api/friends/decline",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,requester:P.email})}),await f(),t("Friend request declined",{type:"info"})}finally{C(!1)}},children:"Decline"})]},P.email)):n.jsx("li",{className:"text-sm opacity-70",children:"No friend requests yet."})}):n.jsxs("ul",{className:"space-y-2",children:[h.map(P=>n.jsxs("li",{className:"p-2 rounded bg-black/20 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${P.status==="online"?"bg-emerald-400":P.status==="ingame"?"bg-amber-400":"bg-slate-400"}`}),n.jsx("span",{className:"font-semibold",children:P.username||P.email}),n.jsxs("span",{className:"text-xs opacity-70",children:[P.status||"offline",P.status!=="online"&&P.lastSeen?`  ${cN(P.lastSeen)}`:""]}),P.status==="ingame"&&P.match&&n.jsxs("span",{className:"text-[10px] opacity-70 px-2 py-0.5 rounded bg-indigo-500/20 border border-indigo-600/30",children:[P.match.game," ",P.match.mode==="firstto"?"FT":"BO"," ",P.match.value,P.match.game==="X01"&&P.match.startingScore?`  ${P.match.startingScore}`:""]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[P.status==="ingame"&&P.roomId&&n.jsx("button",{className:"btn",onClick:()=>I(P.roomId),children:"Spectate"}),n.jsx("button",{className:"btn",disabled:b||P.status!=="online"&&P.status!=="ingame",onClick:async()=>{C(!0);try{const A=await(await fetch("/api/friends/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromEmail:s,toEmail:P.email,game:"X01",mode:"bestof",value:3,startingScore:501})})).json().catch(()=>({}));A!=null&&A.delivered?t("Invite sent",{type:"success"}):t("Friend is offline; invite queued",{type:"info"})}finally{C(!1)}},children:"Invite"}),n.jsx("button",{className:"btn",disabled:b,onClick:async()=>{const F=prompt("Message:");if(F){C(!0);try{await fetch("/api/friends/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromEmail:s,toEmail:P.email,message:F})}),t("Message sent",{type:"success"})}finally{C(!1)}}},children:"Message"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",disabled:b,onClick:()=>D(P.email),children:"Remove"})]})]},P.email)),h.length===0&&n.jsxs("li",{className:"text-sm opacity-70",children:["No friends ",w!=="all"?`in ${w}`:""," yet."]})]})]}),n.jsxs("div",{className:"p-3 rounded-2xl bg-black/20 border border-white/10",children:[n.jsx("div",{className:"font-semibold mb-2 text-white/90",children:"Find Friends"}),n.jsx("input",{className:"input w-full mb-2",placeholder:"Search by name or email",value:d,onChange:P=>y(P.target.value)}),n.jsxs("ul",{className:"space-y-1 mb-3 max-h-48 overflow-auto",children:[o.map(P=>n.jsxs("li",{className:"flex items-center justify-between p-2 rounded bg-black/10",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${P.status==="online"?"bg-emerald-400":P.status==="ingame"?"bg-amber-400":"bg-slate-400"}`}),n.jsx("span",{children:P.username||P.email})]}),n.jsx("button",{className:"btn",disabled:b,onClick:()=>j(P.email),children:"Add"})]},P.email)),o.length===0&&n.jsx("li",{className:"text-xs opacity-60",children:"Type to search"})]}),n.jsx("div",{className:"font-semibold mb-1 text-white/90",children:"Suggested"}),n.jsxs("ul",{className:"space-y-1 max-h-48 overflow-auto",children:[a.map(P=>n.jsxs("li",{className:"flex items-center justify-between p-2 rounded bg-black/10",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${P.status==="online"?"bg-emerald-400":P.status==="ingame"?"bg-amber-400":"bg-slate-400"}`}),n.jsx("span",{children:P.username||P.email})]}),n.jsx("button",{className:"btn",disabled:b,onClick:()=>j(P.email),children:"Add"})]},P.email)),a.length===0&&n.jsx("li",{className:"text-xs opacity-60",children:"No suggestions right now."})]})]})]}),n.jsxs("div",{className:"p-3 rounded-xl bg-indigo-500/10 border border-indigo-500/40",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"font-semibold",children:"Messages"}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>k.markAllRead(),children:"Mark all read"})]}),k.inbox.length===0?n.jsx("div",{className:"text-sm opacity-70",children:"No messages yet."}):n.jsx("ul",{className:"space-y-2 max-h-72 overflow-auto",children:k.inbox.map(P=>n.jsxs("li",{className:"p-2 rounded bg-black/20 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:P.from})," ",n.jsxs("span",{className:"opacity-70 text-xs",children:[" ",new Date(P.ts).toLocaleString()]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"btn px-2 py-1 text-xs",onClick:async()=>{const F=prompt(`Reply to ${P.from}:`);if(F)try{await fetch("/api/friends/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromEmail:s,toEmail:P.from,message:F})}),t("Message sent",{type:"success"})}catch{}},children:"Reply"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-2 py-1 text-xs",title:"Delete this message",onClick:()=>k.remove(P.id),children:"Delete"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-2 py-1 text-xs",onClick:async()=>{const F=prompt("Report reason (what happened)?");if(F)try{await fetch("/api/friends/report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reporterEmail:s,offenderEmail:P.from,reason:F,messageId:P.id})}),t("Report sent to admin",{type:"info"})}catch{}},children:"Report"})]})]}),n.jsx("div",{className:"mt-1 whitespace-pre-wrap break-words",children:Px(P.message)})]},P.id))})]})]})}function uN(){const e=su(s=>s.toasts),t=su(s=>s.remove);return e.length?n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2 sm:right-4 sm:left-auto left-1/2 -translate-x-1/2 sm:translate-x-0 w-[calc(100%-1.5rem)] sm:w-auto max-w-sm",children:e.map(s=>n.jsx("div",{className:`p-3 rounded-lg shadow-lg border text-sm ${s.type==="error"?"bg-rose-700/80 border-rose-500/60 text-white":s.type==="success"?"bg-emerald-700/80 border-emerald-500/60 text-white":"bg-black/70 border-slate-700 text-slate-100"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"flex-1",children:s.message}),n.jsx("button",{className:"btn btn--ghost px-2 py-1 text-xs",onClick:()=>t(s.id),children:"Dismiss"})]})},s.id))}):null}function lu({data:e,height:t=220,barWidth:s=28,gap:r=6,showValues:l=!1}){const a=Math.max(1,...e.map(o=>o.value)),i=e.length*(s+r);return n.jsx("div",{className:"w-full overflow-x-auto",children:n.jsx("div",{className:"relative",style:{height:t,width:Math.max(600,i)},children:n.jsx("div",{className:"absolute inset-0 flex items-end",children:e.map((o,c)=>{const d=Math.round(o.value/a*(t-40));return n.jsxs("div",{className:"flex flex-col items-center justify-end",style:{width:s,marginRight:r},children:[n.jsx("div",{className:"w-full rounded-t-md bg-gradient-to-b from-indigo-400 to-fuchsia-500 shadow-sm",style:{height:d},title:`${o.label}: ${o.value}`}),l&&n.jsx("div",{className:"text-[10px] mt-1 opacity-80",children:o.value}),n.jsx("div",{className:"text-[10px] mt-1 opacity-70 select-none",children:o.label})]},c)})})})})}const mN=["X01","Double Practice"],Us=["Around the Clock","Cricket","Halve It","Shanghai","High-Low","Killer","Bob's 27","Count-Up","High Score","Low Score","Checkout 170","Checkout 121","Treble Practice","Baseball","Golf","Tic Tac Toe","American Cricket"],Hl=[...mN,...Us],hh="daviesfamily108@gmail.com";function fN({user:e}){var yt,st,Ht;const[t,s]=u.useState([]),[r,l]=u.useState(""),[a,i]=u.useState(null),[o,c]=u.useState(""),[d,x]=u.useState(!1),[w,g]=u.useState([]),[b,C]=u.useState([]),[k,R]=u.useState({title:"Official Tournament",game:"X01",mode:"bestof",value:3,description:"",startAt:new Date(Date.now()+2*60*60*1e3).toISOString().slice(0,16),checkinMinutes:30,capacity:16,prizeType:"premium",prizeAmount:0,currency:"GBP",prizeNotes:""}),[N,f]=u.useState({reset:{},reminder:{},confirmEmail:{},changed:{}}),[y,j]=u.useState({open:!1}),D=((yt=e==null?void 0:e.email)==null?void 0:yt.toLowerCase())===hh,[h,I]=u.useState([]),[O,P]=u.useState([]),[F,A]=u.useState(0);u.useEffect(()=>{const M=()=>A(ne=>ne+1);return window.addEventListener("ndn:stats-updated",M),()=>window.removeEventListener("ndn:stats-updated",M)},[]);const V=u.useMemo(()=>nm(Hl),[F]),T=u.useMemo(()=>Hl.map(M=>{var ne,Ue;return{label:M,value:((ne=V[M])==null?void 0:ne.played)||0,won:((Ue=V[M])==null?void 0:Ue.won)||0}}),[V]);async function z(){try{const ne=await(await fetch("/api/admins")).json();if(s(Array.isArray(ne.admins)?ne.admins:[]),D){const Ue=await fetch(`/api/admin/status?requesterEmail=${encodeURIComponent((e==null?void 0:e.email)||"")}`);Ue.ok&&i(await Ue.json());const Ze=await fetch(`/api/admin/tournaments?requesterEmail=${encodeURIComponent((e==null?void 0:e.email)||"")}`);if(Ze.ok){const Qe=await Ze.json();g(Array.isArray(Qe.tournaments)?Qe.tournaments:[])}const ot=await fetch(`/api/admin/reports?requesterEmail=${encodeURIComponent((e==null?void 0:e.email)||"")}`);if(ot.ok){const Qe=await ot.json();P(Array.isArray(Qe.reports)?Qe.reports:[])}const Tt=await fetch(`/api/admin/premium-winners?requesterEmail=${encodeURIComponent((e==null?void 0:e.email)||"")}`);if(Tt.ok){const Qe=await Tt.json();I(Array.isArray(Qe.winners)?Qe.winners:[])}const bt=await fetch(`/api/admin/wallet/withdrawals?requesterEmail=${encodeURIComponent((e==null?void 0:e.email)||"")}`);if(bt.ok){const Qe=await bt.json();C(Array.isArray(Qe.withdrawals)?Qe.withdrawals:[])}}}catch{}}u.useEffect(()=>{z()},[]);async function oe(){r&&(await fetch("/api/admins/grant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,requesterEmail:e==null?void 0:e.email})}),l(""),z())}async function le(M){await fetch("/api/admins/revoke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:M,requesterEmail:e==null?void 0:e.email})}),z()}async function Ne(M,ne){M&&(await fetch("/api/admin/premium/grant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:M,days:ne,requesterEmail:e==null?void 0:e.email})}),await z())}async function Y(M){await fetch("/api/admin/premium/revoke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:M,requesterEmail:e==null?void 0:e.email})}),await z()}async function ae(M){x(!0);try{await fetch("/api/admin/maintenance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:M,requesterEmail:e==null?void 0:e.email})}),await z()}finally{x(!1)}}async function X(){if(o.trim()){x(!0);try{await fetch("/api/admin/announce",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o,requesterEmail:e==null?void 0:e.email})}),c(""),await z()}finally{x(!1)}}}async function re(M){x(!0);try{await fetch("/api/admin/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullAccess:M,requesterEmail:e==null?void 0:e.email})}),await z()}finally{x(!1)}}async function G(){x(!0);try{const M=new Date(k.startAt).getTime();await fetch("/api/tournaments/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:k.title,game:k.game,mode:k.mode,value:Number(k.value),description:k.description,startAt:M,checkinMinutes:Number(k.checkinMinutes),capacity:Number(k.capacity),creatorEmail:e==null?void 0:e.email,creatorName:e==null?void 0:e.username,requesterEmail:e==null?void 0:e.email,official:!0,prizeType:k.prizeType,prizeAmount:Number(k.prizeAmount||0),currency:k.currency,prizeNotes:k.prizeNotes})}),await z()}finally{x(!1)}}async function ce(M,ne){x(!0);try{await fetch("/api/admin/tournaments/winner",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:M,winnerEmail:ne,requesterEmail:e==null?void 0:e.email})}),await z()}finally{x(!1)}}async function je(M){x(!0);try{await fetch("/api/admin/tournaments/mark-paid",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:M,requesterEmail:e==null?void 0:e.email})}),await z()}finally{x(!1)}}async function Oe(M){x(!0);try{await fetch("/api/admin/tournaments/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:M,requesterEmail:e==null?void 0:e.email})}),await z()}finally{x(!1)}}async function Se(){x(!0);try{await fetch("/api/admin/tournaments/reseed-weekly",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requesterEmail:e==null?void 0:e.email})}),await z()}finally{x(!1)}}async function Pe(M,ne){x(!0);try{await fetch("/api/admin/wallet/withdrawals/decide",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:M,approve:ne,requesterEmail:e==null?void 0:e.email})}),await z()}finally{x(!1)}}async function Ee(M){x(!0);try{await fetch("/api/admin/matches/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchId:M,requesterEmail:e==null?void 0:e.email})}),await z()}finally{x(!1)}}async function We(){try{const M=await fetch(`/api/admin/email-copy?requesterEmail=${encodeURIComponent((e==null?void 0:e.email)||"")}`);if(M.ok){const ne=await M.json();ne!=null&&ne.ok&&f(ne.copy||N)}}catch{}}u.useEffect(()=>{D&&We()},[D]);async function ue(M,ne){await fetch("/api/admin/email-copy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requesterEmail:e==null?void 0:e.email,kind:M,...ne})}),await We()}async function ve(M){try{const Ue=await(await fetch(`/api/email/preview?kind=${encodeURIComponent(M)}&requesterEmail=${encodeURIComponent((e==null?void 0:e.email)||"")}`)).text();j({open:!0,kind:M,html:Ue})}catch{j({open:!0,kind:M,html:'<!doctype html><html><body style="font-family:sans-serif;padding:16px">Failed to load preview.</body></html>'})}}u.useEffect(()=>{if(!y.open)return;function M(ne){ne.key==="Escape"&&j({open:!1})}return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[y.open]);function ze({kind:M,label:ne}){const Ue=M==="confirm-email"?"confirmEmail":M==="changed"?"changed":M,Ze=(N==null?void 0:N[Ue])||{title:"",intro:"",buttonLabel:""},[ot,Tt]=u.useState(Ze.title||""),[bt,Qe]=u.useState(Ze.intro||""),[ht,ct]=u.useState(Ze.buttonLabel||"");return u.useEffect(()=>{Tt(Ze.title||""),Qe(Ze.intro||""),ct(Ze.buttonLabel||"")},[Ze.title,Ze.intro,Ze.buttonLabel]),n.jsxs("div",{className:"p-2 rounded bg-black/20 space-y-2",children:[n.jsx("div",{className:"font-semibold",children:ne}),n.jsx("input",{className:"input w-full",placeholder:"Title (optional)",value:ot,onChange:rt=>Tt(rt.target.value)}),n.jsx("textarea",{className:"input w-full",rows:2,placeholder:"Intro line (optional)",value:bt,onChange:rt=>Qe(rt.target.value)}),n.jsx("input",{className:"input w-full",placeholder:"Button label (optional)",value:ht,onChange:rt=>ct(rt.target.value)}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("a",{className:"btn",href:`/api/email/preview?kind=${encodeURIComponent(M)}&requesterEmail=${encodeURIComponent((e==null?void 0:e.email)||"")}`,target:"_blank",rel:"noreferrer",children:"Preview"}),n.jsx("button",{className:"btn",type:"button",onClick:()=>ve(M),children:"Popup"}),n.jsx("button",{className:"btn",onClick:()=>ue(M,{title:ot,intro:bt,buttonLabel:ht}),children:"Save"})]})]})}return D?n.jsxs("div",{className:"space-y-4",children:[D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Game Usage"}),n.jsx("div",{className:"text-sm opacity-80 mb-2",children:"Bar height shows total plays per mode. Wins are listed under each label. This helps decide which modes to keep or iterate on."}),n.jsxs("div",{className:"rounded-xl border border-indigo-500/40 bg-indigo-500/10 p-3",children:[n.jsx(lu,{data:T.map(M=>({label:M.label,value:M.value}))}),n.jsx("div",{className:"mt-2 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 text-[11px] opacity-80",children:T.map((M,ne)=>n.jsxs("div",{className:"flex items-center justify-between px-2 py-1 rounded-md bg-white/5 border border-white/10",children:[n.jsx("span",{className:"truncate mr-2",children:M.label}),n.jsxs("span",{className:"whitespace-nowrap",children:["Played ",M.value,"  Won ",M.won]})]},ne))})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Admin Control"}),n.jsx("div",{className:"text-sm opacity-80 mb-3",children:"Grant or revoke Admin to trusted users. Only the owner can perform these actions."}),n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx("input",{className:"input flex-1",placeholder:"user@example.com",value:r,onChange:M=>l(M.target.value)}),n.jsx("button",{className:"btn",onClick:oe,disabled:!r,children:"Grant Admin"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold mb-1",children:"Current Admins"}),n.jsxs("ul",{className:"space-y-1",children:[t.map(M=>n.jsxs("li",{className:"flex items-center justify-between p-2 rounded bg-black/20",children:[n.jsx("span",{children:M}),M.toLowerCase()!==hh&&n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:()=>le(M),children:"Revoke"})]},M)),t.length===0&&n.jsx("li",{className:"text-sm opacity-60",children:"No admins yet."})]})]})]}),D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Premium Overrides"}),n.jsx("div",{className:"text-sm opacity-80 mb-2",children:"Grant temporary PREMIUM to specific emails (e.g., winners, testers). Owner only."}),n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx("input",{className:"input flex-1",placeholder:"user@example.com",value:r,onChange:M=>l(M.target.value)}),n.jsx("input",{className:"input w-28",type:"number",min:1,defaultValue:30,onChange:()=>{},id:"ndn-premium-days",placeholder:"Days"}),n.jsx("button",{className:"btn",onClick:()=>{const M=document.getElementById("ndn-premium-days"),ne=Number((M==null?void 0:M.value)||"30");Ne(r,Number.isFinite(ne)?ne:30)},disabled:!r,children:"Grant"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold mb-1",children:"Active Overrides"}),n.jsxs("ul",{className:"space-y-1 text-sm",children:[h.map(M=>n.jsxs("li",{className:"flex items-center justify-between p-2 rounded bg-black/20",children:[n.jsxs("div",{children:[n.jsx("div",{children:M.email}),n.jsxs("div",{className:"text-xs opacity-70",children:["Expires: ",M.expiresAt?new Date(M.expiresAt).toLocaleString():""," ",M.expired?"(expired)":""]})]}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:()=>Y(M.email),children:"Revoke"})]},M.email)),h.length===0&&n.jsx("li",{className:"opacity-60",children:"No overrides."})]})]})]}),D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Server status"}),a!=null&&a.ok?n.jsxs("div",{className:"text-sm grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:["Clients: ",n.jsx("span",{className:"font-semibold",children:a.server.clients})]}),n.jsxs("div",{children:["Open matches: ",n.jsx("span",{className:"font-semibold",children:a.server.matches})]}),n.jsxs("div",{children:["Rooms: ",n.jsx("span",{className:"font-semibold",children:a.server.rooms})]}),n.jsxs("div",{children:["Premium: ",n.jsx("span",{className:"font-semibold",children:a.server.premium?"ON":"OFF"})]}),n.jsxs("div",{children:["Maintenance: ",n.jsx("span",{className:"font-semibold",children:a.server.maintenance?"ON":"OFF"})]})]}):n.jsx("div",{className:"text-sm opacity-70",children:"Loading"})]}),D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Operations"}),n.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-3",children:[n.jsx("button",{className:"btn",disabled:d,onClick:()=>{var M;return ae(!((M=a==null?void 0:a.server)!=null&&M.maintenance))},children:(st=a==null?void 0:a.server)!=null&&st.maintenance?"Disable Maintenance":"Enable Maintenance"}),n.jsx("button",{className:"btn",disabled:d,onClick:()=>{var M;return re(!((M=a==null?void 0:a.server)!=null&&M.premium))},children:(Ht=a==null?void 0:a.server)!=null&&Ht.premium?"Disable PREMIUM":"Enable PREMIUM"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{className:"input flex-1",placeholder:"Announcement message",value:o,onChange:M=>c(M.target.value)}),n.jsx("button",{className:"btn",disabled:d||!o.trim(),onClick:X,children:"Broadcast"})]})]}),D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Tournaments Management"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold mb-2",children:"Create Official"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{className:"input w-full",placeholder:"Title",value:k.title,onChange:M=>R(ne=>({...ne,title:M.target.value}))}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx("select",{className:"input",value:k.game,onChange:M=>R(ne=>({...ne,game:M.target.value})),children:["X01","Around the Clock","Cricket","Halve It","Shanghai","High-Low"].map(M=>n.jsx("option",{value:M,children:M},M))}),n.jsxs("select",{className:"input",value:k.mode,onChange:M=>R(ne=>({...ne,mode:M.target.value})),children:[n.jsx("option",{value:"bestof",children:"Best of"}),n.jsx("option",{value:"firstto",children:"First to"})]}),n.jsx("input",{className:"input",type:"number",min:1,value:k.value,onChange:M=>R(ne=>({...ne,value:Number(M.target.value)}))})]}),n.jsx("textarea",{className:"input w-full",rows:2,placeholder:"Description",value:k.description,onChange:M=>R(ne=>({...ne,description:M.target.value}))}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{className:"input",type:"datetime-local",value:k.startAt,onChange:M=>R(ne=>({...ne,startAt:M.target.value}))}),n.jsx("input",{className:"input",type:"number",min:0,value:k.checkinMinutes,onChange:M=>R(ne=>({...ne,checkinMinutes:Number(M.target.value)}))})]}),n.jsx("input",{className:"input w-full",type:"number",min:6,max:64,value:k.capacity,onChange:M=>R(ne=>({...ne,capacity:Number(M.target.value)}))}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[n.jsxs("select",{className:"input",value:k.prizeType,onChange:M=>R(ne=>({...ne,prizeType:M.target.value})),children:[n.jsx("option",{value:"premium",children:"PREMIUM month"}),n.jsx("option",{value:"cash",children:"Cash"})]}),n.jsx("input",{className:"input",type:"number",min:0,disabled:k.prizeType!=="cash",value:k.prizeAmount,onChange:M=>R(ne=>({...ne,prizeAmount:Number(M.target.value)}))}),n.jsxs("select",{className:"input",disabled:k.prizeType!=="cash",value:k.currency,onChange:M=>R(ne=>({...ne,currency:M.target.value})),children:[n.jsx("option",{value:"GBP",children:"GBP"}),n.jsx("option",{value:"USD",children:"USD"}),n.jsx("option",{value:"EUR",children:"EUR"}),n.jsx("option",{value:"CAD",children:"CAD"}),n.jsx("option",{value:"AUD",children:"AUD"})]})]}),n.jsx("input",{className:"input w-full",placeholder:"Prize notes (optional)",value:k.prizeNotes,onChange:M=>R(ne=>({...ne,prizeNotes:M.target.value}))}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{className:"btn",disabled:d,onClick:G,children:"Create"})})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold mb-2",children:"Existing"}),n.jsxs("ul",{className:"space-y-2",children:[w.map(M=>n.jsxs("li",{className:"p-2 rounded bg-black/20 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"font-semibold",children:M.title}),n.jsx("div",{className:"opacity-70",children:M.status})]}),n.jsxs("div",{className:"opacity-80",children:[M.game,"  ",M.mode==="firstto"?"FT":"BO"," ",M.value,"  ",new Date(M.startAt).toLocaleString(),"  ",M.capacity," cap"]}),M.prize&&n.jsxs("div",{className:"text-xs mt-1",children:["Prize: ",M.prizeType==="cash"&&M.prizeAmount?`${M.currency||"USD"} ${M.prizeAmount}`:"1 month PREMIUM"," ",M.prizeType==="cash"&&M.status==="completed"&&M.payoutStatus&&n.jsx("span",{className:`ml-2 px-1.5 py-0.5 rounded ${M.payoutStatus==="paid"?"bg-emerald-600":"bg-amber-600"}`,children:M.payoutStatus})]}),D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Withdrawals"}),n.jsxs("ul",{className:"space-y-2",children:[b.map(ne=>n.jsxs("li",{className:"p-2 rounded bg-black/20 text-sm flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-xs",children:ne.id}),n.jsxs("div",{children:[ne.email,"  ",ne.currency," ",(ne.amountCents/100).toFixed(2)]}),n.jsxs("div",{className:"opacity-70",children:[ne.status,"  ",new Date(ne.requestedAt).toLocaleString()]})]}),n.jsx("div",{className:"flex gap-2",children:ne.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",disabled:d,onClick:()=>Pe(ne.id,!0),children:"Approve"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",disabled:d,onClick:()=>Pe(ne.id,!1),children:"Reject"})]})})]},ne.id)),b.length===0&&n.jsx("li",{className:"opacity-60",children:"No withdrawal requests."})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[n.jsx("button",{className:"btn",disabled:d||M.status!=="scheduled",onClick:()=>ce(M.id,prompt("Winner email?")||""),children:"Set Winner"}),M.prizeType==="cash"&&M.status==="completed"&&M.payoutStatus!=="paid"&&n.jsx("button",{className:"btn",disabled:d,onClick:()=>je(M.id),children:"Mark Paid"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",disabled:d,onClick:()=>Oe(M.id),children:"Delete"})]})]},M.id)),w.length===0&&n.jsx("li",{className:"opacity-60",children:"No tournaments."})]}),n.jsx("div",{className:"mt-3 flex justify-end",children:n.jsx("button",{className:"btn",disabled:d,onClick:Se,children:"Reseed Weekly Giveaway"})})]})]})]}),D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-3",children:"User Reports"}),n.jsxs("ul",{className:"space-y-2",children:[O.map(M=>n.jsx("li",{className:"p-2 rounded bg-black/20 text-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-xs",children:M.id}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:M.reporter}),"  ",n.jsx("span",{className:"font-semibold",children:M.offender}),"  ",new Date(M.ts).toLocaleString()]}),n.jsxs("div",{className:"opacity-80",children:["Reason: ",M.reason]}),M.messageId&&n.jsxs("div",{className:"opacity-60 text-xs",children:["Message ID: ",M.messageId]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="open"?"bg-amber-600":"bg-emerald-600"}`,children:M.status}),M.status==="open"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",disabled:d,onClick:async()=>{await fetch("/api/admin/reports/resolve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:M.id,action:"resolved",requesterEmail:e==null?void 0:e.email})}),await z()},children:"Resolve"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",disabled:d,onClick:async()=>{const ne=prompt("Enter notes for action taken (e.g., warning, block):")||"";await fetch("/api/admin/reports/resolve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:M.id,action:"actioned",notes:ne,requesterEmail:e==null?void 0:e.email})}),await z()},children:"Action"})]})]})]})},M.id)),O.length===0&&n.jsx("li",{className:"opacity-60",children:"No reports."})]})]}),D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Open Matches"}),n.jsxs("ul",{className:"space-y-1",children:[((a==null?void 0:a.matches)||[]).map(M=>n.jsxs("li",{className:"flex items-center justify-between p-2 rounded bg-black/20 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"font-mono text-xs",children:M.id}),n.jsx("span",{className:"opacity-80",children:M.creatorName}),n.jsxs("span",{className:"opacity-60",children:[M.game," ",M.mode==="firstto"?"FT":"BO"," ",M.value," ",M.game==="X01"?`/${M.startingScore}`:""]})]}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",disabled:d,onClick:()=>Ee(M.id),children:"Remove"})]},M.id)),(!(a!=null&&a.matches)||a.matches.length===0)&&n.jsx("li",{className:"text-sm opacity-60",children:"No open matches."})]})]}),D&&n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Email Templates"}),n.jsx("div",{className:"text-sm opacity-80 mb-2",children:"Customize titles, intro lines, and button text. Previews open in a new tab or as a popup."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(ze,{kind:"reset",label:"Password reset"}),n.jsx(ze,{kind:"reminder",label:"Password reset reminder"}),n.jsx(ze,{kind:"confirm-email",label:"Confirm new email"}),n.jsx(ze,{kind:"changed",label:"Password changed notice"})]})]}),y.open&&n.jsxs("div",{className:"fixed inset-0 z-[1000]",onClick:()=>j({open:!1}),children:[n.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),n.jsx("div",{className:"absolute inset-0 p-4 md:p-8 overflow-auto flex items-start md:items-center justify-center",children:n.jsxs("div",{className:"w-full max-w-3xl bg-[#0b1020] rounded-2xl border border-indigo-500/40 shadow-2xl",onClick:M=>M.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-indigo-500/20",children:[n.jsxs("div",{className:"font-semibold",children:["Preview: ",y.kind]}),n.jsx("button",{className:"btn",onClick:()=>j({open:!1}),children:"Close"})]}),n.jsx("div",{className:"p-0 bg-black/30",children:n.jsx("iframe",{title:"Email Preview",style:{width:"100%",height:"70vh",border:"0",background:"transparent"},srcDoc:y.html||""})}),n.jsx("div",{className:"px-4 py-3 border-t border-indigo-500/20 text-xs opacity-70",children:"Click outside this panel or press Esc to close."})]})})]})]}):n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Admin"}),n.jsx("div",{className:"text-sm opacity-80",children:"You dont have permission to manage admins."})]})}const Ax=u.createContext({theme:"default",setTheme:e=>{}}),ph="ndn_theme";function hN({children:e}){const[t,s]=u.useState("default");return u.useEffect(()=>{try{const r=localStorage.getItem(ph);r&&s(r)}catch{}},[]),u.useEffect(()=>{try{localStorage.setItem(ph,t)}catch{}},[t]),n.jsx(Ax.Provider,{value:{theme:t,setTheme:s},children:n.jsx("div",{className:`theme-${t}`,children:e})})}function pN(){return u.useContext(Ax)}function xN({items:e,onUnlock:t}){return n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:e.map(s=>n.jsxs("div",{className:`relative p-3 rounded-xl border ${s.locked?"border-white/10 bg-white/5":"border-indigo-500/40 bg-indigo-500/10"}`,children:[n.jsx("div",{className:`text-[12px] mb-1 ${s.locked?"opacity-50":"opacity-80"}`,children:s.label}),n.jsx("div",{className:`text-lg font-semibold ${s.locked?"opacity-50 blur-[1px]":""}`,children:s.value}),s.locked&&n.jsx("button",{className:"absolute inset-0 flex items-center justify-center rounded-xl bg-slate-900/40 backdrop-blur-[1.5px] hover:bg-slate-900/50 transition",onClick:r=>{r.stopPropagation(),t==null||t()},title:"Unlock with PREMIUM",children:n.jsxs("div",{className:"flex items-center gap-2 text-[12px] font-semibold text-slate-100",children:[n.jsx(Pp,{className:"w-4 h-4"})," PREMIUM"]})})]},s.key))})}const xh=["DartsWithG","BullseyeChamp","SharpShooter"],Fi=["Focus on your stance and grip for consistency.","Practice doubles and finishing combinations regularly.","Keep your eyes on the target, not the dart.","Track your stats to identify areas for improvement.","Warm up before matches to get your rhythm.","Stay calm and confident, even under pressure."];function gN({user:e}){const{theme:t,setTheme:s}=pN(),[r,l]=u.useState(""),[a,i]=u.useState("");u.useEffect(()=>{try{const U=localStorage.getItem("ndn:avatar");U&&i(U)}catch{}},[]);const[o,c]=u.useState("English"),[d,x]=u.useState(!0),[w,g]=u.useState(!1),[b,C]=u.useState(0),[k,R]=u.useState(0),[N,f]=u.useState(""),[y,j]=u.useState(!1),[D,h]=u.useState(null),[I,O]=u.useState("GBP"),[P,F]=u.useState(""),[A,V]=u.useState(""),[T,z]=u.useState(null),[oe,le]=u.useState("Visa"),[Ne,Y]=u.useState(""),[ae,X]=u.useState(!1);function re(U){var tt;const ie=U.target,$e=(tt=ie==null?void 0:ie.files)==null?void 0:tt[0];if($e){const Je=new FileReader;Je.onload=()=>{const jt=Je.result;i(jt);try{localStorage.setItem("ndn:avatar",jt)}catch{}try{window.dispatchEvent(new CustomEvent("ndn:avatar-updated",{detail:jt}))}catch{}try{ie&&(ie.value="")}catch{}},Je.readAsDataURL($e)}}const{favoriteDouble:G,setFavoriteDouble:ce,callerEnabled:je,setCallerEnabled:Oe,callerVoice:Se,setCallerVoice:Pe,callerVolume:Ee,setCallerVolume:We,speakCheckoutOnly:ue,setSpeakCheckoutOnly:ve,avgMode:ze,setAvgMode:yt,autoStartOffline:st,setAutoStartOffline:Ht,rememberLastOffline:M,setRememberLastOffline:ne,lastOffline:Ue,setLastOffline:Ze,reducedMotion:ot,setReducedMotion:Tt,compactHeader:bt,setCompactHeader:Qe,allowSpectate:ht,setAllowSpectate:ct,cameraScale:rt,setCameraScale:Wt,cameraAspect:En,setCameraAspect:pt,calibrationGuide:cn,setCalibrationGuide:dn,autoscoreProvider:q,setAutoscoreProvider:de,autoscoreWsUrl:fe,setAutoscoreWsUrl:J,offlineLayout:Z,setOfflineLayout:lt}=qn(),xe=typeof window<"u"&&window.speechSynthesis?window.speechSynthesis.getVoices():[];u.useEffect(()=>{e!=null&&e.username&&l(e.username)},[e==null?void 0:e.username]);function Ve(U){f("");const ie=U.target.value;l(ie),xh.includes(ie)&&f("This username is already taken. Please choose another.")}function et(){if(f(""),xh.includes(r)){f("This username is already taken. Please choose another.");return}if(k<2){R(k+1);try{const U="ndn:username-log",ie=JSON.parse(localStorage.getItem(U)||"[]"),$e=(e==null?void 0:e.username)||"",tt=r.trim(),Je={from:$e,to:tt,ts:Date.now()};localStorage.setItem(U,JSON.stringify([Je,...ie].slice(0,20))),localStorage.setItem("ndn:username",tt)}catch{}try{window.dispatchEvent(new CustomEvent("ndn:username-changed",{detail:{username:r.trim()}}))}catch{}f("Display name changed successfully!")}else j(!0)}em(e==null?void 0:e.email);const[B,W]=u.useState("settings");function he(){try{window.dispatchEvent(new Event("ndn:layout-reset"))}catch{}}async function Ie(){if(!(e!=null&&e.email)){h(null);return}try{const ie=await(await fetch(`/api/wallet/balance?email=${encodeURIComponent(e.email)}`)).json();ie!=null&&ie.ok&&h(ie.wallet)}catch{}}async function ye(){if(!(e!=null&&e.email)){z(null);return}try{const ie=await(await fetch(`/api/wallet/payout-method?email=${encodeURIComponent(e.email)}`)).json();ie!=null&&ie.ok&&z(ie.method||null)}catch{}}u.useEffect(()=>{Ie(),ye()},[e==null?void 0:e.email]);async function Ce(){if(V(""),!(e!=null&&e.email)){V("Please sign in.");return}if(!/^\d{4}$/.test(Ne)){V("Enter last 4 digits.");return}try{const U=await fetch("/api/wallet/link-card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,brand:oe,last4:Ne})}),ie=await U.json();if(!U.ok||!(ie!=null&&ie.ok)){V((ie==null?void 0:ie.error)||"Failed to link");return}z(ie.method),Y(""),V("Payout method saved.")}catch{V("Network error")}}async function ge(){var ie,$e;if(V(""),!(e!=null&&e.email)){V("Please sign in.");return}const U=Number(P);if(!Number.isFinite(U)||U<=0){V("Enter a valid amount.");return}try{const tt=await fetch("/api/wallet/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,currency:I,amount:U})});if(!tt.ok){const jt=await tt.json().catch(()=>null);V((jt==null?void 0:jt.error)||"Request failed");return}const Je=await tt.json().catch(()=>null);Je!=null&&Je.paid?V(`Paid instantly to ${((ie=Je==null?void 0:Je.method)==null?void 0:ie.brand)||"card"}  ${(($e=Je==null?void 0:Je.method)==null?void 0:$e.last4)||"----"}.`):V("Withdrawal requested. Admin will review shortly."),F(""),await Ie()}catch{V("Network error")}}return n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-2xl font-bold text-brand-700 flex items-center gap-2",children:[n.jsx(Hc,{className:"w-6 h-6 text-brand-400"})," Settings"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:`btn ${B==="settings"?"bg-brand-600":""}`,onClick:()=>W("settings"),children:"Settings"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:()=>{try{localStorage.removeItem("ndn:avatar"),localStorage.removeItem("ndn:settings")}catch{}try{window.dispatchEvent(new Event("ndn:logout"))}catch{}},children:"Log out"})]})]}),n.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block font-semibold mb-1 flex items-center gap-2",children:[n.jsx(By,{className:"w-5 h-5 text-brand-400"})," Profile avatar:"]}),n.jsx("input",{className:"input w-full mb-2",type:"file",accept:"image/*",onChange:re}),a&&n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("img",{src:a,alt:"Avatar",className:"rounded-full w-16 h-16"}),n.jsx("button",{type:"button",className:"btn bg-rose-600 hover:bg-rose-700",onClick:()=>{i("");try{localStorage.removeItem("ndn:avatar")}catch{}try{window.dispatchEvent(new CustomEvent("ndn:avatar-updated",{detail:""}))}catch{}},title:"Remove custom avatar",children:"Remove"})]}),n.jsxs("label",{className:"block font-semibold mb-1 flex items-center gap-2",children:[n.jsx(Hc,{className:"w-5 h-5 text-brand-400"})," Change display name:"]}),n.jsx("input",{className:"input w-full mb-2",type:"text",value:r,onChange:Ve,placeholder:"New display name"}),n.jsx("button",{className:"btn bg-brand-600 text-white mb-2",onClick:et,children:k<2?`Change Name (${2-k} free left)`:"Pay to Change Name"}),N&&n.jsx("div",{className:"text-red-500 font-bold mb-2",children:N}),y&&n.jsxs("div",{className:"mb-2",children:[n.jsx("a",{href:Vp,target:"_blank",rel:"noopener noreferrer",className:"btn bg-pink-600 text-white w-full font-bold",children:"Pay via Stripe"}),n.jsx("div",{className:"text-xs text-gray-300 mt-1",children:"After payment, you can change your name again."})]}),n.jsxs("label",{className:"block font-semibold mb-1 flex items-center gap-2",children:[n.jsx(Oy,{className:"w-5 h-5 text-brand-400"})," Language:"]}),n.jsxs("select",{className:"input w-full mb-2",value:o,onChange:U=>c(U.target.value),children:[n.jsx("option",{children:"English"}),n.jsx("option",{children:"Spanish"}),n.jsx("option",{children:"French"}),n.jsx("option",{children:"German"}),n.jsx("option",{children:"Chinese"})]}),n.jsx("label",{className:"block font-semibold mb-1",children:"Theme:"}),n.jsxs("select",{className:"input w-full mb-4",value:t,onChange:U=>s(U.target.value),children:[n.jsx("option",{value:"default",children:"Default"}),n.jsx("option",{value:"light",children:"Light"}),n.jsx("option",{value:"dark",children:"Dark"})]}),n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:[n.jsxs("div",{className:"font-semibold mb-2 flex items-center gap-2",children:[n.jsx(zy,{className:"w-4 h-4"})," Caller & Checkout"]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:je,onChange:U=>Oe(U.target.checked)}),"Enable score caller"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[n.jsx("div",{className:"text-slate-600 col-span-1",children:"Caller volume"}),n.jsx("input",{className:"col-span-2",type:"range",min:0,max:1,step:.05,value:Ee,onChange:U=>We(parseFloat(U.target.value))})]}),n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:ue,onChange:U=>ve(U.target.checked)}),"Speak checkout reminders only"]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"Average mode (header)"}),n.jsxs("select",{className:"input w-full",value:ze,onChange:U=>yt(U.target.value),children:[n.jsx("option",{value:"all-time",children:"All-time (cumulative)"}),n.jsx("option",{value:"24h",children:"Last 24 hours (rolling)"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"Favorite double for checkouts"}),n.jsx("select",{className:"input w-full",value:G,onChange:U=>ce(U.target.value),children:["D1","D2","D3","D4","D5","D6","D7","D8","D9","D10","D11","D12","D13","D14","D15","D16","D17","D18","D19","D20","DB"].map(U=>n.jsx("option",{value:U,children:U},U))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"Caller voice (optional)"}),n.jsxs("select",{className:"input w-full",value:Se,onChange:U=>Pe(U.target.value),children:[n.jsx("option",{value:"",children:"System Default"}),xe.map(U=>n.jsxs("option",{value:U.name,children:[U.name," (",U.lang,")"]},`${U.name}-${U.lang}`))]}),n.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Uses your browser's built-in speech synthesis voices."})]})]})]}),n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 mt-4",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Camera"}),n.jsx("div",{className:"mb-3 p-3 rounded-lg bg-emerald-500/10 border border-emerald-400/30 text-emerald-200 text-sm",children:"Use any camera or autoscore system you already own. Choose our built-in autoscore, or connect an external provider over WebSocket. To calibrate the board, open the Calibrate tab."}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 items-end text-sm mb-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"Autoscore provider"}),n.jsxs("select",{className:"input w-full",value:q||"built-in",onChange:U=>de(U.target.value||"built-in"),children:[n.jsx("option",{value:"built-in",children:"Built-in (click overlay)"}),n.jsx("option",{value:"external-ws",children:"External (WebSocket)"})]})]}),q==="external-ws"&&n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"WS URL (wss://...)"}),n.jsx("input",{className:"input w-full",placeholder:"wss://example.com/autoscore",value:fe||"",onChange:U=>J(U.target.value)})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center text-sm mb-2",children:[n.jsx("div",{className:"text-slate-600 col-span-1",children:"Default camera size"}),n.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[n.jsx("button",{className:"btn px-2 py-0.5",onClick:()=>Wt(Math.max(.5,Math.round((rt-.05)*100)/100)),children:""}),n.jsx("input",{className:"flex-1",type:"range",min:.5,max:1.25,step:.05,value:rt,onChange:U=>Wt(parseFloat(U.target.value))}),n.jsx("button",{className:"btn px-2 py-0.5",onClick:()=>Wt(Math.min(1.25,Math.round((rt+.05)*100)/100)),children:"+"}),n.jsxs("div",{className:"w-10 text-right",children:[Math.round(rt*100),"%"]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center text-sm mb-2",children:[n.jsx("div",{className:"text-slate-600 col-span-1",children:"Camera aspect"}),n.jsx("div",{className:"col-span-2",children:n.jsxs("select",{className:"input w-full",value:En||"wide",onChange:U=>pt(U.target.value||"wide"),children:[n.jsx("option",{value:"wide",children:"Wide (16:9)"}),n.jsx("option",{value:"square",children:"Square (1:1)"})]})})]}),n.jsx(vN,{})]}),n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 mt-4",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Online & Privacy"}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:ht,onChange:U=>ct(U.target.checked)}),"Allow friends to spectate my online matches"]}),n.jsx("div",{className:"text-xs opacity-70 mt-1",children:"When off, friends wont be able to spectate your live games from the Friends tab."})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 mb-4",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Offline match defaults"}),n.jsxs("label",{className:"flex items-center gap-2 text-sm mb-1",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:st,onChange:U=>Ht(U.target.checked)}),"Auto-start last offline match when I pick Offline"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm mb-3",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:M,onChange:U=>ne(U.target.checked)}),"Remember last offline setup"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"Mode"}),n.jsx("select",{className:"input w-full",value:Ue.mode,onChange:U=>Ze({mode:U.target.value}),children:["X01","Double Practice","Around the Clock","Cricket","Halve It","Shanghai","High-Low","Killer"].map(U=>n.jsx("option",{value:U,children:U},U))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"X01 start"}),n.jsx("input",{className:"input w-full",type:"number",value:Ue.x01Start,onChange:U=>Ze({x01Start:parseInt(U.target.value||"501")})})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"First to"}),n.jsx("input",{className:"input w-full",type:"number",value:Ue.firstTo,onChange:U=>Ze({firstTo:parseInt(U.target.value||"1")})})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"AI Level"}),n.jsx("select",{className:"input w-full",value:Ue.aiLevel,onChange:U=>Ze({aiLevel:U.target.value}),children:["None","Easy","Medium","Hardened"].map(U=>n.jsx("option",{value:U,children:U},U))})]})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-slate-600 mb-1",children:"Offline layout"}),n.jsxs("select",{className:"input w-full",value:Z||"modern",onChange:U=>lt(U.target.value||"modern"),children:[n.jsx("option",{value:"classic",children:"Classic"}),n.jsx("option",{value:"modern",children:"Modern"})]})]})})]}),n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 mb-4",children:[n.jsx("div",{className:"font-semibold mb-2",children:"All-time stats"}),(()=>{const U=(e==null?void 0:e.username)||"Player 1",ie=un(U),$e=[{key:"best3",label:"Best 3-dart",value:Ge(ie.best3||0)},{key:"worst3",label:"Worst 3-dart",value:Ge(ie.worst3||0)},{key:"avg3",label:"3-dart average",value:Ge(Ss(U))},{key:"avg9",label:"9-dart average",value:Ge(no(U))},{key:"bestleg",label:"Best leg (darts)",value:String(ie.bestLegDarts||0)},{key:"checkout",label:"Best checkout",value:String(ie.bestCheckout||0)},{key:"mon3",label:"Monthly 3-dart",value:Ge(so(U))},{key:"mon9",label:"Monthly 9-dart",value:Ge(ro(U))}];return n.jsx(xN,{items:$e})})(),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:()=>X(!0),children:"Reset stats to 0"})})]}),n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 mb-4",children:[n.jsxs("div",{className:"font-semibold mb-2 flex items-center gap-2",children:[n.jsx(Hy,{className:"w-4 h-4"})," Wallet"]}),n.jsx("div",{className:"text-sm mb-2",children:"Tournament cash prizes accrue here. You can request a withdrawal when you have sufficient balance."}),n.jsxs("div",{className:"text-sm mb-2",children:[n.jsx("div",{className:"font-semibold",children:"Payout method"}),T?n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[T.brand,"  ",T.last4]}),n.jsx("button",{className:"btn px-2 py-1 text-sm",onClick:()=>z(null),children:"Change"})]}):n.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[n.jsx("select",{className:"input",value:oe,onChange:U=>le(U.target.value),children:["Visa","Mastercard","Amex","Maestro","Discover"].map(U=>n.jsx("option",{value:U,children:U},U))}),n.jsx("input",{className:"input",placeholder:"Last 4",value:Ne,onChange:U=>Y(U.target.value)}),n.jsx("button",{className:"btn",onClick:Ce,children:"Save"})]})]}),n.jsxs("div",{className:"text-sm mb-2",children:[n.jsx("div",{className:"font-semibold",children:"Balances"}),D&&Object.keys(D.balances||{}).length>0?n.jsx("ul",{className:"mt-1 space-y-0.5",children:Object.entries(D.balances).map(([U,ie])=>n.jsxs("li",{children:[U," ",(ie/100).toFixed(2)]},U))}):n.jsx("div",{className:"opacity-70",children:"No funds yet."})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[n.jsxs("select",{className:"input",value:I,onChange:U=>O(U.target.value),children:[n.jsx("option",{value:"GBP",children:"GBP"}),n.jsx("option",{value:"USD",children:"USD"}),n.jsx("option",{value:"EUR",children:"EUR"}),n.jsx("option",{value:"CAD",children:"CAD"}),n.jsx("option",{value:"AUD",children:"AUD"})]}),n.jsx("input",{className:"input",placeholder:"Amount",value:P,onChange:U=>F(U.target.value)}),n.jsxs("button",{className:"btn flex items-center gap-1",onClick:ge,title:T?"":"Link a payout method for instant payment",children:[n.jsx(Py,{className:"w-4 h-4"})," Withdraw"]})]}),A&&n.jsx("div",{className:"text-xs mt-2",children:A})]}),n.jsxs("label",{className:"block font-semibold mb-1 flex items-center gap-2",children:[n.jsx(Dy,{className:"w-5 h-5 text-brand-400"})," Notification preferences:"]}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("button",{className:`btn ${d?"bg-brand-600":"bg-slate-400"}`,onClick:()=>x(!0),children:"On"}),n.jsx("button",{className:`btn ${d?"bg-slate-400":"bg-brand-600"}`,onClick:()=>x(!1),children:"Off"})]}),n.jsxs("label",{className:"block font-semibold mb-1 flex items-center gap-2",children:[n.jsx(Ly,{className:"w-5 h-5 text-brand-400"})," Help & Support:"]}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("a",{href:"#",className:"btn",children:"FAQ"}),n.jsx("a",{href:"#",className:"btn",children:"Contact Us"})]}),n.jsxs("label",{className:"block font-semibold mb-1 flex items-center gap-2",children:[n.jsx(Hc,{className:"w-5 h-5 text-brand-400"})," Account management:"]}),n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("button",{className:"btn",children:"Change Password"}),n.jsx("button",{className:"btn bg-red-500",children:"Delete Account"})]}),n.jsxs("label",{className:"block font-semibold mb-1 flex items-center gap-2",children:[n.jsx(Fy,{className:"w-5 h-5 text-brand-400"})," Layout:"]}),n.jsx("div",{className:"flex gap-2 mb-2",children:n.jsx("button",{className:"btn",onClick:he,children:"Revert modal sizes to default"})}),n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Accessibility & Layout"}),n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:ot,onChange:U=>Tt(U.target.checked)}),"Reduce motion & animations"]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm mt-1",children:[n.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:bt,onChange:U=>Qe(U.target.checked)}),"Compact header height"]})]})]})]}),n.jsxs("label",{className:"block font-semibold mb-1 flex items-center gap-2",children:[n.jsx(th,{className:"w-5 h-5 text-cyan-300"})," Darts Tips:"]}),n.jsx("button",{className:"btn mb-4",onClick:()=>g(!0),children:"Show Tips to Improve Your Game"}),n.jsx("button",{className:"btn w-full",children:"Save Settings"}),w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"card max-w-md w-full relative text-left bg-[#2d2250] text-white p-6 rounded-xl shadow-xl",children:[n.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1 bg-purple-500 text-white font-bold",onClick:()=>g(!1),children:"Close"}),n.jsxs("h3",{className:"text-xl font-bold mb-2 flex items-center gap-2 text-white",children:[n.jsx(th,{className:"w-6 h-6 text-cyan-300"})," Darts Tips"]}),n.jsx("div",{className:"mb-4 text-lg font-semibold text-indigo-200",children:Fi[b]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"btn bg-gradient-to-r from-purple-500 to-purple-700 text-white font-bold",onClick:()=>C((b-1+Fi.length)%Fi.length),children:"Previous"}),n.jsx("button",{className:"btn bg-gradient-to-r from-purple-500 to-purple-700 text-white font-bold",onClick:()=>C((b+1)%Fi.length),children:"Next"})]})]})}),ae&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"card max-w-md w-full relative text-left",children:[n.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:()=>X(!1),children:"Close"}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:"Confirm Reset"}),n.jsx("p",{className:"mb-3",children:"Are you sure you want to clear all stats?"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{const U=(e==null?void 0:e.username)||"Player 1";Xy(U),X(!1)},children:"ACCEPT"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:()=>X(!1),children:"DECLINE"})]})]})})]})}function vN(){const{preferredCameraId:e,preferredCameraLabel:t,setPreferredCamera:s}=qn(),[r,l]=u.useState([]),[a,i]=u.useState("");async function o(){i("");try{try{await navigator.mediaDevices.getUserMedia({video:!0})}catch{}const x=(await navigator.mediaDevices.enumerateDevices()).filter(w=>w.kind==="videoinput");l(x)}catch{i("Unable to list cameras. Grant camera permission in your browser.")}}u.useEffect(()=>{o()},[]);const c=e||"";return n.jsxs("div",{className:"mt-3 p-3 rounded-lg border border-indigo-500/30 bg-indigo-500/5",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Select camera device"}),a&&n.jsx("div",{className:"text-rose-400 text-sm mb-2",children:a}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center text-sm",children:[n.jsx("div",{className:"col-span-2",children:n.jsxs("select",{className:"input w-full",value:c,onChange:d=>{var g;const x=d.target.value||void 0,w=((g=r.find(b=>b.deviceId===x))==null?void 0:g.label)||"";s(x,w)},children:[n.jsx("option",{value:"",children:"Auto (browser default)"}),r.map(d=>{var x,w;return n.jsxs("option",{value:d.deviceId,children:[d.label||"Camera"," ",(x=d.label)!=null&&x.toLowerCase().includes("omni")?"(OMNI)":""," ",(w=d.label)!=null&&w.toLowerCase().includes("vert")?"(VERT)":""]},d.deviceId)})]})}),n.jsx("div",{className:"text-right",children:n.jsx("button",{className:"btn px-2 py-1",onClick:o,children:"Refresh"})})]}),t&&n.jsxs("div",{className:"text-xs opacity-70 mt-1",children:["Selected: ",t]}),n.jsx("div",{className:"text-xs opacity-70 mt-1",children:"Tip: OMNI and VERT cameras are supportedselect them here and then open Calibrator to align."})]})}const ml={};function yN({onAuth:e}){const[t,s]=u.useState("signin"),[r,l]=u.useState(""),[a,i]=u.useState(""),[o,c]=u.useState(""),[d,x]=u.useState(""),[w,g]=u.useState(""),[b,C]=u.useState(!1),k=(ml==null?void 0:ml.VITE_API_URL)||"";async function R(j){if(j.preventDefault(),g(""),!a||!o){g("Username and password required.");return}try{const D=await fetch(`${k}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:o})}),h=await D.json();D.ok&&(h!=null&&h.user)&&(h!=null&&h.token)?(localStorage.setItem("authToken",h.token),e(h.user)):g((h==null?void 0:h.error)||"Invalid username or password.")}catch{g("Network error.")}}async function N(j){if(j.preventDefault(),g(""),!r||!a||!o){g("Email, username, and password required.");return}try{const D=await fetch(`${k}/api/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,username:a,password:o})}),h=await D.json();D.ok&&(h!=null&&h.user)&&(h!=null&&h.token)?(localStorage.setItem("authToken",h.token),e(h.user)):g((h==null?void 0:h.error)||"Signup failed.")}catch{g("Network error.")}}async function f(j){if(j.preventDefault(),g(""),!r||!r.includes("@")){g("Enter your email address.");return}try{const h=await(await fetch(`${k}/api/auth/send-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})})).json();if(!(h!=null&&h.ok))throw new Error((h==null?void 0:h.error)||"Failed to send reset email");g("Password reset link sent to your email.")}catch(D){g((D==null?void 0:D.message)||"Failed to send reset email")}}async function y(j){if(j.preventDefault(),g(""),!r||!r.includes("@")){g("Enter your email address.");return}try{const h=await(await fetch(`${k}/api/auth/send-username`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})})).json();if(!(h!=null&&h.ok))throw new Error((h==null?void 0:h.error)||"Failed to send username email");g("Your username has been emailed to you.")}catch(D){g((D==null?void 0:D.message)||"Failed to send username email")}}return n.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[n.jsx("div",{className:"background-animated"}),n.jsxs("div",{className:"relative z-10 w-full max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6 p-4",children:[n.jsxs("form",{className:"card w-full space-y-4",onSubmit:t==="signin"?R:t==="signup"?N:f,children:[n.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 mb-2 text-center",children:[n.jsx("h1",{className:"logo text-center",children:"NINE-DART-NATION "}),n.jsx("span",{className:"badge",children:"Welcome"})]}),n.jsx("h2",{className:"text-2xl font-bold",children:t==="signin"?"Sign In":t==="signup"?"Create Account":"Reset Password"}),(t==="signup"||t==="reset")&&n.jsx("input",{className:"input w-full",type:"email",placeholder:"Email",value:r,onChange:j=>l(j.target.value),required:!0}),t!=="reset"&&n.jsx("input",{className:"input w-full",type:"text",placeholder:"Username",value:a,onChange:j=>i(j.target.value),required:!0}),t!=="reset"&&n.jsxs("div",{className:"relative",children:[n.jsx("input",{className:"input w-full pr-10",type:b?"text":"password",placeholder:"Password",value:o,onChange:j=>c(j.target.value),required:!0,onFocus:()=>C(!1),onBlur:()=>C(!1)}),n.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-300 hover:text-white",tabIndex:-1,onMouseDown:j=>{j.preventDefault(),C(!0)},onMouseUp:j=>{j.preventDefault(),C(!1)},onMouseLeave:()=>C(!1),onTouchStart:j=>{j.preventDefault(),C(!0)},onTouchEnd:j=>{j.preventDefault(),C(!1)},"aria-label":"Toggle password visibility",children:b?n.jsx(Ay,{className:"w-5 h-5"}):n.jsx(Ry,{className:"w-5 h-5"})})]}),t==="signup"&&n.jsx("input",{className:"input w-full",type:"text",placeholder:"Password Reminder (optional)",value:d,onChange:j=>x(j.target.value)}),w&&n.jsx("div",{className:"text-red-400 font-semibold text-sm",children:w}),n.jsx("button",{className:"btn w-full",type:"submit",children:t==="signin"?"Sign In":t==="signup"?"Sign Up":"Send Reset Link"}),t==="reset"&&n.jsx("button",{className:"btn w-full mt-2 bg-white/10 hover:bg-white/20",type:"button",onClick:y,children:"Email me my username"}),n.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[n.jsx("button",{type:"button",className:"underline",onClick:()=>s(t==="signin"?"signup":"signin"),children:t==="signin"?"Need an account? Sign Up":"Already have an account? Sign In"}),n.jsx("button",{type:"button",className:"underline",onClick:()=>s("reset"),children:"Forgot password?"})]}),n.jsx("div",{className:"text-xs text-slate-200/80",children:"Tip: Use the admin demo credentials to explore admin features."})]}),n.jsxs("aside",{className:"card w-full",children:[n.jsx("h3",{className:"text-xl font-bold mb-3",children:"Whats inside"}),n.jsxs("ul",{className:"space-y-3",children:[n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx(Gd,{className:"w-5 h-5 text-indigo-300 mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:"Online & Friends"}),n.jsx("div",{className:"text-sm text-slate-200/90",children:"Challenge friends, chat, and join leagues."})]})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx(My,{className:"w-5 h-5 text-indigo-300 mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:"Deep Stats"}),n.jsx("div",{className:"text-sm text-slate-200/90",children:"Track 3-dart averages, best legs, and more."})]})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx(eo,{className:"w-5 h-5 text-indigo-300 mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:"Game Modes"}),n.jsx("div",{className:"text-sm text-slate-200/90",children:"Start with 3 free online games upon signup. After that, PREMIUM is required to play all games."})]})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx($y,{className:"w-5 h-5 text-indigo-300 mt-1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:"Premium Perks"}),n.jsx("div",{className:"text-sm text-slate-200/90",children:"Polished UI, upcoming features, and early access."})]})]})]}),n.jsxs("a",{href:(ml==null?void 0:ml.VITE_DISCORD_INVITE_URL)||"https://discord.gg/8GtbZ6RU",target:"_blank",rel:"noopener noreferrer",className:"btn mt-4 flex items-center justify-center gap-2",children:[n.jsx(Kd,{className:"w-5 h-5"})," Join BullseyeDartsLeague"]})]})]})]})}const Qc={},Rx=u.createContext(null);function bN({children:e}){const[t,s]=u.useState(!1),[r,l]=u.useState("connecting"),a=u.useRef(null),i=u.useRef(new Set),o=u.useRef(!0),c=u.useRef(0),d=u.useRef(null),x=u.useRef(null),w=u.useRef(null),g=u.useRef(0),b=()=>{if(w.current)return w.current;const j=Qc==null?void 0:Qc.VITE_WS_URL;if(j&&j.length>0){const P=j.endsWith("/ws")?j:j.replace(/\/$/,"")+"/ws";return w.current=[P],w.current}const D=window.location.protocol==="https:"?"wss":"ws",h=window.location.hostname,O=[`${D}://${window.location.host}`+"/ws",`${D}://${h}/ws`,`${D}://${h}:8787/ws`,`${D}://${h}:3000/ws`];return w.current=Array.from(new Set(O)),w.current},C=()=>{const j=b();return g.current=(g.current+1)%j.length,j[g.current]},k=()=>{const j=b();return j[g.current]||j[0]},R=u.useCallback(()=>{if(a.current&&(a.current.readyState===WebSocket.OPEN||a.current.readyState===WebSocket.CONNECTING))return;l("connecting");const D=`${k()}`,h=new WebSocket(D);a.current=h,h.onopen=()=>{s(!0),l("connected"),c.current=0,x.current&&clearInterval(x.current),x.current=setInterval(()=>{var I,O;try{((I=a.current)==null?void 0:I.readyState)===WebSocket.OPEN&&((O=a.current)==null||O.send(JSON.stringify({type:"ping",t:Date.now()})))}catch{}},2e4)},h.onmessage=I=>{try{const O=JSON.parse(I.data);i.current.forEach(P=>{try{P(O)}catch{}})}catch{}},h.onerror=()=>{},h.onclose=()=>{if(s(!1),l("disconnected"),x.current&&(clearInterval(x.current),x.current=null),!o.current)return;const I=(c.current||0)+1;c.current=I,I%2===0&&C();const O=1e3*Math.pow(2,I-1),P=Math.floor(Math.random()*1e3);let F=Math.min(3e4,O+P);I===1&&(F=0),d.current&&clearTimeout(d.current),F===0?R():d.current=setTimeout(R,F)}},[]);u.useEffect(()=>{o.current=!0,R();const j=()=>{var h;o.current=!1;try{(h=a.current)==null||h.close()}catch{}};window.addEventListener("beforeunload",j);const D=()=>{document.visibilityState==="visible"&&(t||R())};return document.addEventListener("visibilitychange",D),window.addEventListener("online",R),()=>{var h;o.current=!1,d.current&&clearTimeout(d.current),x.current&&clearInterval(x.current);try{(h=a.current)==null||h.close()}catch{}document.removeEventListener("visibilitychange",D),window.removeEventListener("online",R),window.removeEventListener("beforeunload",j)}},[R]);const N=u.useCallback(j=>{try{a.current&&a.current.readyState===WebSocket.OPEN&&a.current.send(typeof j=="string"?j:JSON.stringify(j))}catch{}},[]),f=u.useCallback(j=>(i.current.add(j),()=>{i.current.delete(j)}),[]),y=u.useMemo(()=>({connected:t,status:r,send:N,addListener:f}),[t,r,N,f]);return n.jsx(Rx.Provider,{value:y,children:e})}function fm(){const e=u.useContext(Rx);if(!e)throw new Error("useWS must be used within WSProvider");return e}function NN({status:e,title:t,size:s=12}){const r=s;return e==="connecting"?n.jsx("span",{role:"img","aria-label":"Connecting",title:t||"Connecting",className:"inline-flex items-center justify-center",style:{width:r,height:r},children:n.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:"animate-spin","aria-hidden":"true",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"#A7F3D0",strokeWidth:"3",fill:"none",opacity:"0.35"}),n.jsx("path",{d:"M22 12a10 10 0 0 0-10-10",stroke:"#34D399",strokeWidth:"3",strokeLinecap:"round",fill:"none"})]})}):e==="connected"?n.jsx("span",{role:"img","aria-label":"Connected",title:t||"Connected",className:"inline-flex items-center justify-center",style:{width:r,height:r},children:n.jsx("svg",{width:r,height:r,viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#34D399"})})}):n.jsx("span",{role:"img","aria-label":"Disconnected",title:t||"Not connected",className:"inline-flex items-center justify-center",style:{width:r,height:r},children:n.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24","aria-hidden":"true",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#F87171",opacity:"0.15"}),n.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#F87171",strokeWidth:"2",fill:"none"}),n.jsx("rect",{x:"6",y:"11",width:"12",height:"2",rx:"1",fill:"#F87171"})]})})}const Ox="ndn:blocked:v1";function wN(){try{const e=localStorage.getItem(Ox);return e?JSON.parse(e):{}}catch{return{}}}function gh(e){try{localStorage.setItem(Ox,JSON.stringify(e))}catch{}}const jN=Gl((e,t)=>({blocked:wN(),isBlocked:s=>!!t().blocked[(s||"").toLowerCase()],block:s=>e(r=>{const l={...r.blocked};return l[(s||"").toLowerCase()]=Date.now(),gh(l),{blocked:l}}),unblock:s=>e(r=>{const l={...r.blocked};return delete l[(s||"").toLowerCase()],gh(l),{blocked:l}}),all:()=>Object.keys(t().blocked)})),Xc={};function SN({user:e}){var $n,Gr,pr,Jr,Fn,vs,Yr,Bs,qr,Zl,Qr,ea,Xr,ta,Zr,na,xr,el,gr,sa,ra,la,aa,ia,di,tl,ui,nl,mi,sl;const t=(()=>{try{return fm()}catch{return null}})(),s=jN(),[r,l]=u.useState("room-1"),[a,i]=u.useState(!1),[o,c]=u.useState([]),[d,x]=u.useState(!1),[w,g]=u.useState(!1),b=u.useRef(null),[C,k]=u.useState(null),R=u.useRef(null),N=u.useRef(0),f=u.useRef(null),y=u.useRef(!0),j=u.useRef(0),D=u.useRef(!1),h=Ia(),I=ru(),{favoriteDouble:O,callerEnabled:P,callerVoice:F,callerVolume:A,speakCheckoutOnly:V,allowSpectate:T,cameraScale:z,setCameraScale:oe}=qn(),[le,Ne]=u.useState(!1),[Y,ae]=u.useState([]),[X,re]=u.useState(0),[G,ce]=u.useState(0),[je,Oe]=u.useState(0),[Se,Pe]=u.useState(0),[Ee,We]=u.useState(""),[ue,ve]=u.useState(0),[ze,yt]=u.useState(0),[st,Ht]=u.useState(""),[M,ne]=u.useState({}),[Ue,Ze]=u.useState({}),[ot,Tt]=u.useState({}),[bt,Qe]=u.useState({}),[ht,ct]=u.useState({}),[rt,Wt]=u.useState({}),[En,pt]=u.useState({}),[cn,dn]=u.useState({}),[q,de]=u.useState(()=>nu()),[fe,J]=u.useState(0),[Z,lt]=u.useState(()=>{try{const m=navigator.userAgent||"";return/Android|iPhone|iPad|iPod|Mobile/i.test(m)}catch{return!1}}),[xe,Ve]=u.useState(null),et=u.useRef(null),B=u.useRef(null);function W(){var m,v;try{if(!B.current){const E=window.AudioContext||window.webkitAudioContext;E&&(B.current=new E)}(v=(m=B.current)==null?void 0:m.resume)==null||v.call(m).catch(()=>{})}catch{}}function he(m,v,E=0,S=.05){const K=B.current;if(!K)return;const te=K.createOscillator(),se=K.createGain();te.type="square",te.frequency.value=m,se.gain.value=S,te.connect(se),se.connect(K.destination);const $=K.currentTime+E;te.start($),te.stop($+v/1e3)}function Ie(m){W(),B.current&&(m==="180"?(he(880,110,0,.06),he(1175,110,.06,.06),he(1568,140,.12,.06)):(he(659,140,0,.07),he(784,140,.08,.07),he(987,200,.16,.07)))}function ye(m,v){const E=Date.now(),S=et.current;S&&S.kind===m&&S.by===v&&E-S.ts<500||(et.current={kind:m,by:v,ts:E},Ve({kind:m,by:v,turnIdx:h.currentPlayerIdx,ts:E}),Ie(m))}const[Ce,ge]=u.useState(!1),[U,ie]=u.useState([]),[$e,tt]=u.useState("bestof"),[Je,jt]=u.useState(5),[Xe,dr]=u.useState(501),[dt,gn]=u.useState(null),[ms,Vt]=u.useState(""),[nn,Ls]=u.useState(null),[fs,Qn]=u.useState(null),Bt=um(),[_t,Br]=u.useState("X01"),[Te,hs]=u.useState("X01"),[Xn,ur]=u.useState(!1),Ae=e!=null&&e.username&&!(e!=null&&e.fullAccess)?Bp(e.username):1/0,Be=!(e!=null&&e.fullAccess)&&Ae<=0,[He,Dt]=u.useState("all"),[It,St]=u.useState("all"),[at,Jt]=u.useState("all"),[sn,Ps]=u.useState(!1),[ps,_r]=u.useState(10),{H:Ur}=om(),$r=e!=null&&e.username?Ss(e.username):0,Fr=ru(m=>m.unread),zr=(U||[]).filter(m=>!(He!=="all"&&m.mode!==He||It!=="all"&&Number(m.startingScore)!==Number(It)||at!=="all"&&m.game!==at||sn&&(!$r||!m.creatorAvg||Math.abs(Number(m.creatorAvg)-Number($r))>ps)));u.useEffect(()=>{const m=v=>{const E=(v==null?void 0:v.detail)||{};E.game&&Br(E.game),(E.mode==="bestof"||E.mode==="firstto")&&tt(E.mode),typeof E.value=="number"&&isFinite(E.value)&&jt(Math.max(1,Math.floor(E.value))),typeof E.start=="number"&&isFinite(E.start)&&dr(Math.max(1,Math.floor(E.start))),ge(!0)};return window.addEventListener("ndn:online-demo",m),()=>window.removeEventListener("ndn:online-demo",m)},[]),u.useEffect(()=>{const m=String((e==null?void 0:e.email)||"").toLowerCase();m&&fetch(`/api/friends/messages?email=${encodeURIComponent(m)}`).then(v=>v.json()).then(v=>{v!=null&&v.ok&&Array.isArray(v.messages)&&I.load(v.messages)}).catch(()=>{})},[e==null?void 0:e.email]),u.useEffect(()=>{const m=v=>{try{const E=(v==null?void 0:v.detail)||{},S=Number(E.start||501);h.newMatch([(e==null?void 0:e.username)||"You","Opponent"],S,r),h.addVisit(60,3),h.nextPlayer(),h.addVisit(85,3),h.nextPlayer(),h.addVisit(100,3),hs("X01"),Ne(!0)}catch{}};return window.addEventListener("ndn:online-match-demo",m),()=>window.removeEventListener("ndn:online-match-demo",m)},[]),u.useEffect(()=>(y.current=!0,Un(),()=>{var m;y.current=!1,f.current&&clearTimeout(f.current);try{(m=R.current)==null||m.close()}catch{}}),[]),u.useEffect(()=>{I.setInGame(h.inProgress)},[h.inProgress]),u.useEffect(()=>{xe&&h.currentPlayerIdx!==xe.turnIdx&&Ve(null)},[h.currentPlayerIdx,xe==null?void 0:xe.turnIdx]),u.useEffect(()=>{try{t&&t.connected?t.send({type:"presence",username:(e==null?void 0:e.username)||"guest",email:((e==null?void 0:e.email)||"").toLowerCase(),allowSpectate:T}):R.current&&R.current.readyState===WebSocket.OPEN&&R.current.send(JSON.stringify({type:"presence",username:(e==null?void 0:e.username)||"guest",email:((e==null?void 0:e.email)||"").toLowerCase(),allowSpectate:T}))}catch{}},[T,t==null?void 0:t.connected]),u.useEffect(()=>{const m=v=>{var S,K;const E=(S=v==null?void 0:v.detail)==null?void 0:S.roomId;E&&(l(E),t?t.send({type:"spectate",roomId:E}):(K=R.current)==null||K.send(JSON.stringify({type:"spectate",roomId:E})),Ne(!0),ge(!1))};return window.addEventListener("ndn:spectate-room",m),()=>window.removeEventListener("ndn:spectate-room",m)},[t]);function Un(){if(t){t.connected&&(t.send({type:"join",roomId:r}),t.send({type:"presence",username:(e==null?void 0:e.username)||"guest",email:((e==null?void 0:e.email)||"").toLowerCase(),allowSpectate:T}),t.send({type:"list-matches"}),i(!0));return}try{if(R.current&&(R.current.readyState===WebSocket.OPEN||R.current.readyState===WebSocket.CONNECTING))return}catch{}const m=Xc==null?void 0:Xc.VITE_WS_URL,v=window.location.protocol==="https:"?"wss":"ws",E=window.location.hostname,S=`${v}://${E}${window.location.port?"":":8787"}`,K=m&&typeof m=="string"&&m.length>0?m:S,te=new WebSocket(K);R.current=te,te.onopen=()=>{i(!0),N.current=0,D.current?Bt("Reconnected to lobby",{type:"success"}):(Bt("Connected to lobby",{type:"success"}),D.current=!0),te.send(JSON.stringify({type:"join",roomId:r})),te.send(JSON.stringify({type:"presence",username:(e==null?void 0:e.username)||"guest",email:((e==null?void 0:e.email)||"").toLowerCase(),allowSpectate:T})),te.send(JSON.stringify({type:"list-matches"}))},te.onmessage=se=>{var xt;const $=JSON.parse(se.data);if($.type==="state"){h.importState($.payload);const it=Number($.payload._dpIndex),Nt=Number($.payload._dpHits);Number.isFinite(it)&&Oe(Math.max(0,it)),Number.isFinite(Nt)&&Pe(Math.max(0,Nt));const Ut=Number($.payload._atcIndex),Me=Number($.payload._atcHits);Number.isFinite(Ut)&&ve(Math.max(0,Ut)),Number.isFinite(Me)&&yt(Math.max(0,Me));try{const pe=$.payload._cricketById;pe&&typeof pe=="object"&&ne(pe)}catch{}try{const pe=$.payload._shanghaiById;pe&&typeof pe=="object"&&Ze(pe)}catch{}try{const pe=$.payload._halveById;pe&&typeof pe=="object"&&Tt(pe)}catch{}try{const pe=$.payload._highlowById;pe&&typeof pe=="object"&&Qe(pe)}catch{}try{const pe=$.payload._killerById;pe&&typeof pe=="object"&&ct(pe)}catch{}try{const pe=$.payload._amCricketById;pe&&typeof pe=="object"&&Wt(pe)}catch{}try{const pe=$.payload._baseballById;pe&&typeof pe=="object"&&pt(pe)}catch{}try{const pe=$.payload._golfById;pe&&typeof pe=="object"&&dn(pe)}catch{}try{const pe=$.payload._tttState;pe&&typeof pe=="object"&&de(pe)}catch{}try{const pe=Number($.payload._turnDarts);Number.isFinite(pe)&&J(Math.max(0,pe))}catch{}}else if($.type==="joined")$.id&&k($.id);else if($.type==="presence"||$.type==="peer-joined")ae(it=>{const Nt=new Set(it);return $.id&&Nt.add($.id),Array.from(Nt)});else if($.type==="chat"){const it=!!($.from&&C&&$.from===C),Nt=it?(e==null?void 0:e.username)||"me":$.from||"peer",Ut=String($.from||"");if(!it&&Ut&&s.isBlocked(Ut))return;if(it&&b.current&&String($.message||"")===b.current.text){b.current=null;return}c(Me=>[...Me,{from:Nt,message:$.message,fromId:Ut||void 0}])}else if($.type==="matches")ie(Array.isArray($.matches)?$.matches:[]);else if($.type==="invite")gn({matchId:$.matchId,fromId:$.fromId,fromName:$.fromName,calibrated:!!$.calibrated,boardPreview:$.boardPreview||null,game:$.game,mode:$.mode,value:$.value,startingScore:$.startingScore});else if($.type==="match-start")l($.roomId),te.send(JSON.stringify({type:"join",roomId:$.roomId})),Ne(!0),ge(!1),(xt=$.match)!=null&&xt.game&&hs($.match.game),e!=null&&e.username&&!(e!=null&&e.fullAccess)&&nh(e.username);else if($.type==="declined")Bt("Invite declined",{type:"info"});else if($.type==="error"){const it=typeof $.message=="string"?$.message:"Action not allowed";if(Vt(it),$.code==="SPECTATE_NOT_ALLOWED")try{Bt("This player has spectating turned off.",{type:"error"})}catch{}$.code==="NOT_FOUND"&&nn&&Qn({game:nn.game,mode:nn.mode,value:nn.value,startingScore:nn.startingScore}),setTimeout(()=>Vt(""),3500)}else if($.type==="friend-invite")confirm(`${$.fromName||$.fromEmail} invited you to play ${$.game||"X01"} (${$.mode==="firstto"?"First To":"Best Of"} ${$.value||1}${$.game==="X01"&&$.startingScore?`  ${$.startingScore}`:""}). Accept?`)?te.send(JSON.stringify({type:"start-friend-match",toEmail:$.fromEmail,game:$.game,mode:$.mode,value:$.value,startingScore:$.startingScore})):Bt("Invite declined",{type:"info"});else if($.type==="friend-message")I.add({id:$.id||`${$.ts}-${$.from}`,from:$.from,message:$.message,ts:$.ts||Date.now()}),h.inProgress||Bt(`${$.from}: ${$.message}`,{type:"info"});else if($.type==="celebration"){const it=$.by||"Player",Nt=$.kind==="leg"?"leg":"180";ye(Nt,it)}},te.onclose=()=>{if(i(!1),!y.current)return;const se=(N.current||0)+1;N.current=se;const $=Math.min(3e4,1e3*Math.pow(2,se-1)),xt=Date.now();xt-j.current>4e3&&(Bt(`Disconnected. Reconnecting in ${Math.round($/1e3)}s...`,{type:"error"}),j.current=xt),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{Un()},$)}}function Yl(){var Me,pe,ys,fi,hi,pi;const m=h.players||[],v=h.currentPlayerIdx||0,E=m[v],S=(pe=E==null?void 0:E.legs)==null?void 0:pe[((Me=E==null?void 0:E.legs)==null?void 0:Me.length)-1],K=S?S.totalScoreRemaining:h.startingScore,te=(S==null?void 0:S.dartsThrown)||0,se=S?S.totalScoreStart-S.totalScoreRemaining:0,$=te>0?se/te*3:0,xt=((fi=(ys=S==null?void 0:S.visits)==null?void 0:ys[S.visits.length-1])==null?void 0:fi.score)??0;let it="";m.length===2?it=`${((hi=m[0])==null?void 0:hi.legsWon)||0}-${((pi=m[1])==null?void 0:pi.legsWon)||0}`:m.length>2&&(it=m.map(vr=>`${vr.name}:${vr.legsWon||0}`).join("  "));const Nt=h.bestLegThisMatch,Ut=Nt?`${Nt.darts} darts${(()=>{const vr=m.find(ac=>ac.id===Nt.playerId);return vr?` (${vr.name})`:""})()}`:"";return n.jsxs("div",{className:"p-3 rounded-2xl bg-slate-900/40 border border-white/10 text-white text-sm",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Match Summary"}),n.jsxs("div",{className:"grid grid-cols-2 gap-y-1",children:[n.jsx("div",{className:"opacity-80",children:"Current score"}),n.jsx("div",{className:"font-mono text-right",children:it}),n.jsx("div",{className:"opacity-80",children:"Current thrower"}),n.jsx("div",{className:"text-right font-semibold",children:(E==null?void 0:E.name)||""}),n.jsx("div",{className:"opacity-80",children:"Score remaining"}),n.jsx("div",{className:"text-right font-mono",children:K}),n.jsx("div",{className:"opacity-80",children:"3-dart avg"}),n.jsx("div",{className:"text-right font-mono",children:$.toFixed(1)}),n.jsx("div",{className:"opacity-80",children:"Last score"}),n.jsx("div",{className:"text-right font-mono",children:xt}),n.jsx("div",{className:"opacity-80",children:"Best leg"}),n.jsx("div",{className:"text-right",children:Ut})]})]})}u.useEffect(()=>{if(!t)return;i(t.connected);const m=t.addListener(v=>{var E;try{if(v.type==="state"){h.importState(v.payload);try{const S=Number(v.payload._dpIndex),K=Number(v.payload._dpHits);Number.isFinite(S)&&Oe(Math.max(0,S)),Number.isFinite(K)&&Pe(Math.max(0,K))}catch{}try{const S=Number(v.payload._atcIndex),K=Number(v.payload._atcHits);Number.isFinite(S)&&ve(Math.max(0,S)),Number.isFinite(K)&&yt(Math.max(0,K))}catch{}try{const S=v.payload._cricketById;S&&typeof S=="object"&&ne(S)}catch{}try{const S=v.payload._shanghaiById;S&&typeof S=="object"&&Ze(S)}catch{}try{const S=v.payload._halveById;S&&typeof S=="object"&&Tt(S)}catch{}try{const S=v.payload._highlowById;S&&typeof S=="object"&&Qe(S)}catch{}try{const S=v.payload._killerById;S&&typeof S=="object"&&ct(S)}catch{}try{const S=v.payload._amCricketById;S&&typeof S=="object"&&Wt(S)}catch{}try{const S=v.payload._baseballById;S&&typeof S=="object"&&pt(S)}catch{}try{const S=v.payload._golfById;S&&typeof S=="object"&&dn(S)}catch{}try{const S=v.payload._tttState;S&&typeof S=="object"&&de(S)}catch{}try{const S=Number(v.payload._turnDarts);Number.isFinite(S)&&J(Math.max(0,S))}catch{}}else if(v.type==="joined")v.id&&k(v.id);else if(v.type==="presence"||v.type==="peer-joined")ae(S=>Array.from(new Set([...S||[],v.id].filter(Boolean))));else if(v.type==="chat"){const S=!!(v.from&&C&&v.from===C),K=S?(e==null?void 0:e.username)||"me":v.from||"peer",te=String(v.from||"");if(!S&&te&&s.isBlocked(te))return;c(se=>[...se,{from:K,message:v.message,fromId:te||void 0}])}else if(v.type==="matches")ie(Array.isArray(v.matches)?v.matches:[]);else if(v.type==="invite")gn({matchId:v.matchId,fromId:v.fromId,fromName:v.fromName,calibrated:!!v.calibrated,boardPreview:v.boardPreview||null,game:v.game,mode:v.mode,value:v.value,startingScore:v.startingScore});else if(v.type==="match-start")l(v.roomId),t.send({type:"join",roomId:v.roomId}),Ne(!0),ge(!1),(E=v.match)!=null&&E.game&&hs(v.match.game),e!=null&&e.username&&!(e!=null&&e.fullAccess)&&nh(e.username);else if(v.type==="declined")Bt("Invite declined",{type:"info"});else if(v.type==="error"){const S=typeof v.message=="string"?v.message:"Action not allowed";if(Vt(S),v.code==="SPECTATE_NOT_ALLOWED")try{Bt("This player has spectating turned off.",{type:"error"})}catch{}v.code==="NOT_FOUND"&&nn&&Qn({game:nn.game,mode:nn.mode,value:nn.value,startingScore:nn.startingScore}),setTimeout(()=>Vt(""),3500)}else if(v.type==="friend-invite")confirm(`${v.fromName||v.fromEmail} invited you to play ${v.game||"X01"} (${v.mode==="firstto"?"First To":"Best Of"} ${v.value||1}${v.game==="X01"&&v.startingScore?`  ${v.startingScore}`:""}). Accept?`)?t.send({type:"start-friend-match",toEmail:v.fromEmail,game:v.game,mode:v.mode,value:v.value,startingScore:v.startingScore}):Bt("Invite declined",{type:"info"});else if(v.type==="friend-message")I.add({id:v.id||`${v.ts}-${v.from}`,from:v.from,message:v.message,ts:v.ts||Date.now()}),h.inProgress||Bt(`${v.from}: ${v.message}`,{type:"info"});else if(v.type==="celebration"){const S=v.by||"Player",K=v.kind==="leg"?"leg":"180";ye(K,S)}}catch{}});return t.connected&&(t.send({type:"join",roomId:r}),t.send({type:"presence",username:(e==null?void 0:e.username)||"guest",email:((e==null?void 0:e.email)||"").toLowerCase(),allowSpectate:T}),t.send({type:"list-matches"})),()=>{m()}},[t==null?void 0:t.connected]);function Ke(){if(t){t.send({type:"state",payload:{...h,_turnIdx:X,_participants:Y,_dpIndex:je,_dpHits:Se,_atcIndex:ue,_atcHits:ze,_cricketById:M,_shanghaiById:Ue,_halveById:ot,_highlowById:bt,_killerById:ht,_amCricketById:rt,_baseballById:En,_golfById:cn,_tttState:q,_turnDarts:fe}});return}const m=R.current;!m||m.readyState!==WebSocket.OPEN||m.send(JSON.stringify({type:"state",payload:{...h,_turnIdx:X,_participants:Y,_dpIndex:je,_dpHits:Se,_atcIndex:ue,_atcHits:ze,_cricketById:M,_shanghaiById:Ue,_halveById:ot,_highlowById:bt,_killerById:ht,_amCricketById:rt,_baseballById:En,_golfById:cn,_tttState:q,_turnDarts:fe}}))}function ii(m){const v=(e==null?void 0:e.username)||"me";if(c(S=>[...S,{from:v,message:m,fromId:C||"self"}]),b.current={text:m,ts:Date.now()},t){t.send({type:"chat",message:m});return}const E=R.current;!E||E.readyState!==WebSocket.OPEN||E.send(JSON.stringify({type:"chat",message:m}))}function mt(m){var E;if(Zd(m,je)){const S=Se+1,K=je+1;Pe(S),Oe(K);try{if(S>=Ln.length){const te=((E=h.players[h.currentPlayerIdx])==null?void 0:E.name)||"Player";ye("leg",te),Pe(0),Oe(0)}}catch{}}Ke()}function As(){const m=Math.max(0,Math.floor(G|0));mt(m),ce(0)}function xs(){const m=wr(Ee);m!=null&&(mt(m),We(""))}function mr(m,v,E){const S=Rt[ue];return S==null?!1:typeof E=="number"&&E>=1&&E<=20&&E===S&&(v==="SINGLE"||v==="DOUBLE"||v==="TRIPLE")?!0:S===25?v==="BULL"||m===25:S===50?v==="INNER_BULL"||m===50:m===S||m===S*2||m===S*3}function fr(m,v,E){var S;if(mr(m,v,E)){const K=ze+1,te=ue+1;yt(K),ve(te);try{if(K>=Rt.length){const se=((S=h.players[h.currentPlayerIdx])==null?void 0:S.name)||"Player";ye("leg",se),yt(0),ve(0)}}catch{}}Ke()}function Hr(){const m=Math.max(0,Math.floor(G|0));fr(m),ce(0)}function ql(){const m=wr(st);m!=null&&(fr(m),Ht(""))}function ut(){const m=h.players[h.currentPlayerIdx];return(m==null?void 0:m.id)??String(h.currentPlayerIdx)}function vn(m){M[m]||ne(v=>({...v,[m]:Er()}))}function Zn(m){Ue[m]||Ze(v=>({...v,[m]:Ws()}))}function oi(m){ot[m]||Tt(v=>({...v,[m]:Vs()}))}function es(m){bt[m]||Qe(v=>({...v,[m]:Ks()}))}function gs(m){if(!ht[m]){const v=new Set(Object.values(ht||{}).map(K=>K.number)),E=[];for(let K=1;K<=20;K++)v.has(K)||E.push(K);const S=E.length>0?E[Math.floor(Math.random()*E.length)]:20;ct(K=>({...K,[m]:Sx(S,3)}))}}function Rs(m){rt[m]||Wt(v=>({...v,[m]:Pa()}))}function ci(m){En[m]||pt(v=>({...v,[m]:Ma()}))}function Tn(m){cn[m]||dn(v=>({...v,[m]:La()}))}u.useEffect(()=>{J(0)},[h.currentPlayerIdx,Te]);function ts(m,v){const E=h.players.filter(S=>S.id!==v);return E.length===0?!1:E.every(S=>{var K,te;return(((te=(K=M[S.id])==null?void 0:K.marks)==null?void 0:te[m])||0)>=3})}function ns(m,v,E){const S=ut();vn(S),ne(te=>{const se={...te},$={...se[S]||Er()};return gx($,m,v,E,xt=>ts(xt,S)),se[S]=$,se});const K=fe+1;J(K),K>=3&&(J(0),h.nextPlayer()),Ke()}function Dn(m,v,E){const S=ut();Zn(S),Ze(te=>{const se={...te},$={...se[S]||Ws()};return vx($,m,v,E),se[S]=$,se});const K=fe+1;J(K),K>=3&&(Ze(te=>{const se={...te},$={...se[S]||Ws()};return yx($),se[S]=$,se}),J(0),h.nextPlayer()),Ke()}function ss(m,v,E){const S=ut();oi(S),Tt(te=>{const se={...te},$={...se[S]||Vs()};return bx($,m,v,E),se[S]=$,se});const K=fe+1;J(K),K>=3&&(Tt(te=>{const se={...te},$={...se[S]||Vs()};return Nx($),se[S]=$,se}),J(0),h.nextPlayer()),Ke()}function yn(m,v,E){const S=ut();es(S),Qe(te=>{const se={...te},$={...se[S]||Ks()};return wx($,m,v,E),se[S]=$,se});const K=fe+1;J(K),K>=3&&(Qe(te=>{const se={...te},$={...se[S]||Ks()};return jx($),se[S]=$,se}),J(0),h.nextPlayer()),Ke()}function Os(m,v){const E=ut();h.players.forEach(K=>gs(K.id)),ct(K=>{var $;const te={};for(const[xt,it]of Object.entries(K))te[xt]={...it};eu(E,te,m,v);const se=tu(te);if(se)try{ye("leg",(($=h.players.find(xt=>xt.id===se))==null?void 0:$.name)||"Player")}catch{}return te});const S=fe+1;J(S),S>=3&&(J(0),h.nextPlayer()),Ke()}function Ql(m,v,E){const S=ut();Rs(S),Wt(te=>{const se={...te},xt={...se[S]||Pa()};return Dx(xt,m,v,E,Nt=>h.players.filter(Ut=>Ut.id!==S).every(Ut=>{var Me,pe;return(((pe=(Me=rt[Ut.id])==null?void 0:Me.marks)==null?void 0:pe[Nt])||0)>=3})),se[S]=xt,se});const K=fe+1;J(K),K>=3&&(J(0),h.nextPlayer()),Ke()}function Xl(m,v,E){const S=ut();ci(S),pt(te=>{const se={...te},$={...se[S]||Ma()};return kx($,m,v,E),se[S]=$,se});const K=fe+1;J(K),K>=3&&(J(0),h.nextPlayer()),Ke()}function rs(m,v,E){const S=ut();Tn(S),dn(te=>{const se={...te},$={...se[S]||La()};return Ex($,m,v,E),se[S]=$,se});const K=fe+1;J(K),K>=3&&(J(0),h.nextPlayer()),Ke()}function hr(m,v,E,S){de(te=>{const se={...te,board:[...te.board]};return Tx(se,m,v,E,S),se});const K=fe+1;J(K),K>=3&&(J(0),h.nextPlayer()),Ke()}function Wr(){try{window.dispatchEvent(new Event("ndn:open-manual"))}catch{}}function In(m){const v=Math.max(0,m|0);h.addVisit(v,3),ce(0);const E=h.players[h.currentPlayerIdx],S=E.legs[E.legs.length-1];try{v===180&&ye("180",(E==null?void 0:E.name)||"Player"),S&&S.totalScoreRemaining===0&&ye("leg",(E==null?void 0:E.name)||"Player")}catch{}if(S&&S.totalScoreRemaining===0?h.endLeg(v):h.nextPlayer(),P){const K=S?S.totalScoreRemaining:h.startingScore;lo((e==null?void 0:e.username)||"Player",v,Math.max(0,K),F,{volume:A,checkoutOnly:V})}e!=null&&e.username&&(E==null?void 0:E.name)===e.username&&Cr(e.username,3,v),Ke()}function Vr(m,v){var S;const E={type:"report",offenderId:m,reason:"Inappropriate language",message:v};try{t?t.send(E):(S=R.current)==null||S.send(JSON.stringify(E))}catch{}try{Bt("Report submitted",{type:"info"})}catch{}}async function Kr(){var m,v;try{const E=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),S=(m=E.getVideoTracks)==null?void 0:m.call(E)[0],K=document.createElement("video");K.srcObject=E,await K.play().catch(()=>{}),await new Promise(Nt=>setTimeout(Nt,120));const te=Math.min(320,K.videoWidth||320),se=Math.max(1,Math.floor((K.videoHeight||180)*(te/Math.max(1,K.videoWidth||320)))),$=document.createElement("canvas");$.width=te,$.height=se,$.getContext("2d").drawImage(K,0,0,te,se);const it=$.toDataURL("image/jpeg",.7);try{S&&S.stop()}catch{}try{(v=E.getTracks)==null||v.call(E).forEach(Nt=>Nt.stop())}catch{}return it}catch{return null}}return n.jsxs("div",{className:"card flex flex-col min-h-[85vh] relative overflow-hidden",children:[n.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Online Play"}),Fr>0&&!h.inProgress&&n.jsxs("div",{className:"mb-3 text-sm px-3 py-2 rounded bg-amber-600/30 border border-amber-500/40",children:["You have ",Fr," unread message",Fr>1?"s":"",". Check the Friends tab."]}),n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"rounded-2xl bg-white/5 backdrop-blur border border-white/10 p-2 flex items-center gap-2 overflow-x-auto no-scrollbar",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs opacity-70 shrink-0",children:"Room"}),n.jsx("input",{className:"input w-28",value:r,onChange:m=>l(m.target.value),placeholder:"room-1"})]}),a?n.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-emerald-600/20 text-emerald-200 border border-emerald-400/40 shrink-0",children:"Connected"}):n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 shrink-0",onClick:Un,children:"Connect"}),n.jsx("button",{className:"btn shrink-0",onClick:Ke,disabled:!a,children:"Sync"}),n.jsx("button",{className:"text-[11px] px-3 py-1 rounded-full bg-indigo-500/25 text-indigo-100 border border-indigo-400/40 hover:bg-indigo-500/40 shrink-0",title:"Open a simulated online match demo",onClick:()=>{try{window.dispatchEvent(new CustomEvent("ndn:online-match-demo",{detail:{game:"X01",start:501}}))}catch{}},children:"DEMO"}),a&&n.jsx("button",{className:"btn shrink-0",onClick:()=>Ne(!0),disabled:Be,title:Be?"Weekly free games used":"",children:"Open Match"})]})}),n.jsx("div",{className:`mt-3 p-3 rounded-xl bg-indigo-500/10 border border-indigo-500/40 flex items-center justify-end ${!a||Be?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,role:"button",title:a?Be?"Weekly free games used":"Create a new match":"Connect to the lobby first",onClick:()=>{var m;!a||Be||(ge(!0),t?t.send({type:"list-matches"}):(m=R.current)==null||m.send(JSON.stringify({type:"list-matches"})))},children:n.jsx("button",{className:"btn",disabled:!a||Be,children:"Create Match +"})}),n.jsx("p",{className:"text-sm text-slate-600 mt-3",children:"Open this app on another device and join the same Room ID to sync scores."}),!(e!=null&&e.fullAccess)&&n.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Weekly free online games remaining: ",Ae===1/0?"":Ae]}),!(e!=null&&e.fullAccess)&&Ae!==1/0&&Ae<=0&&n.jsx("div",{className:"mt-2 p-2 rounded-lg bg-rose-700/30 border border-rose-600/40 text-rose-200 text-sm",children:"You've used your 3 free online games this week. PREMIUM required to continue."}),ms&&n.jsx("div",{className:"mt-2 p-2 rounded-lg bg-amber-700/30 border border-amber-600/40 text-amber-200 text-sm",children:ms}),fs&&n.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-indigo-700/30 border border-indigo-600/40 text-indigo-100 text-sm flex items-center justify-between gap-2",children:[n.jsx("div",{children:"That room is full or no longer available. Create a new clean room with the same settings?"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{var te,se;const{game:m,mode:v,value:E,startingScore:S}=fs,K=e!=null&&e.username?Ss(e.username):0;t?(t.send({type:"create-match",game:m,mode:v,value:E,startingScore:S||501,creatorAvg:K}),t.send({type:"list-matches"})):((te=R.current)==null||te.send(JSON.stringify({type:"create-match",game:m,mode:v,value:E,startingScore:S||501,creatorAvg:K})),(se=R.current)==null||se.send(JSON.stringify({type:"list-matches"}))),Qn(null)},children:"Create New Match"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>Qn(null),children:"Dismiss"})]})]}),a&&n.jsxs("div",{className:"mt-4 p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10 flex-1 overflow-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"font-semibold",children:"World Lobby"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"text-xs opacity-80",children:["Matches: ",zr.length]}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{var m;return t?t.send({type:"list-matches"}):(m=R.current)==null?void 0:m.send(JSON.stringify({type:"list-matches"}))},children:"Refresh"}),n.jsx("button",{className:"btn px-3 py-1 text-sm",title:a?Be?"Weekly free games used":"Create a new match":"Connect to the lobby first",disabled:!a||Be,onClick:()=>{var m;!a||Be||(ge(!0),t?t.send({type:"list-matches"}):(m=R.current)==null||m.send(JSON.stringify({type:"list-matches"})))},children:"Create Match +"})]})]}),n.jsxs("div",{className:"space-y-3 mb-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs opacity-70 mb-1",children:"Mode"}),n.jsx(mm,{tabs:[{key:"all",label:"All"},{key:"bestof",label:"Best of"},{key:"firstto",label:"First to"}],active:He,onChange:m=>Dt(m)})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs opacity-70 mb-1",children:"Game"}),n.jsxs("select",{className:"input w-full",value:at,onChange:m=>Jt(m.target.value),children:[n.jsx("option",{value:"all",children:"All"}),Hl.map(m=>n.jsx("option",{value:m,children:m},m))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs opacity-70 mb-1",children:"Starting Score"}),n.jsxs("select",{className:"input w-full",value:It,onChange:m=>{const v=m.target.value;St(v==="all"?"all":Number(v))},disabled:at!=="all"&&at!=="X01",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"301",children:"301"}),n.jsx("option",{value:"501",children:"501"}),n.jsx("option",{value:"701",children:"701"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs opacity-70 mb-1",children:"Opponent near my avg"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{id:"nearavg",type:"checkbox",className:"accent-purple-500",checked:sn,onChange:m=>Ps(m.target.checked),disabled:!$r}),n.jsx("input",{className:"input w-24",type:"number",min:5,max:40,step:1,value:ps,onChange:m=>_r(parseInt(m.target.value||"10")),disabled:!sn})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 max-w-sm",children:[n.jsx("label",{className:`block text-xs opacity-70 mb-1 ${sn?"":"opacity-40"}`,children:"Avg tolerance ()"}),n.jsx("input",{className:"w-full",type:"range",min:1,max:50,value:ps,onChange:m=>_r(parseInt(m.target.value||"10")),disabled:!sn}),n.jsxs("div",{className:"text-xs opacity-70 mt-1",children:[" ",ps]})]}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{Dt("all"),Jt("all"),St("all"),Ps(!1),_r(10)},children:"Reset"})]})]}),zr.length===0?n.jsx("div",{className:"text-sm text-slate-300",children:"No games waiting. Create one!"}):n.jsx("div",{className:"space-y-2",children:zr.map(m=>n.jsxs("div",{className:"p-2 rounded-lg bg-black/20 flex items-center justify-between relative",children:[C&&m.creatorId===C&&n.jsx("button",{className:"absolute top-1 right-1 w-6 h-6 rounded-full bg-rose-600 hover:bg-rose-700 text-white text-xs flex items-center justify-center shadow",title:"Close this match",onClick:()=>{var v;t?t.send({type:"cancel-match",matchId:m.id}):(v=R.current)==null||v.send(JSON.stringify({type:"cancel-match",matchId:m.id}))},"aria-label":"Close match",children:""}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:m.creatorName}),"  ",m.game||"X01","  ",m.mode==="bestof"?`Best Of ${m.value}`:`First To ${m.value}`," ",m.game==="X01"?` X01 ${m.startingScore}`:""]}),m.requireCalibration&&n.jsx("div",{className:"text-[11px] inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-300 border border-emerald-600/30 mt-1",children:"Calibration required"}),m.creatorAvg?n.jsxs("div",{className:"text-xs opacity-70",children:["Creator avg: ",Number(m.creatorAvg).toFixed(1)]}):null,n.jsxs("div",{className:"text-xs opacity-70",children:["ID: ",m.id]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"btn px-3 py-1 text-sm bg-rose-600 hover:bg-rose-700",disabled:Be||!(e!=null&&e.fullAccess)&&Us.includes(m.game)||!!m.requireCalibration&&!Ur,title:!(e!=null&&e.fullAccess)&&Us.includes(m.game)?"PREMIUM game":Be?"Weekly free games used":m.requireCalibration&&!Ur?"Calibration required":"",onClick:async()=>{var S;Ls({game:m.game,mode:m.mode,value:m.value,startingScore:m.startingScore});const v=!!Ur,E=await Kr();t?t.send({type:"join-match",matchId:m.id,calibrated:v,boardPreview:E}):(S=R.current)==null||S.send(JSON.stringify({type:"join-match",matchId:m.id,calibrated:v,boardPreview:E}))},children:"Join Now!"})})]},m.id))})]}),!(e!=null&&e.fullAccess)&&Ae!==1/0&&Ae<=0&&n.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),n.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[n.jsx("div",{className:"text-3xl mb-2",children:""}),n.jsx("div",{className:"font-semibold",children:"Online play locked"}),n.jsx("div",{className:"text-sm text-slate-200/80",children:"Youve used your 3 free online games this week. Upgrade to PREMIUM to play all modes."}),n.jsxs("a",{href:"https://buy.stripe.com/test_00g7vQ8Qw2gQ0wA5kk",target:"_blank",rel:"noopener noreferrer",className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM  ",$p(Fp(),5)]})]})]}),le&&n.jsxs("div",{className:"fixed inset-0 z-50",children:[n.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),n.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[n.jsxs("div",{className:"p-2 md:p-3 flex items-center justify-between",children:[n.jsx("div",{children:n.jsx("h3",{className:"text-xl md:text-2xl font-bold",children:"Online Match"})}),n.jsx("button",{className:"btn px-3 py-1",onClick:()=>Ne(!1),children:"Close"})]}),n.jsx("div",{className:"relative flex-1 overflow-hidden p-2 md:p-3",children:n.jsxs("div",{className:"card w-full h-full overflow-hidden relative p-2.5 md:p-3",children:[xe&&n.jsxs("div",{className:"absolute inset-0 pointer-events-none flex items-start justify-center pt-8 z-20",children:[n.jsxs("div",{className:`px-4 py-2 rounded-full text-lg font-bold shadow ${xe.kind==="leg"?"bg-indigo-500/20 border border-indigo-400/40 text-indigo-100":"bg-emerald-500/20 border border-emerald-400/40 text-emerald-100"}`,children:[xe.kind==="leg"?" LEG WON  ":" ONE HUNDRED AND EIGHTY!  ",xe.by]}),xe.kind==="leg"&&n.jsxs(n.Fragment,{children:[n.jsx("style",{children:"@keyframes ndn-confetti-fall{0%{transform:translateY(-10%) rotate(0deg);opacity:1}100%{transform:translateY(120%) rotate(360deg);opacity:0}}"}),n.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(24)].map((m,v)=>{const E=Math.random()*100,S=Math.random()*.2,K=1.2+Math.random()*.8,te=6+Math.random()*6,se=Math.floor(Math.random()*360);return n.jsx("span",{style:{position:"absolute",top:0,left:E+"%",width:te,height:te,background:`hsl(${se} 90% 60%)`,borderRadius:2,animation:`ndn-confetti-fall ${K}s ease-out ${S}s forwards`}},v)})})]})]}),n.jsxs("div",{className:"mb-1.5 text-xs md:text-sm flex items-center justify-between gap-2",children:[n.jsxs("span",{children:["Participants: ",Y.length||1]}),n.jsx("button",{className:"text-[11px] px-2 py-0.5 rounded-full bg-slate-700/50 hover:bg-slate-700 border border-slate-600",onClick:()=>lt(m=>!m),title:Z?"Switch to full multi-player view":"Switch to compact player-by-player view",children:Z?"Full view":"Compact view"})]}),Z?n.jsxs("div",{className:"mb-3",children:[(()=>{var xt;const m=h.currentPlayerIdx,v=h.players[m];if(!v)return null;const E=v.legs[v.legs.length-1],S=E?E.totalScoreRemaining:h.startingScore,K=(e==null?void 0:e.username)&&v.name===e.username,te=E&&E.visits.length?E.visits[E.visits.length-1].score:0,se=E?E.dartsThrown:0,$=se>0?(((E==null?void 0:E.totalScoreStart)??h.startingScore)-S)/se*3:0;return Te==="X01"?n.jsxs("div",{className:`p-4 rounded-xl bg-brand-50 text-black ${m===h.currentPlayerIdx?"ring-2 ring-brand-400":""}`,children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{className:"font-semibold",children:v.name}),n.jsx("span",{className:`px-2 py-0.5 rounded-full ${m===h.currentPlayerIdx?"bg-emerald-500/20 text-emerald-300":"bg-slate-500/20 text-slate-300"} text-xs font-bold`,children:m===h.currentPlayerIdx?"THROWING":"WAITING TO THROW"})]}),n.jsx("div",{className:"text-4xl font-extrabold",children:S}),n.jsxs("div",{className:"text-sm mt-1",children:["Last score: ",n.jsx("span",{className:"font-semibold",children:te})]}),n.jsxs("div",{className:"text-sm",children:["3-Dart Avg: ",n.jsx("span",{className:"font-semibold",children:$.toFixed(1)})]}),K&&m===h.currentPlayerIdx&&S<=170&&S>0&&n.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-indigo-50 border border-indigo-200 text-indigo-900 text-sm",children:["Checkout suggestions (fav ",O,"): ",Ao(S,O).join("    ")||""]})]}):n.jsxs("div",{className:`p-4 rounded-xl bg-brand-50 text-black ${m===h.currentPlayerIdx?"ring-2 ring-brand-400":""}`,children:[n.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[n.jsx("span",{className:"font-semibold",children:v.name}),n.jsx("span",{className:`px-2 py-0.5 rounded-full ${m===h.currentPlayerIdx?"bg-emerald-500/20 text-emerald-300":"bg-slate-500/20 text-slate-300"} text-xs font-bold`,children:m===h.currentPlayerIdx?"THROWING":"WAITING TO THROW"})]}),n.jsx("div",{className:"text-sm opacity-80",children:Te}),Te==="Double Practice"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mt-1 text-xs flex items-center justify-between",children:[n.jsx("span",{children:"Current target"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:((xt=Ln[je])==null?void 0:xt.label)||""})]}),n.jsxs("div",{className:"text-3xl font-extrabold",children:[Se," / ",Ln.length]})]}),Te==="Around the Clock"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mt-1 text-xs flex items-center justify-between",children:[n.jsx("span",{children:"Current target"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:Rt[ue]===25?"25 (Outer Bull)":Rt[ue]===50?"50 (Inner Bull)":Rt[ue]||""})]}),n.jsxs("div",{className:"text-3xl font-extrabold",children:[ze," / ",Rt.length]})]})]})})(),h.players.length>1&&n.jsxs("div",{className:"mt-2 text-xs text-slate-400",children:["Next up: ",($n=h.players[(h.currentPlayerIdx+1)%h.players.length])==null?void 0:$n.name]})]}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:h.players.map((m,v)=>{var K,te,se,$,xt,it,Nt,Ut;const E=m.legs[m.legs.length-1],S=E?E.totalScoreRemaining:h.startingScore;return n.jsxs("div",{className:`px-2 py-1 rounded bg-black/20 border border-slate-700/40 text-xs ${v===h.currentPlayerIdx?"ring-1 ring-brand-400":""}`,children:[n.jsx("span",{className:"font-semibold",children:m.name}),Te==="X01"?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"opacity-70",children:"  "}),n.jsx("span",{className:"font-mono",children:S})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"opacity-70",children:"  "}),n.jsx("span",{className:"font-mono",children:Te==="Double Practice"?`${Se}/${Ln.length}`:Te==="Around the Clock"?`${ze}/${Rt.length}`:Te==="Cricket"?`${((K=M[m.id])==null?void 0:K.points)||0} pts`:Te==="Shanghai"?`${((te=Ue[m.id])==null?void 0:te.score)||0} pts  R${((se=Ue[m.id])==null?void 0:se.round)||1}`:Te==="Halve It"?`${(($=ot[m.id])==null?void 0:$.score)||0} pts  S${(((xt=ot[m.id])==null?void 0:xt.stage)||0)+1}`:Te==="High-Low"?`${((it=bt[m.id])==null?void 0:it.score)||0} pts  ${((Nt=bt[m.id])==null?void 0:Nt.target)||"HIGH"}`:Te==="Killer"?(()=>{const Me=ht[m.id];return Me?`#${Me.number}  ${Me.lives} ${Me.isKiller?" K":""}`:""})():Te==="American Cricket"?`${((Ut=rt[m.id])==null?void 0:Ut.points)||0} pts`:Te==="Baseball"?(()=>{const Me=En[m.id];return Me?`R${Me.score}  I${Me.inning}`:""})():Te==="Golf"?(()=>{const Me=cn[m.id];return Me?`S${Me.strokes}  H${Me.hole}`:""})():Te==="Tic Tac Toe"?(()=>{const Me=(q.board||[]).filter(ys=>ys==="X").length,pe=(q.board||[]).filter(ys=>ys==="O").length;return`X${Me}-O${pe}`})():Te})]})]},`strip-${m.id}`)})})}),Z?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{try{window.dispatchEvent(new Event("ndn:open-autoscore"))}catch{}},children:"Autoscore"}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{try{window.dispatchEvent(new Event("ndn:open-scoring"))}catch{}},children:"Scoring"}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Wr,children:"Manual Correction"}),n.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[11px]",children:[n.jsx("span",{className:"opacity-70",children:"Cam size"}),n.jsx("button",{className:"btn px-2 py-0.5",onClick:()=>oe(Math.max(.5,Math.round((z-.05)*100)/100)),children:""}),n.jsxs("span",{className:"w-8 text-center",children:[Math.round(z*100),"%"]}),n.jsx("button",{className:"btn px-2 py-0.5",onClick:()=>oe(Math.min(1.25,Math.round((z+.05)*100)/100)),children:"+"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2 items-start",children:[n.jsx("div",{className:"order-1",children:n.jsx(Yl,{})}),n.jsx("div",{className:"order-2",children:e!=null&&e.username&&((Gr=h.players[h.currentPlayerIdx])==null?void 0:Gr.name)===e.username?n.jsx("div",{className:"min-w-[260px] relative z-10",children:n.jsx(Ro,{label:"Your Board",autoStart:!1})}):n.jsx("div",{className:"text-xs opacity-60",children:"Opponent's camera will appear here when supported"})})]}),n.jsxs("div",{className:"font-semibold",children:["Current: ",((pr=h.players[h.currentPlayerIdx])==null?void 0:pr.name)||""]}),Te==="X01"&&(e!=null&&e.username)&&((Jr=h.players[h.currentPlayerIdx])==null?void 0:Jr.name)===e.username?n.jsxs(n.Fragment,{children:[n.jsx(Fe,{hideInlinePanels:!0,showToolbar:!1,onVisitCommitted:(m,v,E)=>{if(P){const K=h.players[h.currentPlayerIdx],te=K==null?void 0:K.legs[K.legs.length-1],se=te?te.totalScoreRemaining:h.startingScore;lo((e==null?void 0:e.username)||"Player",m,Math.max(0,se),F,{volume:A,checkoutOnly:V})}const S=h.players[h.currentPlayerIdx];e!=null&&e.username&&(S==null?void 0:S.name)===e.username&&Cr(e.username,v,m);try{m===180&&ye("180",(S==null?void 0:S.name)||"Player"),E&&ye("leg",(S==null?void 0:S.name)||"Player")}catch{}E||h.nextPlayer(),Ke()}}),n.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[n.jsx("input",{className:"input w-24 text-sm",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0"))}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>In(G),children:"Submit Visit"}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs bg-slate-700 hover:bg-slate-800",onClick:()=>{h.undoVisit(),Ke()},children:"Undo"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-1.5 text-xs",children:[n.jsx("span",{className:"opacity-70",children:"Quick:"}),[180,140,100,60].map(m=>n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>In(m),children:m},m))]}),n.jsxs("div",{className:"mt-2 flex items-center gap-1.5 mb-2",children:[n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>x(!0),children:"Quick Chat"}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>g(!0),children:"Messages"})]})]}):Te==="Double Practice"&&(e!=null&&e.username)&&((Fn=h.players[h.currentPlayerIdx])==null?void 0:Fn.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsx("div",{className:"text-xs mb-1.5",children:"Double Practice  Hit doubles D1D20DBULL"}),n.jsxs("div",{className:"mb-1 text-sm flex items-center justify-between",children:[n.jsx("span",{children:"Current target"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:((vs=Ln[je])==null?void 0:vs.label)||""})]}),n.jsxs("div",{className:"text-2xl font-extrabold mb-2",children:[Se," / ",Ln.length]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v)=>{(v==="DOUBLE"||v==="INNER_BULL")&&mt(m)}})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{className:"input w-24 text-sm",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0")),onKeyDown:m=>{m.key==="Enter"&&As()}}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:As,children:"Add Dart"})]}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[n.jsx("input",{className:"input w-40 text-sm",placeholder:"Manual (D16, 50, 25, T20)",value:Ee,onChange:m=>We(m.target.value),onKeyDown:m=>{m.key==="Enter"&&xs()}}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:xs,children:"Add"})]})]}):Te==="Around the Clock"&&(e!=null&&e.username)&&((Yr=h.players[h.currentPlayerIdx])==null?void 0:Yr.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsx("div",{className:"text-xs mb-1.5",children:"Around the Clock  Hit 120 then 25 (outer) and 50 (inner)"}),n.jsxs("div",{className:"mb-1 text-sm flex items-center justify-between",children:[n.jsx("span",{children:"Current target"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:Rt[ue]===25?"25 (Outer Bull)":Rt[ue]===50?"50 (Inner Bull)":Rt[ue]||""})]}),n.jsxs("div",{className:"text-2xl font-extrabold mb-2",children:[ze," / ",Rt.length]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{fr(m,v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{className:"input w-24 text-sm",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0")),onKeyDown:m=>{m.key==="Enter"&&Hr()}}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:Hr,children:"Add Dart"})]}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[n.jsx("input",{className:"input w-40 text-sm",placeholder:"Manual (T20, D5, 25, 50)",value:st,onChange:m=>Ht(m.target.value),onKeyDown:m=>{m.key==="Enter"&&ql()}}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:ql,children:"Add"})]})]}):Te==="Cricket"&&(e!=null&&e.username)&&((Bs=h.players[h.currentPlayerIdx])==null?void 0:Bs.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsx("div",{className:"text-xs mb-1.5",children:"Cricket  Close 15-20 and Bull; overflow scores points"}),(()=>{const m=ut();vn(m);const v=M[m]||Er();return n.jsx("div",{className:"mb-2 grid grid-cols-7 gap-1 text-center text-[11px]",children:ei.map(E=>{var S;return n.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[n.jsx("div",{className:"opacity-70",children:E===25?"Bull":E}),n.jsxs("div",{className:"font-semibold",children:[Math.min(3,((S=v.marks)==null?void 0:S[E])||0)," / 3"]})]},E)})})})(),n.jsxs("div",{className:"text-sm mb-2",children:["Points: ",n.jsx("span",{className:"font-semibold",children:((qr=M[ut()])==null?void 0:qr.points)||0})]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{ns(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{className:"input w-24 text-sm",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0")),onKeyDown:m=>{m.key==="Enter"&&(ns(Math.max(0,G|0)),ce(0))}}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>{ns(Math.max(0,G|0)),ce(0)},children:"Add Dart"})]})]}):Te==="Shanghai"&&(e!=null&&e.username)&&((Zl=h.players[h.currentPlayerIdx])==null?void 0:Zl.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();Zn(m);const v=Ue[m]||Ws();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs mb-1.5",children:"Shanghai  Hit only the round's number; Single/Double/Triple score"}),n.jsxs("div",{className:"mb-1 text-sm flex items-center justify-between",children:[n.jsx("span",{children:"Round"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:v.round})]}),n.jsxs("div",{className:"text-2xl font-extrabold mb-2",children:["Score: ",v.score]})]})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{Dn(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{className:"input w-24 text-sm",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0")),onKeyDown:m=>{m.key==="Enter"&&(Dn(Math.max(0,G|0)),ce(0))}}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>{Dn(Math.max(0,G|0)),ce(0)},children:"Add Dart"})]})]}):Te==="Halve It"&&(e!=null&&e.username)&&((Qr=h.players[h.currentPlayerIdx])==null?void 0:Qr.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();oi(m);const v=ot[m]||Vs(),E=Oo(v);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs mb-1.5",children:"Halve It  Hit the target each round or your score halves"}),n.jsxs("div",{className:"mb-1 text-sm flex items-center justify-between",children:[n.jsx("span",{children:"Stage"}),n.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[v.stage+1,"/",v.targets.length]})]}),n.jsxs("div",{className:"text-sm",children:["Target: ",n.jsx("span",{className:"font-semibold",children:(()=>{const S=E;return S?S.kind==="ANY_NUMBER"?"Any":S.kind==="BULL"?"Bull":S.kind==="DOUBLE"||S.kind==="TRIPLE"||S.kind==="NUMBER"?`${S.kind} ${S.num}`:"":""})()})]}),n.jsxs("div",{className:"text-2xl font-extrabold mb-2",children:["Score: ",v.score]})]})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{ss(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{className:"input w-24 text-sm",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0")),onKeyDown:m=>{m.key==="Enter"&&(ss(Math.max(0,G|0)),ce(0))}}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>{ss(Math.max(0,G|0)),ce(0)},children:"Add Dart"})]})]}):Te==="High-Low"&&(e!=null&&e.username)&&((ea=h.players[h.currentPlayerIdx])==null?void 0:ea.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();es(m);const v=bt[m]||Ks();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs mb-1.5",children:"High-Low  Alternate aiming for high then low segments"}),n.jsxs("div",{className:"mb-1 text-sm flex items-center justify-between",children:[n.jsx("span",{children:"Round"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:v.round})]}),n.jsxs("div",{className:"text-sm",children:["Target: ",n.jsx("span",{className:"font-semibold",children:v.target})]}),n.jsxs("div",{className:"text-2xl font-extrabold mb-2",children:["Score: ",v.score]})]})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{yn(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{className:"input w-24 text-sm",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0")),onKeyDown:m=>{m.key==="Enter"&&(yn(Math.max(0,G|0)),ce(0))}}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>{yn(Math.max(0,G|0)),ce(0)},children:"Add Dart"})]})]}):Te==="American Cricket"&&(e!=null&&e.username)&&((Xr=h.players[h.currentPlayerIdx])==null?void 0:Xr.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsx("div",{className:"text-xs mb-1.5",children:"American Cricket  Close 12-20 and Bull; overflow scores"}),(()=>{const m=ut();Rs(m);const v=rt[m]||Pa();return n.jsx("div",{className:"mb-2 grid grid-cols-5 gap-1 text-center text-[11px]",children:lc.map(E=>{var S;return n.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[n.jsx("div",{className:"opacity-70",children:E===25?"Bull":E}),n.jsxs("div",{className:"font-semibold",children:[Math.min(3,((S=v.marks)==null?void 0:S[E])||0)," / 3"]})]},E)})})})(),n.jsxs("div",{className:"text-sm mb-2",children:["Points: ",n.jsx("span",{className:"font-semibold",children:((ta=rt[ut()])==null?void 0:ta.points)||0})]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{Ql(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})})]}):Te==="Baseball"&&(e!=null&&e.username)&&((Zr=h.players[h.currentPlayerIdx])==null?void 0:Zr.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();ci(m);const v=En[m]||Ma();return n.jsxs("div",{className:"text-xs mb-1.5",children:["Baseball  Inning ",v.inning,"  Runs ",v.score]})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{Xl(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})})]}):Te==="Golf"&&(e!=null&&e.username)&&((na=h.players[h.currentPlayerIdx])==null?void 0:na.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();Tn(m);const v=cn[m]||La();return n.jsxs("div",{className:"text-xs mb-1.5",children:["Golf  Hole ",v.hole," (target ",Cx[v.hole],")  Strokes ",v.strokes]})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{rs(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})})]}):Te==="Tic Tac Toe"&&(e!=null&&e.username)&&((xr=h.players[h.currentPlayerIdx])==null?void 0:xr.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsx("div",{className:"text-xs mb-1.5",children:"Tic Tac Toe  Tap a cell to claim by hitting its target"}),n.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(m,v)=>v).map(m=>n.jsx("button",{className:`h-12 rounded-xl border ${q.board[m]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(q.finished||q.board[m])return;const v=dm[m],E=prompt(`Enter dart for cell ${m} (target ${v.type==="BULL"?"Bull":v.num}) e.g. 20/40/60 or 25/50`),S=Number(E||0),K=S%3===0?"TRIPLE":S%2===0?"DOUBLE":"SINGLE",te=v.type==="BULL"?null:v.num||null;hr(m,S,K,te)},children:q.board[m]||""},m))}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{}})})]}):e!=null&&e.username&&((el=h.players[h.currentPlayerIdx])==null?void 0:el.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsxs("div",{className:"text-xs mb-1.5",children:[Te," (online)  manual turn entry"]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("input",{className:"input w-24 text-sm",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0"))}),n.jsx("button",{className:"btn",onClick:()=>{const m=Math.max(0,G|0);h.addVisit(m,3),ce(0),h.nextPlayer(),Ke()},children:"Submit"}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs bg-slate-700 hover:bg-slate-800",onClick:()=>{h.undoVisit(),Ke()},children:"Undo"})]})]}):n.jsx("div",{className:"p-4 rounded-xl bg-slate-800/30 border border-slate-700/40 text-center text-slate-300 font-semibold",children:"WAITING TO THROW"}),n.jsxs("div",{className:"mt-2 flex items-center gap-1.5",children:[n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>x(!0),children:"Quick Chat"}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>g(!0),children:"Messages"})]})]}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[n.jsx("div",{className:"space-y-1.5",children:n.jsx(Yl,{})}),n.jsxs("div",{className:"md:col-span-2 space-y-1.5",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mt-2",children:[n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>{try{window.dispatchEvent(new Event("ndn:open-autoscore"))}catch{}},children:"Autoscore"}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>{try{window.dispatchEvent(new Event("ndn:open-scoring"))}catch{}},children:"Scoring"}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:Wr,children:"Manual Correction"}),n.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px]",children:[n.jsx("span",{className:"opacity-70",children:"Cam"}),n.jsx("button",{className:"btn px-1 py-0.5",onClick:()=>oe(Math.max(.5,Math.round((z-.05)*100)/100)),children:""}),n.jsxs("span",{className:"w-7 text-center",children:[Math.round(z*100),"%"]}),n.jsx("button",{className:"btn px-1 py-0.5",onClick:()=>oe(Math.min(1.25,Math.round((z+.05)*100)/100)),children:"+"})]})]}),n.jsx("div",{className:"mt-2",children:e!=null&&e.username&&((gr=h.players[h.currentPlayerIdx])==null?void 0:gr.name)===e.username?n.jsx("div",{className:"w-full max-w-full",children:n.jsx(Ro,{label:"Your Board",autoStart:!1})}):n.jsx("div",{className:"text-xs opacity-60",children:"Opponent's camera will appear here when supported"})}),n.jsxs("div",{className:"font-semibold text-sm md:text-base",children:["Current: ",((sa=h.players[h.currentPlayerIdx])==null?void 0:sa.name)||""]}),Te==="X01"&&(e!=null&&e.username)&&((ra=h.players[h.currentPlayerIdx])==null?void 0:ra.name)===e.username?n.jsxs(n.Fragment,{children:[n.jsx(Fe,{hideInlinePanels:!0,showToolbar:!1,onVisitCommitted:(m,v,E)=>{if(P){const K=h.players[h.currentPlayerIdx],te=K==null?void 0:K.legs[K.legs.length-1],se=te?te.totalScoreRemaining:h.startingScore;lo((e==null?void 0:e.username)||"Player",m,Math.max(0,se),F,{volume:A,checkoutOnly:V})}const S=h.players[h.currentPlayerIdx];e!=null&&e.username&&(S==null?void 0:S.name)===e.username&&Cr(e.username,v,m);try{m===180&&ye("180",(S==null?void 0:S.name)||"Player"),E&&ye("leg",(S==null?void 0:S.name)||"Player")}catch{}E||h.nextPlayer(),Ke()}}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-28",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0"))}),n.jsx("button",{className:"btn",onClick:()=>In(G),children:"Submit Visit (Manual)"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>{h.undoVisit(),Ke()},children:"Undo"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-sm",children:[n.jsx("span",{className:"opacity-70",children:"Quick:"}),[180,140,100,60].map(m=>n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>In(m),children:m},m))]}),(()=>{var S,K;const m=h.players[h.currentPlayerIdx],v=(K=m==null?void 0:m.legs)==null?void 0:K[((S=m.legs)==null?void 0:S.length)-1],E=v?v.totalScoreRemaining:h.startingScore;return E>0&&E<=170?n.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-indigo-50 border border-indigo-200 text-indigo-900 text-sm",children:["Checkout suggestions (fav ",O,"): ",Ao(E,O).join("    ")||""]}):null})()]}):Te==="Double Practice"&&(e!=null&&e.username)&&((la=h.players[h.currentPlayerIdx])==null?void 0:la.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsx("div",{className:"text-sm mb-2",children:"Double Practice  Hit doubles D1D20DBULL"}),n.jsxs("div",{className:"mb-1 text-sm flex items-center justify-between",children:[n.jsx("span",{children:"Current target"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:((aa=Ln[je])==null?void 0:aa.label)||""})]}),n.jsxs("div",{className:"text-2xl font-extrabold mb-2",children:[Se," / ",Ln.length]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v)=>{(v==="DOUBLE"||v==="INNER_BULL")&&mt(m)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-28",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0")),onKeyDown:m=>{m.key==="Enter"&&As()}}),n.jsx("button",{className:"btn",onClick:As,children:"Add Dart"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[n.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:Ee,onChange:m=>We(m.target.value),onKeyDown:m=>{m.key==="Enter"&&xs()}}),n.jsx("button",{className:"btn",onClick:xs,children:"Add"})]})]}):Te==="Cricket"&&(e!=null&&e.username)&&((ia=h.players[h.currentPlayerIdx])==null?void 0:ia.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsx("div",{className:"text-sm mb-2",children:"Cricket  Close 15-20 and Bull; overflow scores points"}),(()=>{const m=ut();vn(m);const v=M[m]||Er();return n.jsx("div",{className:"mb-2 grid grid-cols-7 gap-1 text-center text-[11px]",children:ei.map(E=>{var S;return n.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[n.jsx("div",{className:"opacity-70",children:E===25?"Bull":E}),n.jsxs("div",{className:"font-semibold",children:[Math.min(3,((S=v.marks)==null?void 0:S[E])||0)," / 3"]})]},E)})})})(),n.jsxs("div",{className:"text-sm mb-2",children:["Points: ",n.jsx("span",{className:"font-semibold",children:((di=M[ut()])==null?void 0:di.points)||0})]}),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{ns(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-28",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0"))}),n.jsx("button",{className:"btn",onClick:()=>{ns(Math.max(0,G|0)),ce(0)},children:"Add Dart"})]})]}):Te==="Shanghai"&&(e!=null&&e.username)&&((tl=h.players[h.currentPlayerIdx])==null?void 0:tl.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();Zn(m);const v=Ue[m]||Ws();return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"text-sm mb-2",children:["Shanghai  Round ",v.round,"  Score ",v.score]})})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{Dn(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-28",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0"))}),n.jsx("button",{className:"btn",onClick:()=>{Dn(Math.max(0,G|0)),ce(0)},children:"Add Dart"})]})]}):Te==="Halve It"&&(e!=null&&e.username)&&((ui=h.players[h.currentPlayerIdx])==null?void 0:ui.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();oi(m);const v=ot[m]||Vs(),E=Oo(v);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-sm mb-2",children:["Halve It  Stage ",v.stage+1,"/",v.targets.length,"  Score ",v.score]}),n.jsxs("div",{className:"text-sm",children:["Target: ",n.jsx("span",{className:"font-semibold",children:(()=>{const S=E;return S?S.kind==="ANY_NUMBER"?"Any":S.kind==="BULL"?"Bull":S.kind==="DOUBLE"||S.kind==="TRIPLE"||S.kind==="NUMBER"?`${S.kind} ${S.num}`:"":""})()})]})]})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{ss(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-28",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0"))}),n.jsx("button",{className:"btn",onClick:()=>{ss(Math.max(0,G|0)),ce(0)},children:"Add Dart"})]})]}):Te==="High-Low"&&(e!=null&&e.username)&&((nl=h.players[h.currentPlayerIdx])==null?void 0:nl.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();es(m);const v=bt[m]||Ks();return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"text-sm mb-2",children:["High-Low  Round ",v.round,"  Target ",v.target,"  Score ",v.score]})})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 mb-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{yn(m,v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-28",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0"))}),n.jsx("button",{className:"btn",onClick:()=>{yn(Math.max(0,G|0)),ce(0)},children:"Add Dart"})]})]}):Te==="Killer"&&(e!=null&&e.username)&&((mi=h.players[h.currentPlayerIdx])==null?void 0:mi.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[(()=>{const m=ut();h.players.forEach(E=>gs(E.id));const v=ht[m];return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs mb-1.5",children:"Killer  Hit your own double to become Killer; then remove others lives by hitting their doubles/triples."}),n.jsxs("div",{className:"mb-1 text-sm flex items-center justify-between",children:[n.jsx("span",{children:"Your number"}),n.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:(v==null?void 0:v.number)||""})]}),n.jsxs("div",{className:"text-sm",children:["Lives: ",n.jsx("span",{className:"font-semibold",children:(v==null?void 0:v.lives)??""})," ",v!=null&&v.isKiller?n.jsx("span",{className:"ml-2 text-emerald-300",children:"KILLER"}):null]}),n.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 gap-1 text-[11px]",children:h.players.map(E=>{const S=ht[E.id];return n.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50 flex items-center justify-between",children:[n.jsx("span",{className:"opacity-80 truncate",children:E.name}),n.jsx("span",{className:"font-mono",children:S?`#${S.number}  ${S.lives}${S.isKiller?"  K":""}`:""})]},E.id)})})]})})(),n.jsx("div",{className:"rounded-2xl overflow-hidden bg-black/60 border border-white/10 my-2",children:n.jsx(Fe,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:(m,v,E)=>{Os(v==="MISS"?void 0:v,(E==null?void 0:E.sector)??null)}})}),n.jsx("div",{className:"text-xs opacity-70",children:"Tip: Only doubles/triples on the opponents numbers remove lives. To become Killer, hit your own double."})]}):e!=null&&e.username&&((sl=h.players[h.currentPlayerIdx])==null?void 0:sl.name)===e.username?n.jsxs("div",{className:"p-3 rounded-xl bg-black/20",children:[n.jsxs("div",{className:"text-sm mb-2",children:[Te," (online)  manual turn entry"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{className:"input w-28",type:"number",min:0,value:G,onChange:m=>ce(parseInt(m.target.value||"0"))}),n.jsx("button",{className:"btn",onClick:()=>{const m=Math.max(0,G|0);h.addVisit(m,3),ce(0),h.nextPlayer(),Ke()},children:"Submit"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>{h.undoVisit(),Ke()},children:"Undo"})]})]}):n.jsx("div",{className:"p-4 rounded-xl bg-slate-800/30 border border-slate-700/40 text-center text-slate-300 font-semibold",children:"WAITING TO THROW"})]}),n.jsx("div",{className:"md:col-span-1",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>x(!0),children:"Quick Chat"}),n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>g(!0),children:"Messages"})]})})]})]})})]})]}),Ce&&n.jsx("div",{className:"fixed inset-0 bg-black/70 z-50",children:n.jsx("div",{className:"w-full h-full flex items-stretch justify-stretch p-0",children:n.jsxs(ks,{storageKey:"ndn:modal:create-match",className:"w-full h-full rounded-none !border-0 !shadow-none relative",fullScreen:!0,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-slate-900/80 backdrop-blur border-b border-slate-700 z-10 px-2 py-2",children:[n.jsx("h3",{className:"text-xl font-bold",children:"Create Match"}),n.jsx("button",{className:"btn px-2 py-1",onClick:()=>ge(!1),children:"Close"})]}),n.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-2 md:gap-4 overflow-auto px-2",style:{maxHeight:"calc(100vh - 120px)"},children:[n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Game"}),n.jsx("select",{className:"input w-full",value:_t,onChange:m=>Br(m.target.value),children:Hl.map(m=>n.jsxs("option",{value:m,disabled:!(e!=null&&e.fullAccess)&&Us.includes(m),children:[m," ",!(e!=null&&e.fullAccess)&&Us.includes(m)?"(PREMIUM)":""]},m))})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Mode"}),n.jsxs("select",{className:"input w-full",value:$e,onChange:m=>tt(m.target.value),children:[n.jsx("option",{value:"bestof",children:"Best Of"}),n.jsx("option",{value:"firstto",children:"First To"})]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Value"}),n.jsx("input",{className:"input w-full",type:"number",min:1,value:Je,onChange:m=>jt(parseInt(m.target.value||"1"))}),n.jsx("div",{className:"text-xs opacity-70 mt-1",children:"Example: Best Of 5  first to 3"})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Starting Score"}),_t==="X01"?n.jsx("select",{className:"input w-full",value:Xe,onChange:m=>dr(parseInt(m.target.value||"501")),children:[301,501,701].map(m=>n.jsx("option",{value:m,children:m},m))}):n.jsx("div",{className:"text-xs opacity-70 mt-1",children:"Starting score applies to X01 only"})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Require Calibration"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{id:"calibreq",type:"checkbox",className:"accent-purple-500",checked:Xn,onChange:m=>ur(m.target.checked)}),n.jsx("label",{htmlFor:"calibreq",className:"text-sm opacity-80",children:"Players must be calibrated"})]})]}),n.jsx("div",{className:"col-span-1",children:n.jsxs("div",{className:"p-3 rounded-lg bg-black/20 border border-slate-700/40",children:[n.jsx("div",{className:"text-xs text-slate-300 uppercase tracking-wide mb-1",children:"Summary"}),n.jsxs("div",{className:"text-sm font-semibold",children:[_t,"  ",$e==="bestof"?`Best Of ${Je}`:`First To ${Je}`," ",_t==="X01"?` ${Xe}`:""]}),!(e!=null&&e.fullAccess)&&Us.includes(_t)&&n.jsx("div",{className:"text-xs text-rose-300 mt-1",children:"PREMIUM required"})]})})]}),n.jsx("div",{className:"sticky bottom-0 bg-slate-900/80 backdrop-blur border-t border-slate-700 z-10 px-2 py-2",children:n.jsx("button",{className:"btn w-full",disabled:!(e!=null&&e.fullAccess)&&Us.includes(_t),title:!(e!=null&&e.fullAccess)&&Us.includes(_t)?"PREMIUM game":"",onClick:()=>{var v,E;const m=e!=null&&e.username?Ss(e.username):0;t?(t.send({type:"create-match",game:_t,mode:$e,value:Je,startingScore:Xe,creatorAvg:m,requireCalibration:Xn}),ge(!1),t.send({type:"list-matches"})):((v=R.current)==null||v.send(JSON.stringify({type:"create-match",game:_t,mode:$e,value:Je,startingScore:Xe,creatorAvg:m,requireCalibration:Xn})),ge(!1),(E=R.current)==null||E.send(JSON.stringify({type:"list-matches"})))},children:"START GAME!"})})]})})}),dt&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs(ks,{storageKey:"ndn:modal:invite",className:"w-full relative",defaultWidth:620,defaultHeight:420,minWidth:520,minHeight:320,maxWidth:1e3,maxHeight:800,children:[n.jsx("h3",{className:"text-xl font-bold mb-1",children:"Incoming Match Request"}),n.jsxs("div",{className:"text-sm mb-2",children:[n.jsx("span",{className:"font-semibold",children:dt.fromName})," wants to join your match.",n.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded ${dt.calibrated?"bg-emerald-500/20 text-emerald-300 border border-emerald-600/30":"bg-amber-500/20 text-amber-200 border border-amber-600/30"}`,children:dt.calibrated?"Calibrated":"Not calibrated"})]}),(dt.game||dt.mode)&&n.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[dt.game||"X01","  ",dt.mode==="firstto"?`First To ${dt.value}`:`Best Of ${dt.value}`," ",dt.game==="X01"&&dt.startingScore?` ${dt.startingScore}`:""]}),dt.boardPreview?n.jsx("div",{className:"mb-3",children:n.jsx("img",{src:dt.boardPreview,alt:"Board preview",className:"rounded-lg w-full max-h-64 object-contain bg-black/40 border border-slate-700"})}):n.jsx("div",{className:"mb-3 text-xs opacity-60",children:"No camera preview provided."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{var m;t?t.send({type:"invite-response",matchId:dt.matchId,accept:!0,toId:dt.fromId}):(m=R.current)==null||m.send(JSON.stringify({type:"invite-response",matchId:dt.matchId,accept:!0,toId:dt.fromId})),gn(null)},children:"Accept"}),n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:()=>{var m;t?t.send({type:"invite-response",matchId:dt.matchId,accept:!1,toId:dt.fromId}):(m=R.current)==null||m.send(JSON.stringify({type:"invite-response",matchId:dt.matchId,accept:!1,toId:dt.fromId})),gn(null)},children:"Decline"})]})]})}),d&&n.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center",children:n.jsxs(ks,{storageKey:"ndn:modal:quick-chat",className:"w-full relative",defaultWidth:520,defaultHeight:280,minWidth:360,minHeight:220,maxWidth:900,maxHeight:700,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Quick Chat"}),n.jsx("button",{className:"btn px-2 py-1 text-sm",onClick:()=>x(!1),children:"Close"})]}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:["Good luck!","Good game!","Nice darts!","Well played!","Ready?"].map(m=>n.jsx("button",{className:"btn px-2 py-0.5 text-xs",onClick:()=>{ii(m),x(!1)},disabled:!a,children:m},m))})]})}),w&&n.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center",children:n.jsxs(ks,{storageKey:"ndn:modal:messages",className:"w-full relative",defaultWidth:560,defaultHeight:360,minWidth:380,minHeight:260,maxWidth:1e3,maxHeight:800,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Messages"}),n.jsx("button",{className:"btn px-2 py-1 text-sm",onClick:()=>g(!1),children:"Close"})]}),n.jsx(kN,{items:o.slice(-30).filter(m=>!s.isBlocked(String(m.fromId||""))).map((m,v)=>({key:String(v),from:m.from,id:String(m.fromId||m.from),text:m.message})),onDelete:m=>c(v=>v.filter((E,S)=>S!==m)),onReport:m=>{const E=o.slice(-30).filter(S=>!s.isBlocked(String(S.fromId||"")))[m];E&&Vr(null,E.message)},onBlock:m=>{const E=o.slice(-30).filter(S=>!s.isBlocked(String(S.fromId||"")))[m];if(E){try{s.block(String(E.fromId||E.from))}catch{}c(S=>S.filter(K=>String(K.fromId||K.from)!==String(E.fromId||E.from)));try{Bt(`${E.from} blocked`,{type:"info"})}catch{}}}})]})})]})}function kN({items:e,onDelete:t,onReport:s,onBlock:r}){const l=(()=>{try{const d=navigator.userAgent||"";return/Android|iPhone|iPad|iPod|Mobile/i.test(d)}catch{return!1}})(),[a,i]=u.useState(null),[o,c]=u.useState(null);return n.jsx("div",{className:"h-24 overflow-auto text-sm divide-y divide-slate-700/40",children:e.length===0?n.jsx("div",{className:"opacity-60 py-1",children:"No messages yet."}):e.map((d,x)=>{const w=Px(d.text),g=oN(d.text);return n.jsxs("div",{className:"relative group px-1 py-1 flex items-start gap-2",onTouchStart:l?b=>{const C=b.touches[0];i({x:C.clientX,y:C.clientY,i:x,t:Date.now()})}:void 0,onTouchMove:l?b=>{if(!a||a.i!==x)return;b.touches[0].clientX-a.x<-40&&c(x)}:void 0,onTouchEnd:l?()=>{const b=a?Date.now()-a.t:0;(o===x||b>600)&&(t(x),c(null)),i(null)}:void 0,children:[n.jsxs("span",{className:"text-slate-400 shrink-0",children:["[",d.from,"]"]}),n.jsx("span",{className:"text-white break-words whitespace-pre-wrap flex-1",children:w}),!l&&n.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1 ml-2",children:[n.jsx("button",{className:"w-5 h-5 rounded-full bg-rose-600 hover:bg-rose-700 text-white text-xs flex items-center justify-center",title:"Delete message","aria-label":"Delete message",onClick:()=>t(x),children:""}),r&&n.jsx("button",{className:"px-1.5 py-0.5 rounded bg-slate-700 hover:bg-slate-800 text-slate-100 text-[11px]",onClick:()=>r(x),title:"Block sender",children:"Block"}),n.jsx("button",{className:"px-1.5 py-0.5 rounded bg-amber-600/40 hover:bg-amber-600/60 text-amber-100 text-[11px]",onClick:()=>s(x),title:"Report message",children:"Report"})]}),g&&n.jsx("span",{className:"ml-2 text-[10px] px-1 rounded bg-rose-600/30 text-rose-200 border border-rose-600/40",children:"Filtered"})]},d.key)})})}function CN({user:e}){const{players:t,inProgress:s,startingScore:r,newMatch:l}=Ia(),[a,i]=u.useState("x01"),[o,c]=u.useState("Player 1, Player 2"),[d,x]=u.useState(501),[w,g]=u.useState([]),[b,C]=u.useState(""),[k,R]=u.useState(!1),[N,f]=u.useState(""),[y,j]=u.useState([]),[D,h]=u.useState(!1),I=String((e==null?void 0:e.email)||"").toLowerCase();u.useEffect(()=>{let A=!1;async function V(){try{if(!I)return;const oe=await(await fetch(`/api/friends/list?email=${encodeURIComponent(I)}`)).json().catch(()=>({friends:[]}));A||g(oe.friends||[])}catch{}}V();const T=setInterval(V,2e4);return()=>{A=!0,clearInterval(T)}},[I]),u.useEffect(()=>{try{const A=I?`ndn:stats:opponent:${I}`:"ndn:stats:opponent",V=localStorage.getItem(A);V&&C(V)}catch{}},[I]),u.useEffect(()=>{try{const A=I?`ndn:stats:opponent:${I}`:"ndn:stats:opponent";b?localStorage.setItem(A,b):localStorage.removeItem(A)}catch{}},[b,I]);async function O(A){if(f(A),!A.trim()){j([]);return}h(!0);try{const T=await(await fetch(`/api/friends/search?q=${encodeURIComponent(A)}`)).json().catch(()=>({results:[]}));j(T.results||[])}finally{h(!1)}}const P=u.useMemo(()=>{const A=new Map;if(a==="x01")for(const T of t)for(const z of T.legs)for(const oe of z.visits){const le=Math.max(0,Math.min(180,oe.score));A.set(le,(A.get(le)??0)+1)}const V=Array.from(A.entries()).sort((T,z)=>T[0]-z[0]);return V.length===0&&a==="x01"?([0,26,41,60,81,100,120,140,160,180].forEach(T=>A.set(T,0)),Array.from(A.entries()).sort((T,z)=>T[0]-z[0]).map(([T,z])=>({label:T,value:z}))):V.map(([T,z])=>({label:T,value:z}))},[t,a]),F=u.useMemo(()=>{const A=nm(Hl);return Hl.map(V=>{const T=A[V]||{played:0,won:0};return{label:V,value:T.played,extra:T.won}})},[a]);return u.useEffect(()=>{const A=()=>i(V=>V);return window.addEventListener("ndn:stats-updated",A),()=>window.removeEventListener("ndn:stats-updated",A)},[]),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Match Stats"}),n.jsx("span",{className:"text-xs opacity-70",children:"View"})]}),n.jsx(mm,{tabs:[{key:"x01",label:"X01"},{key:"other",label:"Other Modes"}],active:a,onChange:A=>i(A)})]}),t.length===0&&n.jsxs("div",{className:"mb-4 p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:[n.jsx("div",{className:"font-semibold mb-2",children:"No match data yet"}),n.jsx("div",{className:"text-sm opacity-80 mb-2",children:"Start a quick X01 match to generate stats. Stats like Best/Worst 3-dart are finalized when you end the game."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 items-end",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-slate-300 mb-1",children:"Players (comma separated)"}),n.jsx("input",{className:"input w-full",value:o,onChange:A=>c(A.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-slate-300 mb-1",children:"Starting Score"}),n.jsx("input",{className:"input w-full",type:"number",value:d,onChange:A=>x(parseInt(A.target.value||"501"))})]}),n.jsx("div",{children:n.jsx("button",{className:"btn w-full",onClick:()=>{const A=o.split(",").map(V=>V.trim()).filter(Boolean);if(!A.length)return alert("Enter at least one player");l(A,d)},children:"Start Match"})})]})]}),s&&n.jsx("div",{className:"mb-3 p-2 rounded-lg text-sm border border-amber-500/40 bg-amber-500/10 text-amber-200",children:"Note: Detailed leg stats are finalized at the end of the game."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.map((A,V)=>n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"font-semibold",children:V===1&&!b?A.name||"Opponent":V===1&&b?b:A.name}),V===1&&n.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.jsx("button",{className:"text-[11px] px-3 py-1 rounded-full bg-white/5 border border-white/10 hover:bg-white/10",onClick:()=>R(T=>!T),title:"Search user to compare",children:"Select Friend"}),w.slice(0,6).map(T=>{const z=T.username||T.email,oe=b===z;return n.jsx("button",{className:`text-[11px] px-3 py-1 rounded-full border ${oe?"bg-indigo-500/30 border-indigo-400/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>C(z),title:`Compare vs ${z}`,children:z},T.email)}),w.length===0&&n.jsx("button",{className:"text-[11px] px-3 py-1 rounded-full bg-white/5 border border-white/10",disabled:!0,children:"Find friends to compare"})]})]}),V===1&&k&&n.jsxs("div",{className:"mb-2 p-2 rounded-lg bg-black/20 border border-white/10",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("input",{className:"input flex-1 py-1",placeholder:"Search by name or email",value:N,onChange:T=>O(T.target.value)}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>O(N),disabled:D,children:"Search"})]}),n.jsxs("ul",{className:"max-h-40 overflow-auto space-y-1",children:[y.map(T=>{const z=T.username||T.email;return n.jsx("li",{children:n.jsx("button",{className:"w-full text-left px-2 py-1 rounded bg-white/5 hover:bg-white/10 border border-white/10 text-sm",onClick:()=>{C(z),R(!1)},children:z})},T.email)}),!y.length&&n.jsx("li",{className:"text-xs opacity-70",children:N.trim()?"No results":"Type to search"})]})]}),V===1&&b?n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best 3-Dart"}),n.jsx("div",{className:"font-semibold",children:Ge(un(b).best3||0)})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Worst 3-Dart"}),n.jsx("div",{className:"font-semibold",children:Ge(un(b).worst3||0)})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best 9-Dart (fewest darts)"}),n.jsx("div",{className:"font-semibold",children:(()=>{const T=un(b);return T.bestLegDarts?`${T.bestLegDarts} darts`:""})()})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best Checkout"}),n.jsx("div",{className:"font-semibold",children:un(b).bestCheckout||""})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2",children:[n.jsx("div",{className:"text-slate-300",children:"Averages (All-time vs Monthly)"}),n.jsxs("div",{className:"font-semibold flex flex-wrap gap-3 text-[13px]",children:[n.jsxs("span",{children:["3-dart: ",Ge(Ss(b)),"  ",Ge(so(b))]}),n.jsxs("span",{children:["First 9: ",Ge(no(b)),"  ",Ge(ro(b))]})]})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2",children:[n.jsx("div",{className:"text-slate-300",children:"All-time snapshot"}),(()=>{const T=un(b);return n.jsxs("div",{className:"font-semibold flex flex-wrap gap-3 text-[13px]",children:[n.jsxs("span",{children:["Best 3-dart: ",Ge(T.best3||0)]}),n.jsxs("span",{children:["Worst 3-dart: ",Ge(T.worst3||0)]}),n.jsxs("span",{children:["Best leg: ",T.bestLegDarts||0," darts"]}),n.jsxs("span",{children:["Best checkout: ",T.bestCheckout||0]})]})})()]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best 3-Dart"}),n.jsx("div",{className:"font-semibold",children:Ge(A.bestThreeDartAvg)})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Worst 3-Dart"}),n.jsx("div",{className:"font-semibold",children:Ge(A.worstThreeDartAvg)})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best 9-Dart (fewest darts)"}),n.jsx("div",{className:"font-semibold",children:A.bestNineDart?`${A.bestNineDart.darts} darts`:""})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best Checkout"}),n.jsx("div",{className:"font-semibold",children:A.bestCheckout??""})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2",children:[n.jsx("div",{className:"text-slate-300",children:"Averages (All-time vs Monthly)"}),n.jsxs("div",{className:"font-semibold flex flex-wrap gap-3 text-[13px]",children:[n.jsxs("span",{children:["3-dart: ",Ge(Ss(A.name)),"  ",Ge(so(A.name))]}),n.jsxs("span",{children:["First 9: ",Ge(no(A.name)),"  ",Ge(ro(A.name))]})]})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2",children:[n.jsx("div",{className:"text-slate-300",children:"All-time snapshot"}),(()=>{const T=un(A.name);return n.jsxs("div",{className:"font-semibold flex flex-wrap gap-3 text-[13px]",children:[n.jsxs("span",{children:["Best 3-dart: ",Ge(T.best3||0)]}),n.jsxs("span",{children:["Worst 3-dart: ",Ge(T.worst3||0)]}),n.jsxs("span",{children:["Best leg: ",T.bestLegDarts||0," darts"]}),n.jsxs("span",{children:["Best checkout: ",T.bestCheckout||0]})]})})()]})]})]},A.id)),t.length<=1&&n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"font-semibold",children:"Opponent"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.slice(0,6).map(A=>{const V=A.username||A.email,T=b===(A.username||A.email);return n.jsx("button",{className:`text-[11px] px-3 py-1 rounded-full border ${T?"bg-indigo-500/30 border-indigo-400/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>C(V),title:`Compare vs ${V}`,children:V},A.email)}),w.length===0&&n.jsx("span",{className:"text-xs opacity-70",children:"Add friends to compare stats."})]})]}),b?n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2",children:[n.jsx("div",{className:"text-slate-300",children:"Comparing to"}),n.jsx("div",{className:"font-semibold",children:b})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best 3-Dart"}),n.jsx("div",{className:"font-semibold",children:Ge(Ss(b))})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Worst 3-Dart"}),n.jsx("div",{className:"font-semibold",children:Ge(un(b).worst3||0)})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best 9-Dart (fewest darts)"}),n.jsx("div",{className:"font-semibold",children:(()=>{const A=un(b);return A.bestLegDarts?`${A.bestLegDarts} darts`:""})()})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10",children:[n.jsx("div",{className:"text-slate-300",children:"Best Checkout"}),n.jsx("div",{className:"font-semibold",children:un(b).bestCheckout||""})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2",children:[n.jsx("div",{className:"text-slate-300",children:"Averages (All-time vs Monthly)"}),n.jsxs("div",{className:"font-semibold flex flex-wrap gap-3 text-[13px]",children:[n.jsxs("span",{children:["3-dart: ",Ge(Ss(b)),"  ",Ge(so(b))]}),n.jsxs("span",{children:["First 9: ",Ge(no(b)),"  ",Ge(ro(b))]})]})]}),n.jsxs("div",{className:"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2",children:[n.jsx("div",{className:"text-slate-300",children:"All-time snapshot"}),(()=>{const A=un(b);return n.jsxs("div",{className:"font-semibold flex flex-wrap gap-3 text-[13px]",children:[n.jsxs("span",{children:["Best 3-dart: ",Ge(A.best3||0)]}),n.jsxs("span",{children:["Worst 3-dart: ",Ge(A.worst3||0)]}),n.jsxs("span",{children:["Best leg: ",A.bestLegDarts||0," darts"]}),n.jsxs("span",{children:["Best checkout: ",A.bestCheckout||0]})]})})()]})]}):n.jsx("div",{className:"text-sm opacity-70",children:"Select a friend above to compare."})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"mb-2 text-sm opacity-80",children:["Score Distribution (",a.toUpperCase(),"): Visits by scored points"]}),n.jsx("div",{className:"rounded-xl border border-indigo-500/40 bg-indigo-500/10 p-3",children:n.jsx(lu,{data:P,showValues:!1})})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("div",{className:"mb-2 text-sm opacity-80",children:"Other Modes: games played (bar height) with wins shown beneath each label"}),n.jsxs("div",{className:"rounded-xl border border-indigo-500/40 bg-indigo-500/10 p-3",children:[n.jsx(lu,{data:F.map(A=>({label:A.label,value:A.value})),showValues:!1}),n.jsx("div",{className:"mt-2 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 text-[11px] opacity-80",children:F.map((A,V)=>n.jsxs("div",{className:"flex items-center justify-between px-2 py-1 rounded-md bg-white/5 border border-white/10",children:[n.jsx("span",{className:"truncate mr-2",children:A.label}),n.jsxs("span",{className:"whitespace-nowrap",children:["Played ",A.value,"  Won ",A.extra]})]},V))})]})]})]})}function EN({user:e}){const t=um(),s=(()=>{try{return fm()}catch{return null}})(),[r,l]=u.useState([]),[a,i]=u.useState(!1),[o,c]=u.useState(""),[d,x]=u.useState(null),[w,g]=u.useState(!1),[b,C]=u.useState({open:!1,t:null}),[k,R]=u.useState({title:"Community X01 Tournament",game:"X01",mode:"bestof",value:3,description:"",startAt:new Date(Date.now()+2*60*60*1e3).toISOString().slice(0,16),checkinMinutes:15,capacity:8,startingScore:501}),N=(()=>{try{return"ontouchstart"in window||(navigator.maxTouchPoints||0)>0}catch{return!1}})();async function f(){try{const z=await(await fetch("/api/tournaments")).json();l(Array.isArray(z.tournaments)?z.tournaments:[])}catch{}}u.useEffect(()=>{f()},[]),u.useEffect(()=>{if(!s)return;const T=s.addListener(z=>{try{z.type==="tournaments"&&l(z.tournaments||[])}catch{}});return()=>{T()}},[s==null?void 0:s.connected]);const y=String((e==null?void 0:e.email)||"").toLowerCase();u.useEffect(()=>{let T=!1;async function z(){if(!y){x(null);return}try{const le=await(await fetch(`/api/subscription?email=${encodeURIComponent(y)}`)).json();T||((le==null?void 0:le.source)==="tournament"&&typeof le.expiresAt=="number"&&le.expiresAt>Date.now()?x(le.expiresAt):x(null))}catch{T||x(null)}}return z(),()=>{T=!0}},[y]);function j(T){var z;return!!((z=T.participants)!=null&&z.some(oe=>oe.email===y))}async function D(T){if(y&&confirm("Delete this tournament?")){i(!0);try{let z=await fetch("/api/tournaments/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:T.id,requesterEmail:y})});if(!z.ok&&z.status===403&&String(y)==="daviesfamily108@gmail.com"&&(z=await fetch("/api/admin/tournaments/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:T.id,requesterEmail:y})})),!z.ok){let oe="Delete failed";try{const le=await z.json();le!=null&&le.error&&(oe=`Delete failed: ${String(le.error)}`)}catch{}t(oe,{type:"error"});return}t("Tournament deleted",{type:"success"}),await f()}finally{i(!1)}}}async function h(T){if(y){i(!0);try{const z=await fetch("/api/tournaments/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:T.id,email:y,username:e==null?void 0:e.username})});if(!z.ok){let oe={};try{oe=await z.json()}catch{}(oe==null?void 0:oe.error)==="WINNER_COOLDOWN"&&typeof oe.until=="number"?(c(`You're a recent NDN tournament winner. You can re-enter after ${V(oe.until)}.`),setTimeout(()=>c(""),6e3),t("Join blocked: winner cooldown active",{type:"error"})):oe!=null&&oe.error&&(c(String(oe.error)),setTimeout(()=>c(""),3500),t(`Join failed: ${String(oe.error)}`,{type:"error"}));return}t("Joined tournament",{type:"success"}),await f()}finally{i(!1)}}}async function I(T){if(y){i(!0);try{const z=await fetch("/api/tournaments/leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:T.id,email:y})});if(!z.ok){let oe={};try{oe=await z.json()}catch{}oe!=null&&oe.error?t(`Leave failed: ${String(oe.error)}`,{type:"error"}):z.status===404?t("Leave failed (endpoint not found). Restart the server to enable /api/tournaments/leave.",{type:"error"}):t("Leave failed. Please try again.",{type:"error"});return}t("Left tournament",{type:"success"}),l(oe=>oe.map(le=>le.id===T.id?{...le,participants:(le.participants||[]).filter(Ne=>Ne.email!==y)}:le)),await f()}finally{i(!1)}}}async function O(){i(!0);try{const T=new Date(k.startAt).getTime();await fetch("/api/tournaments/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:k.title,game:k.game,mode:k.mode,value:Number(k.value),description:k.description,startAt:T,checkinMinutes:Number(k.checkinMinutes),capacity:Number(k.capacity),startingScore:k.game==="X01"?Number(k.startingScore||501):void 0,creatorEmail:e==null?void 0:e.email,creatorName:e==null?void 0:e.username})}),g(!1),t("Tournament created",{type:"success"}),await f()}finally{i(!1)}}u.useEffect(()=>{if(!w)return;const T=z=>{z.key==="Escape"&&g(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[w]);const P=u.useMemo(()=>r.filter(T=>T.official),[r]),F=u.useMemo(()=>r.filter(T=>!T.official),[r]),A=u.useMemo(()=>P.filter(z=>z.status==="scheduled").sort((z,oe)=>z.startAt-oe.startAt)[0]||null,[P]);function V(T){return new Date(T).toLocaleString()}return n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("h2",{className:"text-2xl font-bold",children:"Tournaments"})}),n.jsx("div",{className:"mb-3 p-3 rounded-xl bg-indigo-500/10 border border-indigo-500/40 flex items-center justify-end",children:n.jsx("button",{className:"btn",onClick:()=>g(!0),children:"Create Tournament +"})}),n.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-300",children:"World Lobby"}),A&&n.jsx("div",{className:"mb-4 p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm uppercase tracking-wide text-indigo-300 font-semibold",children:"Weekly Official Tournament"}),n.jsx("div",{className:"font-bold",children:A.title}),n.jsxs("div",{className:"text-sm opacity-80",children:[A.game,A.game==="X01"&&A.startingScore?`/${A.startingScore}`:"","  ",A.mode==="firstto"?"First to":"Best of"," ",A.value,"  Starts ",V(A.startAt),"  Cap ",A.capacity,"  Joined ",A.participants.length]}),A.prize&&n.jsxs("div",{className:"text-xs mt-1",children:["Prize: ",A.prizeType==="cash"&&A.prizeAmount?`${A.currency||"USD"} ${A.prizeAmount}`:"1 month PREMIUM"]}),A.status!=="scheduled"&&n.jsxs("div",{className:"text-xs",children:["Status: ",A.status]}),d&&d>Date.now()&&n.jsxs("div",{className:"text-xs text-rose-300",children:["Recent winners can re-enter after ",V(d),"."]})]}),n.jsx("div",{className:"shrink-0",children:n.jsx("button",{className:`btn ${j(A)?"bg-emerald-600 hover:bg-emerald-600":""}`,title:j(A)?"Double-click to leave this tournament":A.official&&d&&d>Date.now()?`Recent winners can re-enter after ${V(d)}`:"",disabled:a||A.status!=="scheduled"||!j(A)&&(A.participants.length>=A.capacity||!!d&&d>Date.now()),onClick:()=>{j(A)?N&&C({open:!0,t:A}):h(A)},onDoubleClick:()=>{!N&&j(A)&&C({open:!0,t:A})},"aria-label":j(A)?"Already Joined":"Join Now",children:j(A)?"Already Joined!":"Join Now"})})]})}),o&&n.jsx("div",{className:"mb-3 p-2 rounded-lg bg-amber-700/30 border border-amber-600/40 text-amber-200 text-sm",children:o}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{children:[n.jsx("div",{className:"font-semibold mb-1",children:"Official"}),n.jsx("div",{className:"text-xs opacity-70 mb-2",children:d&&d>Date.now()?n.jsxs(n.Fragment,{children:["Youre a recent NDN tournament winner  to keep it fair, you can re-enter after ",V(d),"."]}):n.jsx(n.Fragment,{children:"Note: Weekly winners can re-enter once their prize month of PREMIUM ends."})}),n.jsxs("ul",{className:"space-y-2",children:[P.map(T=>n.jsxs("li",{className:"p-3 rounded bg-black/10 flex items-center justify-between relative",children:[T.status==="scheduled"&&y&&T.creatorEmail&&String(T.creatorEmail).toLowerCase()===y&&n.jsx("button",{className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-rose-600 hover:bg-rose-700 text-white text-xs flex items-center justify-center shadow",title:"Delete this tournament",onClick:()=>D(T),"aria-label":"Delete tournament",children:""}),n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"font-semibold",children:[T.title," ",T.prize&&n.jsxs("span",{className:"inline-flex items-center gap-1 ml-2 align-middle",children:[n.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-amber-500 text-black",children:"Prize"}),n.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded-full bg-slate-600 text-white text-[10px] leading-none cursor-help",title:T.prizeType==="cash"?"Official cash prize tournament  payout handled by admin.":"Weekly winners get 1 month of PREMIUM and can re-enter once their prize month ends.","aria-label":"Prize info",children:"i"})]})]}),n.jsxs("div",{className:"text-sm opacity-80",children:[T.game,T.game==="X01"&&T.startingScore?`/${T.startingScore}`:"","  ",T.mode==="firstto"?"First to":"Best of"," ",T.value,"  ",V(T.startAt),"  Cap ",T.capacity,"  Joined ",T.participants.length]}),T.prize&&n.jsxs("div",{className:"text-xs",children:["Prize: ",T.prizeType==="cash"&&T.prizeAmount?`${T.currency||"USD"} ${T.prizeAmount}`:"1 month PREMIUM",T.status==="completed"&&T.prizeType==="cash"&&T.payoutStatus&&n.jsx("span",{className:`ml-2 px-2 py-0.5 rounded ${T.payoutStatus==="paid"?"bg-emerald-600":"bg-amber-600"}`,children:T.payoutStatus==="paid"?"Paid":"Pending"})]}),T.status!=="scheduled"&&n.jsxs("div",{className:"text-xs",children:["Status: ",T.status]}),j(T)&&n.jsx("div",{className:"text-xs text-emerald-400 font-semibold",children:"Already Joined"}),T.official&&d&&d>Date.now()&&n.jsxs("div",{className:"text-xs text-rose-300",children:["Cooldown active until ",V(d),"."]})]}),n.jsx("div",{children:n.jsx("button",{className:`btn ${j(T)?"bg-emerald-600 hover:bg-emerald-600":""}`,title:j(T)?"Double-click to leave this tournament":T.official&&d&&d>Date.now()?`Recent winners can re-enter after ${V(d)}`:"",disabled:a||T.status!=="scheduled"||!j(T)&&(T.participants.length>=T.capacity||T.official&&!!d&&d>Date.now()),onClick:()=>{j(T)?N&&C({open:!0,t:T}):h(T)},onDoubleClick:()=>{!N&&j(T)&&C({open:!0,t:T})},"aria-label":j(T)?"Already Joined":"Join Now",children:j(T)?"Already Joined!":"Join Now"})})]},T.id)),P.length===0&&n.jsx("li",{className:"text-sm opacity-60",children:"No official tournaments yet."})]})]}),n.jsxs("section",{children:[n.jsx("div",{className:"font-semibold mb-1",children:"Community"}),n.jsxs("ul",{className:"space-y-2",children:[F.map(T=>n.jsxs("li",{className:"p-3 rounded bg-black/10 flex items-center justify-between relative",children:[T.status==="scheduled"&&y&&T.creatorEmail&&String(T.creatorEmail).toLowerCase()===y&&n.jsx("button",{className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-rose-600 hover:bg-rose-700 text-white text-xs flex items-center justify-center shadow",title:"Delete this tournament",onClick:()=>D(T),"aria-label":"Delete tournament",children:""}),n.jsxs("div",{className:"space-y-0.5",children:[n.jsx("div",{className:"font-semibold",children:T.title}),n.jsxs("div",{className:"text-sm opacity-80",children:[T.game,T.game==="X01"&&T.startingScore?`/${T.startingScore}`:"","  ",T.mode==="firstto"?"First to":"Best of"," ",T.value,"  ",V(T.startAt),"  Cap ",T.capacity,"  Joined ",T.participants.length]}),T.description&&n.jsx("div",{className:"text-xs opacity-80",children:T.description}),j(T)&&n.jsx("div",{className:"text-xs text-emerald-400 font-semibold",children:"Already Joined"})]}),n.jsx("div",{children:n.jsx("button",{className:"btn",title:j(T)?"Double-click to leave this tournament":"",disabled:a||T.status!=="scheduled"||!j(T)&&T.participants.length>=T.capacity,onClick:()=>{j(T)?N&&C({open:!0,t:T}):h(T)},onDoubleClick:()=>{!N&&j(T)&&C({open:!0,t:T})},children:j(T)?"Already Joined":"Join Now"})})]},T.id)),F.length===0&&n.jsx("li",{className:"text-sm opacity-60",children:"No community tournaments yet."})]})]})]}),w&&n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"card relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-xl font-semibold",children:"Create Tournament"}),n.jsx("button",{className:"btn",onClick:()=>g(!1),children:"Close"})]}),n.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-2 md:gap-4 pr-1",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Title"}),n.jsx("input",{className:"input w-full",value:k.title,onChange:T=>R(z=>({...z,title:T.target.value}))})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Game"}),n.jsx("select",{className:"input w-full",value:k.game,onChange:T=>R(z=>({...z,game:T.target.value})),children:["X01","Around the Clock","Cricket","Halve It","Shanghai","High-Low","Killer"].map(T=>n.jsx("option",{value:T,children:T},T))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Mode"}),n.jsxs("select",{className:"input w-full",value:k.mode,onChange:T=>R(z=>({...z,mode:T.target.value})),children:[n.jsx("option",{value:"bestof",children:"Best of"}),n.jsx("option",{value:"firstto",children:"First to"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Number"}),n.jsx("input",{className:"input w-full",type:"number",min:1,value:k.value,onChange:T=>R(z=>({...z,value:Number(T.target.value)}))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Description"}),n.jsx("textarea",{className:"input w-full",rows:5,value:k.description,onChange:T=>R(z=>({...z,description:T.target.value}))})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Start time"}),n.jsx("input",{className:"input w-full",type:"datetime-local",value:k.startAt,onChange:T=>R(z=>({...z,startAt:T.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Check-in reminder (min)"}),n.jsx("input",{className:"input w-full",type:"number",min:0,value:k.checkinMinutes,onChange:T=>R(z=>({...z,checkinMinutes:Number(T.target.value)}))})]})]}),k.game==="X01"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"X01 Starting Score"}),n.jsx("select",{className:"input w-full",value:String(k.startingScore),onChange:T=>R(z=>({...z,startingScore:Number(T.target.value)})),children:[301,501,701].map(T=>n.jsx("option",{value:T,children:T},T))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Capacity"}),n.jsx("input",{className:"input w-full",type:"number",min:6,max:64,value:k.capacity,onChange:T=>R(z=>({...z,capacity:Number(T.target.value)}))})]}),n.jsx("div",{className:"text-xs opacity-70",children:"Note: community tournaments do not award prizes."}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{className:"btn",disabled:a,onClick:O,children:"Create"})})]})]})}),b.open&&b.t&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>C({open:!1,t:null})}),n.jsxs("div",{className:"relative card p-4 w-[360px] max-w-[90vw]",children:[n.jsx("div",{className:"text-lg font-semibold mb-2",children:"Leave tournament?"}),n.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["Are you sure you want to remove yourself from ",b.t.title,"?"]}),n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700",onClick:()=>C({open:!1,t:null}),children:"Decline"}),n.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:async()=>{const T=b.t;C({open:!1,t:null}),await I(T)},children:"Accept"})]})]})]})]})}function TN(){return n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-2xl font-bold text-indigo-300 mb-2",children:"Admin PREMIUM"}),n.jsx("p",{className:"mb-2 text-indigo-200",children:"Unlock every game mode known to darts, advanced stats, and admin tools."}),n.jsxs("ul",{className:"mb-4",children:[n.jsx("li",{children:"All game modes (including paid/advanced)"}),n.jsx("li",{children:"Online play with all rules and variations"}),n.jsx("li",{children:"Advanced analytics and leaderboards"}),n.jsx("li",{children:"Admin tools for managing matches and users"})]}),n.jsx("a",{href:"https://buy.stripe.com/test_00g7vQ8Qw2gQ0wA5kk",target:"_blank",rel:"noopener noreferrer",className:"btn bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold shadow-lg hover:scale-105 transition",children:"Subscribe to PREMIUM"})]})}function DN({open:e,onClose:t,width:s=700,title:r,footer:l,children:a,side:i="right"}){return u.useEffect(()=>{function o(c){c.key==="Escape"&&t()}return e&&document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e,t]),n.jsxs("div",{className:`fixed inset-0 z-50 ${e?"":"pointer-events-none"}`,"aria-hidden":!e,children:[n.jsx("div",{className:`absolute inset-0 bg-black/60 transition-opacity ${e?"opacity-100":"opacity-0"}`,onClick:t}),n.jsxs("div",{className:`absolute top-0 ${i==="right"?"right-0 border-l":"left-0 border-r"} h-full bg-slate-900 border-slate-700 shadow-2xl w-full sm:w-auto flex flex-col transition-transform duration-200 ${e?"translate-x-0":i==="right"?"translate-x-full":"-translate-x-full"}`,style:{width:typeof s=="number"?`${s}px`:s},role:"dialog","aria-modal":"true",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-700 sticky top-0 bg-slate-900 z-10",children:[n.jsx("div",{className:"text-lg font-semibold",children:r}),n.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:t,children:"Close"})]}),n.jsx("div",{className:"flex-1 overflow-auto p-4",children:a}),l&&n.jsx("div",{className:"px-4 py-3 border-t border-slate-700 sticky bottom-0 bg-slate-900 z-10",children:l})]})]})}function IN(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;const s=Math.abs(t)%360;return Bx(s,65,55)}async function MN(e){try{const t=new Image;t.crossOrigin="anonymous";const s=await new Promise((k,R)=>{t.onload=()=>k(t),t.onerror=()=>R(new Error("image-load-failed")),t.src=e}),r=32,l=32,a=document.createElement("canvas");a.width=r,a.height=l;const i=a.getContext("2d");if(!i)return null;i.drawImage(s,0,0,r,l);const o=i.getImageData(0,0,r,l).data;let c=0,d=0,x=0,w=0;for(let k=0;k<o.length;k+=4)o[k+3]<10||(c+=o[k],d+=o[k+1],x+=o[k+2],w++);if(!w)return null;c=Math.round(c/w),d=Math.round(d/w),x=Math.round(x/w);const[g,b,C]=LN(c,d,x);return Bx(g,Math.min(80,b+10),Math.max(35,C))}catch{return null}}function Bx(e,t,s){t/=100,s/=100;const r=o=>(o+e/30)%12,l=t*Math.min(s,1-s),a=o=>s-l*Math.max(-1,Math.min(r(o)-3,Math.min(9-r(o),1))),i=o=>Math.round(255*o).toString(16).padStart(2,"0");return`#${i(a(0))}${i(a(8))}${i(a(4))}`}function LN(e,t,s){e/=255,t/=255,s/=255;const r=Math.max(e,t,s),l=Math.min(e,t,s);let a=0,i=0;const o=(r+l)/2;if(r!==l){const c=r-l;switch(i=o>.5?c/(2-r-l):c/(r+l),r){case e:a=(t-s)/c+(t<s?6:0);break;case t:a=(s-e)/c+2;break;case s:a=(e-t)/c+4;break}a*=60}return[Math.round(a),Math.round(i*100),Math.round(o*100)]}function PN({user:e}){const t=em(e==null?void 0:e.email),[s,r]=u.useState(null),[l,a]=u.useState(""),[i,o]=u.useState("");async function c(){try{const w=await fetch("/readyz");r(await w.json())}catch{}}if(u.useEffect(()=>{c();const w=setInterval(c,5e3);return()=>clearInterval(w)},[]),!t)return n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-2xl font-bold text-brand-700 mb-2",children:"Ops"}),n.jsx("div",{children:"Restricted"})]});async function d(w){o("");try{const g=await fetch("/api/admin/maintenance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:w,requesterEmail:e==null?void 0:e.email})}),b=await g.json();!g.ok||!(b!=null&&b.ok)?o((b==null?void 0:b.error)||"Failed"):o(`Maintenance ${w?"enabled":"disabled"}`)}catch{o("Network error")}}async function x(){o("");const w=l.trim();if(w)try{const g=await fetch("/api/admin/announce",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:w,requesterEmail:e==null?void 0:e.email})}),b=await g.json();!g.ok||!(b!=null&&b.ok)?o((b==null?void 0:b.error)||"Failed"):o("Announcement broadcasted"),a("")}catch{o("Network error")}}return n.jsxs("div",{className:"card",children:[n.jsx("h2",{className:"text-2xl font-bold text-brand-700 mb-2",children:"Ops"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Readiness"}),n.jsxs("div",{className:"text-sm",children:["HTTP: ",n.jsx("span",{className:`font-semibold ${s!=null&&s.ok?"text-emerald-300":"text-rose-300"}`,children:String(!!(s!=null&&s.ok))})]}),n.jsxs("div",{className:"text-sm",children:["WS: ",n.jsx("span",{className:`font-semibold ${s!=null&&s.ws?"text-emerald-300":"text-rose-300"}`,children:String(!!(s!=null&&s.ws))})]}),n.jsxs("div",{className:"text-sm",children:["Clients: ",n.jsx("span",{className:"font-semibold",children:(s==null?void 0:s.clients)??0})]}),n.jsxs("div",{className:"text-sm",children:["Rooms: ",n.jsx("span",{className:"font-semibold",children:(s==null?void 0:s.rooms)??0})]}),n.jsxs("div",{className:"text-sm",children:["Heap Used: ",n.jsxs("span",{className:"font-semibold",children:[s!=null&&s.mem?Math.round(s.mem.heapUsed/1024/1024):0," MB"]})]})]}),n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Maintenance"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"btn",onClick:()=>d(!0),children:"Enable"}),n.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>d(!1),children:"Disable"})]})]}),n.jsxs("div",{className:"p-3 rounded-xl border border-indigo-500/40 bg-indigo-500/10",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Announcement"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{className:"input flex-1",placeholder:"Message to broadcast",value:l,onChange:w=>a(w.target.value)}),n.jsx("button",{className:"btn",onClick:x,children:"Send"})]})]})]}),i&&n.jsx("div",{className:"text-xs mt-2",children:i}),n.jsx("div",{className:"text-xs opacity-70 mt-2",children:"Note: For 1.5k+ concurrent users, deploy the server behind a reverse proxy (NGINX/Cloudflare), enable process clustering, and scale horizontally with sticky sessions for WebSockets."})]})}function AN(){const e=(()=>{try{return fm()}catch{return null}})(),[t,s]=u.useState("score"),[r,l]=u.useState(!1),[a,i]=u.useState(!1),[o,c]=u.useState(null),[d,x]=u.useState(0),{avgMode:w}=qn();u.useEffect(()=>{const I=localStorage.getItem("authToken");I&&fetch("/api/auth/me",{headers:{Authorization:`Bearer ${I}`}}).then(O=>O.json()).then(O=>{O.user?c(O.user):localStorage.removeItem("authToken")})},[]);const[g,b]=u.useState(""),[C,k]=u.useState(null),R=u.useRef(null),[N,f]=u.useState(!1),[y,j]=u.useState(null);u.useEffect(()=>{const I=window.matchMedia("(max-width: 768px)"),O=/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent||""),P=()=>l(I.matches||O);P();try{I.addEventListener("change",P)}catch{window.addEventListener("resize",P)}return()=>{try{I.removeEventListener("change",P)}catch{window.removeEventListener("resize",P)}}},[]),u.useEffect(()=>{try{const I=new URLSearchParams(window.location.search);if(I.get("demo")==="offline-format"){const O=(I.get("format")||"first").toLowerCase()==="best"?"best":"first",P=Number(I.get("value")||"1"),F=Number(I.get("start")||"501");window.dispatchEvent(new CustomEvent("ndn:offline-format",{detail:{formatType:O,formatCount:isFinite(P)?P:1,startScore:isFinite(F)?F:501}})),s("offline"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("ndn:auto-start",{detail:{mode:"X01"}}))},50)}if(I.get("demo")==="online-create"){const O=I.get("game")||"X01",P=(I.get("mode")||"firstto").toLowerCase()==="bestof"?"bestof":"firstto",F=Number(I.get("value")||"3"),A=Number(I.get("start")||"501");s("online"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("ndn:online-demo",{detail:{game:O,mode:P,value:isFinite(F)?F:3,start:isFinite(A)?A:501}}))},80)}I.get("demo")==="online-match"&&(s("online"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("ndn:online-match-demo",{detail:{game:"X01",start:501}}))},120))}catch{}},[]),u.useEffect(()=>{const I=()=>f(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",I),()=>document.removeEventListener("fullscreenchange",I)},[]),u.useEffect(()=>{r||i(!1)},[r]),u.useEffect(()=>{if(typeof window>"u")return;try{b(localStorage.getItem("ndn:avatar")||"")}catch{}const I=O=>{try{const P=O.detail;b(typeof P=="string"?P:localStorage.getItem("ndn:avatar")||"")}catch{try{b(localStorage.getItem("ndn:avatar")||"")}catch{}}};return window.addEventListener("ndn:avatar-updated",I),()=>window.removeEventListener("ndn:avatar-updated",I)},[]),u.useEffect(()=>{async function I(){const O=g||"",P=o!=null&&o.username?IN(o.username):null;if(O){const F=await MN(O);j(F||P)}else j(P)}I()},[g,o==null?void 0:o.username]),u.useEffect(()=>{let I=!1;async function O(){try{const A=await(await fetch("/api/https-info")).json();!I&&A&&typeof A.https=="boolean"&&k({https:!!A.https,port:Number(A.port)||8788})}catch{}}O();const P=setInterval(O,15e3);return()=>{I=!0,clearInterval(P)}},[]),u.useEffect(()=>{const I=()=>s("calibrate"),O=()=>I();window.addEventListener("ndn:request-calibrate",O);const P=A=>{var T;const V=(T=A==null?void 0:A.detail)==null?void 0:T.tab;V&&s(V)};window.addEventListener("ndn:change-tab",P);const F=A=>{try{const V=A==null?void 0:A.detail;s("online"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("ndn:spectate-room",{detail:V}))},60)}catch{}};return window.addEventListener("ndn:spectate-request",F),()=>{window.removeEventListener("ndn:request-calibrate",O),window.removeEventListener("ndn:change-tab",P),window.removeEventListener("ndn:spectate-request",F)}},[]),u.useEffect(()=>{const I=document.getElementById("ndn-main-scroll");I&&I.scrollTo({top:0,behavior:"auto"})},[t]),u.useEffect(()=>{if(!(o!=null&&o.username))return;const I=()=>x(w==="24h"?s1(o.username):Ss(o.username));I();const O=()=>I();return window.addEventListener("ndn:stats-updated",O),()=>window.removeEventListener("ndn:stats-updated",O)},[o==null?void 0:o.username,w]),u.useEffect(()=>{const I=()=>{try{localStorage.removeItem("ndn:avatar")}catch{}c(null),s("score")};return window.addEventListener("ndn:logout",I),()=>window.removeEventListener("ndn:logout",I)},[]),u.useEffect(()=>{const I=O=>{var P;try{const F=String(((P=O==null?void 0:O.detail)==null?void 0:P.username)||"").trim();if(!F)return;c(A=>A&&{...A,username:F});try{const A=((o==null?void 0:o.email)||"").toLowerCase();e&&F&&A&&e.send({type:"presence",username:F,email:A})}catch{}}catch{}};return window.addEventListener("ndn:username-changed",I),()=>window.removeEventListener("ndn:username-changed",I)},[e,o==null?void 0:o.email]);async function D(I){try{const O=I!=null&&I.email?`?email=${encodeURIComponent(I.email)}`:"",P=await fetch("/api/subscription"+O);if(!P.ok)return;const F=await P.json();c({...I,fullAccess:!!(F!=null&&F.fullAccess)})}catch{}}if(!o)return n.jsx(yN,{onAuth:I=>{c(I),D(I)}});const h=`https://ui-avatars.com/api/?name=${encodeURIComponent(o.username||"NDN")}&background=8F43EE&color=fff&bold=true&rounded=true&size=64`;return n.jsx(hN,{children:n.jsxs("div",{ref:R,className:`${o!=null&&o.fullAccess?"premium-body":""} h-screen overflow-hidden p-2 sm:p-4`,children:[n.jsx(uN,{}),n.jsxs("div",{className:"max-w-[1400px] mx-auto grid grid-cols-1 sm:grid-cols-[auto,1fr] gap-3 sm:gap-4 h-full overflow-hidden",children:[!r&&n.jsx("div",{className:"relative",style:{width:240},children:n.jsx(zp,{active:t,onChange:I=>{s(I)},user:o})}),n.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[n.jsx("div",{className:"pt-2",children:n.jsxs("header",{id:"ndn-header",className:"header glass flex-col md:flex-row gap-2 md:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 order-1",children:[r&&n.jsx("button",{className:"btn px-3 py-1 mr-1","aria-label":"Open navigation",onClick:()=>i(!0),children:""}),n.jsx("h1",{className:"text-xl md:text-2xl font-bold text-brand-700 whitespace-nowrap cursor-pointer select-none",onClick:()=>{r&&s("score")},title:r?"Go Home":void 0,children:"NINE-DART-NATION "})]}),n.jsxs("div",{className:"order-3 md:order-2 w-full md:w-auto flex-1 flex flex-col items-center justify-center text-center md:text-left !text-black",children:[n.jsxs("span",{className:"text-base md:text-lg font-semibold flex items-center gap-2 max-w-full truncate !text-black",style:{color:"#000000",WebkitTextFillColor:"#000000"},children:[n.jsx("span",{className:"hidden sm:inline !text-black",children:"Welcome,"}),n.jsx("img",{src:g||h,alt:"avatar",className:"w-6 h-6 md:w-7 md:h-7 rounded-full ring-2 ring-white/20"}),n.jsxs("span",{className:"truncate !text-black",style:{color:"#000000",WebkitTextFillColor:"#000000"},children:[o.username,""]})]}),n.jsxs("span",{className:"hidden sm:inline text-xs md:text-sm !text-black",style:{color:"#000000",WebkitTextFillColor:"#000000"},children:["All-time 3-dart avg: ",n.jsx("span",{className:"font-semibold !text-black",style:{color:"#000000",WebkitTextFillColor:"#000000"},children:d.toFixed(2)})]})]}),n.jsxs("div",{className:"order-2 md:order-3 ml-0 md:ml-auto flex items-center gap-2 flex-wrap",children:[n.jsx("button",{className:"px-3 py-1 text-sm rounded-full bg-white/5 hover:bg-white/10 border border-white/10",onClick:()=>{const I=R.current;I&&(document.fullscreenElement?document.exitFullscreen().catch(()=>{}):I.requestFullscreen().catch(()=>{}))},title:N?"Exit Full Screen":"Enter Full Screen",children:N?"Exit Full Screen":"Full Screen"}),t==="online"&&n.jsx("button",{className:"text-[10px] md:text-xs px-3 py-1 rounded-full bg-indigo-500/25 text-indigo-100 border border-indigo-400/40 hover:bg-indigo-500/40",title:"Open a simulated online match",onClick:()=>{setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("ndn:online-match-demo",{detail:{game:"X01",start:501}}))}catch{}},40)},children:"ONLINE DEMO"}),e?n.jsx("span",{className:"ml-0 md:ml-2",children:n.jsx(NN,{status:e.status})}):null,C!=null&&C.https?n.jsx("span",{className:"text-[10px] md:text-xs px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/40",title:`Phone HTTPS active on :${C.port}`,children:"HTTPS READY"}):n.jsx("span",{className:"text-[10px] md:text-xs px-3 py-1 rounded-full bg-slate-600/30 text-slate-300 border border-slate-400/30",title:"Enable HTTPS for iPhone camera pairing",children:"HTTP ONLY"})]})]})}),r&&n.jsx(RN,{open:a,onClose:()=>i(!1),active:t,onChange:I=>{s(I),i(!1)},user:o}),n.jsxs("main",{id:"ndn-main-scroll",className:"space-y-4 flex-1 overflow-y-auto pr-1",children:[t==="settings"&&n.jsx(as,{children:n.jsx(gN,{user:o})}),t==="score"&&n.jsx(as,{children:n.jsx(M1,{user:o})}),t==="online"&&n.jsx(as,{children:n.jsx(SN,{user:o})}),t==="offline"&&n.jsx(as,{children:n.jsx(rN,{user:o})}),t==="calibrate"&&n.jsx(as,{children:n.jsx(_b,{})}),t==="friends"&&n.jsx(as,{children:n.jsx(dN,{user:o})}),t==="stats"&&n.jsx(as,{children:n.jsx(CN,{user:o})}),t==="tournaments"&&n.jsx(as,{children:n.jsx(EN,{user:o})}),t==="admin"&&n.jsx(as,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx(fN,{user:o}),n.jsx(PN,{user:o})]})}),t==="fullaccess"&&n.jsx(as,{children:n.jsx(TN,{})})]})]})]})]})})}function RN({open:e,onClose:t,active:s,onChange:r,user:l}){return n.jsx(DN,{open:e,onClose:t,width:320,side:"left",title:"Navigate",children:n.jsx("div",{className:"mt-2",children:n.jsx(zp,{active:s,onChange:r,user:l,className:"flex relative static max-h-[80vh] w-full"})})})}function ON(e){return e.length>=10&&/\d/.test(e)&&/[^A-Za-z0-9]/.test(e)}function BN(){const[e,t]=u.useState(""),[s,r]=u.useState(""),[l,a]=u.useState(""),[i,o]=u.useState(""),[c,d]=u.useState("");u.useEffect(()=>{try{const g=new URLSearchParams(window.location.search).get("token")||"";t(g)}catch{}},[]);async function x(w){if(w.preventDefault(),o(""),d(""),!e){o("Missing or invalid reset token.");return}if(!s||s!==l){o("Passwords do not match.");return}if(!ON(s)){o("Password must be at least 10 chars and include a number and symbol.");return}try{const b=await(await fetch("/api/auth/confirm-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,newPassword:s})})).json();if(!(b!=null&&b.ok))throw new Error((b==null?void 0:b.error)||"Reset failed");d("Password changed. You can now sign in.")}catch(g){o((g==null?void 0:g.message)||"Reset failed")}}return n.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[n.jsx("div",{className:"background-animated"}),n.jsx("div",{className:"relative z-10 w-full max-w-lg mx-auto p-4",children:n.jsxs("form",{className:"card w-full space-y-4",onSubmit:x,children:[n.jsx("div",{className:"flex flex-col items-center justify-center gap-2 mb-2 text-center",children:n.jsx("h1",{className:"logo text-center",children:"Reset your password"})}),!e&&n.jsx("div",{className:"text-red-400",children:"This reset link is missing a token. Please use the link from your email."}),n.jsx("input",{className:"input w-full",type:"password",placeholder:"New password",value:s,onChange:w=>r(w.target.value),required:!0}),n.jsx("input",{className:"input w-full",type:"password",placeholder:"Confirm password",value:l,onChange:w=>a(w.target.value),required:!0}),i&&n.jsx("div",{className:"text-red-400 font-semibold text-sm",children:i}),c&&n.jsx("div",{className:"text-emerald-400 font-semibold text-sm",children:c}),n.jsx("button",{className:"btn w-full",type:"submit",disabled:!e,children:"Change Password"}),n.jsx("a",{className:"underline text-sm text-center",href:"/",children:"Back to sign in"})]})})]})}class _N extends u.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,message:String((t==null?void 0:t.message)||t)}}componentDidCatch(t,s){console.error("[ErrorBoundary]",t,s)}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:n.jsxs("div",{className:"card max-w-lg w-full text-center",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),n.jsx("p",{className:"opacity-80 mb-4",children:"Please refresh the page. If this persists, let us know."}),this.state.message&&n.jsx("pre",{className:"text-xs bg-black/40 rounded p-2 overflow-auto text-left",children:this.state.message}),n.jsx("button",{className:"btn mt-4",onClick:()=>window.location.reload(),children:"Reload"})]})}):this.props.children}}try{window.React=window.React||{}}catch{}Zc.createRoot(document.getElementById("root")).render(n.jsx(u.StrictMode,{children:n.jsx(_N,{children:n.jsx(bN,{children:n.jsx(UN,{})})})}));function UN(){return window.location.pathname==="/reset"?n.jsx(BN,{}):n.jsx(AN,{})}
//# sourceMappingURL=index-BcQr4bMj.js.map
