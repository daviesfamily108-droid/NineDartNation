import{b as li,u as Re,j as e,c as Kr,d as il,e as ll,f as ol,r as cl,h as dl,i as ul,B as Nt,k as ml,l as xl,a as hl,m as fl,n as ys,o as _r,p as Gr,q as pl,R as ws,G as bl,P as gl,s as zr,C as W,t as qe,v as vl,w as jl,x as Nl,y as yl}from"./index-izO6KSi1.js";import{r as a}from"./ui-gqBJRRJB.js";import{G as wl}from"./GameCalibrationStatus-B5wqs5uQ.js";import{M as Sl}from"./MatchStartShowcase-C_YB2bPB.js";import{M as kl}from"./MatchControls-4VDbcC1x.js";import"./vendor-D3F3s8fL.js";const Cl=["D1","D2","D3","D4","D5","D6","D7","D8","D9","D10","D11","D12","D13","D14","D15","D16","D17","D18","D19","D20","DB"];function Dl(n){return n==="DB"?50:Number(n.slice(1))*2}function Tl(n){return Cl.includes(n)?Dl(n):32}function Ml(n,i="D16"){if(n>170||n<=1)return[];const d={170:["T20 T20 DB"],167:["T20 T19 DB"],164:["T20 T18 DB"],161:["T20 T17 DB"],160:["T20 T20 D20"],158:["T20 T20 D19"],157:["T20 T19 D20"],156:["T20 T20 D18"],155:["T20 T19 D19"],154:["T20 T18 D20"],153:["T20 T19 D18"],152:["T20 T20 D16"],151:["T20 T17 D20"],150:["T20 T18 D18"],149:["T20 T19 D16"],148:["T20 T16 D20"],147:["T20 T17 D18"],146:["T20 T18 D16"],145:["T20 T15 D20"],144:["T20 T20 D12"],141:["T20 T19 D12"],140:["T20 T20 D10"],137:["T20 T19 D10"],136:["T20 T20 D8"],132:["BULL T14 D20","T20 T12 D8"],130:["T20 T20 D5","T20 T18 D8"],129:["T19 T16 D12"],128:["T18 T14 D16"],127:["T20 T17 D8"],126:["T19 T19 D6"],121:["T20 11 D20","T20 T15 D8"],120:["T20 20 D20","T20 S20 D20"],110:["T20 10 D20"],100:["T20 D20"],99:["T19 10 D16","T19 S10 D16"],97:["T19 D20"],96:["T20 D18"],95:["T19 D19"],94:["T18 D20"],92:["T20 D16"],90:["T18 D18","T20 D15"],86:["T18 D16"],84:["T20 D12","T16 D18"],82:["BULL D16","T14 D20"],81:["T19 D12"],80:["T20 D10","D20 D20"],78:["T18 D12"],76:["T20 D8","T16 D14"],74:["T14 D16","T18 D10"],72:["T16 D12","T20 D6"],70:["T18 D8","S20 BULL"],68:["T20 D4","T16 D10"],66:["T10 D18","T14 D12"],64:["T16 D8","D16 D16"],62:["T10 D16","T12 D13"],60:["20 D20","S20 D20"],58:["18 D20","S18 D20"],56:["16 D20","S16 D20"],54:["14 D20","S14 D20"],52:["20 D16","S20 D16"],50:["BULL","10 D20"],48:["16 D16","S16 D16"],46:["14 D16"],44:["12 D16"],42:["10 D16"],40:["D20"],38:["D19"],36:["D18"],34:["D17"],32:["D16"],30:["D15"],28:["D14"],26:["D13"],24:["D12"],22:["D11"],20:["D10"],18:["D9"],16:["D8"],14:["D7"],12:["D6"],10:["D5"],8:["D4"],6:["D3"],4:["D2"],2:["D1"]};if(d[n])return d[n];const m=Tl(i),o=[];for(const c of[60,57,54,51,48])if(n-c===m){o.push(`T${c/3} ${i}`);break}if(!o.length){for(const c of[20,19,18,17,16,15])if(n-c===m){o.push(`${c} ${i}`);break}}return o}function sn(n,i,d,m,o){try{const c=window.speechSynthesis;if(!c)return;const f=new SpeechSynthesisUtterance,T=d<=170&&d>0,I=i===180;if(!(!o?.checkoutOnly||T||I))return;if(I?(f.text=`${n}! One eighty!`,f.rate=1.04,f.pitch=1.15):T?(f.text=`${n}, ${d} remaining.`,f.rate=1,f.pitch=1):i===0?(f.text=`${n}, no score.`,f.rate=1,f.pitch=1):(f.text=`${n}, ${i}.`,f.rate=1,f.pitch=1),m){const B=c.getVoices().find(K=>K.name===m);B&&(f.voice=B)}typeof o?.volume=="number"?f.volume=Math.max(0,Math.min(1,o.volume)):f.volume=1;try{c.cancel()}catch{}c.speak(f)}catch{}}function Xr({label:n,autoStart:i,scale:d,className:m,aspect:o="inherit",style:c,fill:f=!1}){const T=a.useRef(null),I=li(),[O,B]=a.useState(!1),[K,H]=a.useState(null),[S,M]=a.useState(null),[G,y]=a.useState(null),se=a.useRef(null),Z=a.useCallback((x,b="local")=>{try{x?(I.setMediaStream(x),T.current&&I.setVideoElementRef(T.current),I.setMode(b),I.setStreaming(!0),se.current=b):se.current&&se.current!=="phone"&&(I.setStreaming(!1),I.setMediaStream(null),se.current=null)}catch(k){console.warn("[CameraTile] Failed to register stream with camera session:",k)}},[I]),z=Re(x=>x.preferredCameraLabel),[le,Ce]=a.useState(()=>z==="Phone Camera"?"phone":localStorage.getItem("ndn:camera:mode")||"local"),[,ye]=a.useState(null),[,we]=a.useState(!1),[Ie,nt]=a.useState(null),[Pe,de]=a.useState(null),[E,oe]=a.useState(!0),[h,$e]=a.useState([]),[R,at]=a.useState(!1),[F,Ae]=a.useState([]),[Be,ue]=a.useState(!1),De=Re(x=>x.autoscoreProvider),Fe=Re(x=>x.cameraEnabled),U=Re(x=>x.setPreferredCameraLocked),Y=Re(x=>x.preferredCameraLocked),_=Re(x=>x.setPreferredCamera),Je=Re(x=>x.preferredCameraId);if(De==="manual"){const b=[f?"rounded-2xl overflow-hidden bg-black w-full flex flex-col":"rounded-2xl overflow-hidden bg-black w-full mx-auto",m].filter(Boolean).join(" ").trim(),k={...c||{}};return!f&&k.aspectRatio===void 0&&k.height===void 0&&k.minHeight===void 0&&(k.aspectRatio="4 / 3"),e.jsx("div",{className:b,style:k,children:e.jsx("div",{className:"flex-1 w-full h-full flex items-center justify-center bg-slate-900 text-slate-200 text-xs p-4 text-center",children:"Manual scoring mode active â€” camera feeds are disabled."})})}a.useEffect(()=>{const x=window.location.hostname;(x==="localhost"||x==="127.0.0.1")&&Kr("/api/hosts").then(b=>b.json()).then(b=>{const k=Array.isArray(b?.hosts)&&b.hosts.find(C=>C);k&&nt(k)}).catch(()=>{}),Kr("/api/https-info").then(b=>b.json()).then(b=>{b&&typeof b.https=="boolean"&&de({https:!!b.https,port:Number(b.port)||8788})}).catch(()=>{})},[]);const Ss=a.useMemo(()=>{const x=S||"____",b="ws://localhost:8787";if(b.length>0)try{const J=new URL(b);return`${`${J.protocol==="wss:"?"https":"http"}://${J.host}${J.pathname.endsWith("/ws")?"":J.pathname}`.replace(/\/?ws$/i,"")}/mobile-cam.html?code=${x}`}catch{}const k=Ie||window.location.hostname,C=!!Pe?.https,X=C?Pe?.port||8788:8787;return`${C?"https":"http"}://${k}:${X}/mobile-cam.html?code=${x}`},[S,Ie,Pe]);a.useEffect(()=>{localStorage.setItem("ndn:camera:mode",le)},[le]);const[We,wt]=a.useState(null);a.useEffect(()=>{Re.getState().ignorePreferredCameraSync||We&&Date.now()-We<3e4||z==="Phone Camera"&&le!=="phone"&&Ce("phone")},[z,le,We]),a.useEffect(()=>{if(!(!Fe||De&&De!=="built-in"&&De!=="external-ws")&&i!==void 0){if(i){let x=!1;const b=z||"default",k=window.setTimeout(()=>{x||O||V().catch(C=>console.warn(`[CameraTile] Auto-start failed for ${b}:`,C))},200);return()=>{x=!0,window.clearTimeout(k)}}Oe()}},[i,O,Fe,De,z,V,Oe]),a.useEffect(()=>{const x=async()=>{try{if(!(z==="Phone Camera"&&(!We||Date.now()-We>=3e4)||le==="phone"))return;const C=I.getMediaStream(),X=T.current;if(!X||!C)return;X.srcObject!==C&&(X.srcObject=C),X.muted=!0,X.playsInline=!0;try{await X.play()}catch{}B(!0)}catch{}};x();const b=setInterval(x,800);return()=>clearInterval(b)},[z,le,I,I.isStreaming]);const V=a.useCallback(async()=>{if(le==="wifi")return Ke();if(z==="Phone Camera"||le==="phone"){const x=I.getMediaStream();if(x&&T.current)try{T.current.srcObject=x,await T.current.play(),B(!0);return}catch{}if(le==="phone")try{await Qe();return}catch{}}try{const{preferredCameraId:x,setPreferredCamera:b}=Re.getState(),k=x?{video:{deviceId:{exact:x}},audio:!1}:{video:!0,audio:!1};let C;try{C=await navigator.mediaDevices.getUserMedia(k)}catch(X){const Le=X&&(X.name||X.code)||"";if(x&&(Le==="OverconstrainedError"||Le==="NotFoundError"))C=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});else throw X}T.current&&(T.current.srcObject=C,await T.current.play(),B(!0),Z(C,"local"))}catch{}},[le,z,I,Z,Qe,Ke]),Oe=a.useCallback(()=>{T.current&&T.current.srcObject&&(T.current.srcObject.getTracks().forEach(b=>b.stop()),T.current.srcObject=null,B(!1),Z(null))},[Z]);async function Ke(){at(!0);try{const x=await il();$e(x),x.length===0&&alert("No wifi scoring devices found on your network. Make sure devices are powered on and connected to the same network.")}catch(x){console.error("Wifi device discovery failed:",x),alert("Failed to discover wifi devices. Please check your network connection.")}finally{at(!1)}}async function ee(x){try{$e(k=>k.map(C=>C.id===x.id?{...C,status:"connecting"}:C));const b=await ll(x);if(b&&T.current)T.current.srcObject=b,await T.current.play(),B(!0),Z(b,"wifi"),$e(k=>k.map(C=>C.id===x.id?{...C,status:"online"}:C));else throw new Error("Failed to get video stream")}catch(b){console.error("Failed to connect to wifi device:",b),alert(`Failed to connect to ${x.name}. Please check the device and try again.`),$e(k=>k.map(C=>C.id===x.id?{...C,status:"offline"}:C))}}async function A(){ue(!0);try{const x=await ol();Ae(x);const b=await cl();b&&Ae(k=>[...k,b]),x.length===0&&!b&&alert("No USB scoring devices found. Please connect a device and try again.")}catch(x){console.error("USB device discovery failed:",x),alert("Failed to discover USB devices. Please check device connections.")}finally{ue(!1)}}async function ne(x){try{Ae(k=>k.map(C=>C.id===x.id?{...C,status:"connecting"}:C));const b=await dl(x);if(b&&T.current)T.current.srcObject=b,await T.current.play(),B(!0),Ce("wifi"),Z(b,"wifi"),Ae(k=>k.map(C=>C.id===x.id?{...C,status:"online"}:C));else throw new Error("Failed to get video stream")}catch(b){console.error("Failed to connect to USB device:",b),alert(`Failed to connect to ${x.name}. Please check the device and try again.`),Ae(k=>k.map(C=>C.id===x.id?{...C,status:"offline"}:C))}}const be=a.useCallback(x=>{try{Ce(x==="usb"?"wifi":x),wt(Date.now());try{if(x==="local"){try{_(Je,"Local",!0)}catch{}try{U(!0)}catch{}}else if(x==="phone"){try{_(void 0,"Phone Camera",!0)}catch{}try{U(!0)}catch{}}else if(x==="wifi"||x==="usb"){try{_(void 0,"WiFi/USB",!0)}catch{}try{U(!0)}catch{}}}catch{}x==="local"?V().catch(()=>{}):x==="phone"?Qe():x==="wifi"?Ke():x==="usb"&&A()}catch(b){console.warn("[CameraTile] handleModeSelect failed",b)}},[V,Qe,Ke,A,_,U,Je]);a.useEffect(()=>{const x=b=>{try{const k=b&&b.detail&&b.detail.mode;k&&["local","phone","wifi","usb"].includes(k)?(be(k),V().catch(()=>{})):V().catch(()=>{})}catch{}};return window.addEventListener("ndn:start-camera",x),()=>{window.removeEventListener("ndn:start-camera",x)}},[V,be]);function ks(){if(K&&K.readyState===WebSocket.OPEN)return K;const x="ws://localhost:8787",b=x.length>0?x.endsWith("/ws")?x:x.replace(/\/$/,"")+"/ws":void 0,k=window.location.protocol==="https:"?"wss":"ws",C=`${k}://${window.location.host}/ws`,X=window.location.hostname,Le=X==="localhost"||X==="127.0.0.1",J=X.endsWith("onrender.com"),_t="wss://ninedartnation.onrender.com/ws";let Ue=b;Ue||(Le?Ue=`${k}://${X}:8787/ws`:J?Ue=C:Ue=_t),Ue||(Ue=C);const Gt=new WebSocket(Ue);return H(Gt),Gt}async function Qe(){Ce("phone"),we(!1);const x=ks();x.readyState===WebSocket.OPEN?x.send(JSON.stringify({type:"cam-create"})):x.onopen=()=>x.send(JSON.stringify({type:"cam-create"})),x.onmessage=async b=>{const k=JSON.parse(b.data);if(k.type==="cam-code")M(k.code),k.expiresAt&&ye(k.expiresAt);else if(k.type==="cam-peer-joined"){we(!0);const C=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});y(C),C.onicecandidate=Le=>{Le.candidate&&S&&x.send(JSON.stringify({type:"cam-ice",code:S,payload:Le.candidate}))},C.ontrack=Le=>{if(T.current){const J=Le.streams?.[0];J&&(T.current.srcObject=J,T.current.play().catch(()=>{}),B(!0))}};const X=await C.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!0});await C.setLocalDescription(X),S&&x.send(JSON.stringify({type:"cam-offer",code:S,payload:X}))}else if(k.type==="cam-answer")G&&await G.setRemoteDescription(new RTCSessionDescription(k.payload));else if(k.type==="cam-ice"&&G)try{await G.addIceCandidate(k.payload)}catch{}}}function ie(){M(null),ye(null),we(!1),K&&K.readyState===WebSocket.OPEN?K.send(JSON.stringify({type:"cam-create"})):Qe();try{U(!0)}catch{}}function St(){if(Oe(),M(null),we(!1),ye(null),G){try{G.close()}catch{}y(null)}}return e.jsx(Al,{label:n,autoStart:i,start:V,stopAll:St,startPhonePairing:Qe,startWifiConnection:Ke,startUsbConnection:A,connectToWifiDevice:ee,connectToUsbDevice:ne,videoRef:T,streaming:O,mode:le,setMode:Ce,pairCode:S,mobileUrl:Ss,regenerateCode:ie,httpsInfo:Pe,showTips:E,setShowTips:oe,wifiDevices:h,usbDevices:F,discoveringWifi:R,discoveringUsb:Be,scaleOverride:d,className:m,aspect:o,style:c,fill:f,onModeSelect:be,preferredCameraLocked:Y})}function Al(n){const i=li(),{cameraScale:d,cameraAspect:m}=Re(),{label:o,start:c,stopAll:f,startPhonePairing:T,startWifiConnection:I,startUsbConnection:O,connectToWifiDevice:B,connectToUsbDevice:K,videoRef:H,streaming:S,mode:M,setMode:G,onModeSelect:y,pairCode:se,mobileUrl:Z,regenerateCode:z,httpsInfo:le,showTips:Ce,setShowTips:ye,wifiDevices:we,usbDevices:Ie,discoveringWifi:nt,discoveringUsb:Pe,className:de,aspect:E,style:oe,fill:h,preferredCameraLocked:$e}=n,R={local:"Local",phone:"PhoneCam",wifi:"Wi-Fi/USB"},at=a.useMemo(()=>[{id:"local",title:"Local camera",description:"Use the desktop webcam or capture card.",action:()=>{y&&y("local")}},{id:"phone",title:"PhoneCam",description:"Stream from your phone via the mobile link.",action:()=>{y&&y("phone")}},{id:"wifi",title:"Wi-Fi/USB",description:"Connect to scoring devices on your local network.",action:()=>{y&&y("wifi")}},{id:"usb",title:"USB",description:"Connect a USB capture device (treated like WiFi mode).",action:()=>{y&&y("usb")}}],[G,c,T,I,O]),[F,Ae]=a.useState(null),Be=a.useRef(null);a.useEffect(()=>()=>{Be.current&&window.clearTimeout(Be.current)},[]);const{cameraFitMode:ue}=Re(),De=h?"fill":ue||"fill",Fe=(()=>{const A=Number(n.scaleOverride??d??1),ne=Math.max(.5,Math.min(1.25,A));return De==="fill"?Math.max(1,ne):ne})(),U=h&&De==="fill"?"free":E&&E!=="inherit"?E:m||"wide",Y=U!=="free",_=Y?U==="square"?"aspect-square":U==="portrait"?"aspect-[3/4]":U==="classic"?"aspect-[4/3]":"aspect-video":"",Ss=[h?"rounded-3xl overflow-hidden bg-transparent w-full flex flex-col shadow-2xl border border-slate-700/30":"rounded-3xl overflow-hidden bg-transparent w-full mx-auto flex flex-col shadow-2xl border border-slate-700/30",de].filter(Boolean).join(" ").trim(),We={...oe||{}},wt=h?"relative flex-1 min-h-[420px] bg-black":"relative w-full bg-black",V={style:{transform:`scale(${Fe})`,transformOrigin:"center"}},Oe=M==="wifi"&&Ie.some(A=>A.status==="online"),Ke=(()=>{const ne=De==="fit"?"absolute inset-0 w-full h-full object-contain object-center bg-transparent":"absolute inset-0 w-full h-full object-cover object-center bg-transparent";return h?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:`relative w-full max-w-full max-h-full ${_}`,children:e.jsx("video",{ref:H,className:ne,...V})})}):e.jsx("video",{ref:H,className:ne,...V}):Y?e.jsx("div",{className:`relative w-full ${_}`,children:e.jsx("video",{ref:H,className:ne,...V})}):e.jsx("div",{className:"relative w-full",children:e.jsx("video",{ref:H,className:ne,...V})})})();async function ee(A,ne){if(A)try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(A);else{const be=document.createElement("textarea");be.value=A,be.style.position="fixed",be.style.opacity="0",document.body.appendChild(be),be.focus(),be.select(),document.execCommand("copy"),document.body.removeChild(be)}Ae(ne),Be.current&&window.clearTimeout(Be.current),Be.current=window.setTimeout(()=>Ae(null),1500)}catch(be){console.warn("Copy to clipboard failed:",be),Ae(null)}}return e.jsxs("div",{className:Ss,style:We,children:[e.jsxs("div",{className:wt,children:[Ke,i.isStreaming&&M==="phone"&&e.jsxs("div",{className:"absolute top-4 left-4 z-10 flex items-center gap-2 px-3 py-1.5 rounded-full bg-black/70 backdrop-blur border border-rose-500/60 text-xs text-rose-200 font-semibold shadow-lg",children:[e.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full bg-rose-500 animate-pulse"}),e.jsx("span",{children:"REC"})]})]}),e.jsxs("div",{className:"px-3 py-2 flex items-center justify-between bg-gradient-to-r from-slate-900 to-slate-800 text-white text-[11px] gap-2 border-t border-slate-700/50",children:[e.jsxs("span",{className:"truncate font-medium",children:[o||(S?M==="phone"?"PHONE LIVE":M==="wifi"?"WIFI LIVE":"LIVE":"Camera"),$e&&e.jsx("span",{className:"ml-2 text-xs opacity-80",children:"ðŸ”’"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!S&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`px-2 py-1 rounded-md text-xs font-semibold transition-all ${M==="local"?"bg-emerald-500 text-white":"bg-slate-700 text-slate-200 hover:bg-slate-600"}`,onClick:()=>y("local"),children:"Local"}),e.jsx("button",{className:`px-2 py-1 rounded-md text-xs font-semibold transition-all ${M==="phone"?"bg-emerald-500 text-white":"bg-slate-700 text-slate-200 hover:bg-slate-600"}`,onClick:()=>y("phone"),children:"Phone"}),e.jsx("button",{className:`px-2 py-1 rounded-md text-xs font-semibold transition-all ${M==="wifi"?"bg-emerald-500 text-white":"bg-slate-700 text-slate-200 hover:bg-slate-600"}`,onClick:()=>y("wifi"),children:"WiFi"}),e.jsx("button",{className:`px-2 py-1 rounded-md text-xs font-semibold transition-all ${M==="wifi"?"bg-emerald-500 text-white":"bg-slate-700 text-slate-200 hover:bg-slate-600"}`,onClick:()=>y("usb"),children:"USB"})]}),S?e.jsx("button",{className:"px-2 py-1 rounded-md text-xs font-semibold bg-rose-500 text-white hover:bg-rose-600 transition-all",onClick:f,children:"Stop"}):null]})]}),M==="phone"&&se&&!S&&e.jsxs("div",{className:"p-2 text-white text-[10px] bg-black/50",children:[e.jsx("div",{className:"text-xs opacity-80",children:"Launch on your mobile:"}),e.jsxs("button",{type:"button",className:"mt-1 w-full text-left px-2 py-1 rounded bg-white/5 border border-white/10 hover:bg-white/10 transition flex items-center gap-2",onClick:()=>ee(Z,"link"),title:"Copy mobile camera link",children:[e.jsx("span",{className:"flex-1 min-w-0 font-mono break-all",children:Z}),e.jsx("span",{className:"text-[9px] uppercase tracking-wide whitespace-nowrap text-emerald-200",children:F==="link"?"Copied!":"Copy"})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("a",{href:Z,target:"_blank",rel:"noreferrer",className:"px-2 py-1 rounded border border-indigo-500/30 text-indigo-100 hover:bg-indigo-500/20 transition",children:"Open link"}),e.jsxs("button",{type:"button",className:"flex-1 text-left px-2 py-1 rounded bg-white/5 border border-white/10 hover:bg-white/10 transition flex items-center justify-between gap-2",onClick:()=>ee(se,"code"),title:"Copy pairing code",children:[e.jsx("span",{className:"font-mono tracking-[0.3em] text-sm",children:se}),e.jsx("span",{className:"text-[9px] uppercase tracking-wide whitespace-nowrap text-emerald-200",children:F==="code"?"Copied!":"Copy"})]})]}),e.jsx("div",{className:"mt-1 flex items-center gap-2",children:e.jsx("button",{className:"px-1 py-0.5 rounded bg-slate-700",onClick:z,children:"Regenerate"})}),Ce&&e.jsxs("div",{className:"mt-2 p-2 rounded bg-slate-900/60 border border-slate-700/50 text-slate-200",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Troubleshooting"}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsx("li",{children:"Phone and desktop must be on the same Wiâ€‘Fi network."}),e.jsxs("li",{children:["Allow the server through your firewall (ports 8787 and"," ",le?.https?le.port:8788,")."]}),e.jsx("li",{children:"On iPhone, use HTTPS links (QR will prefer https when enabled)."})]}),e.jsx("div",{className:"mt-2 text-right",children:e.jsx("button",{className:"btn btn--ghost px-2 py-1 text-xs",onClick:()=>ye(!1),children:"Hide tips"})})]})]}),M==="wifi"&&!S&&e.jsxs("div",{className:"p-2 text-white text-[10px] bg-black/50",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Scoring Devices"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"font-medium mb-1",children:"WiFi Devices"}),nt?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),e.jsx("span",{children:"Scanning network..."})]}):we.length>0?e.jsxs("div",{className:"space-y-1",children:[we.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-1 rounded bg-slate-900/60",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:A.name}),e.jsxs("div",{className:"opacity-70 text-[9px]",children:[A.ip,":",A.port]})]}),e.jsx("button",{className:`px-1 py-0.5 rounded text-[9px] ${A.status==="connecting"?"bg-yellow-600":A.status==="online"?"bg-green-600":"bg-blue-600"}`,onClick:()=>B(A),disabled:A.status==="connecting",children:A.status==="connecting"?"...":"Connect"})]},A.id)),e.jsx("div",{className:"text-center mt-2",children:e.jsx("button",{className:"px-1 py-0.5 rounded bg-slate-700 text-[9px]",onClick:I,children:"Rescan WiFi"})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-1 opacity-70",children:"No WiFi devices found"}),e.jsx("button",{className:"px-1 py-0.5 rounded bg-slate-700 text-[9px]",onClick:I,children:"Scan WiFi"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-1",children:"USB Devices"}),Pe?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),e.jsx("span",{children:"Scanning USB..."})]}):Ie.length>0?e.jsxs("div",{className:"space-y-1",children:[Ie.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-1 rounded bg-slate-900/60",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:A.name}),e.jsx("div",{className:"opacity-70 text-[9px]",children:A.type.toUpperCase()})]}),e.jsx("button",{className:`px-1 py-0.5 rounded text-[9px] ${A.status==="connecting"?"bg-yellow-600":A.status==="online"?"bg-green-600":"bg-blue-600"}`,onClick:()=>K(A),disabled:A.status==="connecting",children:A.status==="connecting"?"...":"Connect"})]},A.id)),e.jsx("div",{className:"text-center mt-2",children:e.jsx("button",{className:"px-1 py-0.5 rounded bg-slate-700 text-[9px]",onClick:O,children:"Rescan USB"})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-1 opacity-70",children:"No USB devices found"}),e.jsx("button",{className:"px-1 py-0.5 rounded bg-slate-700 text-[9px]",onClick:O,children:"Scan USB"})]})]})]}),!S&&e.jsxs("div",{className:"mt-3 p-3 rounded-2xl bg-white border border-slate-200 shadow-sm text-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:"Camera modes"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Reconnect camera"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Current: ",R[M]||"Local"]})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Tap a mode to restart the feed or switch inputs."}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:at.map(A=>{const ne=A.id==="usb"?Oe:A.id===M;return e.jsxs("button",{type:"button",onClick:A.action,className:`text-left p-3 rounded-2xl border ${ne?"border-emerald-500 bg-emerald-50 shadow":"border-slate-200 bg-white/80 hover:bg-slate-50"} transition`,children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:A.title}),e.jsx("div",{className:"text-[11px] text-slate-600 mt-1",children:A.description}),ne&&e.jsx("div",{className:"text-[10px] text-emerald-500 mt-2",children:"Active"})]},A.id)})})]})]})}function qr(n,i,d,m){const o=(m-90)*Math.PI/180;return{x:n+d*Math.cos(o),y:i+d*Math.sin(o)}}function Yr(n){return[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5].indexOf(n)*18+9}function Ll({width:n=320,height:i=320}){const d=ul(o=>o.samples),m=a.useRef(null);return a.useEffect(()=>{const o=m.current;if(!o)return;const c=o.getContext("2d");if(!c)return;o.width=n,o.height=i,c.clearRect(0,0,n,i);const f=n/2,T=i/2,I=Math.min(n,i)/(Nt.doubleOuter*2+20),O={bullInner:Nt.bullInner*I,bullOuter:Nt.bullOuter*I,trebleInner:Nt.trebleInner*I,trebleOuter:Nt.trebleOuter*I,doubleInner:Nt.doubleInner*I,doubleOuter:Nt.doubleOuter*I};c.strokeStyle="rgba(255,255,255,0.06)",c.lineWidth=1;const B=["doubleOuter","doubleInner","trebleOuter","trebleInner","bullOuter","bullInner"];for(const S of B)c.beginPath(),c.arc(f,T,O[S],0,Math.PI*2),c.stroke();const K=[];for(const S of d){let M=Math.random()*360,G=Math.random()*O.doubleOuter;typeof S.sector=="number"&&S.sector>=1&&S.sector<=20&&(M=Yr(S.sector),S.ring==="DOUBLE"?G=(O.doubleInner+O.doubleOuter)/2:S.ring==="TRIPLE"?G=(O.trebleInner+O.trebleOuter)/2:S.ring==="INNER_BULL"?G=O.bullInner*.5:S.ring==="BULL"?G=O.bullOuter*.8:G=(O.trebleOuter+O.doubleInner)/2*(.6+Math.random()*.4));const y=qr(f,T,G,M);K.push({x:y.x,y:y.y,w:1})}for(const S of K){const M=c.createRadialGradient(S.x,S.y,1,S.x,S.y,60);M.addColorStop(0,"rgba(255,0,0,0.9)"),M.addColorStop(.3,"rgba(255,100,0,0.5)"),M.addColorStop(1,"rgba(255,100,0,0)"),c.fillStyle=M,c.beginPath(),c.arc(S.x,S.y,60,0,Math.PI*2),c.fill()}c.fillStyle="rgba(255,255,255,0.85)",c.font="12px ui-sans-serif";const H={};for(const S of d)S.sector&&(H[S.sector]=(H[S.sector]||0)+1);for(const S of Object.keys(H)){const M=Number(S),G=Yr(M),y=qr(f,T,O.trebleOuter+18,G);c.fillText(String(H[M]),y.x-6,y.y+4)}},[d,n,i]),e.jsx("canvas",{ref:m,style:{width:"100%",height:"auto",borderRadius:8,background:"#081018"}})}const nn=[...Array.from({length:20},(n,i)=>({label:`D${i+1}`,score:(i+1)*2})),{label:"DBULL",score:50,isBull:!0}];function Jr(n,i){const d=nn[i];return!!d&&n===d.score}function Kt(n){const i=n.trim().toUpperCase();if(!i)return null;if(i==="50"||i==="BULL"||i==="DBULL"||i==="IBULL")return 50;if(i==="25"||i==="OBULL")return 25;const d=i.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!d)return null;const m=d[1]||"S",o=parseInt(d[2],10);return o<1||o>20?null:o*(m==="S"?1:m==="D"?2:3)}const ut=[...Array.from({length:20},(n,i)=>i+1),25,50],ua=[20,19,18,17,16,15,25];function ea(){const n={};return ua.forEach(i=>{n[i]=0}),{marks:n,points:0}}function El(n,i,d,m,o=()=>!1){let c=null,f=0;if(d==="BULL"||d==="INNER_BULL"||i===25||i===50)c=25,f=d==="INNER_BULL"||i===50?2:1;else if(typeof m=="number"&&m>=15&&m<=20)c=m,d==="TRIPLE"?f=3:d==="DOUBLE"?f=2:f=1;else if(i){const S=[20,19,18,17,16,15];for(const M of S){if(i===M){c=M,f=1;break}if(i===M*2){c=M,f=2;break}if(i===M*3){c=M,f=3;break}}!c&&(i===25||i===50)&&(c=25,f=i===50?2:1)}if(!c)return 0;const T=n.marks[c],I=Math.max(0,3-T),O=Math.min(I,f),B=Math.max(0,f-O),K=T+O;n.marks[c]=K>3?3:K;let H=0;return B>0&&!o(c)&&(c===25?d==="INNER_BULL"?H+=50*B:H+=25*B:H+=c*B),n.points+=H,H}function Rl(n){return ua.every(i=>(n.marks[i]||0)>=3)}function ta(){return{round:1,score:0,finished:!1,shanghaiAchieved:!1,turnHits:{singles:0,doubles:0,triples:0}}}function Il(n){return n.round}function Pl(n,i,d,m){if(n.finished)return 0;const o=Il(n);let c=0;return typeof m=="number"&&m===o?d==="TRIPLE"?(c=o*3,n.turnHits.triples++):d==="DOUBLE"?(c=o*2,n.turnHits.doubles++):d==="SINGLE"&&(c=o*1,n.turnHits.singles++):!m&&(i===o||i===o*2||i===o*3)&&(i===o*3?(c=o*3,n.turnHits.triples++):i===o*2?(c=o*2,n.turnHits.doubles++):i===o&&(c=o,n.turnHits.singles++)),n.score+=c,c}function Bl(n){if(!n.finished){if(n.turnHits.singles>0&&n.turnHits.doubles>0&&n.turnHits.triples>0){n.shanghaiAchieved=!0,n.finished=!0;return}const i=n.round+1;i>20?n.finished=!0:n.round=i}n.turnHits={singles:0,doubles:0,triples:0}}function sa(){return{stage:0,targets:[{kind:"NUMBER",num:20},{kind:"DOUBLE",num:16},{kind:"TRIPLE",num:14},{kind:"NUMBER",num:19},{kind:"BULL"},{kind:"ANY_NUMBER"}],score:0,finished:!1,hitThisRound:!1}}function oi(n){return n.targets[n.stage]||null}function Fl(n,i,d,m){if(n.finished)return 0;const o=oi(n);if(!o)return 0;let c=0;switch(o.kind){case"NUMBER":{typeof m=="number"&&m===o.num?d==="TRIPLE"?c=o.num*3:d==="DOUBLE"?c=o.num*2:d==="SINGLE"&&(c=o.num):!m&&(i===o.num||i===o.num*2||i===o.num*3)&&(c=i),c>0&&(n.hitThisRound=!0);break}case"DOUBLE":{(d==="DOUBLE"&&m===o.num||i===o.num*2)&&(c=o.num*2,n.hitThisRound=!0);break}case"TRIPLE":{(d==="TRIPLE"&&m===o.num||i===o.num*3)&&(c=o.num*3,n.hitThisRound=!0);break}case"BULL":{(d==="BULL"||d==="INNER_BULL"||i===25||i===50)&&(c=d==="INNER_BULL"||i===50?50:25,n.hitThisRound=!0);break}case"ANY_NUMBER":{i>0&&(c=i,n.hitThisRound=!0);break}}return n.score+=c,c}function Ol(n){n.finished||(n.hitThisRound||(n.score=Math.floor(n.score/2)),n.hitThisRound=!1,n.stage+=1,n.stage>=n.targets.length&&(n.finished=!0))}function na(){return{round:1,score:0,target:"HIGH",finished:!1}}function Ul(n,i,d,m){if(n.finished)return 0;let o=0;if(n.target==="HIGH")if(d==="INNER_BULL")o=50;else if(typeof m=="number"){const f=m*(d==="TRIPLE"?3:d==="DOUBLE"?2:1);m>=20&&(o=f)}else i>=40&&(o=i);else if(typeof m=="number"){const f=m*(d==="TRIPLE"?3:d==="DOUBLE"?2:1);m<=10&&(o=f)}else i>0&&i<=30&&(o=i);return n.score+=o,o}function Hl(n){if(!n.finished){if(n.round+=1,n.round>10){n.finished=!0;return}n.target=n.target==="HIGH"?"LOW":"HIGH"}}function Vl(n,i=3){return{number:n,lives:i,isKiller:!1,eliminated:!1}}function $l(n){const i=Array.from({length:20},(m,o)=>o+1),d={};for(const m of n){const o=Math.floor(Math.random()*i.length),c=i.splice(o,1)[0];d[m]=c}return d}function Qr(n,i,d,m){const o=i[n];if(!o||!m||!d)return{becameKiller:!1};if(!o.isKiller&&d==="DOUBLE"&&m===o.number)return o.isKiller=!0,{becameKiller:!0};if(o.isKiller&&(d==="DOUBLE"||d==="TRIPLE")){const c=Object.keys(i).find(f=>f!==n&&!i[f].eliminated&&i[f].number===m);if(c){const f=i[c],T=d==="TRIPLE"?2:1;return f.lives=Math.max(0,f.lives-T),f.lives===0&&(f.eliminated=!0),{becameKiller:!1,victimId:c,livesRemoved:T}}}return{becameKiller:!1}}function Zr(n){const i=Object.entries(n).filter(([,d])=>!d.eliminated&&d.lives>0);return i.length===1?i[0][0]:null}function ei(){return{inning:1,score:0,dartsThisInning:0,finished:!1}}function Wl(n,i,d,m){if(n.finished)return 0;let o=0;if(typeof m=="number"&&m===n.inning?d==="TRIPLE"?o=3:d==="DOUBLE"?o=2:o=1:!m&&(i===n.inning||i===n.inning*2||i===n.inning*3)&&(o=i===n.inning*3?3:i===n.inning*2?2:1),n.score+=o,n.dartsThisInning+=1,n.dartsThisInning>=3){const c=n.inning+1;c>9?n.finished=!0:(n.inning=c,n.dartsThisInning=0)}return o}const Kl={1:5,2:20,3:1,4:18,5:4,6:13,7:6,8:10,9:15,10:2,11:17,12:3,13:19,14:7,15:16,16:8,17:11,18:14};function ti(){return{hole:1,strokes:0,dartsThisHole:0,finished:!1}}function _l(n,i,d,m){if(n.finished)return!1;const o=Kl[n.hole];if(n.dartsThisHole+=1,typeof m=="number"&&m===o&&(d==="SINGLE"||d==="DOUBLE"||d==="TRIPLE")||!m&&(i===o||i===o*2||i===o*3)){n.strokes+=n.dartsThisHole;const f=n.hole+1;return f>18?n.finished=!0:(n.hole=f,n.dartsThisHole=0),!0}if(n.dartsThisHole>=3){n.strokes+=3;const f=n.hole+1;f>18?n.finished=!0:(n.hole=f,n.dartsThisHole=0)}return!1}const ci={0:{type:"NUM",num:20},1:{type:"NUM",num:19},2:{type:"NUM",num:18},3:{type:"NUM",num:17},4:{type:"BULL"},5:{type:"NUM",num:16},6:{type:"NUM",num:15},7:{type:"NUM",num:14},8:{type:"NUM",num:13}};function si(){return{board:Array(9).fill(null),turn:"X",finished:!1,winner:null}}function Gl(n){const i=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[d,m,o]of i)if(n[d]&&n[d]===n[m]&&n[d]===n[o])return n[d];return n.every(d=>d)?"Draw":null}function zl(n,i,d,m,o){if(n.finished||n.board[i])return!1;const c=ci[i];let f=!1;if(c.type==="BULL"?f=m==="BULL"||m==="INNER_BULL"||d===25||d===50:c.type==="NUM"&&typeof c.num=="number"&&(typeof o=="number"&&o===c.num||!o&&(d===c.num||d===c.num*2||d===c.num*3))&&(f=!0),!f)return!1;n.board[i]=n.turn;const T=Gl(n.board);return T?(n.finished=!0,n.winner=T,!0):(n.turn=n.turn==="X"?"O":"X",!0)}function ra(){return{targetIndex:0,darts:0,finished:!1}}const di=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25],aa=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","Bull"];function Xl(n){return di[n.targetIndex]}function ia(n,i,d){if(n.finished)return n;const m=Xl(n);if(!(d==="SINGLE"&&i===m||d==="DOUBLE"&&i===m||d==="TRIPLE"&&i===m||d==="INNER_BULL"&&m===25))return n;const c=n.targetIndex+1,f=c>=di.length;return{targetIndex:c,darts:n.darts+1,finished:f}}function ni(n,i){return ia(n,i,"SINGLE")}function ql(){return ra()}function la(n=50){return{score:0,darts:0,finished:!1,target:n}}const Yl=[5,10,15,20,25,50];function Jl(n){return Yl.includes(n)}function oa(n,i,d){if(n.finished)return n;if(!Jl(i))return{...n,darts:n.darts+1};const m=n.score+i,o=m>=n.target;return{score:o?n.target:m,darts:n.darts+1,finished:o,target:n.target}}function ai(n,i){return oa(n,i)}function Ql(n=50){return la(n)}function ca(n=70){return{score:0,darts:0,finished:!1,target:n}}const Zl=[7,14,21];function eo(n){return Zl.includes(n)}function da(n,i,d){if(n.finished)return n;if(!eo(i))return{...n,darts:n.darts+1};const m=n.score+i,o=m>=n.target;return{score:o?n.target:m,darts:n.darts+1,finished:o,target:n.target}}function ri(n,i){return da(n,i)}function to(n=70){return ca(n)}const ma=[20,19,18,17,16,15,14,13,12,25];function ii(){const n={};return ma.forEach(i=>{n[i]=0}),{marks:n,points:0}}function so(n,i,d,m,o=()=>!1){let c=null,f=0;if(d==="BULL"||d==="INNER_BULL"||i===25||i===50)c=25,f=d==="INNER_BULL"||i===50?2:1;else if(typeof m=="number"&&m>=12&&m<=20)c=m,d==="TRIPLE"?f=3:d==="DOUBLE"?f=2:f=1;else if(i){for(const S of[20,19,18,17,16,15,14,13,12]){if(i===S){c=S,f=1;break}if(i===S*2){c=S,f=2;break}if(i===S*3){c=S,f=3;break}}!c&&(i===25||i===50)&&(c=25,f=i===50?2:1)}if(!c)return 0;const T=n.marks[c],I=Math.max(0,3-T),O=Math.min(I,f),B=Math.max(0,f-O),K=T+O;n.marks[c]=K>3?3:K;let H=0;return B>0&&!o(c)&&(c===25?d==="INNER_BULL"?H+=50*B:H+=25*B:H+=c*B),n.points+=H,H}function no(n){return ma.every(i=>(n.marks[i]||0)>=3)}function Me(n){return(i,d)=>{n(i)}}function ao(n){const{match:i,commitManualVisitTotal:d,endTurn:m}=n;return{addVisit:(o,c=3,f)=>{if(d){d(o);return}try{i.addVisit(o,c,f)}catch{i.addVisit(o,c)}},undoVisit:()=>{i.undoVisit()},nextPlayer:()=>{if(m)try{m(0)}catch{i.nextPlayer()}else i.nextPlayer()},endLeg:o=>{typeof o=="number"?i.endLeg(o):i.endLeg(0)},endGame:()=>{i.endGame()}}}function yt(n,i,d,m,o,c,f,T,I,O,B,K,H,S,M,G,y,se,Z,z,le,Ce,ye,we,Ie,nt,Pe){return a.useMemo(()=>{const de=[];if(n==="X01"){let E=0,oe=0,h=0;if(se&&se.length>0){for(const ue of se)ue.dartsThrown&&ue.totalScored&&(oe+=ue.dartsThrown,h+=ue.totalScored);oe>0&&(E=h/oe*3)}const Be=(K??0)>0?T??0:O??null??(c??0);if(de.push({name:"You",isCurrentTurn:!!Z,legsWon:m||0,score:i||0,lastScore:Be,checkoutRate:M&&M>0?Math.round((S||0)/M*100):0,bestLeg:se&&se.length>0?`${Math.min(...se.map(ue=>ue.doubleDarts+(ue.checkoutDarts||0)))||0} darts`:"â€”",matchAvg:E,allTimeAvg:ml("You")||0}),z&&z!=="None"){const _=(H??0)>0?I??0:B??null??(f??0);de.push({name:`${z} AI`,isCurrentTurn:!Z,legsWon:o||0,score:d||0,lastScore:_,checkoutRate:y&&y>0?Math.round((G||0)/y*100):0,bestLeg:"â€”"})}}return n==="Cricket"&&(de.push({name:"You",isCurrentTurn:!!Z,closed:Ce?.marks||{},points:Ce?.points||0}),z&&z!=="None"&&de.push({name:`${z} AI`,isCurrentTurn:!Z,closed:{},points:0})),n==="Shanghai"&&(de.push({name:"You",isCurrentTurn:!!Z,round:ye?.round||1,target:ye?.target||1,score:ye?.score||0}),z&&z!=="None"&&de.push({name:`${z} AI`,isCurrentTurn:!Z,round:ye?.round||1,target:ye?.target||1,score:0})),n==="Killer"&&we&&we.length>0&&we.forEach((E,oe)=>{const h=Ie?.[E.id];de.push({name:E.name,isCurrentTurn:oe===Pe,number:nt?.[E.id],lives:h?.lives||0,eliminated:h?.eliminated||!1})}),de},[n,i,d,m,o,c,f,T,I,O,B,K,H,S,M,G,y,se,Z,z,Ce,ye,we,Ie,nt,Pe])}const ro=["Easy","Medium","Hardened"];function Ye(n,i,d){return Math.max(i,Math.min(d,n))}const io=6500;function lo(n,i){let d=0;if(i==="Easy"){const m=[22,26,41,45,60];d=m[Math.floor(Math.random()*m.length)]}else i==="Medium"?d=Math.round(Ye(60+(Math.random()*30-15),30,100)):d=Math.round(Ye(80+(Math.random()*20-10),50,120));return n<=0?0:d>n?[100,85,81,60,57,45,41,26,22,20,1].find(o=>o<=n)??0:d}function oo({onClose:n}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"card max-w-lg w-full relative",children:[e.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:n,children:"Close"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"X01 Rules & Regulations"}),e.jsxs("ul",{className:"list-disc pl-5 text-left mb-2",children:[e.jsx("li",{children:"Double In: Start scoring only after hitting a double."}),e.jsx("li",{children:"Double Out: Finish the game by hitting a double to reach exactly zero."}),e.jsx("li",{children:"Best Of: Play a set number of legs, winner is first to reach majority."}),e.jsx("li",{children:"First To: Play until a player reaches a set number of legs."}),e.jsx("li",{children:"No Cheating: All scores must be valid, no manual score changes mid-leg."}),e.jsx("li",{children:"Competitive Standard: Follow latest WDF/PDC rules for match play."})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"For full details, see official darts governing body rules."})]})})}const co="http://localhost:8787";function Lo({user:n}){const{offlineLayout:i,favoriteDouble:d,callerEnabled:m,callerVoice:o,callerVolume:c,speakCheckoutOnly:f,rememberLastOffline:T,setLastOffline:I,autoStartOffline:O,cameraScale:B,setCameraScale:K,cameraAspect:H="wide",setCameraAspect:S,cameraFitMode:M="fill",setCameraFitMode:G,cameraEnabled:y,textSize:se,boxSize:Z,autoscoreProvider:z,autoCommitMode:le="wait-for-clear",matchType:Ce="singles",setMatchType:ye,teamAName:we="Team A",setTeamAName:Ie,teamBName:nt="Team B",setTeamBName:Pe}=Re(),de=z==="manual",E=y&&!de,oe=y&&!de&&le!=="immediate",[h,$e]=a.useState("X01"),[R,at]=a.useState(501),[F,Ae]=a.useState("None"),[Be,ue]=a.useState(!1),[De,Fe]=a.useState(!1),[U,Y]=a.useState(R),[_,Je]=a.useState(R),[Ss,We]=a.useState(!1),[wt,V]=a.useState(!1),[Oe,Ke]=a.useState(1),[ee,A]=a.useState(0),ne=xl(),[be,ks]=a.useState(!1),Qe=a.useRef(!1),[ie,St]=a.useState(0),[x,b]=a.useState(null),[k,C]=a.useState(1),[X,Le]=a.useState(1),[J,_t]=a.useState([]),[Ue,Gt]=a.useState(2e3),rt=hl(),[an,kt]=a.useState(!1),[ui,zt]=a.useState(!1),mi=fl(t=>t.setPaused);a.useEffect(()=>{const t=()=>{kt(!1),Fe(!1),zt(!1)};try{window.addEventListener("ndn:match-quit",t)}catch{}return()=>{try{window.removeEventListener("ndn:match-quit",t)}catch{}}},[]);const[Xt,xa]=a.useState(i==="modern"),[qt,ha]=a.useState(i==="modern");a.useEffect(()=>{xa(i==="modern"),ha(i==="modern")},[i]),a.useEffect(()=>{M!=="fit"&&G("fit")},[M,G]);const[Cs,fa]=a.useState(1),[uo,pa]=a.useState(!1),[te,Yt]=a.useState(!0);a.useEffect(()=>{const t=()=>Bt(!0);return window.addEventListener("ndn:open-camera-manager",t),()=>window.removeEventListener("ndn:open-camera-manager",t)},[]);const[P,L]=a.useState(0),[Jt,rn]=a.useState(0),[ln,on]=a.useState(0),[mt,ba]=a.useState(0),[ga,va]=a.useState(0),[Qt,cn]=a.useState(ea()),[Ds,Ts]=a.useState(ta()),[Zt,Ms]=a.useState(sa()),[As,Ls]=a.useState(na()),[mo,Ee]=a.useState(0),[ja,Na]=a.useState(1),[xi,dn]=a.useState(27),[xo,ya]=a.useState(0),[hi,un]=a.useState(0),[wa,Sa]=a.useState(!1),[ka,Ca]=a.useState(1),[fi,Da]=a.useState(0),[ho,Ta]=a.useState(0),pi=8,[Ma,Aa]=a.useState(1),[bi,La]=a.useState(0),[fo,Ea]=a.useState(0),gi=10,[Ra,Ia]=a.useState(1),[vi,Pa]=a.useState(0),[po,Ba]=a.useState(0),ji=10,[mn,xn]=a.useState(170),[Fa,Oa]=a.useState(0),[Ua,Ha]=a.useState(0),[Va,$a]=a.useState(0),[hn,fn]=a.useState(121),[Wa,Ka]=a.useState(0),[_a,Ga]=a.useState(0),[za,Xa]=a.useState(0),[xt,pn]=a.useState(20),[bn,gn]=a.useState(0),[qa,vn]=a.useState(0),[es,Ni]=a.useState(30),[Ya,jn]=a.useState(!1),[Ja,Qa]=a.useState(ei()),[Za,er]=a.useState(ti()),[ht,tr]=a.useState(si()),[Nn,sr]=a.useState(ii()),[Q,yn]=a.useState([{id:"p1",name:"Player 1"},{id:"p2",name:"Player 2"}]),[ts,ss]=a.useState({}),[Es,wn]=a.useState({}),[nr,Sn]=a.useState(!1),[_e,Ct]=a.useState(0),[bo,Dt]=a.useState(0),[Tt,ns]=a.useState(null),[yi,Ze]=a.useState(""),[Rs,go]=a.useState(ra()),[ft,as]=a.useState(ra()),[rs,vo]=a.useState(la(50)),[He,is]=a.useState(la(50)),[ls,jo]=a.useState(ca(70)),[Ve,os]=a.useState(ca(70)),[Is,pt]=a.useState(0),[et,it]=a.useState(0),[ae,me]=a.useState(0),[kn,cs]=a.useState(R),[Ge,Se]=a.useState(0),[Mt,tt]=a.useState(null),[Ps,ge]=a.useState(0),bt=a.useRef(0),wi=a.useRef(0),xe=a.useRef(U),he=a.useRef(ae),ve=a.useRef(Ge),gt=a.useRef(kn),fe=a.useRef(Ps);a.useEffect(()=>{xe.current=U},[U]),a.useEffect(()=>{he.current=ae},[ae]),a.useEffect(()=>{ve.current=Ge},[Ge]),a.useEffect(()=>{gt.current=kn},[kn]),a.useEffect(()=>{fe.current=Ps},[Ps]);const[Si,ds]=a.useState(0);a.useRef(null);const[Bs,Cn]=a.useState(0),[vt,Fs]=a.useState(0),[At,jt]=a.useState(0),[Lt,st]=a.useState(0),[Et,Rt]=a.useState(null),[Dn,It]=a.useState(0),[us,ms]=a.useState(0),[Tn,Os]=a.useState(0),[xs,ar]=a.useState(0),[Mn,rr]=a.useState(0),[hs,Pt]=a.useState(0),[fs,ir]=a.useState(0),[An,ps]=a.useState(0),[Ln,lr]=a.useState(0),[or,Us]=a.useState(0),[ki,Hs]=a.useState(0),[Ci,Vs]=a.useState(0),[cr,En]=a.useState(0),[Di,Rn]=a.useState(0),[Ti,In]=a.useState(0),[Mi,$s]=a.useState(0),[Ai,dr]=a.useState(0),[Li,Pn]=a.useState(!1),[pe,ce]=a.useState(""),[Bn,bs]=a.useState(""),[No,yo]=a.useState(""),[ur,mr]=a.useState(""),[xr,Fn]=a.useState(""),[hr,On]=a.useState(""),[Ws,Un]=a.useState(null),[Ei,Bt]=a.useState(!1),[Ri,fr]=a.useState({}),[Ii,gs]=a.useState(!1),lt=a.useRef(null),Hn=a.useRef(null),ze=a.useCallback(()=>{const t=Hn.current;t&&(clearTimeout(t),Hn.current=null)},[]),Ks=a.useCallback(t=>{if(!m)return;const s=n?.username||"Player";try{sn(s,t.visitTotal,Math.max(t.remaining,0),o,{volume:c,checkoutOnly:f})}catch{}},[m,o,c,f,n?.username]),_s=a.useCallback((t,s)=>{gs(!1);const{visitTotal:r,darts:l,preRemaining:u,remaining:j,doubleAttempts:v,finished:D,doubleWindow:g,highestCheckout:N}=t;D?(Y(0),xe.current=0,typeof N=="number"&&N>0&&$s(p=>Math.max(p,N))):(Y(j),xe.current=j),tt(r),r===180?Us(p=>p+1):r>=140?Hs(p=>p+1):r>=100&&Vs(p=>p+1),g&&v>0&&(ms(p=>p+v),D&&Os(p=>p+1)),t.announced||Ks(t);try{ys.getState().recordVisit("offline-x01",l,r,{preRemaining:u,postRemaining:D?0:j,finish:D,bust:!1})}catch{}D&&(b("player"),V(!0)),Wt(D?0:j),Se(0),ve.current=0,me(0),he.current=0,ge(0),fe.current=0},[Wt,$s,b,Y,tt,Se,me,ge,V,Us,Hs,Vs,ms,Os,Ks]),Ft=a.useCallback(t=>{const s=lt.current;s&&(lt.current=null,ze(),_s(s,t))},[ze,_s]),pr=a.useCallback(t=>{Ks(t),lt.current={...t,announced:!0},gs(!0),ze(),Hn.current=setTimeout(()=>Ft("timeout"),io)},[ze,Ft,Ks]);a.useEffect(()=>{if(!oe)return;const t=()=>Ft("event");return window.addEventListener("ndn:darts-cleared",t),()=>window.removeEventListener("ndn:darts-cleared",t)},[oe,Ft]),a.useEffect(()=>{oe||Ft("timeout")},[oe,Ft]),a.useEffect(()=>()=>ze(),[ze]),a.useEffect(()=>{if(ae===0){try{window.dispatchEvent(new CustomEvent("ndn:darts-cleared",{detail:{source:"offline-play",ts:Date.now()}}))}catch{}bt.current=0}wi.current=ae},[ae]);const ot=n?.username||"Player 1",Ot=F==="None"?"Player 2":F,Gs=yt("X01",U,_,ee,ie,et,vt,Ge,At,Mt,Et,ae,Lt,Tn,us,Mn,xs,J,te,F),Pi=yt("Cricket",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Qt),Bi=yt("Shanghai",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,te,F,void 0,Qt,Ds),Fi=yt("Killer",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Q,ts,Es,_e),Oi=yt("Scam"),Ui=yt("Fives"),Hi=yt("Sevens"),zs=a.useMemo(()=>{const t=Gs||[],s=ae>0?Ge:Mt??et,r=Lt>0?At:Et??vt;return t.length===0?{name:te?ot:Ot,isCurrentTurn:!0,legsWon:te?ee:ie,score:te?U:_,lastScore:te?s:r}:t.find(l=>l.isCurrentTurn)??t[0]},[Gs,te,ot,Ot,ee,ie,U,_,ae,Ge,Mt,et,At,Et,vt,Lt]),br=a.useMemo(()=>{if(!zs)return[];const{matchAvg:t,allTimeAvg:s,...r}=zs;return[{...r,matchAvg:void 0,allTimeAvg:void 0}]},[zs]),Vi=te?Ot:ot,$i=zs?.name??(te?ot:Ot),Wi=te?U:_,Ki=te?ae>0?Ge:Mt??et:Lt>0?At:Et??vt,$=a.useCallback((t,s=1)=>{!t||s<=0||fr(r=>({...r,[t]:(r[t]||0)+s}))},[]),q=a.useCallback(t=>{t&&fr(s=>s[t]===void 0?s:{...s,[t]:0})},[]);Ri[h];const _i=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?Ye(Math.round(s),0,R):null},Gi=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?Math.max(0,Math.round(s)):null},gr=a.useCallback(()=>{lt.current&&(lt.current=null),ze(),gs(!1)},[ze]);a.useCallback(t=>{const s=Ye(t,0,R);gr(),Y(s),xe.current=s;const r=s===0?R:s;cs(r),gt.current=r,Se(0),ve.current=0,me(0),he.current=0,ge(0),fe.current=0,tt(null),it(0),L(0),bt.current=0,s===0?(b("player"),V(!0)):(b(null),V(!1))},[gr,Y,R,cs,Se,me,ge,tt,it,L,b,V]);const vr=t=>{const r=_i(ur);if(r===null){rt(`Enter a number between 0 and ${R}`,{type:"error",timeout:2500});return}Je(r),jt(0),st(0),Rt(null),It(0),Fs(0),mr(""),b(null),V(!1)},jr=a.useCallback((t,s)=>{t==="player"?(A(s),Fn("")):(St(s),On("")),b(null),V(!1)},[St,On,Fn,b,A,V]),Xs=t=>{const r=Gi(t==="player"?xr:hr);if(r===null){rt("Enter a non-negative whole number for legs",{type:"error",timeout:2500});return}Un({target:t,value:r,stage:1})},zi=a.useCallback(()=>{Un(t=>t&&(t.stage===1?{...t,stage:2}:(jr(t.target,t.value),null)))},[jr]),vs=a.useCallback(()=>{Un(null)},[]);a.useEffect(()=>{if(!Ws)return;const t=s=>{s.key==="Escape"&&(s.preventDefault(),vs())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[vs,Ws]);const ct=(t=>{switch(t){case"small":return"px-1.5 py-0.5 text-xs";case"large":return"px-3 py-1 text-sm";default:return"px-2 py-0.5 text-sm"}})(se),Ut=a.useRef(null),Ht=a.useRef(null),Vn=a.useRef(null),[Vt,$n]=a.useState("first"),[qs,Nr]=a.useState(1),Xi=a.useRef(null);a.useEffect(()=>{const t=Math.max(1,Math.floor(Number(qs)||1)),s=Vt==="first"?t:Math.max(1,Math.ceil(t/2));Ke(s)},[Vt,qs]),a.useEffect(()=>{if(!qt){fa(1),pa(!1);return}const t=()=>{const l=Ut.current,u=Ht.current;if(!l||!u)return;const j=Vn.current?Vn.current.getBoundingClientRect().height:0,v=Math.max(0,l.clientHeight-j-6),D=Math.max(0,l.clientWidth-8),g=u.getBoundingClientRect(),N=Cs||1,p=g.height/N,w=g.width/N,Ne=v>0?v/p:1,Xe=D>0?D/w:1,dt=Math.min(1,Math.max(.5,Math.min(Ne,Xe))),ke=p*dt,re=v>0&&ke-v>1;pa(re),fa(dt)};t();const s=window.ResizeObserver,r=s?new s(()=>t()):null;return r&&Ut.current&&r.observe(Ut.current),r&&Ht.current&&r.observe(Ht.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t);try{r&&Ut.current&&r.unobserve(Ut.current)}catch{}try{r&&Ht.current&&r.unobserve(Ht.current)}catch{}}},[qt,Cs]),a.useEffect(()=>{const t=s=>{const r=s?.detail?.mode;r&&($e(r),$t())};return window.addEventListener("ndn:auto-start",t),()=>window.removeEventListener("ndn:auto-start",t)},[]),a.useEffect(()=>{const t=s=>{const r=s?.detail?.formatType,l=s?.detail?.formatCount,u=s?.detail?.startScore;(r==="first"||r==="best")&&$n(r),typeof l=="number"&&isFinite(l)&&Nr(Math.max(1,Math.floor(l))),typeof u=="number"&&isFinite(u)&&at(Math.max(1,Math.floor(u)))};return window.addEventListener("ndn:offline-format",t),()=>window.removeEventListener("ndn:offline-format",t)},[]),a.useEffect(()=>{if(!O)return;const t=setTimeout(()=>$t(),50);return()=>clearTimeout(t)},[O]),a.useEffect(()=>{if(!an||te||F==="None"||Si<=0)return;let t,s=performance.now();const r=l=>{const u=l-s;s=l,ds(j=>{const v=j-u;if(v<=0){let D=0,g=0,N=_;for(st(0);D<3&&N>0;){const p=lo(N,F),w=Ye(p-D*20,0,Math.min(60,N)),Ne=N-w;if(Fs(w),Cn(ke=>ke+1),ir(ke=>ke+1),Ne<0){N=_,jt(0),It(0),g=0,Rt(0),st(0);break}g+=w,jt(ke=>ke+w),lr(ke=>ke+w);const Xe=N,dt=Ne;if(Xe>50&&dt<=50?It(1):Xe<=50&&It(ke=>ke+1),N=Ne,D+=1,st(D),N===0)break}if(Je(N),N===0){g===180?En(w=>w+1):g>=140?Rn(w=>w+1):g>=100&&In(w=>w+1);const p=_;p<=170&&dr(w=>Math.max(w,p)),_<=50&&(ar(w=>w+(Dn>0?Dn:1)),rr(w=>w+1)),Rt(g),jt(0),It(0),st(0),b("ai"),V(!0)}return N>0&&D>=3&&(g===180?En(p=>p+1):g>=140?Rn(p=>p+1):g>=100&&In(p=>p+1),Rt(g),jt(0),It(0),st(0)),st(0),Yt(!0),0}return v}),t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>cancelAnimationFrame(t)},[an,te,F,_]),a.useEffect(()=>{ne.inProgress&&(Qe.current||(ks(!0),Qe.current=!0))},[ne.inProgress]);function $t(){Fe(!0),Y(R),xe.current=R,Je(R),We(!1),kt(!0),Yt(!0),L(0),pt(0),it(0),me(0),he.current=0,cs(R),Se(0),tt(null),ge(0),ds(0),Cn(0),Fs(0),jt(0),st(0),Rt(null),b(null),A(0),St(0),_t([]),gn(0),vn(0),jn(!1),Pt(0),ir(0),ps(0),lr(0),Us(0),Hs(0),Vs(0),En(0),Rn(0),In(0),$s(0),dr(0),ms(0),Os(0),ar(0),rr(0),q("X01");const t=Math.max(1,Math.floor(Number(qs)||1));if(Ke(Vt==="first"?t:Math.max(1,Math.ceil(t/2))),T)try{I({mode:h,x01Start:R,firstTo:Oe,aiLevel:F})}catch{}}function qi(){Y(R),xe.current=R,Je(R),We(!1),kt(!0),Yt(!0),L(0),pt(0),it(0),me(0),he.current=0,cs(R),Se(0),gt.current=R,ve.current=0,tt(null),ge(0),fe.current=0,fe.current=0,ds(0),Cn(0),Fs(0),jt(0),st(0),Rt(null),b(null)}function Wt(t){me(0),he.current=0,cs(t===0?R:t),gt.current=t===0?R:t,ge(0),fe.current=0,F!=="None"?(Yt(!1),ds(Ue)):(ds(0),Yt(!0))}function js(t){if(oe&&lt.current){Ii||gs(!0),rt("Remove your darts before starting the next throw",{type:"info",timeout:1800});return}$("X01");const s=xe.current,r=he.current,l=ve.current,u=gt.current,j=fe.current,v=s-t,D=r+1;if(it(t),pt(re=>re+1),Pt(re=>re+1),v<0){try{const re=s,Zn=u;ys.getState().recordVisit("offline-x01",D,0,{preRemaining:re,postRemaining:Zn,bust:!0,finish:!1})}catch{}if(Y(u),xe.current=u,s<=50){const re=(j||0)+1;ms(Zn=>Zn+re)}if(m)try{sn(n?.username||"Player",0,Math.max(u,0),o,{volume:c,checkoutOnly:f})}catch{}tt(0),L(0),Se(0),ve.current=0,ge(0),fe.current=0,Wt(u);return}Y(v),xe.current=v,me(D),he.current=D;const g=l+t;Se(g),ve.current=g,ps(re=>re+t),L(0);const N=s,p=v,w=N>50&&p<=50,Ne=N<=50;w?(ge(1),fe.current=1):Ne&&(ge(re=>re+1),fe.current=(j||0)+1);const Xe=fe.current||0,dt=N<=50,ke=dt?Math.max(Xe,Math.min(D,3)):0;if(v===0){const re={visitTotal:g,darts:D,preRemaining:s,remaining:0,doubleAttempts:ke,finished:!0,doubleWindow:dt,highestCheckout:u<=170?u:null};oe?pr(re):_s(re,"immediate");return}if(D>=3){const re={visitTotal:g,darts:D,preRemaining:s,remaining:v,doubleAttempts:ke,finished:!1,doubleWindow:dt,highestCheckout:null};oe?pr(re):_s(re,"immediate");return}}function Ys(){const t=Ye(Math.round(Number(P)||0),0,60);js(t)}function je(t){if(!Number.isFinite(t))return!1;const s=gt.current,r=xe.current,l=he.current,u=ve.current,j=l>0||u>0;j&&(Y(s),xe.current=s,me(0),he.current=0,Se(0),ve.current=0,ge(0),fe.current=0,it(0),L(0),pt(p=>Math.max(0,p-l)),Pt(p=>Math.max(0,p-l)),ps(p=>Math.max(0,p-u)),bt.current=0);const v=j?s:r,D=v<=170?170:180,g=Ye(Math.round(t),0,D);$("X01",3),pt(p=>p+3),Pt(p=>p+3),me(3),he.current=3,Se(g),ve.current=g,tt(g),g===180?Us(p=>p+1):g>=140?Hs(p=>p+1):g>=100&&Vs(p=>p+1);const N=v-g;if(N<0){if(m)try{sn(ot,0,Math.max(s,0),o,{volume:c,checkoutOnly:f})}catch{}try{ys.getState().recordVisit("offline-x01",3,0,{preRemaining:v,postRemaining:s,bust:!0,finish:!1})}catch{}return Y(s),xe.current=s,tt(0),Se(0),ve.current=0,me(0),he.current=0,ge(0),fe.current=0,Wt(s),!0}if(Y(N),xe.current=N,ps(p=>p+g),m)try{sn(ot,g,Math.max(N,0),o,{volume:c,checkoutOnly:f})}catch{}if(v<=50&&(ms(p=>p+3),N===0&&Os(p=>p+1)),N===0){v<=170&&$s(p=>Math.max(p,v));try{ys.getState().recordVisit("offline-x01",3,g,{preRemaining:v,postRemaining:0,finish:!0,bust:!1})}catch{}return b("player"),V(!0),me(0),he.current=0,Se(0),ve.current=0,ge(0),fe.current=0,!0}try{ys.getState().recordVisit("offline-x01",3,g,{preRemaining:v,postRemaining:N,finish:!1,bust:!1})}catch{}return Wt(N),Se(0),ve.current=0,me(0),he.current=0,ge(0),fe.current=0,!0}const Te=ao({match:ne,commitManualVisitTotal:je,endTurn:Wt}),[Js,Qs]=a.useState(""),yr=t=>{if(!t){Qs("");return}const s=t.replace(/[^0-9]/g,"");if(!s){Qs("");return}const r=Number(s);if(!Number.isFinite(r))return;const l=xe.current<=170?170:180,u=Ye(Math.round(r),0,l);Qs(String(u))};function Zs(){if(!Js){alert("Enter a number 0â€“180 for visit total");return}const t=Number(Js);if(!Number.isFinite(t)){alert("Enter a number 0â€“180 for visit total");return}const s=xe.current<=170?170:180,r=Ye(Math.round(t),0,s);t>s&&rt(`Visit totals cannot exceed ${s}.`,{type:"info",timeout:2200}),je(r)&&Qs("")}const Wn=a.useCallback(()=>{lt.current&&(lt.current=null,ze(),gs(!1));const t=he.current,s=ve.current,r=gt.current;t===0&&s===0||(Y(r),xe.current=r,me(0),he.current=0,Se(0),ve.current=0,ge(0),fe.current=0,it(0),L(0),pt(l=>Math.max(0,l-t)),Pt(l=>Math.max(0,l-t)),ps(l=>Math.max(0,l-s)),bt.current=0)},[ze]);a.useEffect(()=>{const t=s=>{const r=s?.detail;!r||r?.source==="offline-play"||Wn()};return window.addEventListener("ndn:clear-visit-request",t),()=>window.removeEventListener("ndn:clear-visit-request",t)},[Wn]);function wr(t){$("Double Practice");const s=Ye(Math.round(t||0),0,60);if(it(s),pt(r=>r+1),Pt(r=>r+1),Jr(s,Jt)){const r=ln+1;on(r),rn(l=>Math.min(20,l+1)),r>=21&&(b("player"),V(!0))}L(0)}function Sr(){wr(Number(P))}function kr(){const t=Kt(pe);if(t==null){alert("Enter like D16, 50, 25, T20");return}wr(t),ce("")}function Cr(t,s,r){if(wa)return!1;$("Bob's 27");const l=ja,u=s==="DOUBLE"&&r===l||!s&&t===l*2;return u&&un(j=>j+1),ya(j=>{const v=j+1;if(v>=3){const D=hi+(u?1:0);D>0?dn(N=>N+D*l*2):dn(N=>N-l*2);const g=l+1;return Na(g),un(0),g>20&&Sa(!0),0}return v}),!0}function Dr(){Cr(Math.max(0,P|0)),L(0)}function Tr(){Na(1),dn(27),ya(0),un(0),Sa(!1),q("Bob's 27")}function Kn(t){return $("Count-Up"),Da(s=>s+Math.max(0,t|0)),Ta(s=>{const r=s+1;return r>=3?(Ca(l=>l+1),0):r}),!0}function _n(t){return $("High Score"),La(s=>s+Math.max(0,t|0)),Ea(s=>{const r=s+1;return r>=3?(Aa(l=>l+1),0):r}),!0}function Gn(t){return $("Low Score"),Pa(s=>s+Math.max(0,t|0)),Ba(s=>{const r=s+1;return r>=3?(Ia(l=>l+1),0):r}),!0}function Mr(t,s,r,l,u,j,v,D){const g=t-v;if(!(g<0))if(g===0){if(D==="DOUBLE"||D==="INNER_BULL"){j(N=>N+1),u(N=>N+1),l(()=>0),s(t);return}s(g)}else s(g);l(N=>{const p=N+1;return p>=3?(u(w=>w+1),0):p})}function Ar(t,s){return $("Checkout 170"),Mr(mn,xn,Fa,Oa,Ha,$a,t,s),Fa+1>=3&&xn(170),!0}function Lr(t,s){return $("Checkout 121"),Mr(hn,fn,Wa,Ka,Ga,Xa,t,s),Wa+1>=3&&fn(121),!0}function en(t){const s=Kt(pe);if(s==null){alert("Enter like T20, D16, 25, 50");return}const r=pe.trim().toUpperCase(),l=r.startsWith("D")||r==="50"||r==="BULL"||r==="DBULL"||r==="IBULL"||r.includes("INNER");t?Ar(s,l?"DOUBLE":void 0):Lr(s,l?"DOUBLE":void 0),ce("")}function Yi(){xn(170),Oa(0),Ha(0),$a(0),q("Checkout 170")}function Ji(){fn(121),Ka(0),Ga(0),Xa(0),q("Checkout 121")}function zn(t,s,r){return Ya?!1:($("Treble Practice"),(s==="TRIPLE"&&r===xt||!s&&t===xt*3)&&gn(u=>u+1),vn(u=>{const j=u+1;if(j%3===0&&[20,19,18].includes(xt)){const v=[20,19,18],D=v.indexOf(xt),g=v[(D+1)%v.length];pn(g)}return es>0&&j>=es&&jn(!0),j}),!0)}function Er(){gn(0),vn(0),jn(!1),q("Treble Practice")}function Qi(t,s,r){return $("Baseball"),Qa(l=>{const u={...l};return Wl(u,t,s,r),u}),!0}function Zi(){Qa(ei()),q("Baseball")}function el(t,s,r){return $("Golf"),er(l=>{const u={...l};return _l(u,t,s,r),u}),!0}function tl(){er(ti()),q("Golf")}function sl(t,s,r,l){return $("Tic Tac Toe"),tr(u=>{const j={...u,board:[...u.board]};return zl(j,t,s,r,l),j}),!0}function nl(){tr(si()),q("Tic Tac Toe")}function al(t,s,r){return $("American Cricket"),sr(l=>{const u={...l,marks:{...l.marks}};return so(u,t,s,r,()=>!1),u}),!0}function Rr(){sr(ii()),q("American Cricket")}function Xn(t,s,r){$("Around the Clock");const l=ut[mt];let u=!1;if(typeof r=="number"&&r===l&&(s==="SINGLE"||s==="DOUBLE"||s==="TRIPLE")&&(u=!0),l===25&&(s==="BULL"||t===25)&&(u=!0),l===50&&(s==="INNER_BULL"||t===50)&&(u=!0),u||(t===l||t===l*2||t===l*3)&&(u=!0),u){const j=ga+1;return va(j),ba(v=>v+1),!0}return!0}function Ir(){Xn(Math.max(0,P|0)),L(0)}function Pr(){const t=Kt(pe);if(t==null){alert("Enter like T20, D5, 25, 50");return}Xn(t),ce("")}function qn(t,s,r){return $("Cricket"),cn(l=>{const u={...l,marks:{...l.marks}};return El(u,t,s,r,()=>!1),u}),Ee(l=>{const u=l+1;return u>=3?0:u}),!0}function Br(){qn(Math.max(0,P|0)),L(0)}function Yn(t,s,r){return $("Shanghai"),Ts(l=>{const u={...l,turnHits:{...l.turnHits}};return Pl(u,t,s,r),u}),Ee(l=>{const u=l+1;return u>=3?(Ts(j=>{const v={...j,turnHits:{...j.turnHits}};return Bl(v),v}),0):u}),!0}function Fr(){Yn(Math.max(0,P|0)),L(0)}function Or(t,s,r){return $("Halve It"),Ms(l=>{const u={...l,targets:[...l.targets]};return Fl(u,t,s,r),u}),Ee(l=>{const u=l+1;return u>=3?(Ms(j=>{const v={...j,targets:[...j.targets]};return Ol(v),v}),0):u}),!0}function Ur(){Or(Math.max(0,P|0)),L(0)}function Hr(t,s,r){return $("High-Low"),Ls(l=>{const u={...l};return Ul(u,t,s,r),u}),Ee(l=>{const u=l+1;return u>=3?(Ls(j=>{const v={...j};return Hl(v),v}),0):u}),!0}function Vr(){Hr(Math.max(0,P|0)),L(0)}function $r(){const t=pe.trim().toUpperCase();if(!t)return null;if(t==="50"||t==="BULL"||t==="DBULL"||t==="IBULL")return 50;if(t==="25"||t==="OBULL")return 25;const s=t.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!s)return null;const r=s[1]||"S",l=parseInt(s[2],10);return l<1||l>20?null:l*(r==="S"?1:r==="D"?2:3)}function Ns(){const t=$r();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}js(t),ce("")}function Wr(){const t=Bn.trim().split(`
`).map(s=>s.trim()).filter(s=>s);if(t.length!==0){for(const s of t){const r=Kt(s);if(r==null){alert(`Invalid score: ${s}`);return}js(r)}bs("")}}function Jn(){ae!==0&&(Y(t=>t+et),me(t=>Math.max(0,t-1)))}function tn(){const t=$r();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}if(ae===0){Ns();return}const s=et;Y(r=>r+s),me(r=>Math.max(0,r-1)),setTimeout(()=>js(t),0),ce("")}function rl(){const t=x??"player",s=t==="player"?Ps||void 0:Dn||void 0,r=1,l=t==="player"?Is:Bs;_t([...J,{winner:t,doubleDarts:k,checkoutDarts:X,winnerDarts:l,doublesAtt:s,doublesHit:r}]),V(!1);let u=ee,j=ie;if(x==="player"?u+=1:x==="ai"&&(j+=1),A(u),St(j),b(null),u>=Oe||j>=Oe){try{yl(h,t==="player")}catch{}kt(!1),Fe(!1),Y(R),Je(R),Pn(!0);return}qi()}const Qn=!Gr.includes(h)&&!(n?.fullAccess||n?.admin);return e.jsxs("div",{className:"card ndn-game-shell relative overflow-hidden",children:[be&&e.jsx(Sl,{players:ne.players||[],onDone:()=>ks(!1)}),e.jsxs("h2",{className:"text-3xl font-bold text-brand-700 mb-4",children:["Offline Mode"," ",i==="classic"?e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-white/10 border border-white/10 align-middle",children:"Classic layout"}):e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-400/30 text-emerald-200 align-middle",children:"Modern layout"})]}),e.jsxs("div",{className:"ndn-shell-body",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[e.jsxs("select",{onPointerDown:t=>{t.stopPropagation()},onMouseDown:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation?.()},className:"input w-full",value:h,onChange:t=>$e(t.target.value),children:[Gr.map(t=>e.jsx("option",{value:t,children:t},t)),pl.map(t=>e.jsxs("option",{value:t,disabled:!(n?.fullAccess||n?.admin),children:[t," ",n?.fullAccess||n?.admin?"":"(Premium)"]},t))]}),e.jsx(wl,{gameMode:h,compact:!0}),h==="Treble Practice"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"font-semibold",children:"Throws per game"}),e.jsx("input",{className:"input w-full",type:"number",min:3,step:3,value:es,onChange:t=>Ni(Math.max(3,Math.floor(Number(t.target.value)||30)))})]}),e.jsx("div",{className:"sm:col-span-2 text-xs text-slate-300",children:"Target cycles T20â†’T19â†’T18 every 3 darts. Game ends after the selected number of throws."})]}),!n?.fullAccess&&e.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”’"}),e.jsx("span",{children:"Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM."})]}),h==="X01"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-semibold mt-2",children:"Enter starting score (1-1001):"}),e.jsx("input",{className:"input w-full",type:"number",min:1,max:1001,value:R,onChange:t=>at(Number(t.target.value))}),e.jsx("label",{className:"font-semibold mt-2",children:"Play against AI bot?"}),e.jsxs("select",{onPointerDown:t=>{t.stopPropagation()},onMouseDown:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation?.()},className:"input w-full",value:F,onChange:t=>Ae(t.target.value),children:[e.jsx("option",{value:"None",children:"None"}),ro.map(t=>e.jsx("option",{value:t,children:t},t))]}),F!=="None"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"font-semibold",children:"AI throw delay (seconds)"}),e.jsx("input",{className:"input w-full",type:"number",min:.5,max:10,step:.5,value:Ue/1e3,onChange:t=>Gt(Math.round(Number(t.target.value)*1e3))})]}),e.jsx("div",{className:"text-sm text-slate-300",children:"Controls how long the AI waits before its visit."})]}),e.jsx("button",{className:"btn mt-2",onClick:()=>ue(!0),children:"X01 Rules & Regulations!"})]}),h==="Double Practice"&&e.jsx("div",{className:"mt-2 text-brand-600",children:"Hit doubles D1 â†’ D20 â†’ DBULL in as few darts as possible. AI and X01 settings donâ€™t apply."})]}),!De&&e.jsx("button",{className:"btn",disabled:Qn,title:Qn?"PREMIUM required for this mode":"",onClick:$t,children:"Start Match"}),an&&e.jsx("div",{className:`absolute inset-0 z-[1000] ${Xt?"":"flex items-center justify-center p-3 sm:p-4"}`,children:e.jsx(ws,{storageKey:"ndn:modal:offline-match",className:`${Xt?"w-full h-full ndn-modal-tight":""} relative flex flex-col overflow-hidden`,fullScreen:Xt,defaultWidth:1100,defaultHeight:720,minWidth:720,minHeight:480,maxWidth:1600,maxHeight:1200,initialFitHeight:!0,children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-x-hidden pr-1 pt-2 pb-2",style:{overflowY:"scroll"},ref:t=>{Ut.current=t},children:[e.jsx("div",{ref:t=>{Vn.current=t},children:e.jsx(bl,{left:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden xs:inline px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-[10px] sm:text-xs",children:"Game Mode"}),e.jsxs("span",{className:"font-medium whitespace-nowrap",children:[h,h==="X01"?` / ${R}`:""]}),e.jsxs("span",{className:"opacity-80 whitespace-nowrap",children:["First to ",Oe," Â· Legs ",ee,"-",ie]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full border text-[10px] sm:text-xs ${i==="modern"?"bg-emerald-500/15 text-emerald-200 border-emerald-400/30":"bg-white/10 text-white/70 border-white/20"}`,children:i==="modern"?"Modern layout":"Classic layout"})]}),right:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden items-center gap-2 mr-2 text-xs",children:[e.jsx("span",{className:"opacity-80",children:"Cam"}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>K(Math.max(.5,Math.round((B-.05)*100)/100)),title:"Decrease camera size",children:"âˆ’"}),e.jsxs("span",{className:"w-9 text-center",children:[Math.round(B*100),"%"]}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>K(Math.min(1.25,Math.round((B+.05)*100)/100)),title:"Increase camera size",children:"+"})]}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:qt?"Actual Size":"Fit All",onClick:()=>ha(t=>!t),children:qt?"Actual Size":"Fit All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:Xt?"Restore":"Maximize",onClick:()=>xa(t=>!t),children:Xt?"Restore":"Maximize"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{$t()},children:"Restart"}),e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:()=>zt(!0),children:"Quit"})]})})}),ui&&e.jsx(gl,{onClose:()=>zt(!1),onQuit:()=>{try{zr({type:"quit"})}catch{}kt(!1),Fe(!1),zt(!1)},onPause:t=>{const s=Date.now()+t*60*1e3;try{mi(!0,s),zr({type:"pause",pauseEndsAt:s,pauseStartedAt:Date.now()})}catch{}zt(!1)}}),e.jsxs("div",{ref:t=>{Ht.current=t},className:"will-change-transform",style:qt?{transform:`scale(${Cs})`,transformOrigin:"top left",width:"100%",fontSize:`${Math.max(.8,Math.min(1,Cs))}em`}:void 0,children:[e.jsx("h3",{className:"text-xl font-bold mb-2 mt-1 leading-tight",children:h==="X01"?"X01 Match":h}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Mode: ",h]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Start: ",R]}),e.jsxs("div",{ref:Xi,className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[e.jsx("span",{children:"Format:"}),(()=>{const t=U!==R||_!==R||ae>0,s=`pill ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"} `;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:`${s} ${Vt==="first"?"pill--filled":"pill--ghost"}`,onClick:()=>{t||$n("first")},title:"First to N",children:"First to"}),e.jsx("button",{type:"button",className:`${s} ${Vt==="best"?"pill--filled":"pill--ghost"}`,onClick:()=>{t||$n("best")},title:"Best of N (wins = ceil(N/2)",children:"Best of"})]}),e.jsx("input",{className:`input w-16 text-center ${t?"opacity-50":""}`,type:"number",min:1,step:1,value:qs,onChange:r=>Nr(Math.max(1,Math.floor(Number(r.target.value)||1))),disabled:t,title:Vt==="first"?"First to N":"Best of N (wins = ceil(N/2))"})]})})()]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs: ",ee,"â€“",ie]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px] flex-wrap",children:[e.jsx("span",{className:"opacity-70",children:"Match"}),e.jsxs("select",{className:`btn ${ct}`,value:Ce,onChange:t=>ye(t.target.value),children:[e.jsx("option",{value:"singles",children:"Singles"}),e.jsx("option",{value:"doubles",children:"Doubles"})]}),e.jsx("input",{className:`input ${ct} w-[7.5rem]`,value:we,onChange:t=>Ie(t.target.value),placeholder:"Team A"}),e.jsx("span",{className:"opacity-50",children:"vs"}),e.jsx("input",{className:`input ${ct} w-[7.5rem]`,value:nt,onChange:t=>Pe(t.target.value),placeholder:"Team B"})]})]}),h!=="X01"?e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2",children:[h==="Double Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:nn[Jt]?.label||"â€”"})]})}),h==="Around the Clock"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:ut[mt]===25?"25 (Outer Bull)":ut[mt]===50?"50 (Inner Bull)":ut[mt]||"â€”"})]})}),h==="Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Cricket â€” Close 20â€“15 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-[11px] mb-2",children:ua.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,Qt.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points:"," ",e.jsx("span",{className:"font-semibold",children:Qt.points})]}),Rl(Qt)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{cn(ea()),Ee(0),q("Cricket")},children:"Reset"})]})]}),h==="Shanghai"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Round"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:Ds.round})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Ds.score]}),Ds.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Ts(ta()),Ee(0),q("Shanghai")},children:"Reset"})]})]}),h==="Halve It"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Stage"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[Zt.stage+1,"/",Zt.targets.length]})]}),e.jsxs("div",{className:"text-sm",children:["Target:"," ",e.jsx("span",{className:"font-semibold",children:(()=>{const t=oi(Zt);return t?t.kind==="ANY_NUMBER"?"Any":t.kind==="BULL"?"Bull":t.kind==="DOUBLE"||t.kind==="TRIPLE"||t.kind==="NUMBER"?`${t.kind} ${t.num}`:"â€”":"â€”"})()})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Zt.score]}),Zt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Ms(sa()),Ee(0),q("Halve It")},children:"Reset"})]})]}),h==="High-Low"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",As.round," Â· Target ",As.target]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",As.score]}),As.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Ls(na()),Ee(0),q("High-Low")},children:"Reset"})]})]}),h==="Bob's 27"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Target"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold",children:["D",ja]})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",xi]}),wa&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Tr,children:"Reset"})]})]}),h==="Count-Up"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",ka,"/8"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",fi]})]}),h==="High Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Ma,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",bi]})]}),h==="Low Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Ra,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",vi]})]}),h==="Checkout 170"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:mn}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",Ua," Â· Successes:"," ",Va]})]}),h==="Checkout 121"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:hn}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",_a," Â· Successes:"," ",za]})]}),h==="Treble Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Treble Target: T",xt]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Hits: ",bn]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("label",{className:"text-sm",children:"Target"}),e.jsx("div",{className:"inline-flex items-center gap-1",children:[20,19,18].map(t=>e.jsxs("button",{className:`btn px-2 py-0.5 text-xs ${xt===t?"bg-emerald-600/30 border border-emerald-400/30":""}`,onClick:()=>pn(t),children:["T",t]},`tpick-header-${t}`))}),e.jsx("span",{className:"opacity-60 text-xs",children:"or"}),e.jsx("select",{className:"input w-24",value:xt,onChange:t=>pn(parseInt(t.target.value,10)),children:Array.from({length:20},(t,s)=>s+1).map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Er,children:"Reset"})]})]})}),h==="Baseball"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Inning"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ja.inning}),e.jsxs("div",{className:"text-sm",children:["Score:"," ",e.jsx("span",{className:"font-semibold",children:Ja.score})]})]}),h==="Golf"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Hole"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Za.hole}),e.jsxs("div",{className:"text-sm",children:["Strokes:"," ",e.jsx("span",{className:"font-semibold",children:Za.strokes})]})]}),h==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Turn"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:ht.turn}),ht.finished&&e.jsxs("div",{className:"mt-1 text-xs",children:["Winner: ",ht.winner||"â€”"]})]}),h==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Target"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:aa[Rs.targetIndex]}),e.jsxs("div",{className:"text-sm",children:["Progress:"," ",e.jsxs("span",{className:"font-semibold",children:[Rs.targetIndex+1,"/",aa.length]})]}),Rs.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["ðŸŽ‰ Finished in ",Rs.darts," darts!"]})]}),h==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[rs.score,"/",rs.target]}),e.jsxs("div",{className:"text-sm",children:["Darts:"," ",e.jsx("span",{className:"font-semibold",children:rs.darts})]}),rs.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",rs.target,"!"]})]}),h==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[ls.score,"/",ls.target]}),e.jsxs("div",{className:"text-sm",children:["Darts:"," ",e.jsx("span",{className:"font-semibold",children:ls.darts})]}),ls.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",ls.target,"!"]})]}),h==="American Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Close 20â€“12 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-10 gap-1 text-center text-[11px] mb-2",children:ma.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,Nn.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points:"," ",e.jsx("span",{className:"font-semibold",children:Nn.points})]}),no(Nn)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Rr,children:"Reset"})]})]}),h==="Killer"&&e.jsx(e.Fragment,{children:nr?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Turn"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Q[_e]?.name||"â€”"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Tt?`${Q.find(t=>t.id===Tt)?.name||"Winner"} Wins`:yi||"Ready"})]}):e.jsx("div",{className:"text-xs text-slate-600",children:"Setup players and assign numbers"})})]}):i==="modern"?e.jsx("div",{className:"space-y-3 mb-2",children:de?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Manual scoring active"}),e.jsx("div",{className:"text-xs opacity-70",children:"Camera previews are disabled. Use the manual entry controls below to record your turn."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-wrap gap-1.5 mt-1",children:e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"opacity-70",children:"Cam"}),e.jsx("button",{className:`btn ${ct}`,onClick:()=>K(Math.max(.5,Math.round((B-.05)*100)/100)),children:"âˆ’"}),e.jsxs("span",{className:`btn ${ct} min-w-[2.5rem] text-center`,children:[Math.round(B*100),"%"]}),e.jsx("button",{className:`btn ${ct}`,onClick:()=>K(Math.min(1.25,Math.round((B+.05)*100)/100)),children:"+"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${ct}`,title:"Toggle fit/fill",onClick:()=>G(M==="fill"?"fit":"fill"),children:M==="fill"?"Fill":"Fit"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${ct}`,title:"Toggle camera aspect",onClick:()=>S(H==="square"?"wide":"square"),children:H==="square"?"Square":"Wide"})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row-reverse md:items-start md:gap-6",children:[e.jsx("div",{className:"w-full h-[260px] rounded-2xl overflow-hidden bg-black shadow-xl md:w-[48%] md:min-h-[420px]",children:e.jsx(W,{scoringMode:"x01",showToolbar:E,immediateAutoCommit:!0,cameraAutoCommit:"camera",onAutoDart:(t,s,r)=>{}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-[minmax(0,1fr)_300px] md:items-start md:gap-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Current Shooter"}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-white",children:$i}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-white/80",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Remaining"}),e.jsx("div",{className:"font-mono text-lg text-white",children:Wi})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Last Dart"}),e.jsx("div",{className:"font-mono text-lg text-white",children:Ki||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Match Legs"}),e.jsxs("div",{className:"font-semibold text-white",children:[ee,"-",ie]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Next Up"}),e.jsx("div",{className:"font-medium text-white",children:Vi})]})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(qe,{gameMode:h,players:br,matchScore:`${ee}-${ie}`})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(qe,{gameMode:h,players:br,matchScore:`${ee}-${ie}`})}),h==="X01"&&e.jsxs("div",{className:"mt-3 md:mt-4 rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Manual Scoreboard Override"}),e.jsxs("p",{className:"mt-1 text-xs text-white/40",children:["Adjust the live totals if a dart was misread. Values are clamped between 0 and"," ",R,"."]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:ot}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Commit Visit"}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx(kl,{inProgress:!0,startingScore:R,onAddVisit:Me(je),quickButtons:[180,140,100,60],onNextPlayer:()=>Te?.nextPlayer(),onEndLeg:()=>{},onUndo:()=>{},showDartsSelect:!0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:xr,onChange:t=>Fn(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Xs("player")},placeholder:`${ee}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>Xs("player"),children:"Set"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:Ot}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Three Dart Edit"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:R,value:ur,onChange:t=>mr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&vr()},placeholder:`${_}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>vr(),children:"Set"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:hr,onChange:t=>On(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Xs("ai")},placeholder:`${ie}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>Xs("ai"),children:"Set"})]})]})]})]})]})]})]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:[grid-template-columns:minmax(0,0.75fr)_minmax(0,3fr)_minmax(0,0.75fr)] gap-2 mb-2 items-stretch min-w-0",children:e.jsxs("div",{className:"flex items-stretch justify-center md:px-3 min-w-0",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"You Remain"}),te?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:U}),e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-400/70",style:{width:`${Math.max(0,Math.min(100,(1-U/R)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart:"," ",e.jsx("span",{className:"font-semibold",children:et})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score:"," ",e.jsx("span",{className:"font-semibold",children:ae>0?Ge:Mt??et})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg:"," ",e.jsx("span",{className:"font-semibold",children:hs>0?(An/hs*3).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"text-xs opacity-70 flex items-center gap-2",children:[e.jsxs("span",{children:["Darts thrown: ",Is]}),e.jsx("span",{className:"inline-flex items-center gap-1","aria-label":"Visit darts",children:[0,1,2].map(t=>e.jsx("span",{className:`w-2 h-2 rounded-full ${t<ae?"bg-emerald-400":"bg-white/20"}`},t))})]}),e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles:"," ",e.jsxs("span",{className:"font-semibold",children:["Att ",us," Â· Hit ",Tn]})]}),U<=170&&U>0&&(()=>{const s=Ml(U,d)[0]||"â€”";return e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-sm",children:[e.jsx("span",{className:"opacity-70",children:"Checkout"}),e.jsx("span",{className:"font-semibold",children:s})]})})()]}),e.jsx("div",{className:"flex items-stretch justify-center md:justify-end md:px-3 min-w-0 flex-1 min-h-0 ndn-camera-tall",children:e.jsx(vl,{storageKey:"ndn:camera:tile:offline:center:v4",className:"relative rounded-2xl overflow-hidden bg-black w-full camera-fullwidth-card",defaultWidth:0,defaultHeight:0,minWidth:300,minHeight:300,maxWidth:2e3,maxHeight:1200,autoFill:!0,children:e.jsx(Xr,{label:"Your Board",autoStart:!0,className:"min-w-0 h-full",aspect:"classic",fill:!0})})}),e.jsxs("div",{className:`mt-2 ${Z==="small"?"p-2":Z==="large"?"p-4":"p-3"} rounded-2xl bg-slate-900/40 border border-white/10 text-white ${se==="small"?"text-xs":se==="large"?"text-base":"text-sm"}`,children:[e.jsx("div",{className:"font-semibold mb-2",children:"Match Summary"}),(()=>{const t=te?n?.username||"You":F==="None"?"â€”":`${F} AI`,s=te?U:F==="None"?0:_,r=te?ae>0?Ge:Mt??et:Lt>0?At:Et??vt,l=te?Is:Bs,u=R-(te?U:F==="None"?R:_),j=l>0?u/l*3:0,v=`${ee}-${ie}`,D=J.length>0?`${Math.min(...J.map(g=>g.doubleDarts+(g.checkoutDarts||0)))||0} darts`:"â€”";return e.jsxs("div",{className:"grid grid-cols-2 gap-y-1",children:[e.jsx("div",{className:"opacity-80",children:"Current score"}),e.jsx("div",{className:"font-mono text-right",children:v}),e.jsx("div",{className:"opacity-80",children:"Current thrower"}),e.jsx("div",{className:"text-right font-semibold text-lg",children:t}),e.jsx("div",{className:"opacity-80",children:"Score remaining"}),e.jsx("div",{className:"text-right font-mono font-bold text-xl",children:s}),e.jsx("div",{className:"opacity-80",children:"3-dart avg"}),e.jsx("div",{className:"text-right font-mono",children:j.toFixed(1)}),e.jsx("div",{className:"opacity-80",children:"Last score"}),e.jsx("div",{className:"text-right font-mono",children:r}),e.jsx("div",{className:"opacity-80",children:"Best leg"}),e.jsx("div",{className:"text-right",children:D})]})})()]}),e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs flex items-center justify-between opacity-80",children:[e.jsxs("span",{children:[F==="None"?"Opponent":`${F} AI`," Remain"]}),te?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:F!=="None"?_:"N/A"}),F!=="None"&&e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-fuchsia-400/70",style:{width:`${Math.max(0,Math.min(100,(1-_/R)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart:"," ",e.jsx("span",{className:"font-semibold",children:F==="None"?0:vt})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score:"," ",e.jsx("span",{className:"font-semibold",children:F==="None"?"â€”":Lt>0?At:Et??vt})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg:"," ",e.jsx("span",{className:"font-semibold",children:F!=="None"?fs>0?(Ln/fs*3).toFixed(1):"0.0":"â€”"})]}),F!=="None"&&e.jsxs("div",{className:"text-xs opacity-70",children:["Darts thrown: ",Bs]}),F!=="None"&&e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles:"," ",e.jsxs("span",{className:"font-semibold",children:["Att ",xs," Â· Hit ",Mn]})]})]})]})}),h!=="X01"?e.jsxs("div",{className:"space-y-2",children:[h==="Double Practice"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:nn[Jt]?.label||"â€”"})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,onAutoDart:(t,s)=>{if((s==="DOUBLE"||s==="INNER_BULL")&&Jr(t,Jt)){const l=ln+1,u=Jt+1;return on(l),rn(u),l>=nn.length&&setTimeout(()=>{on(0),rn(0)},250),!0}return!1},immediateAutoCommit:!0,onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Sr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Sr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:pe,onChange:t=>ce(t.target.value),onKeyDown:t=>{t.key==="Enter"&&kr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:kr,children:"Add"})]})]}),e.jsxs("div",{className:"text-xs text-slate-300",children:["Progress: ",ln," of 21"]})]}),h==="Around the Clock"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:ut[mt]===25?"25 (Outer Bull)":ut[mt]===50?"50 (Inner Bull)":ut[mt]||"â€”"})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Xn(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Ir()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ir,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D5, 25, 50)",value:pe,onChange:t=>ce(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Pr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Pr,children:"Add"})]}),ga>=ut.length&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{va(0),ba(0),q("Around the Clock")},children:"Reset"})]})]}),h==="Cricket"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>qn(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Br()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Br,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{cn(ea()),Ee(0),q("Cricket")},children:"Reset"})]})]}),h==="Shanghai"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Yn(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Fr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Fr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ts(ta()),Ee(0),q("Shanghai")},children:"Reset"})]})]}),h==="Halve It"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Or(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Ur()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ur,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ms(sa()),Ee(0),q("Halve It")},children:"Reset"})]})]}),h==="High-Low"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Hr(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Vr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Vr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ls(na()),Ee(0),q("High-Low")},children:"Reset"})]})]}),h==="Bob's 27"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Cr(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Dr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Dr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Tr,children:"Reset"})]})]}),h==="Count-Up"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:t=>Kn(t),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(Kn(P),L(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{Kn(P),L(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ca(1),Da(0),Ta(0),q("Count-Up")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",ka,"/",pi]})]}),h==="High Score"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:t=>_n(t),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(_n(P),L(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{_n(P),L(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Aa(1),La(0),Ea(0),q("High Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",Ma,"/",gi]})]}),h==="Low Score"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:t=>Gn(t),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(Gn(P),L(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{Gn(P),L(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ia(1),Pa(0),Ba(0),q("Low Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",Ra,"/",ji]})]}),h==="Checkout 170"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s)=>Ar(t,s==="MISS"?void 0:s),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:pe,onChange:t=>ce(t.target.value),onKeyDown:t=>{t.key==="Enter"&&en(!0)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>en(!0),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Yi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",mn," Â· Attempts: ",Ua," Â· Successes: ",Va]})]}),h==="Checkout 121"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s)=>Lr(t,s==="MISS"?void 0:s),onAddVisit:Me(je),onEndLeg:t=>Te.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:pe,onChange:t=>ce(t.target.value),onKeyDown:t=>{t.key==="Enter"&&en(!1)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>en(!1),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ji,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",hn," Â· Attempts: ",_a," Â· Successes: ",za]})]}),h==="Treble Practice"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>zn(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (T20)",value:pe,onChange:t=>ce(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){const s=Kt(pe);s!=null&&zn(s,void 0,void 0),ce("")}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{const t=Kt(pe);t!=null&&zn(t,void 0,void 0),ce("")},children:"Add Dart"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Hits: ",bn," Â· Misses:"," ",Math.max(0,qa-bn)," Â· Darts:"," ",qa,es>0?`/${es}`:""]}),Ya&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Er,children:"Reset"})]})]}),h==="Baseball"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Qi(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Zi,children:"Reset"})})]}),h==="Golf"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>el(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:tl,children:"Reset"})})]}),h==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(t,s)=>s).map(t=>e.jsx("button",{className:`h-16 rounded-xl border ${ht.board[t]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(ht.finished||ht.board[t])return;const s=Number(prompt("Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)")||0),r=s%3===0?"TRIPLE":s%2===0?"DOUBLE":"SINGLE",l=t,u=ci[l],j=u.type==="BULL"?null:u.num||null;sl(l,s,r,j)},children:ht.board[t]||""},t))}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:nl,children:"Reset"})})]}),h==="American Cricket"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>al(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Rr,children:"Reset"})})]}),h==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:aa[ft.targetIndex]})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{const l=s==="MISS"?void 0:s;return $("Scam"),as(ia(ft,t,l)),!0}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:1,max:25,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&($("Scam"),as(ni(ft,P)),L(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{$("Scam"),as(ni(ft,P)),L(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{as(ql()),q("Scam")},children:"Reset"})]}),ft.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["ðŸŽ‰ Finished in ",ft.darts," darts!"]})]}),h==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score:"," ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[He.score,"/",He.target]})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>($("Fives"),is(oa(He,t)),!0)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:5,max:50,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&($("Fives"),is(ai(He,P)),L(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{$("Fives"),is(ai(He,P)),L(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{is(Ql(He.target)),q("Fives")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 5, 10, 15, 20, 25, 50 Â· Darts:"," ",He.darts]}),He.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",He.target," in"," ",He.darts," darts!"]})]}),h==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score:"," ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[Ve.score,"/",Ve.target]})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>($("Sevens"),os(da(Ve,t)),!0)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:7,max:21,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&($("Sevens"),os(ri(Ve,P)),L(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{$("Sevens"),os(ri(Ve,P)),L(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{os(to(Ve.target)),q("Sevens")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 7, 14, 21 Â· Darts:"," ",Ve.darts]}),Ve.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",Ve.target," in"," ",Ve.darts," darts!"]})]}),h==="Killer"&&e.jsx(e.Fragment,{children:nr?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Q.map(t=>{const s=ts[t.id],r=Es[t.id];return e.jsxs("div",{className:`p-2 rounded-xl border ${s?.eliminated?"opacity-50 border-red-500/40 bg-red-500/10":"border-slate-700/50 bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded ${s?.isKiller?"bg-purple-500/20 text-purple-200 border border-purple-400/30":"bg-slate-600/30 text-slate-300"}`,children:s?.isKiller?"Killer":"Not Killer"})]}),e.jsxs("div",{className:"mt-1 text-sm",children:["Number:"," ",e.jsx("span",{className:"font-semibold",children:r})]}),e.jsxs("div",{className:"text-sm",children:["Lives:"," ",e.jsx("span",{className:"font-semibold",children:s?.lives??0})]})]},t.id)})}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(Tt)return!1;const l=s==="MISS"?void 0:s,u=r?.sector??null,j=Q[_e];return j?(ss(v=>{const D={};Object.keys(v).forEach(p=>D[p]={...v[p]});const g=Qr(j.id,D,l,u);if(g.becameKiller)Ze(`${j.name} became a Killer`);else if(g.victimId){const p=Q.find(w=>w.id===g.victimId);Ze(`${j.name} hit ${p?.name}'s ${Es[g.victimId]} (${g.livesRemoved} life${(g.livesRemoved||0)>1?"s":""})`)}else Ze("No effect");const N=Zr(D);return N&&ns(N),D}),Dt(v=>{const D=v+1;if(D>=3){let g=_e;for(let N=1;N<=Q.length;N++){const p=(_e+N)%Q.length,w=Q[p].id,Ne=ts[w];if(Ne&&!Ne.eliminated&&Ne.lives>0){g=p;break}}return Ct(g),0}return D}),!0):!1}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-40",placeholder:"Manual (D16, T5)",value:pe,onChange:t=>ce(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){if(Tt)return;const r=pe.trim().toUpperCase().match(/^(S|D|T)?\s*(\d{1,2})$/);if(!r){ce("");return}const l=r[1]||"S",u=parseInt(r[2],10),j=l==="D"?"DOUBLE":l==="T"?"TRIPLE":"SINGLE",v=Q[_e];ss(D=>{const g={};Object.keys(D).forEach(w=>g[w]={...D[w]});const N=Qr(v.id,g,j,u);if(N.becameKiller)Ze(`${v.name} became a Killer`);else if(N.victimId){const w=Q.find(Ne=>Ne.id===N.victimId);Ze(`${v.name} hit ${w?.name}'s ${Es[N.victimId]} (${N.livesRemoved} life${(N.livesRemoved||0)>1?"s":""})`)}else Ze("No effect");const p=Zr(g);return p&&ns(p),g}),ce(""),Dt(D=>{const g=D+1;if(g>=3){let N=_e;for(let p=1;p<=Q.length;p++){const w=(_e+p)%Q.length,Ne=Q[w].id,Xe=ts[Ne];if(Xe&&!Xe.eliminated&&Xe.lives>0){N=w;break}}return Ct(N),0}return g})}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{let t=_e;for(let s=1;s<=Q.length;s++){const r=(_e+s)%Q.length,l=Q[r].id,u=ts[l];if(u&&!u.eliminated&&u.lives>0){t=r;break}}Ct(t),Dt(0)},children:"Next Player"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ss({}),wn({}),Sn(!1),Ct(0),Dt(0),ns(null),Ze("")},children:"Reset"})]}),Tt&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Winner:"," ",Q.find(t=>t.id===Tt)?.name," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{ss({}),wn({}),Sn(!1),Ct(0),Dt(0),ns(null),Ze("")},children:"Play Again"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Players"}),e.jsx("div",{className:"space-y-1",children:Q.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input",value:t.name,onChange:r=>{const l=r.target.value;yn(u=>u.map((j,v)=>v===s?{...j,name:l}:j))}}),e.jsx("button",{className:"btn px-2 py-1",onClick:()=>yn(r=>r.filter((l,u)=>u!==s)),disabled:Q.length<=2,children:"Remove"})]},t.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn px-2 py-1",onClick:()=>yn(t=>{const s=`p${t.length+1}`;return[...t,{id:s,name:`Player ${t.length+1}`}]}),children:"Add Player"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1",onClick:()=>{if(Q.length<2){alert("Need at least 2 players");return}const t=Q.map(l=>l.id),s=$l(t),r={};t.forEach(l=>{r[l]=Vl(s[l])}),wn(s),ss(r),Ct(0),Dt(0),ns(null),Ze("Assigned numbers"),Sn(!0)},children:"Assign Numbers & Start"})]})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-3 min-h-0 flex-1 text-[14px]",children:[e.jsxs("div",{className:"basis-1/2 shrink-0 min-w-0 flex flex-col gap-2 overflow-y-auto pr-2 text-sm",children:[e.jsx("div",{className:"text-sm font-semibold opacity-80",children:"Scoreboard"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(qe,{gameMode:h,players:Gs,matchScore:`${ee}-${ie}`})}),te&&e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-900/60 border border-white/10 text-slate-100 shadow-lg backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h4",{className:"text-sm font-semibold tracking-wide uppercase text-indigo-200",children:"Manual Scoring"}),e.jsx("span",{className:"text-xs text-white/60",children:"Override a visit or enter dart-by-dart scores."})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Single Dart"}),e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:60,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?Jn():Ys())},placeholder:"60"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ys,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Three Dart Edit"}),e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:U<=170?170:180,value:Js,onChange:t=>yr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Zs()},placeholder:"100"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Zs,children:"Commit Visit"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:Jn,children:"Undo Visit"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Manual"}),e.jsx("input",{className:"input w-28 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",value:pe,onChange:t=>ce(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?tn():Ns())},placeholder:"T20"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ns,children:"Apply"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:tn,disabled:ae===0,children:"Replace Last"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Multi-entry (one per line)"}),e.jsx("textarea",{className:"mt-2 w-full rounded-xl bg-slate-950/70 border border-white/10 text-sm text-slate-100 placeholder-white/40 p-3 focus:outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-500/30",rows:3,value:Bn,onChange:t=>bs(t.target.value),placeholder:`T20
D16
25`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Wr,children:"Apply All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>bs(""),children:"Clear"})]})]}),e.jsx("div",{className:"pt-2 border-t border-white/10 mt-3",children:e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:Wn,disabled:ae===0&&Ge===0,children:"Clear Current Visit"})})]})]})]}),y&&e.jsx("div",{className:"basis-1/2 shrink-0 min-w-0 rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s)=>{const r=s??"MISS",l=Number.isFinite(t)?Math.max(0,t):0,u=Date.now();if(l<=0){if(r!=="MISS"||u-(bt.current||0)<1200)return;bt.current=u}else bt.current=0;js(l)}})})]}),h==="X01"&&!y&&e.jsx(e.Fragment,{children:e.jsx(qe,{gameMode:h,players:Gs,matchScore:`${ee}-${ie}`})}),h==="Cricket"&&e.jsx(e.Fragment,{children:e.jsx(qe,{gameMode:"Cricket",players:Pi})}),h==="Cricket"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return qn(t,s==="MISS"?void 0:s,r?.sector??null),!0}})}),h==="Shanghai"&&e.jsx(e.Fragment,{children:e.jsx(qe,{gameMode:"Shanghai",players:Bi})}),h==="Shanghai"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return Yn(t,s==="MISS"?void 0:s,r?.sector??null),!0}})}),h==="Killer"&&e.jsx(e.Fragment,{children:e.jsx(qe,{gameMode:"Killer",players:Fi})}),h==="Scam"&&e.jsx(e.Fragment,{children:e.jsx(qe,{gameMode:"Scam",players:Oi})}),h==="Scam"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return as(ia(ft,t,s)),!0}})}),h==="Fives"&&e.jsx(e.Fragment,{children:e.jsx(qe,{gameMode:"Fives",players:Ui})}),h==="Fives"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return is(oa(He,t)),!0}})}),h==="Sevens"&&e.jsx(e.Fragment,{children:e.jsx(qe,{gameMode:"Sevens",players:Hi})}),h==="Sevens"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(W,{scoringMode:"custom",showToolbar:E,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return os(da(Ve,t)),!0}})}),e.jsx("div",{className:"font-semibold",children:"Your Turn"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:P,onChange:t=>L(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?Jn():Ys())}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ys,title:"Add a single dart (0â€“60)",children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-28",type:"number",min:0,max:U<=170?170:180,placeholder:"Visit total (0â€“180)",value:Js,onChange:t=>yr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Zs()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Zs,title:"Commit a full 3-dart total like 93",children:"Commit Visit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D16, 5, 25, 50)",value:pe,onChange:t=>ce(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?tn():Ns())}}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:tn,disabled:ae===0,children:"Replace Last"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ns,children:"Add"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"input w-full h-24 resize-none",placeholder:`Type scores manually (one per line, e.g. T20
D16
5
25
50) - No camera needed!`,value:Bn,onChange:t=>bs(t.target.value)}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Wr,children:"Add All Scores"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>bs(""),children:"Clear"})]})]})]}),e.jsx("div",{className:"text-xs text-slate-300",children:"Tip: Enter to Add Â· Shift+Enter to Replace Last"})]}),e.jsx("div",{className:"h-1"})]})]})})}),Be&&e.jsx(oo,{onClose:()=>ue(!1)}),Qn&&e.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),e.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”’"}),e.jsx("div",{className:"font-semibold",children:"Premium mode locked"}),e.jsx("div",{className:"text-sm text-slate-200/80",children:"Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more."}),e.jsxs("button",{onClick:async()=>{try{const s=await(await fetch(`${co}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n?.email})})).json();s.ok&&s.url?(window.location.href=s.url,s.development&&rt("Opened Stripe test checkout (development mode)",{type:"info",timeout:3e3})):s.error==="STRIPE_NOT_CONFIGURED"?rt("Premium purchases are not available in this development environment. Please visit the production site to upgrade.",{type:"error",timeout:4e3}):rt("Failed to create checkout session. Please try again.",{type:"error",timeout:4e3})}catch{rt("Error creating checkout. Please try again.",{type:"error",timeout:4e3})}},className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM Â·"," ",jl(Nl(),5)]})]})]}),Ei&&typeof document<"u"?_r.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[200] flex items-center justify-center p-4",onClick:()=>Bt(!1),children:e.jsx(ws,{storageKey:"ndn:modal:offline-camera-manager",className:"relative",defaultWidth:640,defaultHeight:520,minWidth:480,minHeight:420,maxWidth:1200,maxHeight:900,initialFitHeight:!0,onClose:()=>Bt(!1),children:e.jsxs("div",{className:"space-y-3",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Camera Devices"}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Manage Offline Camera Feeds"})]}),e.jsx("button",{className:"btn bg-slate-800 hover:bg-slate-700 text-white",onClick:()=>Bt(!1),children:"Close"})]}),e.jsx(Xr,{fill:!0,user:n,playerScore:U,aiScore:_,x01Score:R,inMatch:De,showWinPopup:wt,pendingLegWinner:x,playerDartsThrown:Is,aiDartsThrown:Bs,totalPlayerDarts:hs,totalAiDarts:fs,totalPlayerPoints:An,totalAiPoints:Ln,player180s:or,player140s:ki,player100s:Ci,ai180s:cr,ai140s:Di,ai100s:Ti,playerHighestCheckout:Mi,aiHighestCheckout:Ai,onClose:()=>Bt(!1),onOpen:()=>Bt(!0),layout:i})]})})}),document.body):null,Ws&&typeof document<"u"?_r.createPortal((()=>{const{target:t,value:s,stage:r}=Ws,l=t==="player"?ot:Ot,u=t==="player"?ee:ie;return e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[240] flex items-center justify-center p-4",onClick:vs,children:e.jsx(ws,{storageKey:"ndn:modal:offline-leg-override",className:"relative",defaultWidth:360,defaultHeight:240,minWidth:280,minHeight:200,maxWidth:420,maxHeight:360,initialFitHeight:!0,onClose:vs,children:e.jsxs("div",{className:"space-y-3 max-w-[18rem] mx-auto",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/50",children:["Step ",r," of 2"]}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Override legs?"})]}),e.jsx("div",{className:"text-sm text-slate-200 leading-relaxed",children:r===1?e.jsxs(e.Fragment,{children:["Set ",l,"'s legs to"," ",e.jsx("span",{className:"font-semibold text-white",children:s}),"? Confirm to continue."]}):e.jsxs(e.Fragment,{children:["Final confirmation: set ",l,"'s legs to"," ",e.jsx("span",{className:"font-semibold text-white",children:s}),". Select"," ",e.jsx("span",{className:"font-semibold text-emerald-200",children:"Yes"})," ","to apply immediately."]})}),e.jsxs("div",{className:"rounded-xl bg-black/40 border border-white/10 p-3 text-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Current legs"}),e.jsx("div",{className:"text-base font-semibold text-white",children:u})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 text-white",onClick:vs,children:"No"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 text-white",onClick:zi,children:"Yes"})]})]})})})})(),document.body):null,wt&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs(ws,{storageKey:"ndn:modal:offline-win",className:"w-full relative",defaultWidth:420,defaultHeight:360,minWidth:360,minHeight:300,maxWidth:800,maxHeight:700,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Leg Won!"}),e.jsx("label",{className:"block mb-1",children:"Darts to hit double:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${k===t?"bg-brand-600":""}`,onClick:()=>C(t),children:t},t))}),e.jsx("label",{className:"block mb-1",children:"Darts for checkout:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${X===t?"bg-brand-600":""}`,onClick:()=>Le(t),children:t},t))}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[e.jsx("button",{className:"btn w-full",onClick:rl,children:"Submit"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 w-full",onClick:()=>{V(!1),$t()},children:"Rematch"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 w-full",onClick:()=>{V(!1),kt(!1),Fe(!1)},children:"Back to Menu"})]})]})}),Li&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60]",children:e.jsxs(ws,{storageKey:"ndn:modal:offline-summary",className:"w-full relative",defaultWidth:820,defaultHeight:520,minWidth:600,minHeight:400,maxWidth:1400,maxHeight:1e3,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-xl font-extrabold mb-2",children:"Match Summary"}),e.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[h," Â· ",R," start Â· First to ",Oe]}),(()=>{const t=hs>0?An/hs*3:0,s=t*3,r=(()=>{const p=J.filter(w=>w.winner==="player"&&typeof w.winnerDarts=="number").map(w=>w.winnerDarts);return p.length?`${Math.min(...p)} darts`:"â€”"})(),l=(()=>{const p=J.filter(w=>w.winner==="player"&&typeof w.winnerDarts=="number").map(w=>w.winnerDarts);return p.length?`${Math.max(...p)} darts`:"â€”"})(),u=us>0?Math.round(Tn/us*100):0,j=fs>0?Ln/fs*3:0,v=j*3,D=(()=>{const p=J.filter(w=>w.winner==="ai"&&typeof w.winnerDarts=="number").map(w=>w.winnerDarts);return p.length?`${Math.min(...p)} darts`:"â€”"})(),g=(()=>{const p=J.filter(w=>w.winner==="ai"&&typeof w.winnerDarts=="number").map(w=>w.winnerDarts);return p.length?`${Math.max(...p)} darts`:"â€”"})(),N=xs>0?Math.round(Mn/xs*100):0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:n?.username||"You"}),e.jsx("div",{className:"text-3xl font-extrabold",children:ee}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:t.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:s.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:us})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[u,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:l})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:or})]})]})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-black",children:[ee," â€“ ",ie]})}),e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:F==="None"?"Opponent":`${F} AI`}),e.jsx("div",{className:"text-3xl font-extrabold",children:ie}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:j.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:v.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:xs})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[N,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:D})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:g})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:cr})]})]})]})]})})(),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Legs Timeline"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:J.map((t,s)=>e.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs ${t.winner==="player"?"bg-emerald-500/15 border-emerald-400/30":"bg-fuchsia-500/15 border-fuchsia-400/30"}`,children:["Leg ",s+1,":"," ",t.winner==="player"?"You":F==="None"?"Opp":"AI"," ","Â· Dbl ",t.doubleDarts," Â· CO ",t.checkoutDarts]},s))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Shot Heat Map"}),e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black p-3",children:e.jsx(Ll,{})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>Pn(!1),children:"Close"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{Pn(!1),$t()},children:"Rematch"})]})]})}),J.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Leg Stats"}),e.jsx("ul",{children:J.map((t,s)=>e.jsxs("li",{children:["Leg ",s+1,": Double darts: ",t.doubleDarts,", Checkout darts:"," ",t.checkoutDarts]},s))})]})]})]})}export{Lo as default};
//# sourceMappingURL=OfflinePlay-CkKZN_D4.js.map
