{"version":3,"file":"GameCalibrationStatus-C2XzNxQY.js","sources":["../../src/components/GameCalibrationStatus.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { AlertTriangle, CheckCircle, AlertCircle, Zap } from \"lucide-react\";\r\nimport { useCalibration } from \"../store/calibration\";\r\nimport {\r\n  getCalibrationConfidenceForGame,\r\n  isCalibrationSuitableForGame,\r\n  getCalibrationQualityText,\r\n  getRecalibrationRecommendation,\r\n  GAME_CALIBRATION_REQUIREMENTS,\r\n} from \"../utils/gameCalibrationRequirements\";\r\n\r\ninterface GameCalibrationStatusProps {\r\n  gameMode: string;\r\n  compact?: boolean; // Show minimal version\r\n  onRecalibrate?: () => void; // Optional callback for recalibrate button\r\n}\r\n\r\nexport default function GameCalibrationStatus({\r\n  gameMode,\r\n  compact = false,\r\n  onRecalibrate,\r\n}: GameCalibrationStatusProps) {\r\n  const { H, errorPx } = useCalibration();\r\n\r\n  const confidence = getCalibrationConfidenceForGame(gameMode, errorPx);\r\n  const suitable = isCalibrationSuitableForGame(gameMode, errorPx);\r\n  const { quality, text } = getCalibrationQualityText(gameMode, errorPx);\r\n  const recommendation = getRecalibrationRecommendation(gameMode);\r\n  const requirement = GAME_CALIBRATION_REQUIREMENTS[gameMode];\r\n\r\n  // Not calibrated\r\n  if (!H || !errorPx) {\r\n    if (compact) {\r\n      return (\r\n        <div className=\"text-xs px-2 py-1 rounded bg-slate-600/40 text-slate-300 inline-flex items-center gap-1 border border-slate-500/30\">\r\n          <AlertTriangle className=\"w-3 h-3\" />\r\n          Not calibrated\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"px-3 py-2 rounded bg-red-500/20 border border-red-600/30 flex items-center gap-2\">\r\n        <AlertTriangle className=\"w-4 h-4 text-red-400 flex-shrink-0\" />\r\n        <div className=\"flex-1\">\r\n          <div className=\"font-medium text-red-300\">Calibration Required</div>\r\n          <div className=\"text-xs opacity-80\">\r\n            Please calibrate before playing {gameMode}\r\n          </div>\r\n        </div>\r\n        {onRecalibrate && (\r\n          <button\r\n            className=\"btn px-2 py-1 text-xs bg-red-600 hover:bg-red-700\"\r\n            onClick={onRecalibrate}\r\n          >\r\n            Calibrate\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Determine colors based on suitability\r\n  const bgColor = suitable\r\n    ? \"bg-emerald-500/20 border-emerald-600/30\"\r\n    : \"bg-amber-500/20 border-amber-600/30\";\r\n\r\n  const textColor = suitable ? \"text-emerald-300\" : \"text-amber-300\";\r\n  const icon = suitable ? CheckCircle : AlertTriangle;\r\n\r\n  if (compact) {\r\n    return (\r\n      <div\r\n        className={`text-xs px-2 py-1 rounded inline-flex items-center gap-1 border ${bgColor} ${textColor}`}\r\n      >\r\n        {React.createElement(icon, { className: \"w-3 h-3\" })}\r\n        <span>{text}</span>\r\n        {!suitable && recommendation && (\r\n          <span className=\"w-3 h-3 cursor-help\" title={recommendation}>\r\n            <AlertCircle className=\"w-3 h-3 inline\" />\r\n          </span>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Full version\r\n  return (\r\n    <div className={`px-3 py-2 rounded border ${bgColor} space-y-1`}>\r\n      <div className=\"flex items-center gap-2\">\r\n        {React.createElement(icon, {\r\n          className: `w-4 h-4 ${suitable ? \"text-emerald-400\" : \"text-amber-400\"} flex-shrink-0`,\r\n        })}\r\n        <div className=\"flex-1\">\r\n          <div\r\n            className={`font-medium ${suitable ? \"text-emerald-300\" : \"text-amber-300\"}`}\r\n          >\r\n            Calibration for {gameMode}\r\n          </div>\r\n          <div className=\"text-xs opacity-80\">\r\n            Error: {Math.round(errorPx)}px | {text}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Confidence bar */}\r\n      <div className=\"flex items-center gap-2\">\r\n        <div className=\"flex-1 h-1.5 rounded bg-black/30 overflow-hidden\">\r\n          <div\r\n            className={`h-full transition-all ${\r\n              suitable ? \"bg-emerald-500\" : \"bg-amber-500\"\r\n            }`}\r\n            style={{ width: `${Math.min(100, confidence)}%` }}\r\n          />\r\n        </div>\r\n        <span className=\"text-xs font-mono\">{Math.round(confidence)}%</span>\r\n      </div>\r\n\r\n      {/* Requirements */}\r\n      {requirement && (\r\n        <div className=\"text-xs opacity-75\">\r\n          <div>\r\n            Tolerance: Â±{requirement.tolerancePx}px | Min:{\" \"}\r\n            {requirement.minConfidence}%\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Warning and recommendation */}\r\n      <div className=\"space-y-1\">\r\n        {!suitable && (\r\n          <div className=\"text-xs px-2 py-1 rounded bg-amber-900/30 text-amber-200 border border-amber-600/20 flex items-center gap-1\">\r\n            <AlertTriangle className=\"w-3 h-3 flex-shrink-0\" />\r\n            Calibration quality is below minimum for {gameMode}\r\n          </div>\r\n        )}\r\n\r\n        {recommendation && (\r\n          <div className=\"text-xs px-2 py-1 rounded bg-blue-900/30 text-blue-200 border border-blue-600/20 flex items-center gap-1\">\r\n            <Zap className=\"w-3 h-3 flex-shrink-0\" />\r\n            {recommendation}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {!suitable && onRecalibrate && (\r\n        <button\r\n          className=\"w-full btn px-2 py-1 text-sm mt-2 bg-amber-600 hover:bg-amber-700\"\r\n          onClick={onRecalibrate}\r\n        >\r\n          Recalibrate for {gameMode}\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["GameCalibrationStatus","gameMode","compact","onRecalibrate","H","errorPx","useCalibration","confidence","getCalibrationConfidenceForGame","suitable","isCalibrationSuitableForGame","quality","text","getCalibrationQualityText","recommendation","getRecalibrationRecommendation","requirement","GAME_CALIBRATION_REQUIREMENTS","jsxs","jsx","AlertTriangle","bgColor","textColor","icon","CheckCircle","React","AlertCircle","Zap"],"mappings":"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"}