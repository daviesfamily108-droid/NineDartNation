{"version":3,"file":"inPlayDemo-D04KN5Fv.js","sources":["../../src/utils/inPlayDemo.ts"],"sourcesContent":["import { useMatch } from \"../store/match\";\nimport { writeMatchSnapshot } from \"./matchSync\";\n\ntype DemoVisit = {\n  score: number;\n  darts?: number;\n  visitTotal?: number;\n};\n\ntype InPlayDemoOptions = {\n  players: string[];\n  startingScore?: number;\n  roomId?: string;\n  visits?: DemoVisit[];\n  openWindow?: boolean;\n};\n\nexport function launchInPlayDemo({\n  players,\n  startingScore = 501,\n  roomId = \"demo-room\",\n  visits,\n  openWindow = true,\n}: InPlayDemoOptions) {\n  if (!players || players.length === 0) return;\n  try {\n    const match = useMatch.getState();\n    match.newMatch(players, startingScore, roomId);\n\n    const seededVisits: DemoVisit[] =\n      visits && visits.length > 0\n        ? visits\n        : [{ score: 60 }, { score: 85 }, { score: 100 }];\n\n    seededVisits.forEach((visit, index) => {\n      match.addVisit(visit.score, visit.darts ?? 3, {\n        visitTotal: visit.visitTotal ?? visit.score,\n      });\n      if (index < seededVisits.length - 1) {\n        match.nextPlayer();\n      }\n    });\n\n    writeMatchSnapshot();\n  } catch {\n    return;\n  }\n\n  if (!openWindow || typeof window === \"undefined\") return;\n  try {\n    const url = new URL(window.location.href);\n    url.searchParams.set(\"match\", \"1\");\n    window.open(url.toString(), \"_blank\", \"noopener,noreferrer\");\n  } catch {}\n}\n"],"names":["launchInPlayDemo","players","startingScore","roomId","visits","openWindow","match","useMatch","seededVisits","visit","index","writeMatchSnapshot","url"],"mappings":"+CAiBO,SAASA,EAAiB,CAC/B,QAAAC,EACA,cAAAC,EAAgB,IAChB,OAAAC,EAAS,YACT,OAAAC,EACA,WAAAC,EAAa,EACf,EAAsB,CACpB,GAAI,GAACJ,GAAWA,EAAQ,SAAW,GACnC,IAAI,CACF,MAAMK,EAAQC,EAAS,SAAA,EACvBD,EAAM,SAASL,EAASC,EAAeC,CAAM,EAE7C,MAAMK,EACJJ,GAAUA,EAAO,OAAS,EACtBA,EACA,CAAC,CAAE,MAAO,EAAA,EAAM,CAAE,MAAO,EAAA,EAAM,CAAE,MAAO,IAAK,EAEnDI,EAAa,QAAQ,CAACC,EAAOC,IAAU,CACrCJ,EAAM,SAASG,EAAM,MAAOA,EAAM,OAAS,EAAG,CAC5C,WAAYA,EAAM,YAAcA,EAAM,KAAA,CACvC,EACGC,EAAQF,EAAa,OAAS,GAChCF,EAAM,WAAA,CAEV,CAAC,EAEDK,EAAA,CACF,MAAQ,CACN,MACF,CAEA,GAAI,GAACN,GAAc,OAAO,OAAW,KACrC,GAAI,CACF,MAAMO,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACxCA,EAAI,aAAa,IAAI,QAAS,GAAG,EACjC,OAAO,KAAKA,EAAI,SAAA,EAAY,SAAU,qBAAqB,CAC7D,MAAQ,CAAC,EACX"}