import{r as E}from"./ui-Cl5S-Tv0.js";import{b as O,k as M,r as W,j as s}from"./index-CE3l0JJh.js";function Z(r,n,c,a,e,b,o,m,l,v,d,A,w,D,h,L,j,u,f,i,C,k,t,x,$,I,S){return E.useMemo(()=>{const p=[];if(r==="X01"){let N=0,V=0,T=0;if(u&&u.length>0){for(const g of u)g.dartsThrown&&g.totalScored&&(V+=g.dartsThrown,T+=g.totalScored);V>0&&(N=T/V*3)}const R=(A??0)>0?m??0:v??null??(b??0);if(p.push({name:"You",isCurrentTurn:!!f,legsWon:a||0,score:typeof n=="number"?n:typeof C=="number"?C:0,lastScore:R,avg:N,checkoutRate:h&&h>0?Math.round((D||0)/h*100):0,bestLeg:u&&u.length>0?`${Math.min(...u.map(g=>g.doubleDarts+(g.checkoutDarts||0)))||0} darts`:"—",matchAvg:N,allTimeAvg:O("You")||0}),i&&i!=="None"){const P=(w??0)>0?l??0:d??null??(o??0);p.push({name:`${i} AI`,isCurrentTurn:!f,legsWon:e||0,score:typeof c=="number"?c:typeof C=="number"?C:0,lastScore:P,avg:void 0,checkoutRate:j&&j>0?Math.round((L||0)/j*100):0,bestLeg:"—"})}}return r==="Cricket"&&(p.push({name:"You",isCurrentTurn:!!f,closed:k?.marks||{},points:k?.points||0}),i&&i!=="None"&&p.push({name:`${i} AI`,isCurrentTurn:!f,closed:{},points:0})),r==="Shanghai"&&(p.push({name:"You",isCurrentTurn:!!f,round:t?.round||1,target:t?.target||1,score:t?.score||0}),i&&i!=="None"&&p.push({name:`${i} AI`,isCurrentTurn:!f,round:t?.round||1,target:t?.target||1,score:0})),r==="Killer"&&x&&x.length>0&&x.forEach((N,V)=>{const T=$?.[N.id];p.push({name:N.name,isCurrentTurn:V===S,number:I?.[N.id],lives:T?.lives||0,eliminated:T?.eliminated||!1})}),p},[r,n,c,a,e,b,o,m,l,v,d,A,w,D,h,L,j,u,f,i,k,t,x,$,I,S])}function H(r,n,c){return E.useMemo(()=>{const a=[];return!n||!n.players||n.players.length===0||n.players.forEach((e,b)=>{const o=b===n.currentPlayerIdx;if(r==="X01"){let m=0,l=0,v=0;if(e.legs&&e.legs.length>0){for(const d of e.legs)if(d.finished){const A=d.dartsThrown||0,w=Math.max(0,d.totalScoreStart-d.totalScoreRemaining)||0;l+=A,v+=w}}l>0&&(m=v/l*3),a.push({name:e.name||`Player ${b+1}`,isCurrentTurn:o,legsWon:e.legsWon||0,score:e.score||0,lastScore:e.lastVisitScore||0,checkoutRate:e.doublesAttempted>0?Math.round(e.doublesHit/e.doublesAttempted*100):0,bestLeg:e.bestLegDarts?`${e.bestLegDarts} darts`:"—",matchAvg:m,allTimeAvg:e.name?O(e.name):0})}r==="Cricket"&&a.push({name:e.name||`Player ${b+1}`,isCurrentTurn:o,closed:e.cricket?.marks||{},points:e.cricket?.points||0}),r==="Killer"&&a.push({name:e.name||`Player ${b+1}`,isCurrentTurn:o,number:e.killerNumber||null,lives:e.killerLives||3,eliminated:e.killerEliminated||!1})}),a},[r,n,c])}const K=[{label:"1 min",minutes:1},{label:"3 min",minutes:3},{label:"5 min",minutes:5}];function Y(r){const n=Math.max(0,Math.floor(r/1e3)),c=Math.floor(n/60).toString().padStart(2,"0"),a=(n%60).toString().padStart(2,"0");return{mm:c,ss:a,totalSeconds:n}}function ee({localPlayerName:r,onResume:n,onDurationSelected:c}){const a=M(t=>t.paused),e=M(t=>t.pauseEndsAt),b=M(t=>t.pauseStartedAt),o=M(t=>t.pauseInitiator),m=M(t=>t.setPaused),[l,v]=E.useState(Date.now());E.useEffect(()=>{if(!a||!e)return;const t=setInterval(()=>{const x=Date.now();v(x),x>=e&&(m(!1,null),n&&n())},250);return()=>clearInterval(t)},[a,e,m,n]);const d=Math.max(0,(e??l)-l),w=Math.max(1,(e??l)-(b??l)),D=Math.max(0,Math.min(1,1-d/w)),h=Math.round(D*100),L=E.useMemo(()=>({background:`conic-gradient(rgba(251, 191, 36, 0.95) ${h}%, rgba(255, 255, 255, 0.08) ${h}%)`}),[h]);if(!a)return null;const j=!o||!r||o===r,u=()=>{n?n():m(!1,null)},f=t=>{const x=Date.now()+t*6e4;m(!0,x,o),c&&c(t,x)},i=!e,{mm:C,ss:k}=i?{mm:"--",ss:"--"}:Y(d);return W.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center",style:{pointerEvents:"all"},onKeyDown:t=>t.stopPropagation(),onKeyUp:t=>t.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-2xl"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/[0.04] to-transparent"}),s.jsxs("div",{className:"relative w-full max-w-sm mx-4 rounded-3xl border border-white/15 bg-white/[0.08] shadow-2xl shadow-black/50 p-8 sm:p-10 backdrop-blur-xl",children:[s.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-white/10 to-transparent pointer-events-none"}),s.jsxs("div",{className:"relative flex flex-col items-center gap-6 text-center",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.35em] font-semibold text-amber-200/80",children:"Match Paused"}),o&&s.jsxs("div",{className:"text-sm text-amber-200/60",children:["Paused by"," ",s.jsx("span",{className:"font-semibold text-amber-100",children:o})]}),s.jsxs("div",{className:"relative flex items-center justify-center w-48 h-48 sm:w-56 sm:h-56",children:[s.jsx("div",{className:"absolute inset-0 rounded-full border border-amber-300/30 shadow-inner",style:i?{background:"rgba(255, 255, 255, 0.08)"}:L}),s.jsx("div",{className:"absolute inset-3 rounded-full bg-slate-950/90 border border-white/10 flex items-center justify-center",children:s.jsxs("div",{className:"font-mono text-5xl sm:text-6xl font-black text-white tabular-nums",children:[C,s.jsx("span",{className:"text-amber-300/80",children:":"}),k]})})]}),i?j?s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"text-[11px] uppercase tracking-[0.25em] text-amber-200/60",children:"Select pause duration"}),s.jsx("div",{className:"flex items-center gap-3",children:K.map(t=>s.jsx("button",{className:"px-5 py-2.5 rounded-2xl text-sm font-semibold bg-amber-500/20 hover:bg-amber-500/40 text-amber-100 border border-amber-400/30 shadow-lg transition active:scale-95",onClick:()=>f(t.minutes),children:t.label},t.minutes))}),s.jsx("button",{className:"mt-1 px-8 py-3 rounded-2xl text-sm font-semibold bg-emerald-600 hover:bg-emerald-500 text-white border border-emerald-400/40 shadow-lg shadow-emerald-500/20 transition active:scale-95",onClick:u,children:"Resume"})]}):s.jsxs("div",{className:"text-xs text-amber-200/50 mt-1",children:["Waiting for"," ",s.jsx("span",{className:"font-semibold text-amber-100",children:o})," ","to select timer…"]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[11px] uppercase tracking-[0.25em] text-amber-200/40",children:"Countdown"}),j?s.jsx("button",{className:"mt-1 px-8 py-3 rounded-2xl text-sm font-semibold bg-emerald-600 hover:bg-emerald-500 text-white border border-emerald-400/40 shadow-lg shadow-emerald-500/20 transition active:scale-95",onClick:u,children:"Resume"}):s.jsxs("div",{className:"text-xs text-amber-200/50 mt-1",children:["Only"," ",s.jsx("span",{className:"font-semibold text-amber-100",children:o})," ","can resume"]})]})]})]})]}),document.body)}const te=[...Array.from({length:20},(r,n)=>n+1),25,50];export{te as A,ee as P,H as a,Z as u};
//# sourceMappingURL=aroundTheClock-DmLY7dqZ.js.map
