import{j as e,B as Be,u as Gi,a as _i,r as yr,f as wr,p as zi,R as Vt,b as Xi,c as qi,d as Yi}from"./index-QB6Os3F3.js";import{r as n}from"./ui-CuWypN7C.js";import{c as va,a as ja,b as Na,d as ya,e as Sr,f as Cr,g as kr,h as Dr,s as Ns,u as $e,G as Ji,i as Qi,D as wa,A as De,j as Zi,C as el,k as tl,l as sl,m as al,n as xe,o as nl,p as Ar,q as Mr,r as ct,T as rl,t as il,v as Tr,w as Lr,x as ll,y as cl,z as ol,B as dl,E as ml,F as ul,H as xl,I as hl,J as fl,K as bl,L as pl,M as gl}from"./useGameStats-CAX-O-Rt.js";import{u as vl,C as k,R as jl}from"./CameraView-C1ehnpRI.js";import{u as Nl,a as Bt}from"./match-DA6kjEGb.js";import{M as yl}from"./MatchControls-CZOUFskO.js";import"./vendor-D3F3s8fL.js";import"./pendingVisit-CK_ujpKW.js";function Rr(l,f,w,y){const N=(y-90)*Math.PI/180;return{x:l+w*Math.cos(N),y:f+w*Math.sin(N)}}function Er(l){return[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5].indexOf(l)*18+9}function wl({width:l=320,height:f=320}){const w=vl(N=>N.samples),y=n.useRef(null);return n.useEffect(()=>{const N=y.current;if(!N)return;const D=N.getContext("2d");if(!D)return;N.width=l,N.height=f,D.clearRect(0,0,l,f);const se=l/2,ot=f/2,ve=Math.min(l,f)/(Be.doubleOuter*2+20),J={bullInner:Be.bullInner*ve,bullOuter:Be.bullOuter*ve,trebleInner:Be.trebleInner*ve,trebleOuter:Be.trebleOuter*ve,doubleInner:Be.doubleInner*ve,doubleOuter:Be.doubleOuter*ve};D.strokeStyle="rgba(255,255,255,0.06)",D.lineWidth=1;const je=["doubleOuter","doubleInner","trebleOuter","trebleInner","bullOuter","bullInner"];for(const M of je)D.beginPath(),D.arc(se,ot,J[M],0,Math.PI*2),D.stroke();const Ae=[];for(const M of w){let _=Math.random()*360,ne=Math.random()*J.doubleOuter;typeof M.sector=="number"&&M.sector>=1&&M.sector<=20&&(_=Er(M.sector),M.ring==="DOUBLE"?ne=(J.doubleInner+J.doubleOuter)/2:M.ring==="TRIPLE"?ne=(J.trebleInner+J.trebleOuter)/2:M.ring==="INNER_BULL"?ne=J.bullInner*.5:M.ring==="BULL"?ne=J.bullOuter*.8:ne=(J.trebleOuter+J.doubleInner)/2*(.6+Math.random()*.4));const g=Rr(se,ot,ne,_);Ae.push({x:g.x,y:g.y,w:1})}for(const M of Ae){const _=D.createRadialGradient(M.x,M.y,1,M.x,M.y,60);_.addColorStop(0,"rgba(255,0,0,0.9)"),_.addColorStop(.3,"rgba(255,100,0,0.5)"),_.addColorStop(1,"rgba(255,100,0,0)"),D.fillStyle=_,D.beginPath(),D.arc(M.x,M.y,60,0,Math.PI*2),D.fill()}D.fillStyle="rgba(255,255,255,0.85)",D.font="12px ui-sans-serif";const Me={};for(const M of w)M.sector&&(Me[M.sector]=(Me[M.sector]||0)+1);for(const M of Object.keys(Me)){const _=Number(M),ne=Er(_),g=Rr(se,ot,J.trebleOuter+18,ne);D.fillText(String(Me[_]),g.x-6,g.y+4)}},[w,l,f]),e.jsx("canvas",{ref:y,style:{width:"100%",height:"auto",borderRadius:8,background:"#081018"}})}function Ca(){return{targetIndex:0,darts:0,finished:!1}}const Hr=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25],Sa=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","Bull"];function Sl(l){return Hr[l.targetIndex]}function ka(l,f,w){if(l.finished)return l;const y=Sl(l);if(!(w==="SINGLE"&&f===y||w==="DOUBLE"&&f===y||w==="TRIPLE"&&f===y||w==="INNER_BULL"&&y===25))return l;const D=l.targetIndex+1,se=D>=Hr.length;return{targetIndex:D,darts:l.darts+1,finished:se}}function Fr(l,f){return ka(l,f,"SINGLE")}function Cl(){return Ca()}function Da(l=50){return{score:0,darts:0,finished:!1,target:l}}const kl=[5,10,15,20,25,50];function Dl(l){return kl.includes(l)}function Aa(l,f,w){if(l.finished)return l;if(!Dl(f))return{...l,darts:l.darts+1};const y=l.score+f,N=y>=l.target;return{score:N?l.target:y,darts:l.darts+1,finished:N,target:l.target}}function Ir(l,f){return Aa(l,f)}function Al(l=50){return Da(l)}function Ma(l=70){return{score:0,darts:0,finished:!1,target:l}}const Ml=[7,14,21];function Tl(l){return Ml.includes(l)}function Ta(l,f,w){if(l.finished)return l;if(!Tl(f))return{...l,darts:l.darts+1};const y=l.score+f,N=y>=l.target;return{score:N?l.target:y,darts:l.darts+1,finished:N,target:l.target}}function Pr(l,f){return Ta(l,f)}function Ll(l=70){return Ma(l)}function ae(l){return(f,w)=>{l(f)}}function Rl(l){const{match:f,commitManualVisitTotal:w,endTurn:y}=l;return{addVisit:(N,D=3,se)=>{if(w){w(N);return}try{f.addVisit(N,D,se)}catch{f.addVisit(N,D)}},undoVisit:()=>{f.undoVisit()},nextPlayer:()=>{if(y)try{y(0)}catch{f.nextPlayer()}else f.nextPlayer()},endLeg:N=>{typeof N=="number"?f.endLeg(N):f.endLeg(0)},endGame:()=>{f.endGame()}}}const El=["Easy","Medium","Hardened"];function he(l,f,w){return Math.max(f,Math.min(w,l))}const Fl=6500;function Il(l,f){let w=0;if(f==="Easy"){const y=[22,26,41,45,60];w=y[Math.floor(Math.random()*y.length)]}else f==="Medium"?w=Math.round(he(60+(Math.random()*30-15),30,100)):w=Math.round(he(80+(Math.random()*20-10),50,120));return l<=0?0:w>l?[100,85,81,60,57,45,41,26,22,20,1].find(N=>N<=l)??0:w}function Pl({onClose:l}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"card max-w-lg w-full relative",children:[e.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:l,children:"Close"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"X01 Rules & Regulations"}),e.jsxs("ul",{className:"list-disc pl-5 text-left mb-2",children:[e.jsx("li",{children:"Double In: Start scoring only after hitting a double."}),e.jsx("li",{children:"Double Out: Finish the game by hitting a double to reach exactly zero."}),e.jsx("li",{children:"Best Of: Play a set number of legs, winner is first to reach majority."}),e.jsx("li",{children:"First To: Play until a player reaches a set number of legs."}),e.jsx("li",{children:"No Cheating: All scores must be valid, no manual score changes mid-leg."}),e.jsx("li",{children:"Competitive Standard: Follow latest WDF/PDC rules for match play."})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"For full details, see official darts governing body rules."})]})})}const Hl="http://localhost:8787";function ic({user:l}){const{offlineLayout:f,favoriteDouble:w,callerEnabled:y,callerVoice:N,callerVolume:D,speakCheckoutOnly:se,rememberLastOffline:ot,setLastOffline:ve,autoStartOffline:J,cameraScale:je,setCameraScale:Ae,cameraAspect:Me="wide",setCameraAspect:M,cameraFitMode:_="fill",setCameraFitMode:ne,cameraEnabled:g,textSize:ys,boxSize:La,autoscoreProvider:Or,autoCommitMode:Vr="wait-for-clear",matchType:Br="singles",setMatchType:$r,teamAName:Kr="Team A",setTeamAName:Wr,teamBName:Ur="Team B",setTeamBName:Gr}=Gi(),ws=Or==="manual",S=g&&!ws,Te=g&&!ws&&Vr!=="immediate",[o,Ra]=n.useState("X01"),[v,Ea]=n.useState(501),[A,_r]=n.useState("None"),[zr,Fa]=n.useState(!1),[Ia,$t]=n.useState(!1),[I,H]=n.useState(v),[O,dt]=n.useState(v),[Ol,Pa]=n.useState(!1),[Ha,Q]=n.useState(!1),[mt,Oa]=n.useState(1),[V,Kt]=n.useState(0),Xr=Nl(),[B,Wt]=n.useState(0),[Ut,Z]=n.useState(null),[Va,qr]=n.useState(1),[Ba,Yr]=n.useState(1),[ie,$a]=n.useState([]),[Ka,Jr]=n.useState(2e3),Ne=_i(),[Ss,ut]=n.useState(!1),[xt,Wa]=n.useState(f==="modern"),[Ke,Ua]=n.useState(f==="modern");n.useEffect(()=>{Wa(f==="modern"),Ua(f==="modern")},[f]),n.useEffect(()=>{_!=="fit"&&ne("fit")},[_,ne]);const[Gt,Ga]=n.useState(1),[Qr,_a]=n.useState(!1),[R,ht]=n.useState(!0);n.useEffect(()=>{const t=()=>Ze(!0);return window.addEventListener("ndn:open-camera-manager",t),()=>window.removeEventListener("ndn:open-camera-manager",t)},[]);const[j,p]=n.useState(0),[ft,Cs]=n.useState(0),[ks,Ds]=n.useState(0),[Le,za]=n.useState(0),[Xa,qa]=n.useState(0),[bt,As]=n.useState(va()),[_t,zt]=n.useState(ja()),[pt,Xt]=n.useState(Na()),[qt,Yt]=n.useState(ya()),[Vl,re]=n.useState(0),[Ya,Ja]=n.useState(1),[Zr,Ms]=n.useState(27),[Bl,Qa]=n.useState(0),[ei,Ts]=n.useState(0),[Za,en]=n.useState(!1),[tn,sn]=n.useState(1),[ti,an]=n.useState(0),[$l,nn]=n.useState(0),si=8,[rn,ln]=n.useState(1),[ai,cn]=n.useState(0),[Kl,on]=n.useState(0),ni=10,[dn,mn]=n.useState(1),[ri,un]=n.useState(0),[Wl,xn]=n.useState(0),ii=10,[Ls,Rs]=n.useState(170),[hn,fn]=n.useState(0),[bn,pn]=n.useState(0),[gn,vn]=n.useState(0),[Es,Fs]=n.useState(121),[jn,Nn]=n.useState(0),[yn,wn]=n.useState(0),[Sn,Cn]=n.useState(0),[Re,Is]=n.useState(20),[Ps,Hs]=n.useState(0),[kn,Os]=n.useState(0),[gt,li]=n.useState(30),[Dn,Vs]=n.useState(!1),[An,Mn]=n.useState(Sr()),[Tn,Ln]=n.useState(Cr()),[Ee,Rn]=n.useState(kr()),[Bs,En]=n.useState(Dr()),[L,$s]=n.useState([{id:"p1",name:"Player 1"},{id:"p2",name:"Player 2"}]),[vt,jt]=n.useState({}),[Jt,Ks]=n.useState({}),[Fn,Ws]=n.useState(!1),[oe,We]=n.useState(0),[Ul,Ue]=n.useState(0),[Ge,Nt]=n.useState(null),[ci,fe]=n.useState(""),[Qt,Gl]=n.useState(Ca()),[Fe,yt]=n.useState(Ca()),[wt,_l]=n.useState(Da(50)),[le,St]=n.useState(Da(50)),[Ct,zl]=n.useState(Ma(70)),[ce,kt]=n.useState(Ma(70)),[Zt,Ie]=n.useState(0),[be,ye]=n.useState(0),[E,$]=n.useState(0),[Us,Dt]=n.useState(v),[de,ee]=n.useState(0),[_e,pe]=n.useState(null),[es,z]=n.useState(0),Pe=n.useRef(0),In=n.useRef(0),K=n.useRef(I),W=n.useRef(E),X=n.useRef(de),He=n.useRef(Us),U=n.useRef(es);n.useEffect(()=>{K.current=I},[I]),n.useEffect(()=>{W.current=E},[E]),n.useEffect(()=>{X.current=de},[de]),n.useEffect(()=>{He.current=Us},[Us]),n.useEffect(()=>{U.current=es},[es]);const[oi,At]=n.useState(0);n.useRef(null);const[ts,Gs]=n.useState(0),[Oe,ss]=n.useState(0),[ze,Ve]=n.useState(0),[Xe,ge]=n.useState(0),[qe,Ye]=n.useState(null),[_s,Je]=n.useState(0),[Mt,Tt]=n.useState(0),[zs,as]=n.useState(0),[Lt,Pn]=n.useState(0),[Xs,Hn]=n.useState(0),[Rt,Qe]=n.useState(0),[Et,On]=n.useState(0),[qs,Ft]=n.useState(0),[Ys,Vn]=n.useState(0),[Bn,ns]=n.useState(0),[di,rs]=n.useState(0),[mi,is]=n.useState(0),[$n,Js]=n.useState(0),[ui,Qs]=n.useState(0),[xi,Zs]=n.useState(0),[hi,ls]=n.useState(0),[fi,Kn]=n.useState(0),[bi,ea]=n.useState(!1),[G,P]=n.useState(""),[ta,It]=n.useState(""),[Xl,ql]=n.useState(""),[Wn,Un]=n.useState(""),[Gn,sa]=n.useState(""),[_n,aa]=n.useState(""),[cs,na]=n.useState(null),[pi,Ze]=n.useState(!1),[gi,zn]=n.useState({}),[vi,Pt]=n.useState(!1),we=n.useRef(null),ra=n.useRef(null),me=n.useCallback(()=>{const t=ra.current;t&&(clearTimeout(t),ra.current=null)},[]),os=n.useCallback(t=>{if(!y)return;const s=l?.username||"Player";try{Ns(s,t.visitTotal,Math.max(t.remaining,0),N,{volume:D,checkoutOnly:se})}catch{}},[y,N,D,se,l?.username]),ds=n.useCallback((t,s)=>{Pt(!1);const{visitTotal:a,darts:r,preRemaining:i,remaining:u,doubleAttempts:m,finished:b,doubleWindow:d,highestCheckout:x}=t;b?(H(0),K.current=0,typeof x=="number"&&x>0&&ls(c=>Math.max(c,x))):(H(u),K.current=u),pe(a),a===180?ns(c=>c+1):a>=140?rs(c=>c+1):a>=100&&is(c=>c+1),d&&m>0&&(Tt(c=>c+m),b&&as(c=>c+1)),t.announced||os(t);try{Bt.getState().recordVisit("offline-x01",r,a,{preRemaining:i,postRemaining:b?0:u,finish:b,bust:!1})}catch{}b&&(Z("player"),Q(!0)),it(b?0:u),ee(0),X.current=0,$(0),W.current=0,z(0),U.current=0},[it,ls,Z,H,pe,ee,$,z,Q,ns,rs,is,Tt,as,os]),et=n.useCallback(t=>{const s=we.current;s&&(we.current=null,me(),ds(s,t))},[me,ds]),Xn=n.useCallback(t=>{os(t),we.current={...t,announced:!0},Pt(!0),me(),ra.current=setTimeout(()=>et("timeout"),Fl)},[me,et,os]);n.useEffect(()=>{if(!Te)return;const t=()=>et("event");return window.addEventListener("ndn:darts-cleared",t),()=>window.removeEventListener("ndn:darts-cleared",t)},[Te,et]),n.useEffect(()=>{Te||et("timeout")},[Te,et]),n.useEffect(()=>()=>me(),[me]),n.useEffect(()=>{if(E===0&&In.current>0){try{window.dispatchEvent(new CustomEvent("ndn:darts-cleared",{detail:{source:"offline-play",ts:Date.now()}}))}catch{}Pe.current=0}In.current=E},[E]);const Se=l?.username||"Player 1",tt=A==="None"?"Player 2":A,ms=$e("X01",I,O,V,B,be,Oe,de,ze,_e,qe,E,Xe,zs,Mt,Xs,Lt,ie,R,A),ji=$e("Cricket",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,bt),Ni=$e("Shanghai",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,R,A,void 0,bt,_t),yi=$e("Killer",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,L,vt,Jt,oe),wi=$e("Scam"),Si=$e("Fives"),Ci=$e("Sevens"),us=n.useMemo(()=>{const t=ms||[],s=E>0?de:_e??be,a=Xe>0?ze:qe??Oe;return t.length===0?{name:R?Se:tt,isCurrentTurn:!0,legsWon:R?V:B,score:R?I:O,lastScore:R?s:a}:t.find(r=>r.isCurrentTurn)??t[0]},[ms,R,Se,tt,V,B,I,O,E,de,_e,be,ze,qe,Oe,Xe]),qn=n.useMemo(()=>{if(!us)return[];const{matchAvg:t,allTimeAvg:s,...a}=us;return[{...a,matchAvg:void 0,allTimeAvg:void 0}]},[us]),ki=R?tt:Se,Di=us?.name??(R?Se:tt),Ai=R?I:O,Mi=R?E>0?de:_e??be:Xe>0?ze:qe??Oe,C=n.useCallback((t,s=1)=>{!t||s<=0||zn(a=>({...a,[t]:(a[t]||0)+s}))},[]),T=n.useCallback(t=>{t&&zn(s=>s[t]===void 0?s:{...s,[t]:0})},[]);gi[o];const Ti=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?he(Math.round(s),0,v):null},Li=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?Math.max(0,Math.round(s)):null},Yn=n.useCallback(()=>{we.current&&(we.current=null),me(),Pt(!1)},[me]);n.useCallback(t=>{const s=he(t,0,v);Yn(),H(s),K.current=s;const a=s===0?v:s;Dt(a),He.current=a,ee(0),X.current=0,$(0),W.current=0,z(0),U.current=0,pe(null),ye(0),p(0),Pe.current=0,s===0?(Z("player"),Q(!0)):(Z(null),Q(!1))},[Yn,H,v,Dt,ee,$,z,pe,ye,p,Z,Q]);const Jn=t=>{const a=Ti(Wn);if(a===null){Ne(`Enter a number between 0 and ${v}`,{type:"error",timeout:2500});return}dt(a),Ve(0),ge(0),Ye(null),Je(0),ss(0),Un(""),Z(null),Q(!1)},Qn=n.useCallback((t,s)=>{t==="player"?(Kt(s),sa("")):(Wt(s),aa("")),Z(null),Q(!1)},[Wt,aa,sa,Z,Kt,Q]),xs=t=>{const a=Li(t==="player"?Gn:_n);if(a===null){Ne("Enter a non-negative whole number for legs",{type:"error",timeout:2500});return}na({target:t,value:a,stage:1})},Ri=n.useCallback(()=>{na(t=>t&&(t.stage===1?{...t,stage:2}:(Qn(t.target,t.value),null)))},[Qn]),Ht=n.useCallback(()=>{na(null)},[]);n.useEffect(()=>{if(!cs)return;const t=s=>{s.key==="Escape"&&(s.preventDefault(),Ht())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[Ht,cs]);const Ce=(t=>{switch(t){case"small":return"px-1.5 py-0.5 text-xs";case"large":return"px-3 py-1 text-sm";default:return"px-2 py-0.5 text-sm"}})(ys),st=n.useRef(null),at=n.useRef(null),ia=n.useRef(null),[nt,la]=n.useState("first"),[hs,Zn]=n.useState(1),Ei=n.useRef(null);n.useEffect(()=>{const t=Math.max(1,Math.floor(Number(hs)||1)),s=nt==="first"?t:Math.max(1,Math.ceil(t/2));Oa(s)},[nt,hs]),n.useEffect(()=>{if(!Ke){Ga(1),_a(!1);return}const t=()=>{const r=st.current,i=at.current;if(!r||!i)return;const u=ia.current?ia.current.getBoundingClientRect().height:0,m=Math.max(0,r.clientHeight-u-6),b=Math.max(0,r.clientWidth-8),d=i.getBoundingClientRect(),x=Gt||1,c=d.height/x,h=d.width/x,Y=m>0?m/c:1,ue=b>0?b/h:1,ke=Math.min(1,Math.max(.5,Math.min(Y,ue))),te=c*ke,F=m>0&&te-m>1;_a(F),Ga(ke)};t();const s=window.ResizeObserver,a=s?new s(()=>t()):null;return a&&st.current&&a.observe(st.current),a&&at.current&&a.observe(at.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t);try{a&&st.current&&a.unobserve(st.current)}catch{}try{a&&at.current&&a.unobserve(at.current)}catch{}}},[Ke,Gt]),n.useEffect(()=>{const t=s=>{const a=s?.detail?.mode;a&&(Ra(a),rt())};return window.addEventListener("ndn:auto-start",t),()=>window.removeEventListener("ndn:auto-start",t)},[]),n.useEffect(()=>{const t=s=>{const a=s?.detail?.formatType,r=s?.detail?.formatCount,i=s?.detail?.startScore;(a==="first"||a==="best")&&la(a),typeof r=="number"&&isFinite(r)&&Zn(Math.max(1,Math.floor(r))),typeof i=="number"&&isFinite(i)&&Ea(Math.max(1,Math.floor(i)))};return window.addEventListener("ndn:offline-format",t),()=>window.removeEventListener("ndn:offline-format",t)},[]),n.useEffect(()=>{if(!J)return;const t=setTimeout(()=>rt(),50);return()=>clearTimeout(t)},[J]),n.useEffect(()=>{if(!Ss||R||A==="None"||oi<=0)return;let t,s=performance.now();const a=r=>{const i=r-s;s=r,At(u=>{const m=u-i;if(m<=0){let b=0,d=0,x=O;for(ge(0);b<3&&x>0;){const c=Il(x,A),h=he(c-b*20,0,Math.min(60,x)),Y=x-h;if(ss(h),Gs(te=>te+1),On(te=>te+1),Y<0){x=O,Ve(0),Je(0),d=0,Ye(0),ge(0);break}d+=h,Ve(te=>te+h),Vn(te=>te+h);const ue=x,ke=Y;if(ue>50&&ke<=50?Je(1):ue<=50&&Je(te=>te+1),x=Y,b+=1,ge(b),x===0)break}if(dt(x),x===0){d===180?Js(h=>h+1):d>=140?Qs(h=>h+1):d>=100&&Zs(h=>h+1);const c=O;c<=170&&Kn(h=>Math.max(h,c)),O<=50&&(Pn(h=>h+(_s>0?_s:1)),Hn(h=>h+1)),Ye(d),Ve(0),Je(0),ge(0),Z("ai"),Q(!0)}return x>0&&b>=3&&(d===180?Js(c=>c+1):d>=140?Qs(c=>c+1):d>=100&&Zs(c=>c+1),Ye(d),Ve(0),Je(0),ge(0)),ge(0),ht(!0),0}return m}),t=requestAnimationFrame(a)};return t=requestAnimationFrame(a),()=>cancelAnimationFrame(t)},[Ss,R,A,O]);function rt(){$t(!0),H(v),K.current=v,dt(v),Pa(!1),ut(!0),ht(!0),p(0),Ie(0),ye(0),$(0),W.current=0,Dt(v),ee(0),pe(null),z(0),At(0),Gs(0),ss(0),Ve(0),ge(0),Ye(null),Z(null),Kt(0),Wt(0),$a([]),Hs(0),Os(0),Vs(!1),Qe(0),On(0),Ft(0),Vn(0),ns(0),rs(0),is(0),Js(0),Qs(0),Zs(0),ls(0),Kn(0),Tt(0),as(0),Pn(0),Hn(0),T("X01");const t=Math.max(1,Math.floor(Number(hs)||1));if(Oa(nt==="first"?t:Math.max(1,Math.ceil(t/2))),ot)try{ve({mode:o,x01Start:v,firstTo:mt,aiLevel:A})}catch{}}function Fi(){H(v),K.current=v,dt(v),Pa(!1),ut(!0),ht(!0),p(0),Ie(0),ye(0),$(0),W.current=0,Dt(v),ee(0),He.current=v,X.current=0,pe(null),z(0),U.current=0,U.current=0,At(0),Gs(0),ss(0),Ve(0),ge(0),Ye(null),Z(null)}function it(t){$(0),W.current=0,Dt(t===0?v:t),He.current=t===0?v:t,z(0),U.current=0,A!=="None"?(ht(!1),At(Ka)):(At(0),ht(!0))}function lt(t){if(Te&&we.current){vi||Pt(!0),Ne("Remove your darts before starting the next throw",{type:"info",timeout:1800});return}C("X01");const s=K.current,a=W.current,r=X.current,i=He.current,u=U.current,m=s-t,b=a+1;if(ye(t),Ie(F=>F+1),Qe(F=>F+1),m<0){try{const F=s,ga=i;Bt.getState().recordVisit("offline-x01",b,0,{preRemaining:F,postRemaining:ga,bust:!0,finish:!1})}catch{}if(H(i),K.current=i,s<=50){const F=(u||0)+1;Tt(ga=>ga+F)}if(y)try{Ns(l?.username||"Player",0,Math.max(i,0),N,{volume:D,checkoutOnly:se})}catch{}pe(0),p(0),ee(0),X.current=0,z(0),U.current=0,it(i);return}H(m),K.current=m,$(b),W.current=b;const d=r+t;ee(d),X.current=d,Ft(F=>F+t),p(0);const x=s,c=m,h=x>50&&c<=50,Y=x<=50;h?(z(1),U.current=1):Y&&(z(F=>F+1),U.current=(u||0)+1);const ue=U.current||0,ke=x<=50,te=ke?Math.max(ue,Math.min(b,3)):0;if(m===0){const F={visitTotal:d,darts:b,preRemaining:s,remaining:0,doubleAttempts:te,finished:!0,doubleWindow:ke,highestCheckout:i<=170?i:null};Te?Xn(F):ds(F,"immediate");return}if(b>=3){const F={visitTotal:d,darts:b,preRemaining:s,remaining:m,doubleAttempts:te,finished:!1,doubleWindow:ke,highestCheckout:null};Te?Xn(F):ds(F,"immediate");return}}function fs(){const t=he(Math.round(Number(j)||0),0,60);lt(t)}function q(t){if(!Number.isFinite(t))return!1;const s=He.current,a=K.current,r=W.current,i=X.current,u=r>0||i>0;u&&(H(s),K.current=s,$(0),W.current=0,ee(0),X.current=0,z(0),U.current=0,ye(0),p(0),Ie(c=>Math.max(0,c-r)),Qe(c=>Math.max(0,c-r)),Ft(c=>Math.max(0,c-i)),Pe.current=0);const m=u?s:a,b=m<=170?170:180,d=he(Math.round(t),0,b);C("X01",3),Ie(c=>c+3),Qe(c=>c+3),$(3),W.current=3,ee(d),X.current=d,pe(d),d===180?ns(c=>c+1):d>=140?rs(c=>c+1):d>=100&&is(c=>c+1);const x=m-d;if(x<0){if(y)try{Ns(Se,0,Math.max(s,0),N,{volume:D,checkoutOnly:se})}catch{}try{Bt.getState().recordVisit("offline-x01",3,0,{preRemaining:m,postRemaining:s,bust:!0,finish:!1})}catch{}return H(s),K.current=s,pe(0),ee(0),X.current=0,$(0),W.current=0,z(0),U.current=0,it(s),!0}if(H(x),K.current=x,Ft(c=>c+d),y)try{Ns(Se,d,Math.max(x,0),N,{volume:D,checkoutOnly:se})}catch{}if(m<=50&&(Tt(c=>c+3),x===0&&as(c=>c+1)),x===0){m<=170&&ls(c=>Math.max(c,m));try{Bt.getState().recordVisit("offline-x01",3,d,{preRemaining:m,postRemaining:0,finish:!0,bust:!1})}catch{}return Z("player"),Q(!0),$(0),W.current=0,ee(0),X.current=0,z(0),U.current=0,!0}try{Bt.getState().recordVisit("offline-x01",3,d,{preRemaining:m,postRemaining:x,finish:!1,bust:!1})}catch{}return it(x),ee(0),X.current=0,$(0),W.current=0,z(0),U.current=0,!0}matchActions=Rl({match:Xr,commitManualVisitTotal:q,endTurn:it});const[bs,ps]=n.useState(""),er=t=>{if(!t){ps("");return}const s=t.replace(/[^0-9]/g,"");if(!s){ps("");return}const a=Number(s);if(!Number.isFinite(a))return;const r=K.current<=170?170:180,i=he(Math.round(a),0,r);ps(String(i))};function gs(){if(!bs){alert("Enter a number 0â€“180 for visit total");return}const t=Number(bs);if(!Number.isFinite(t)){alert("Enter a number 0â€“180 for visit total");return}const s=K.current<=170?170:180,a=he(Math.round(t),0,s);t>s&&Ne(`Visit totals cannot exceed ${s}.`,{type:"info",timeout:2200}),q(a)&&ps("")}const ca=n.useCallback(()=>{we.current&&(we.current=null,me(),Pt(!1));const t=W.current,s=X.current,a=He.current;t===0&&s===0||(H(a),K.current=a,$(0),W.current=0,ee(0),X.current=0,z(0),U.current=0,ye(0),p(0),Ie(r=>Math.max(0,r-t)),Qe(r=>Math.max(0,r-t)),Ft(r=>Math.max(0,r-s)),Pe.current=0)},[me]);n.useEffect(()=>{const t=s=>{const a=s?.detail;!a||a?.source==="offline-play"||ca()};return window.addEventListener("ndn:clear-visit-request",t),()=>window.removeEventListener("ndn:clear-visit-request",t)},[ca]);function tr(t){C("Double Practice");const s=he(Math.round(t||0),0,60);if(ye(s),Ie(a=>a+1),Qe(a=>a+1),Mr(s,ft)){const a=ks+1;Ds(a),Cs(r=>Math.min(20,r+1)),a>=21&&(Z("player"),Q(!0))}p(0)}function sr(){tr(Number(j))}function ar(){const t=ct(G);if(t==null){alert("Enter like D16, 50, 25, T20");return}tr(t),P("")}function nr(t,s,a){if(Za)return;C("Bob's 27");const r=Ya,i=s==="DOUBLE"&&a===r||!s&&t===r*2;i&&Ts(u=>u+1),Qa(u=>{const m=u+1;if(m>=3){const b=ei+(i?1:0);b>0?Ms(x=>x+b*r*2):Ms(x=>x-r*2);const d=r+1;return Ja(d),Ts(0),d>20&&en(!0),0}return m})}function rr(){nr(Math.max(0,j|0)),p(0)}function ir(){Ja(1),Ms(27),Qa(0),Ts(0),en(!1),T("Bob's 27")}function oa(t){C("Count-Up"),an(s=>s+Math.max(0,t|0)),nn(s=>{const a=s+1;return a>=3?(sn(r=>r+1),0):a})}function da(t){C("High Score"),cn(s=>s+Math.max(0,t|0)),on(s=>{const a=s+1;return a>=3?(ln(r=>r+1),0):a})}function ma(t){C("Low Score"),un(s=>s+Math.max(0,t|0)),xn(s=>{const a=s+1;return a>=3?(mn(r=>r+1),0):a})}function lr(t,s,a,r,i,u,m,b){const d=t-m;if(!(d<0))if(d===0){if(b==="DOUBLE"||b==="INNER_BULL"){u(x=>x+1),i(x=>x+1),r(()=>0),s(t);return}s(d)}else s(d);r(x=>{const c=x+1;return c>=3?(i(h=>h+1),0):c})}function cr(t,s){C("Checkout 170"),lr(Ls,Rs,hn,fn,pn,vn,t,s),hn+1>=3&&Rs(170)}function or(t,s){C("Checkout 121"),lr(Es,Fs,jn,Nn,wn,Cn,t,s),jn+1>=3&&Fs(121)}function vs(t){const s=ct(G);if(s==null){alert("Enter like T20, D16, 25, 50");return}const a=G.trim().toUpperCase(),r=a.startsWith("D")||a==="50"||a==="BULL"||a==="DBULL"||a==="IBULL"||a.includes("INNER");t?cr(s,r?"DOUBLE":void 0):or(s,r?"DOUBLE":void 0),P("")}function Ii(){Rs(170),fn(0),pn(0),vn(0),T("Checkout 170")}function Pi(){Fs(121),Nn(0),wn(0),Cn(0),T("Checkout 121")}function ua(t,s,a){if(Dn)return;C("Treble Practice"),(s==="TRIPLE"&&a===Re||!s&&t===Re*3)&&Hs(i=>i+1),Os(i=>{const u=i+1;if(u%3===0&&[20,19,18].includes(Re)){const m=[20,19,18],b=m.indexOf(Re),d=m[(b+1)%m.length];Is(d)}return gt>0&&u>=gt&&Vs(!0),u})}function dr(){Hs(0),Os(0),Vs(!1),T("Treble Practice")}function Hi(t,s,a){C("Baseball"),Mn(r=>{const i={...r};return ll(i,t,s,a),i})}function Oi(){Mn(Sr()),T("Baseball")}function Vi(t,s,a){C("Golf"),Ln(r=>{const i={...r};return cl(i,t,s,a),i})}function Bi(){Ln(Cr()),T("Golf")}function $i(t,s,a,r){C("Tic Tac Toe"),Rn(i=>{const u={...i,board:[...i.board]};return ol(u,t,s,a,r),u})}function Ki(){Rn(kr()),T("Tic Tac Toe")}function Wi(t,s,a){C("American Cricket"),En(r=>{const i={...r,marks:{...r.marks}};return dl(i,t,s,a,()=>!1),i})}function mr(){En(Dr()),T("American Cricket")}function xa(t,s,a){C("Around the Clock");const r=De[Le];let i=!1;if(typeof a=="number"&&a===r&&(s==="SINGLE"||s==="DOUBLE"||s==="TRIPLE")&&(i=!0),r===25&&(s==="BULL"||t===25)&&(i=!0),r===50&&(s==="INNER_BULL"||t===50)&&(i=!0),i||(t===r||t===r*2||t===r*3)&&(i=!0),i){const u=Xa+1;qa(u),za(m=>m+1)}}function ur(){xa(Math.max(0,j|0)),p(0)}function xr(){const t=ct(G);if(t==null){alert("Enter like T20, D5, 25, 50");return}xa(t),P("")}function ha(t,s,a){C("Cricket"),As(r=>{const i={...r,marks:{...r.marks}};return ml(i,t,s,a,()=>!1),i}),re(r=>{const i=r+1;return i>=3?0:i})}function hr(){ha(Math.max(0,j|0)),p(0)}function fa(t,s,a){C("Shanghai"),zt(r=>{const i={...r,turnHits:{...r.turnHits}};return ul(i,t,s,a),i}),re(r=>{const i=r+1;return i>=3?(zt(u=>{const m={...u,turnHits:{...u.turnHits}};return xl(m),m}),0):i})}function fr(){fa(Math.max(0,j|0)),p(0)}function br(t,s,a){C("Halve It"),Xt(r=>{const i={...r,targets:[...r.targets]};return hl(i,t,s,a),i}),re(r=>{const i=r+1;return i>=3?(Xt(u=>{const m={...u,targets:[...u.targets]};return fl(m),m}),0):i})}function pr(){br(Math.max(0,j|0)),p(0)}function gr(t,s,a){C("High-Low"),Yt(r=>{const i={...r};return bl(i,t,s,a),i}),re(r=>{const i=r+1;return i>=3?(Yt(u=>{const m={...u};return pl(m),m}),0):i})}function vr(){gr(Math.max(0,j|0)),p(0)}function jr(){const t=G.trim().toUpperCase();if(!t)return null;if(t==="50"||t==="BULL"||t==="DBULL"||t==="IBULL")return 50;if(t==="25"||t==="OBULL")return 25;const s=t.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!s)return null;const a=s[1]||"S",r=parseInt(s[2],10);return r<1||r>20?null:r*(a==="S"?1:a==="D"?2:3)}function Ot(){const t=jr();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}lt(t),P("")}function Nr(){const t=ta.trim().split(`
`).map(s=>s.trim()).filter(s=>s);if(t.length!==0){for(const s of t){const a=ct(s);if(a==null){alert(`Invalid score: ${s}`);return}lt(a)}It("")}}function ba(){E!==0&&(H(t=>t+be),$(t=>Math.max(0,t-1)))}function js(){const t=jr();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}if(E===0){Ot();return}const s=be;H(a=>a+s),$(a=>Math.max(0,a-1)),setTimeout(()=>lt(t),0),P("")}function Ui(){const t=Ut??"player",s=t==="player"?es||void 0:_s||void 0,a=1,r=t==="player"?Zt:ts;$a([...ie,{winner:t,doubleDarts:Va,checkoutDarts:Ba,winnerDarts:r,doublesAtt:s,doublesHit:a}]),Q(!1);let i=V,u=B;if(Ut==="player"?i+=1:Ut==="ai"&&(u+=1),Kt(i),Wt(u),Z(null),i>=mt||u>=mt){try{Yi(o,t==="player")}catch{}ut(!1),$t(!1),H(v),dt(v),ea(!0);return}Fi()}const pa=!wr.includes(o)&&!(l?.fullAccess||l?.admin);return e.jsxs("div",{className:"card ndn-game-shell relative overflow-hidden",children:[e.jsxs("h2",{className:"text-2xl font-bold text-brand-700 mb-4",children:["Offline Game Modes ",f==="classic"?e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-white/10 border border-white/10 align-middle",children:"Classic layout"}):e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-400/30 text-emerald-200 align-middle",children:"Modern layout"})]}),e.jsxs("div",{className:"ndn-shell-body",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[e.jsx("label",{className:"font-semibold",children:"Select game mode:"}),e.jsxs("select",{className:"input w-full",value:o,onChange:t=>Ra(t.target.value),children:[wr.map(t=>e.jsx("option",{value:t,children:t},t)),zi.map(t=>e.jsxs("option",{value:t,disabled:!(l?.fullAccess||l?.admin),children:[t," ",l?.fullAccess||l?.admin?"":"(Premium)"]},t))]}),e.jsx(Ji,{gameMode:o,compact:!0}),o==="Treble Practice"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"font-semibold",children:"Throws per game"}),e.jsx("input",{className:"input w-full",type:"number",min:3,step:3,value:gt,onChange:t=>li(Math.max(3,Math.floor(Number(t.target.value)||30)))})]}),e.jsx("div",{className:"sm:col-span-2 text-xs text-slate-300",children:"Target cycles T20â†’T19â†’T18 every 3 darts. Game ends after the selected number of throws."})]}),!l?.fullAccess&&e.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”’"}),e.jsx("span",{children:"Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM."})]}),o==="X01"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-semibold mt-2",children:"Enter starting score (1-1001):"}),e.jsx("input",{className:"input w-full",type:"number",min:1,max:1001,value:v,onChange:t=>Ea(Number(t.target.value))}),e.jsx("label",{className:"font-semibold mt-2",children:"Play against AI bot?"}),e.jsxs("select",{className:"input w-full",value:A,onChange:t=>_r(t.target.value),children:[e.jsx("option",{value:"None",children:"None"}),El.map(t=>e.jsx("option",{value:t,children:t},t))]}),A!=="None"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"font-semibold",children:"AI throw delay (seconds)"}),e.jsx("input",{className:"input w-full",type:"number",min:.5,max:10,step:.5,value:Ka/1e3,onChange:t=>Jr(Math.round(Number(t.target.value)*1e3))})]}),e.jsx("div",{className:"text-sm text-slate-300",children:"Controls how long the AI waits before its visit."})]}),e.jsx("button",{className:"btn mt-2",onClick:()=>Fa(!0),children:"X01 Rules & Regulations!"})]}),o==="Double Practice"&&e.jsx("div",{className:"mt-2 text-brand-600",children:"Hit doubles D1 â†’ D20 â†’ DBULL in as few darts as possible. AI and X01 settings donâ€™t apply."})]}),!Ia&&e.jsx("button",{className:"btn",disabled:pa,title:pa?"PREMIUM required for this mode":"",onClick:rt,children:"Start Match"}),Ss&&e.jsx("div",{className:`absolute inset-0 z-[1000] ${xt?"":"flex items-center justify-center p-3 sm:p-4"}`,children:e.jsx(Vt,{storageKey:"ndn:modal:offline-match",className:`${xt?"w-full h-full ndn-modal-tight":""} relative flex flex-col overflow-hidden`,fullScreen:xt,defaultWidth:1100,defaultHeight:720,minWidth:720,minHeight:480,maxWidth:1600,maxHeight:1200,initialFitHeight:!0,children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-x-hidden pr-1 pt-2 pb-2",style:{overflowY:Ke&&!Qr?"hidden":"auto"},ref:t=>{st.current=t},children:[e.jsx("div",{ref:t=>{ia.current=t},children:e.jsx(Qi,{left:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden xs:inline px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-[10px] sm:text-xs",children:"Game Mode"}),e.jsxs("span",{className:"font-medium whitespace-nowrap",children:[o,o==="X01"?` / ${v}`:""]}),e.jsxs("span",{className:"opacity-80 whitespace-nowrap",children:["First to ",mt," Â· Legs ",V,"-",B]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full border text-[10px] sm:text-xs ${f==="modern"?"bg-emerald-500/15 text-emerald-200 border-emerald-400/30":"bg-white/10 text-white/70 border-white/20"}`,children:f==="modern"?"Modern layout":"Classic layout"})]}),right:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden items-center gap-2 mr-2 text-xs",children:[e.jsx("span",{className:"opacity-80",children:"Cam"}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>Ae(Math.max(.5,Math.round((je-.05)*100)/100)),title:"Decrease camera size",children:"âˆ’"}),e.jsxs("span",{className:"w-9 text-center",children:[Math.round(je*100),"%"]}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>Ae(Math.min(1.25,Math.round((je+.05)*100)/100)),title:"Increase camera size",children:"+"})]}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:Ke?"Actual Size":"Fit All",onClick:()=>Ua(t=>!t),children:Ke?"Actual Size":"Fit All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:xt?"Restore":"Maximize",onClick:()=>Wa(t=>!t),children:xt?"Restore":"Maximize"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{rt()},children:"Restart"}),e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:()=>{ut(!1),$t(!1)},children:"Quit"})]})})}),e.jsxs("div",{ref:t=>{at.current=t},className:"will-change-transform",style:Ke?{transform:`scale(${Gt})`,transformOrigin:"top left",width:"100%",fontSize:`${Math.max(.8,Math.min(1,Gt))}em`}:void 0,children:[e.jsx("h3",{className:"text-xl font-bold mb-2 mt-1 leading-tight",children:o==="X01"?"X01 Match":o}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Mode: ",o]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Start: ",v]}),e.jsxs("div",{ref:Ei,className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[e.jsx("span",{children:"Format:"}),(()=>{const t=I!==v||O!==v||E>0,s=`px-2 py-0.5 rounded border text-xs ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"} `;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:`${s} ${nt==="first"?"bg-indigo-500/20 text-indigo-100 border-indigo-400/30":"bg-white/10 text-white/80 border-white/20"}`,onClick:()=>{t||la("first")},title:"First to N",children:"First to"}),e.jsx("button",{type:"button",className:`${s} ${nt==="best"?"bg-indigo-500/20 text-indigo-100 border-indigo-400/30":"bg-white/10 text-white/80 border-white/20"}`,onClick:()=>{t||la("best")},title:"Best of N (wins = ceil(N/2)",children:"Best of"})]}),e.jsx("input",{className:`input w-16 text-center ${t?"opacity-50":""}`,type:"number",min:1,step:1,value:hs,onChange:a=>Zn(Math.max(1,Math.floor(Number(a.target.value)||1))),disabled:t,title:nt==="first"?"First to N":"Best of N (wins = ceil(N/2))"})]})})()]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs: ",V,"â€“",B]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px] flex-wrap",children:[e.jsx("span",{className:"opacity-70",children:"Match"}),e.jsxs("select",{className:`btn ${Ce}`,value:Br,onChange:t=>$r(t.target.value),children:[e.jsx("option",{value:"singles",children:"Singles"}),e.jsx("option",{value:"doubles",children:"Doubles"})]}),e.jsx("input",{className:`input ${Ce} w-[7.5rem]`,value:Kr,onChange:t=>Wr(t.target.value),placeholder:"Team A"}),e.jsx("span",{className:"opacity-50",children:"vs"}),e.jsx("input",{className:`input ${Ce} w-[7.5rem]`,value:Ur,onChange:t=>Gr(t.target.value),placeholder:"Team B"})]})]}),o!=="X01"?e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2",children:[o==="Double Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:wa[ft]?.label||"â€”"})]})}),o==="Around the Clock"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:De[Le]===25?"25 (Outer Bull)":De[Le]===50?"50 (Inner Bull)":De[Le]||"â€”"})]})}),o==="Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Cricket â€” Close 20â€“15 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-[11px] mb-2",children:el.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,bt.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points: ",e.jsx("span",{className:"font-semibold",children:bt.points})]}),Zi(bt)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{As(va()),re(0),T("Cricket")},children:"Reset"})]})]}),o==="Shanghai"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Round"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:_t.round})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",_t.score]}),_t.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{zt(ja()),re(0),T("Shanghai")},children:"Reset"})]})]}),o==="Halve It"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Stage"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[pt.stage+1,"/",pt.targets.length]})]}),e.jsxs("div",{className:"text-sm",children:["Target: ",e.jsx("span",{className:"font-semibold",children:(()=>{const t=tl(pt);return t?t.kind==="ANY_NUMBER"?"Any":t.kind==="BULL"?"Bull":t.kind==="DOUBLE"||t.kind==="TRIPLE"||t.kind==="NUMBER"?`${t.kind} ${t.num}`:"â€”":"â€”"})()})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",pt.score]}),pt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Xt(Na()),re(0),T("Halve It")},children:"Reset"})]})]}),o==="High-Low"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",qt.round," Â· Target ",qt.target]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",qt.score]}),qt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Yt(ya()),re(0),T("High-Low")},children:"Reset"})]})]}),o==="Bob's 27"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Target"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold",children:["D",Ya]})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Zr]}),Za&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:ir,children:"Reset"})]})]}),o==="Count-Up"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",tn,"/8"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ti]})]}),o==="High Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",rn,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ai]})]}),o==="Low Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",dn,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ri]})]}),o==="Checkout 170"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ls}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",bn," Â· Successes: ",gn]})]}),o==="Checkout 121"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Es}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",yn," Â· Successes: ",Sn]})]}),o==="Treble Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Treble Target: T",Re]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Hits: ",Ps]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("label",{className:"text-sm",children:"Target"}),e.jsx("div",{className:"inline-flex items-center gap-1",children:[20,19,18].map(t=>e.jsxs("button",{className:`btn px-2 py-0.5 text-xs ${Re===t?"bg-emerald-600/30 border border-emerald-400/30":""}`,onClick:()=>Is(t),children:["T",t]},`tpick-header-${t}`))}),e.jsx("span",{className:"opacity-60 text-xs",children:"or"}),e.jsx("select",{className:"input w-24",value:Re,onChange:t=>Is(parseInt(t.target.value,10)),children:Array.from({length:20},(t,s)=>s+1).map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:dr,children:"Reset"})]})]})}),o==="Baseball"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Inning"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:An.inning}),e.jsxs("div",{className:"text-sm",children:["Score: ",e.jsx("span",{className:"font-semibold",children:An.score})]})]}),o==="Golf"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Hole"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Tn.hole}),e.jsxs("div",{className:"text-sm",children:["Strokes: ",e.jsx("span",{className:"font-semibold",children:Tn.strokes})]})]}),o==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Turn"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ee.turn}),Ee.finished&&e.jsxs("div",{className:"mt-1 text-xs",children:["Winner: ",Ee.winner||"â€”"]})]}),o==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Target"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Sa[Qt.targetIndex]}),e.jsxs("div",{className:"text-sm",children:["Progress: ",e.jsxs("span",{className:"font-semibold",children:[Qt.targetIndex+1,"/",Sa.length]})]}),Qt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["ðŸŽ‰ Finished in ",Qt.darts," darts!"]})]}),o==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[wt.score,"/",wt.target]}),e.jsxs("div",{className:"text-sm",children:["Darts: ",e.jsx("span",{className:"font-semibold",children:wt.darts})]}),wt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",wt.target,"!"]})]}),o==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[Ct.score,"/",Ct.target]}),e.jsxs("div",{className:"text-sm",children:["Darts: ",e.jsx("span",{className:"font-semibold",children:Ct.darts})]}),Ct.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",Ct.target,"!"]})]}),o==="American Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Close 20â€“12 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-10 gap-1 text-center text-[11px] mb-2",children:al.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,Bs.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points: ",e.jsx("span",{className:"font-semibold",children:Bs.points})]}),sl(Bs)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:mr,children:"Reset"})]})]}),o==="Killer"&&e.jsx(e.Fragment,{children:Fn?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Turn"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:L[oe]?.name||"â€”"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ge?`${L.find(t=>t.id===Ge)?.name||"Winner"} Wins`:ci||"Ready"})]}):e.jsx("div",{className:"text-xs text-slate-600",children:"Setup players and assign numbers"})})]}):f==="modern"?e.jsx("div",{className:"space-y-3 mb-2",children:ws?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Manual scoring active"}),e.jsx("div",{className:"text-xs opacity-70",children:"Camera previews are disabled. Use the manual entry controls below to record your turn."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-wrap gap-1.5 mt-1",children:e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"opacity-70",children:"Cam"}),e.jsx("button",{className:`btn ${Ce}`,onClick:()=>Ae(Math.max(.5,Math.round((je-.05)*100)/100)),children:"âˆ’"}),e.jsxs("span",{className:`btn ${Ce} min-w-[2.5rem] text-center`,children:[Math.round(je*100),"%"]}),e.jsx("button",{className:`btn ${Ce}`,onClick:()=>Ae(Math.min(1.25,Math.round((je+.05)*100)/100)),children:"+"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${Ce}`,title:"Toggle fit/fill",onClick:()=>ne(_==="fill"?"fit":"fill"),children:_==="fill"?"Fill":"Fit"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${Ce}`,title:"Toggle camera aspect",onClick:()=>M(Me==="square"?"wide":"square"),children:Me==="square"?"Square":"Wide"})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row-reverse md:items-start md:gap-6",children:[e.jsx("div",{className:"w-full h-[260px] rounded-2xl overflow-hidden bg-black shadow-xl md:w-[48%] md:min-h-[420px]",children:e.jsx(k,{scoringMode:"x01",showToolbar:S,onAutoDart:(t,s,a)=>{lt(t)}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-[minmax(0,1fr)_300px] md:items-start md:gap-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Current Shooter"}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-white",children:Di}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-white/80",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Remaining"}),e.jsx("div",{className:"font-mono text-lg text-white",children:Ai})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Last Dart"}),e.jsx("div",{className:"font-mono text-lg text-white",children:Mi||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Match Legs"}),e.jsxs("div",{className:"font-semibold text-white",children:[V,"-",B]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Next Up"}),e.jsx("div",{className:"font-medium text-white",children:ki})]})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(xe,{gameMode:o,players:qn,matchScore:`${V}-${B}`})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(xe,{gameMode:o,players:qn,matchScore:`${V}-${B}`})}),o==="X01"&&e.jsxs("div",{className:"mt-3 md:mt-4 rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Manual Scoreboard Override"}),e.jsxs("p",{className:"mt-1 text-xs text-white/40",children:["Adjust the live totals if a dart was misread. Values are clamped between 0 and ",v,"."]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:Se}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Commit Visit"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(yl,{inProgress:!0,startingScore:v,onAddVisit:ae(q),quickButtons:[180,140,100,60],onNextPlayer:()=>matchActions?.nextPlayer(),onEndLeg:()=>{},onUndo:()=>{},showDartsSelect:!0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:Gn,onChange:t=>sa(t.target.value),onKeyDown:t=>{t.key==="Enter"&&xs("player")},placeholder:`${V}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>xs("player"),children:"Set"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:tt}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Three Dart Edit"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:v,value:Wn,onChange:t=>Un(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Jn()},placeholder:`${O}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>Jn(),children:"Set"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:_n,onChange:t=>aa(t.target.value),onKeyDown:t=>{t.key==="Enter"&&xs("ai")},placeholder:`${B}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>xs("ai"),children:"Set"})]})]})]})]})]})]})]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:[grid-template-columns:minmax(0,0.75fr)_minmax(0,3fr)_minmax(0,0.75fr)] gap-2 mb-2 items-stretch min-w-0",children:e.jsxs("div",{className:"flex items-stretch justify-center md:px-3 min-w-0",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"You Remain"}),R?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:I}),e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-400/70",style:{width:`${Math.max(0,Math.min(100,(1-I/v)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",e.jsx("span",{className:"font-semibold",children:be})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score: ",e.jsx("span",{className:"font-semibold",children:E>0?de:_e??be})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",e.jsx("span",{className:"font-semibold",children:Rt>0?(qs/Rt*3).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"text-xs opacity-70 flex items-center gap-2",children:[e.jsxs("span",{children:["Darts thrown: ",Zt]}),e.jsx("span",{className:"inline-flex items-center gap-1","aria-label":"Visit darts",children:[0,1,2].map(t=>e.jsx("span",{className:`w-2 h-2 rounded-full ${t<E?"bg-emerald-400":"bg-white/20"}`},t))})]}),e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",e.jsxs("span",{className:"font-semibold",children:["Att ",Mt," Â· Hit ",zs]})]}),I<=170&&I>0&&(()=>{const s=nl(I,w)[0]||"â€”";return e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-sm",children:[e.jsx("span",{className:"opacity-70",children:"Checkout"}),e.jsx("span",{className:"font-semibold",children:s})]})})()]}),e.jsx("div",{className:"flex items-stretch justify-center md:justify-end md:px-3 min-w-0 flex-1 min-h-0 ndn-camera-tall",children:e.jsx(jl,{storageKey:"ndn:camera:tile:offline:center:v4",className:"relative rounded-2xl overflow-hidden bg-black w-full camera-fullwidth-card",defaultWidth:0,defaultHeight:0,minWidth:300,minHeight:300,maxWidth:2e3,maxHeight:1200,autoFill:!0,children:e.jsx(Ar,{label:"Your Board",autoStart:!0,className:"min-w-0 h-full",aspect:"classic",fill:!0})})}),e.jsxs("div",{className:`mt-2 ${La==="small"?"p-2":La==="large"?"p-4":"p-3"} rounded-2xl bg-slate-900/40 border border-white/10 text-white ${ys==="small"?"text-xs":ys==="large"?"text-base":"text-sm"}`,children:[e.jsx("div",{className:"font-semibold mb-2",children:"Match Summary"}),(()=>{const t=R?l?.username||"You":A==="None"?"â€”":`${A} AI`,s=R?I:A==="None"?0:O,a=R?E>0?de:_e??be:Xe>0?ze:qe??Oe,r=R?Zt:ts,i=v-(R?I:A==="None"?v:O),u=r>0?i/r*3:0,m=`${V}-${B}`,b=ie.length>0?`${Math.min(...ie.map(d=>d.doubleDarts+(d.checkoutDarts||0)))||0} darts`:"â€”";return e.jsxs("div",{className:"grid grid-cols-2 gap-y-1",children:[e.jsx("div",{className:"opacity-80",children:"Current score"}),e.jsx("div",{className:"font-mono text-right",children:m}),e.jsx("div",{className:"opacity-80",children:"Current thrower"}),e.jsx("div",{className:"text-right font-semibold text-lg",children:t}),e.jsx("div",{className:"opacity-80",children:"Score remaining"}),e.jsx("div",{className:"text-right font-mono font-bold text-xl",children:s}),e.jsx("div",{className:"opacity-80",children:"3-dart avg"}),e.jsx("div",{className:"text-right font-mono",children:u.toFixed(1)}),e.jsx("div",{className:"opacity-80",children:"Last score"}),e.jsx("div",{className:"text-right font-mono",children:a}),e.jsx("div",{className:"opacity-80",children:"Best leg"}),e.jsx("div",{className:"text-right",children:b})]})})()]}),e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs flex items-center justify-between opacity-80",children:[e.jsxs("span",{children:[A==="None"?"Opponent":`${A} AI`," Remain"]}),R?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:A!=="None"?O:"N/A"}),A!=="None"&&e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-fuchsia-400/70",style:{width:`${Math.max(0,Math.min(100,(1-O/v)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",e.jsx("span",{className:"font-semibold",children:A==="None"?0:Oe})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score: ",e.jsx("span",{className:"font-semibold",children:A==="None"?"â€”":Xe>0?ze:qe??Oe})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",e.jsx("span",{className:"font-semibold",children:A!=="None"?Et>0?(Ys/Et*3).toFixed(1):"0.0":"â€”"})]}),A!=="None"&&e.jsxs("div",{className:"text-xs opacity-70",children:["Darts thrown: ",ts]}),A!=="None"&&e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",e.jsxs("span",{className:"font-semibold",children:["Att ",Lt," Â· Hit ",Xs]})]})]})]})}),o!=="X01"?e.jsxs("div",{className:"space-y-2",children:[o==="Double Practice"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:wa[ft]?.label||"â€”"})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,onAutoDart:(t,s)=>{if((s==="DOUBLE"||s==="INNER_BULL")&&Mr(t,ft)){const r=ks+1,i=ft+1;Ds(r),Cs(i),r>=wa.length&&setTimeout(()=>{Ds(0),Cs(0)},250)}},immediateAutoCommit:!0,onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&sr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:sr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&ar()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:ar,children:"Add"})]})]}),e.jsxs("div",{className:"text-xs text-slate-300",children:["Progress: ",ks," of 21"]})]}),o==="Around the Clock"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:De[Le]===25?"25 (Outer Bull)":De[Le]===50?"50 (Inner Bull)":De[Le]||"â€”"})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{xa(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&ur()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:ur,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D5, 25, 50)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&xr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:xr,children:"Add"})]}),Xa>=De.length&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{qa(0),za(0),T("Around the Clock")},children:"Reset"})]})]}),o==="Cricket"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{ha(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&hr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:hr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{As(va()),re(0),T("Cricket")},children:"Reset"})]})]}),o==="Shanghai"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{fa(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&fr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:fr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{zt(ja()),re(0),T("Shanghai")},children:"Reset"})]})]}),o==="Halve It"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{br(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&pr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:pr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Xt(Na()),re(0),T("Halve It")},children:"Reset"})]})]}),o==="High-Low"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{gr(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&vr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:vr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Yt(ya()),re(0),T("High-Low")},children:"Reset"})]})]}),o==="Bob's 27"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{nr(t,s==="MISS"?void 0:s,a?.sector??null)},onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&rr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:rr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:ir,children:"Reset"})]})]}),o==="Count-Up"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>oa(t),onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(oa(j),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{oa(j),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{sn(1),an(0),nn(0),T("Count-Up")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",tn,"/",si]})]}),o==="High Score"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>da(t),onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(da(j),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{da(j),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ln(1),cn(0),on(0),T("High Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",rn,"/",ni]})]}),o==="Low Score"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>ma(t),onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(ma(j),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{ma(j),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{mn(1),un(0),xn(0),T("Low Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",dn,"/",ii]})]}),o==="Checkout 170"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>cr(t,s==="MISS"?void 0:s),onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&vs(!0)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>vs(!0),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ii,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Ls," Â· Attempts: ",bn," Â· Successes: ",gn]})]}),o==="Checkout 121"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>or(t,s==="MISS"?void 0:s),onAddVisit:ae(q),onEndLeg:t=>matchActions.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&vs(!1)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>vs(!1),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Pi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Es," Â· Attempts: ",yn," Â· Successes: ",Sn]})]}),o==="Treble Practice"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{ua(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){const s=ct(G);s!=null&&ua(s,void 0,void 0),P("")}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{const t=ct(G);t!=null&&ua(t,void 0,void 0),P("")},children:"Add Dart"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Hits: ",Ps," Â· Misses: ",Math.max(0,kn-Ps)," Â· Darts: ",kn,gt>0?`/${gt}`:""]}),Dn&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:dr,children:"Reset"})]})]}),o==="Baseball"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{Hi(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Oi,children:"Reset"})})]}),o==="Golf"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{Vi(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Bi,children:"Reset"})})]}),o==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(t,s)=>s).map(t=>e.jsx("button",{className:`h-16 rounded-xl border ${Ee.board[t]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(Ee.finished||Ee.board[t])return;const s=Number(prompt("Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)")||0),a=s%3===0?"TRIPLE":s%2===0?"DOUBLE":"SINGLE",r=t,i=rl[r],u=i.type==="BULL"?null:i.num||null;$i(r,s,a,u)},children:Ee.board[t]||""},t))}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ki,children:"Reset"})})]}),o==="American Cricket"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{Wi(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:mr,children:"Reset"})})]}),o==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Sa[Fe.targetIndex]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{const r=s==="MISS"?void 0:s;C("Scam"),yt(ka(Fe,t,r))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:1,max:25,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(C("Scam"),yt(Fr(Fe,j)),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{C("Scam"),yt(Fr(Fe,j)),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{yt(Cl()),T("Scam")},children:"Reset"})]}),Fe.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["ðŸŽ‰ Finished in ",Fe.darts," darts!"]})]}),o==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score: ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[le.score,"/",le.target]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{C("Fives"),St(Aa(le,t))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:5,max:50,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(C("Fives"),St(Ir(le,j)),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{C("Fives"),St(Ir(le,j)),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{St(Al(le.target)),T("Fives")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 5, 10, 15, 20, 25, 50 Â· Darts: ",le.darts]}),le.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",le.target," in ",le.darts," darts!"]})]}),o==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score: ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[ce.score,"/",ce.target]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{C("Sevens"),kt(Ta(ce,t))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:7,max:21,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(C("Sevens"),kt(Pr(ce,j)),p(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{C("Sevens"),kt(Pr(ce,j)),p(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{kt(Ll(ce.target)),T("Sevens")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 7, 14, 21 Â· Darts: ",ce.darts]}),ce.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",ce.target," in ",ce.darts," darts!"]})]}),o==="Killer"&&e.jsx(e.Fragment,{children:Fn?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:L.map(t=>{const s=vt[t.id],a=Jt[t.id];return e.jsxs("div",{className:`p-2 rounded-xl border ${s?.eliminated?"opacity-50 border-red-500/40 bg-red-500/10":"border-slate-700/50 bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded ${s?.isKiller?"bg-purple-500/20 text-purple-200 border border-purple-400/30":"bg-slate-600/30 text-slate-300"}`,children:s?.isKiller?"Killer":"Not Killer"})]}),e.jsxs("div",{className:"mt-1 text-sm",children:["Number: ",e.jsx("span",{className:"font-semibold",children:a})]}),e.jsxs("div",{className:"text-sm",children:["Lives: ",e.jsx("span",{className:"font-semibold",children:s?.lives??0})]})]},t.id)})}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{if(Ge)return;const r=s==="MISS"?void 0:s,i=a?.sector??null,u=L[oe];u&&(jt(m=>{const b={};Object.keys(m).forEach(c=>b[c]={...m[c]});const d=Tr(u.id,b,r,i);if(d.becameKiller)fe(`${u.name} became a Killer`);else if(d.victimId){const c=L.find(h=>h.id===d.victimId);fe(`${u.name} hit ${c?.name}'s ${Jt[d.victimId]} (${d.livesRemoved} life${(d.livesRemoved||0)>1?"s":""})`)}else fe("No effect");const x=Lr(b);return x&&Nt(x),b}),Ue(m=>{const b=m+1;if(b>=3){let d=oe;for(let x=1;x<=L.length;x++){const c=(oe+x)%L.length,h=L[c].id,Y=vt[h];if(Y&&!Y.eliminated&&Y.lives>0){d=c;break}}return We(d),0}return b}))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-40",placeholder:"Manual (D16, T5)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){if(Ge)return;const a=G.trim().toUpperCase().match(/^(S|D|T)?\s*(\d{1,2})$/);if(!a){P("");return}const r=a[1]||"S",i=parseInt(a[2],10),u=r==="D"?"DOUBLE":r==="T"?"TRIPLE":"SINGLE",m=L[oe];jt(b=>{const d={};Object.keys(b).forEach(h=>d[h]={...b[h]});const x=Tr(m.id,d,u,i);if(x.becameKiller)fe(`${m.name} became a Killer`);else if(x.victimId){const h=L.find(Y=>Y.id===x.victimId);fe(`${m.name} hit ${h?.name}'s ${Jt[x.victimId]} (${x.livesRemoved} life${(x.livesRemoved||0)>1?"s":""})`)}else fe("No effect");const c=Lr(d);return c&&Nt(c),d}),P(""),Ue(b=>{const d=b+1;if(d>=3){let x=oe;for(let c=1;c<=L.length;c++){const h=(oe+c)%L.length,Y=L[h].id,ue=vt[Y];if(ue&&!ue.eliminated&&ue.lives>0){x=h;break}}return We(x),0}return d})}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{let t=oe;for(let s=1;s<=L.length;s++){const a=(oe+s)%L.length,r=L[a].id,i=vt[r];if(i&&!i.eliminated&&i.lives>0){t=a;break}}We(t),Ue(0)},children:"Next Player"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{jt({}),Ks({}),Ws(!1),We(0),Ue(0),Nt(null),fe("")},children:"Reset"})]}),Ge&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Winner: ",L.find(t=>t.id===Ge)?.name," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{jt({}),Ks({}),Ws(!1),We(0),Ue(0),Nt(null),fe("")},children:"Play Again"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Players"}),e.jsx("div",{className:"space-y-1",children:L.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input",value:t.name,onChange:a=>{const r=a.target.value;$s(i=>i.map((u,m)=>m===s?{...u,name:r}:u))}}),e.jsx("button",{className:"btn px-2 py-1",onClick:()=>$s(a=>a.filter((r,i)=>i!==s)),disabled:L.length<=2,children:"Remove"})]},t.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn px-2 py-1",onClick:()=>$s(t=>{const s=`p${t.length+1}`;return[...t,{id:s,name:`Player ${t.length+1}`}]}),children:"Add Player"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1",onClick:()=>{if(L.length<2){alert("Need at least 2 players");return}const t=L.map(r=>r.id),s=il(t),a={};t.forEach(r=>{a[r]=gl(s[r])}),Ks(s),jt(a),We(0),Ue(0),Nt(null),fe("Assigned numbers"),Ws(!0)},children:"Assign Numbers & Start"})]})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-3 min-h-0 flex-1 text-[14px]",children:[e.jsxs("div",{className:"basis-1/2 shrink-0 min-w-0 flex flex-col gap-2 overflow-y-auto pr-2 text-sm",children:[e.jsx("div",{className:"text-sm font-semibold opacity-80",children:"Scoreboard"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(xe,{gameMode:o,players:ms,matchScore:`${V}-${B}`})}),R&&e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-900/60 border border-white/10 text-slate-100 shadow-lg backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h4",{className:"text-sm font-semibold tracking-wide uppercase text-indigo-200",children:"Manual Scoring"}),e.jsx("span",{className:"text-xs text-white/60",children:"Override a visit or enter dart-by-dart scores."})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Single Dart"}),e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:60,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?ba():fs())},placeholder:"60"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:fs,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Three Dart Edit"}),e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:I<=170?170:180,value:bs,onChange:t=>er(t.target.value),onKeyDown:t=>{t.key==="Enter"&&gs()},placeholder:"100"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:gs,children:"Commit Visit"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:ba,children:"Undo Visit"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Manual"}),e.jsx("input",{className:"input w-28 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?js():Ot())},placeholder:"T20"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ot,children:"Apply"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:js,disabled:E===0,children:"Replace Last"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Multi-entry (one per line)"}),e.jsx("textarea",{className:"mt-2 w-full rounded-xl bg-slate-950/70 border border-white/10 text-sm text-slate-100 placeholder-white/40 p-3 focus:outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-500/30",rows:3,value:ta,onChange:t=>It(t.target.value),placeholder:`T20
D16
25`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Nr,children:"Apply All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>It(""),children:"Clear"})]})]}),e.jsx("div",{className:"pt-2 border-t border-white/10 mt-3",children:e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:ca,disabled:E===0&&de===0,children:"Clear Current Visit"})})]})]})]}),g&&e.jsx("div",{className:"basis-1/2 shrink-0 min-w-0 rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>{const a=s??"MISS",r=Number.isFinite(t)?Math.max(0,t):0,i=Date.now();if(r<=0){if(a!=="MISS"||i-(Pe.current||0)<1200)return;Pe.current=i}else Pe.current=0;lt(r)}})})]}),o==="X01"&&!g&&e.jsx(e.Fragment,{children:e.jsx(xe,{gameMode:o,players:ms,matchScore:`${V}-${B}`})}),o==="Cricket"&&e.jsx(e.Fragment,{children:e.jsx(xe,{gameMode:"Cricket",players:ji})}),o==="Cricket"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&ha(t,s==="MISS"?void 0:s,a?.sector??null)}})}),o==="Shanghai"&&e.jsx(e.Fragment,{children:e.jsx(xe,{gameMode:"Shanghai",players:Ni})}),o==="Shanghai"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&fa(t,s==="MISS"?void 0:s,a?.sector??null)}})}),o==="Killer"&&e.jsx(e.Fragment,{children:e.jsx(xe,{gameMode:"Killer",players:yi})}),o==="Scam"&&e.jsx(e.Fragment,{children:e.jsx(xe,{gameMode:"Scam",players:wi})}),o==="Scam"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&yt(ka(Fe,t,s))}})}),o==="Fives"&&e.jsx(e.Fragment,{children:e.jsx(xe,{gameMode:"Fives",players:Si})}),o==="Fives"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&St(Aa(le,t))}})}),o==="Sevens"&&e.jsx(e.Fragment,{children:e.jsx(xe,{gameMode:"Sevens",players:Ci})}),o==="Sevens"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(k,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&kt(Ta(ce,t))}})}),e.jsx("div",{className:"font-semibold",children:"Your Turn"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:j,onChange:t=>p(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?ba():fs())}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:fs,title:"Add a single dart (0â€“60)",children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-28",type:"number",min:0,max:I<=170?170:180,placeholder:"Visit total (0â€“180)",value:bs,onChange:t=>er(t.target.value),onKeyDown:t=>{t.key==="Enter"&&gs()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:gs,title:"Commit a full 3-dart total like 93",children:"Commit Visit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D16, 5, 25, 50)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?js():Ot())}}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:js,disabled:E===0,children:"Replace Last"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ot,children:"Add"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"input w-full h-24 resize-none",placeholder:`Type scores manually (one per line, e.g. T20
D16
5
25
50) - No camera needed!`,value:ta,onChange:t=>It(t.target.value)}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Nr,children:"Add All Scores"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>It(""),children:"Clear"})]})]})]}),e.jsx("div",{className:"text-xs text-slate-300",children:"Tip: Enter to Add Â· Shift+Enter to Replace Last"})]}),e.jsx("div",{className:"h-1"})]})]})})}),zr&&e.jsx(Pl,{onClose:()=>Fa(!1)}),pa&&e.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),e.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”’"}),e.jsx("div",{className:"font-semibold",children:"Premium mode locked"}),e.jsx("div",{className:"text-sm text-slate-200/80",children:"Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more."}),e.jsxs("button",{onClick:async()=>{try{const s=await(await fetch(`${Hl}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l?.email})})).json();s.ok&&s.url?(window.location.href=s.url,s.development&&Ne("Opened Stripe test checkout (development mode)",{type:"info",timeout:3e3})):s.error==="STRIPE_NOT_CONFIGURED"?Ne("Premium purchases are not available in this development environment. Please visit the production site to upgrade.",{type:"error",timeout:4e3}):Ne("Failed to create checkout session. Please try again.",{type:"error",timeout:4e3})}catch{Ne("Error creating checkout. Please try again.",{type:"error",timeout:4e3})}},className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM Â· ",Xi(qi(),5)]})]})]}),pi&&typeof document<"u"?yr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[200] flex items-center justify-center p-4",onClick:()=>Ze(!1),children:e.jsx(Vt,{storageKey:"ndn:modal:offline-camera-manager",className:"relative",defaultWidth:640,defaultHeight:520,minWidth:480,minHeight:420,maxWidth:1200,maxHeight:900,initialFitHeight:!0,onClose:()=>Ze(!1),children:e.jsxs("div",{className:"space-y-3",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Camera Devices"}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Manage Offline Camera Feeds"})]}),e.jsx("button",{className:"btn bg-slate-800 hover:bg-slate-700 text-white",onClick:()=>Ze(!1),children:"Close"})]}),e.jsx(Ar,{fill:!0,user:l,playerScore:I,aiScore:O,x01Score:v,inMatch:Ia,showWinPopup:Ha,pendingLegWinner:Ut,playerDartsThrown:Zt,aiDartsThrown:ts,totalPlayerDarts:Rt,totalAiDarts:Et,totalPlayerPoints:qs,totalAiPoints:Ys,player180s:Bn,player140s:di,player100s:mi,ai180s:$n,ai140s:ui,ai100s:xi,playerHighestCheckout:hi,aiHighestCheckout:fi,onClose:()=>Ze(!1),onOpen:()=>Ze(!0),layout:f})]})})}),document.body):null,cs&&typeof document<"u"?yr.createPortal((()=>{const{target:t,value:s,stage:a}=cs,r=t==="player"?Se:tt,i=t==="player"?V:B;return e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[240] flex items-center justify-center p-4",onClick:Ht,children:e.jsx(Vt,{storageKey:"ndn:modal:offline-leg-override",className:"relative",defaultWidth:360,defaultHeight:240,minWidth:280,minHeight:200,maxWidth:420,maxHeight:360,initialFitHeight:!0,onClose:Ht,children:e.jsxs("div",{className:"space-y-3 max-w-[18rem] mx-auto",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/50",children:["Step ",a," of 2"]}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Override legs?"})]}),e.jsx("div",{className:"text-sm text-slate-200 leading-relaxed",children:a===1?e.jsxs(e.Fragment,{children:["Set ",r,"'s legs to ",e.jsx("span",{className:"font-semibold text-white",children:s}),"? Confirm to continue."]}):e.jsxs(e.Fragment,{children:["Final confirmation: set ",r,"'s legs to ",e.jsx("span",{className:"font-semibold text-white",children:s}),". Select ",e.jsx("span",{className:"font-semibold text-emerald-200",children:"Yes"})," to apply immediately."]})}),e.jsxs("div",{className:"rounded-xl bg-black/40 border border-white/10 p-3 text-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Current legs"}),e.jsx("div",{className:"text-base font-semibold text-white",children:i})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 text-white",onClick:Ht,children:"No"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 text-white",onClick:Ri,children:"Yes"})]})]})})})})(),document.body):null,Ha&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs(Vt,{storageKey:"ndn:modal:offline-win",className:"w-full relative",defaultWidth:420,defaultHeight:360,minWidth:360,minHeight:300,maxWidth:800,maxHeight:700,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Leg Won!"}),e.jsx("label",{className:"block mb-1",children:"Darts to hit double:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${Va===t?"bg-brand-600":""}`,onClick:()=>qr(t),children:t},t))}),e.jsx("label",{className:"block mb-1",children:"Darts for checkout:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${Ba===t?"bg-brand-600":""}`,onClick:()=>Yr(t),children:t},t))}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[e.jsx("button",{className:"btn w-full",onClick:Ui,children:"Submit"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 w-full",onClick:()=>{Q(!1),rt()},children:"Rematch"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 w-full",onClick:()=>{Q(!1),ut(!1),$t(!1)},children:"Back to Menu"})]})]})}),bi&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60]",children:e.jsxs(Vt,{storageKey:"ndn:modal:offline-summary",className:"w-full relative",defaultWidth:820,defaultHeight:520,minWidth:600,minHeight:400,maxWidth:1400,maxHeight:1e3,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-xl font-extrabold mb-2",children:"Match Summary"}),e.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[o," Â· ",v," start Â· First to ",mt]}),(()=>{const t=Rt>0?qs/Rt*3:0,s=t*3,a=(()=>{const c=ie.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return c.length?`${Math.min(...c)} darts`:"â€”"})(),r=(()=>{const c=ie.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return c.length?`${Math.max(...c)} darts`:"â€”"})(),i=Mt>0?Math.round(zs/Mt*100):0,u=Et>0?Ys/Et*3:0,m=u*3,b=(()=>{const c=ie.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return c.length?`${Math.min(...c)} darts`:"â€”"})(),d=(()=>{const c=ie.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return c.length?`${Math.max(...c)} darts`:"â€”"})(),x=Lt>0?Math.round(Xs/Lt*100):0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:l?.username||"You"}),e.jsx("div",{className:"text-3xl font-extrabold",children:V}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:t.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:s.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:Mt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[i,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:a})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:Bn})]})]})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-black",children:[V," â€“ ",B]})}),e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:A==="None"?"Opponent":`${A} AI`}),e.jsx("div",{className:"text-3xl font-extrabold",children:B}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:u.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:m.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:Lt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[x,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:b})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:d})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:$n})]})]})]})]})})(),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Legs Timeline"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map((t,s)=>e.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs ${t.winner==="player"?"bg-emerald-500/15 border-emerald-400/30":"bg-fuchsia-500/15 border-fuchsia-400/30"}`,children:["Leg ",s+1,": ",t.winner==="player"?"You":A==="None"?"Opp":"AI"," Â· Dbl ",t.doubleDarts," Â· CO ",t.checkoutDarts]},s))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Shot Heat Map"}),e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black p-3",children:e.jsx(wl,{})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>ea(!1),children:"Close"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{ea(!1),rt()},children:"Rematch"})]})]})}),ie.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Leg Stats"}),e.jsx("ul",{children:ie.map((t,s)=>e.jsxs("li",{children:["Leg ",s+1,": Double darts: ",t.doubleDarts,", Checkout darts: ",t.checkoutDarts]},s))})]})]})]})}export{ic as default};
//# sourceMappingURL=OfflinePlay-7y_YoV87.js.map
