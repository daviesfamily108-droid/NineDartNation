import{r as E}from"./ui-Cl5S-Tv0.js";import{b as O,l as M,r as W,j as s}from"./index-ALD5k1ur.js";function Z(r,n,d,a,e,h,o,u,m,j,f,w,c,p,l,D,C,b,g,i,A,V,t,x,L,$,I){return E.useMemo(()=>{const v=[];if(r==="X01"){let k=0,T=0,S=0;if(b&&b.length>0){for(const N of b)N.dartsThrown&&N.totalScored&&(T+=N.dartsThrown,S+=N.totalScored);T>0&&(k=S/T*3)}const R=(w??0)>0?u??0:j??null??(h??0);if(v.push({name:"You",isCurrentTurn:!!g,legsWon:a||0,score:typeof n=="number"?n:typeof A=="number"?A:0,lastScore:R,avg:k,checkoutRate:l&&l>0?Math.round((p||0)/l*100):0,bestLeg:b&&b.length>0?`${Math.min(...b.map(N=>N.doubleDarts+(N.checkoutDarts||0)))||0} darts`:"—",matchAvg:k,allTimeAvg:O("You")||0}),i&&i!=="None"){const P=(c??0)>0?m??0:f??null??(o??0);v.push({name:`${i} AI`,isCurrentTurn:!g,legsWon:e||0,score:typeof d=="number"?d:typeof A=="number"?A:0,lastScore:P,avg:void 0,checkoutRate:C&&C>0?Math.round((D||0)/C*100):0,bestLeg:"—"})}}return r==="Cricket"&&(v.push({name:"You",isCurrentTurn:!!g,closed:V?.marks||{},points:V?.points||0}),i&&i!=="None"&&v.push({name:`${i} AI`,isCurrentTurn:!g,closed:{},points:0})),r==="Shanghai"&&(v.push({name:"You",isCurrentTurn:!!g,round:t?.round||1,target:t?.target||1,score:t?.score||0}),i&&i!=="None"&&v.push({name:`${i} AI`,isCurrentTurn:!g,round:t?.round||1,target:t?.target||1,score:0})),r==="Killer"&&x&&x.length>0&&x.forEach((k,T)=>{const S=L?.[k.id];v.push({name:k.name,isCurrentTurn:T===I,number:$?.[k.id],lives:S?.lives||0,eliminated:S?.eliminated||!1})}),v},[r,n,d,a,e,h,o,u,m,j,f,w,c,p,l,D,C,b,g,i,V,t,x,L,$,I])}function H(r,n,d){return E.useMemo(()=>{const a=[];return!n||!n.players||n.players.length===0||n.players.forEach((e,h)=>{const o=h===n.currentPlayerIdx;if(r==="X01"){let u=0,m=0,j=0,f=0,w=0;if(e.legs&&e.legs.length>0)for(const c of e.legs){if(c.finished){const p=c.dartsThrown||0,l=Math.max(0,c.totalScoreStart-c.totalScoreRemaining)||0;m+=p,j+=l,c.checkoutScore&&c.checkoutScore>f&&(f=c.checkoutScore)}for(const p of c.visits||[]){const l=Number(p.visitTotal??p.score??0)||0;l>w&&(w=l)}}m>0&&(u=j/m*3),a.push({name:e.name||`Player ${h+1}`,isCurrentTurn:o,legsWon:e.legsWon||0,score:e.score||0,lastScore:e.lastVisitScore||0,highestCheckout:f||0,bestVisitScore:w||0,checkoutRate:e.doublesAttempted>0?Math.round(e.doublesHit/e.doublesAttempted*100):0,bestLeg:e.bestLegDarts?`${e.bestLegDarts} darts`:"—",matchAvg:u,allTimeAvg:e.name?O(e.name):0})}r==="Cricket"&&a.push({name:e.name||`Player ${h+1}`,isCurrentTurn:o,closed:e.cricket?.marks||{},points:e.cricket?.points||0}),r==="Killer"&&a.push({name:e.name||`Player ${h+1}`,isCurrentTurn:o,number:e.killerNumber||null,lives:e.killerLives||3,eliminated:e.killerEliminated||!1})}),a},[r,n,d])}const K=[{label:"1 min",minutes:1},{label:"3 min",minutes:3},{label:"5 min",minutes:5}];function Y(r){const n=Math.max(0,Math.floor(r/1e3)),d=Math.floor(n/60).toString().padStart(2,"0"),a=(n%60).toString().padStart(2,"0");return{mm:d,ss:a,totalSeconds:n}}function ee({localPlayerName:r,onResume:n,onDurationSelected:d}){const a=M(t=>t.paused),e=M(t=>t.pauseEndsAt),h=M(t=>t.pauseStartedAt),o=M(t=>t.pauseInitiator),u=M(t=>t.setPaused),[m,j]=E.useState(Date.now());E.useEffect(()=>{if(!a||!e)return;const t=setInterval(()=>{const x=Date.now();j(x),x>=e&&(u(!1,null),n&&n())},250);return()=>clearInterval(t)},[a,e,u,n]);const f=Math.max(0,(e??m)-m),c=Math.max(1,(e??m)-(h??m)),p=Math.max(0,Math.min(1,1-f/c)),l=Math.round(p*100),D=E.useMemo(()=>({background:`conic-gradient(rgba(251, 191, 36, 0.95) ${l}%, rgba(255, 255, 255, 0.08) ${l}%)`}),[l]);if(!a)return null;const C=!o||!r||o===r,b=()=>{n?n():u(!1,null)},g=t=>{const x=Date.now()+t*6e4;u(!0,x,o),d&&d(t,x)},i=!e,{mm:A,ss:V}=i?{mm:"--",ss:"--"}:Y(f);return W.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center",style:{pointerEvents:"all"},onKeyDown:t=>t.stopPropagation(),onKeyUp:t=>t.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-2xl"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/[0.04] to-transparent"}),s.jsxs("div",{className:"relative w-full max-w-sm mx-4 rounded-3xl border border-white/15 bg-white/[0.08] shadow-2xl shadow-black/50 p-8 sm:p-10 backdrop-blur-xl",children:[s.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-white/10 to-transparent pointer-events-none"}),s.jsxs("div",{className:"relative flex flex-col items-center gap-6 text-center",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.35em] font-semibold text-amber-200/80",children:"Match Paused"}),o&&s.jsxs("div",{className:"text-sm text-amber-200/60",children:["Paused by"," ",s.jsx("span",{className:"font-semibold text-amber-100",children:o})]}),s.jsxs("div",{className:"relative flex items-center justify-center w-48 h-48 sm:w-56 sm:h-56",children:[s.jsx("div",{className:"absolute inset-0 rounded-full border border-amber-300/30 shadow-inner",style:i?{background:"rgba(255, 255, 255, 0.08)"}:D}),s.jsx("div",{className:"absolute inset-3 rounded-full bg-slate-950/90 border border-white/10 flex items-center justify-center",children:s.jsxs("div",{className:"font-mono text-5xl sm:text-6xl font-black text-white tabular-nums",children:[A,s.jsx("span",{className:"text-amber-300/80",children:":"}),V]})})]}),i?C?s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"text-[11px] uppercase tracking-[0.25em] text-amber-200/60",children:"Select pause duration"}),s.jsx("div",{className:"flex items-center gap-3",children:K.map(t=>s.jsx("button",{className:"px-5 py-2.5 rounded-2xl text-sm font-semibold bg-amber-500/20 hover:bg-amber-500/40 text-amber-100 border border-amber-400/30 shadow-lg transition active:scale-95",onClick:()=>g(t.minutes),children:t.label},t.minutes))}),s.jsx("button",{className:"mt-1 px-8 py-3 rounded-2xl text-sm font-semibold bg-emerald-600 hover:bg-emerald-500 text-white border border-emerald-400/40 shadow-lg shadow-emerald-500/20 transition active:scale-95",onClick:b,children:"Resume"})]}):s.jsxs("div",{className:"text-xs text-amber-200/50 mt-1",children:["Waiting for"," ",s.jsx("span",{className:"font-semibold text-amber-100",children:o})," ","to select timer…"]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[11px] uppercase tracking-[0.25em] text-amber-200/40",children:"Countdown"}),C?s.jsx("button",{className:"mt-1 px-8 py-3 rounded-2xl text-sm font-semibold bg-emerald-600 hover:bg-emerald-500 text-white border border-emerald-400/40 shadow-lg shadow-emerald-500/20 transition active:scale-95",onClick:b,children:"Resume"}):s.jsxs("div",{className:"text-xs text-amber-200/50 mt-1",children:["Only"," ",s.jsx("span",{className:"font-semibold text-amber-100",children:o})," ","can resume"]})]})]})]})]}),document.body)}const te=[...Array.from({length:20},(r,n)=>n+1),25,50];export{te as A,ee as P,H as a,Z as u};
//# sourceMappingURL=aroundTheClock-Cqqf9SE2.js.map
