{"version":3,"file":"MatchControls-36iKtGo4.js","sources":["../../src/store/pendingVisit.ts","../../src/components/MatchControls.tsx"],"sourcesContent":["import { create } from \"zustand\";\r\nimport type { Ring } from \"../utils/scoring\";\r\n\r\nexport type PendingEntry = { label: string; value: number; ring: Ring };\r\n\r\ntype PendingVisitState = {\r\n  darts: number;\r\n  total: number;\r\n  entries: PendingEntry[];\r\n  setVisit: (entries: PendingEntry[], darts: number, total: number) => void;\r\n  reset: () => void;\r\n};\r\n\r\nexport const usePendingVisit = create<PendingVisitState>((set) => ({\r\n  darts: 0,\r\n  total: 0,\r\n  entries: [],\r\n  setVisit: (entries, darts, total) => set({ entries, darts, total }),\r\n  reset: () => set({ darts: 0, total: 0, entries: [] }),\r\n}));\r\n","import React, { useState } from \"react\";\r\nimport { Undo2 } from \"lucide-react\";\r\n\r\ninterface MatchControlsProps {\r\n  inProgress?: boolean;\r\n  startingScore?: number;\r\n  pendingEntries?: Array<any>;\r\n  onAddVisit: (score: number, darts: number) => void;\r\n  onUndo?: () => void;\r\n  onEndLeg?: (score?: number) => void;\r\n  onNextPlayer?: () => void;\r\n  onEndGame?: () => void;\r\n  showDartsSelect?: boolean;\r\n  quickButtons?: number[];\r\n}\r\n\r\nexport default function MatchControls({\r\n  inProgress = true,\r\n  startingScore = 501,\r\n  pendingEntries = [],\r\n  onAddVisit,\r\n  onUndo,\r\n  onEndLeg,\r\n  onNextPlayer,\r\n  onEndGame,\r\n  showDartsSelect = true,\r\n  quickButtons = [180, 140, 100, 60],\r\n}: MatchControlsProps) {\r\n  const [score, setScore] = useState<number>(0);\r\n  const [darts, setDarts] = useState<number>(3);\r\n\r\n  if (!inProgress) {\r\n    return <p className=\"text-slate-600\">No game in progress.</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex flex-wrap items-center gap-2\">\r\n        <input\r\n          className=\"input w-32\"\r\n          type=\"number\"\r\n          value={score}\r\n          onChange={(e) => setScore(parseInt(e.target.value || \"0\"))}\r\n          placeholder=\"Score\"\r\n        />\r\n        {showDartsSelect && (\r\n          <select\r\n            className=\"input\"\r\n            value={darts}\r\n            onChange={(e) => setDarts(parseInt(e.target.value))}\r\n          >\r\n            <option value={1}>1 dart</option>\r\n            <option value={2}>2 darts</option>\r\n            <option value={3}>3 darts</option>\r\n          </select>\r\n        )}\r\n        <button\r\n          className=\"btn\"\r\n          onClick={() => {\r\n            onAddVisit(Math.max(0, Number.isFinite(score) ? score : 0), darts);\r\n            setScore(0);\r\n          }}\r\n        >\r\n          Add Visit\r\n        </button>\r\n        <button\r\n          className=\"px-3 py-2 rounded-xl border border-slate-200\"\r\n          onClick={() => onUndo && onUndo()}\r\n          title=\"Undo\"\r\n        >\r\n          <Undo2 className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n      {quickButtons && quickButtons.length > 0 && (\r\n        <div className=\"flex flex-wrap items-center gap-2 mt-2 text-xs\">\r\n          <span className=\"opacity-70\">Quick:</span>\r\n          {quickButtons.map((v) => (\r\n            <button\r\n              key={String(v)}\r\n              className=\"btn px-2 py-0.5 text-xs\"\r\n              onClick={() => onAddVisit(v, 3)}\r\n            >\r\n              {v}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <div className=\"flex flex-wrap items-center gap-2\">\r\n        <button\r\n          className=\"btn\"\r\n          onClick={() => {\r\n            onEndLeg && onEndLeg(score);\r\n            setScore(0);\r\n          }}\r\n        >\r\n          End Leg (Checkout {score || 0})\r\n        </button>\r\n        <button\r\n          className=\"btn bg-slate-700 hover:bg-slate-800\"\r\n          onClick={() => onNextPlayer && onNextPlayer()}\r\n        >\r\n          Next Player\r\n        </button>\r\n        <button\r\n          className=\"btn bg-emerald-600 hover:bg-emerald-700\"\r\n          onClick={() => {\r\n            onEndGame && onEndGame();\r\n          }}\r\n        >\r\n          End Game\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["usePendingVisit","create","set","entries","darts","total","MatchControls","inProgress","startingScore","pendingEntries","onAddVisit","onUndo","onEndLeg","onNextPlayer","onEndGame","showDartsSelect","quickButtons","score","setScore","useState","setDarts","jsxs","jsx","e","Undo2","v"],"mappings":"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"}