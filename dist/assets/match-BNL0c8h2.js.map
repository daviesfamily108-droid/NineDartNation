{"version":3,"file":"match-BNL0c8h2.js","sources":["../../src/store/audit.ts","../../src/store/match.ts"],"sourcesContent":["import { create } from \"zustand\";\r\n\r\nexport type VisitAudit = {\r\n  ts: number;\r\n  mode: string;\r\n  darts: number;\r\n  visitTotal: number;\r\n  preOpenDarts?: number;\r\n  preRemaining?: number;\r\n  postRemaining?: number;\r\n  bust?: boolean;\r\n  finish?: boolean;\r\n};\r\n\r\ntype CalibrationAudit = {\r\n  hasHomography: boolean;\r\n  imageSize?: { w: number; h: number } | null;\r\n  lastUpdated?: number;\r\n};\r\n\r\ntype AuditState = {\r\n  // Rolling buffer of recent visits\r\n  recent: VisitAudit[];\r\n  // Aggregates\r\n  totals: {\r\n    visits: number;\r\n    darts: number;\r\n    points: number;\r\n    finishes: number;\r\n    busts: number;\r\n    byMode: Record<string, { visits: number; darts: number; points: number }>;\r\n  };\r\n  calibration: CalibrationAudit;\r\n  recordVisit: (\r\n    mode: string,\r\n    darts: number,\r\n    visitTotal: number,\r\n    meta?: Partial<VisitAudit>,\r\n  ) => void;\r\n  setCalibrationStatus: (c: Partial<CalibrationAudit>) => void;\r\n  reset: () => void;\r\n};\r\n\r\nexport const useAudit = create<AuditState>((set, get) => ({\r\n  recent: [],\r\n  totals: { visits: 0, darts: 0, points: 0, finishes: 0, busts: 0, byMode: {} },\r\n  calibration: {\r\n    hasHomography: false,\r\n    imageSize: null,\r\n    lastUpdated: undefined,\r\n  },\r\n  recordVisit: (mode, darts, visitTotal, meta) =>\r\n    set((state) => {\r\n      const ts = Date.now();\r\n      const item: VisitAudit = {\r\n        ts,\r\n        mode,\r\n        darts,\r\n        visitTotal,\r\n        preOpenDarts: meta?.preOpenDarts,\r\n        preRemaining: meta?.preRemaining,\r\n        postRemaining: meta?.postRemaining,\r\n        bust: meta?.bust,\r\n        finish: meta?.finish,\r\n      };\r\n      const recent = [...state.recent, item].slice(-50);\r\n      const totals = { ...state.totals };\r\n      totals.visits += 1;\r\n      totals.darts += darts;\r\n      totals.points += visitTotal;\r\n      if (item.finish) totals.finishes += 1;\r\n      if (item.bust) totals.busts += 1;\r\n      const bm = totals.byMode[mode] || { visits: 0, darts: 0, points: 0 };\r\n      bm.visits += 1;\r\n      bm.darts += darts;\r\n      bm.points += visitTotal;\r\n      totals.byMode[mode] = bm;\r\n      // Console surface for quick verification without UI changes\r\n      try {\r\n        const tag = item.finish ? \"FINISH\" : item.bust ? \"BUST\" : \"VISIT\";\r\n        console.info(`[Audit:${tag}]`, {\r\n          mode,\r\n          darts,\r\n          visitTotal,\r\n          preOpenDarts: item.preOpenDarts ?? 0,\r\n          preRemaining: item.preRemaining,\r\n          postRemaining: item.postRemaining,\r\n        });\r\n      } catch {}\r\n      // Persist recent visits to localStorage so Home can show recent across reloads\r\n      try {\r\n        localStorage.setItem(\"ndn_audit_recent\", JSON.stringify(recent));\r\n      } catch {}\r\n      return { ...state, recent, totals };\r\n    }),\r\n  setCalibrationStatus: (c) =>\r\n    set((state) => {\r\n      const updated: CalibrationAudit = {\r\n        hasHomography: c.hasHomography ?? state.calibration.hasHomography,\r\n        imageSize:\r\n          c.imageSize === undefined ? state.calibration.imageSize : c.imageSize,\r\n        lastUpdated: Date.now(),\r\n      };\r\n      try {\r\n        console.info(\"[Audit:Calibration]\", updated);\r\n      } catch {}\r\n      return { ...state, calibration: updated };\r\n    }),\r\n  reset: () =>\r\n    set({\r\n      recent: [],\r\n      totals: {\r\n        visits: 0,\r\n        darts: 0,\r\n        points: 0,\r\n        finishes: 0,\r\n        busts: 0,\r\n        byMode: {},\r\n      },\r\n      calibration: {\r\n        hasHomography: false,\r\n        imageSize: null,\r\n        lastUpdated: undefined,\r\n      },\r\n    }),\r\n}));\r\n\r\n// Expose a tiny debug hook on window for manual checks when needed\r\ntry {\r\n  // @ts-ignore\r\n  if (typeof window !== \"undefined\")\r\n    (window as any).__NDN_AUDIT__ = {\r\n      get: () => useAudit.getState(),\r\n      subscribe: useAudit.subscribe,\r\n      reset: () => useAudit.getState().reset(),\r\n    };\r\n} catch {}\r\n\r\n// Initialize persisted recent visits if present\r\ntry {\r\n  if (typeof window !== \"undefined\") {\r\n    const raw = localStorage.getItem(\"ndn_audit_recent\");\r\n    if (raw) {\r\n      const arr = JSON.parse(raw);\r\n      if (Array.isArray(arr) && arr.length) {\r\n        useAudit.setState((s) => ({ ...s, recent: arr.slice(-50) }));\r\n      }\r\n    }\r\n  }\r\n} catch {}\r\n","import { create } from \"zustand\";\r\nimport { useAudit } from \"./audit\";\r\n\r\nexport type ThrowVisit = {\r\n  darts: number;\r\n  score: number;\r\n  preOpenDarts?: number; // exclude from avg in Double-In\r\n  doubleWindowDarts?: number; // darts thrown while remaining <= 50 (double-out window) in this visit\r\n  finishedByDouble?: boolean; // visit ended the leg with a double or inner bull\r\n  visitTotal?: number; // convenience to detect 180s and summaries\r\n};\r\nexport type Leg = {\r\n  visits: ThrowVisit[];\r\n  totalScoreStart: number; // e.g., 501\r\n  totalScoreRemaining: number;\r\n  dartsThrown: number;\r\n  finished: boolean;\r\n  checkoutScore: number | null; // score taken on final visit to finish leg\r\n  startTime: number;\r\n  endTime?: number;\r\n};\r\n\r\nexport type Player = {\r\n  id: string;\r\n  name: string;\r\n  legsWon: number;\r\n  legs: Leg[];\r\n  bestThreeDartAvg?: number;\r\n  worstThreeDartAvg?: number;\r\n  bestNineDart?: { darts: number; timestamp: number };\r\n  bestCheckout?: number;\r\n};\r\n\r\nexport type MatchState = {\r\n  roomId: string;\r\n  players: Player[];\r\n  currentPlayerIdx: number;\r\n  startingScore: number;\r\n  inProgress: boolean;\r\n  bestLegThisMatch?: { playerId: string; darts: number; timestamp: number };\r\n};\r\n\r\nfunction calcThreeDartAvg(leg: Leg): number {\r\n  if (leg.dartsThrown === 0) return 0;\r\n  const scored = leg.totalScoreStart - leg.totalScoreRemaining;\r\n  return (scored / leg.dartsThrown) * 3;\r\n}\r\n\r\nfunction finishedLegStats(leg: Leg) {\r\n  // compute 3-dart avg, was it a 9-dart (or lowest darts)?\r\n  const avg = calcThreeDartAvg(leg);\r\n  const isCompleted = leg.finished;\r\n  return {\r\n    avg,\r\n    isCompleted,\r\n    darts: leg.dartsThrown,\r\n    checkout: leg.checkoutScore ?? 0,\r\n  };\r\n}\r\n\r\nfunction updatePlayerEndOfGameStats(player: Player) {\r\n  if (player.legs.length === 0) return;\r\n  const avgs: number[] = [];\r\n  let bestNine: { darts: number; timestamp: number } | undefined;\r\n  let bestCheckout = player.bestCheckout ?? 0;\r\n\r\n  for (const leg of player.legs) {\r\n    if (!leg.finished) continue;\r\n    const st = finishedLegStats(leg);\r\n    avgs.push(st.avg);\r\n    // best \"9-dart leg\" meaning fewest darts; if tie pick earliest\r\n    if (\r\n      !bestNine ||\r\n      st.darts < bestNine.darts ||\r\n      (st.darts === bestNine.darts && (leg.endTime ?? 0) < bestNine.timestamp)\r\n    ) {\r\n      bestNine = { darts: st.darts, timestamp: leg.endTime ?? Date.now() };\r\n    }\r\n    if (st.checkout > bestCheckout) bestCheckout = st.checkout;\r\n  }\r\n\r\n  if (avgs.length) {\r\n    player.bestThreeDartAvg = Math.max(...avgs);\r\n    player.worstThreeDartAvg = Math.min(...avgs);\r\n  }\r\n  if (bestNine) player.bestNineDart = bestNine;\r\n  player.bestCheckout = bestCheckout;\r\n}\r\n\r\nexport type Actions = {\r\n  newMatch: (players: string[], startingScore: number, roomId?: string) => void;\r\n  addVisit: (\r\n    score: number,\r\n    darts: number,\r\n    meta?: {\r\n      preOpenDarts?: number;\r\n      doubleWindowDarts?: number;\r\n      finishedByDouble?: boolean;\r\n      visitTotal?: number;\r\n    },\r\n  ) => void;\r\n  undoVisit: () => void;\r\n  endLeg: (checkoutScore: number) => void;\r\n  nextPlayer: () => void;\r\n  endGame: () => void;\r\n  importState: (state: MatchState) => void;\r\n};\r\n\r\nexport const useMatch = create<MatchState & Actions>((set, get) => ({\r\n  roomId: \"\",\r\n  players: [],\r\n  currentPlayerIdx: 0,\r\n  startingScore: 501,\r\n  inProgress: false,\r\n\r\n  newMatch: (playerNames, startingScore, roomId = \"\") =>\r\n    set(() => {\r\n      const players = playerNames.map(\r\n        (name, i) =>\r\n          ({\r\n            id: `${i}`,\r\n            name,\r\n            legsWon: 0,\r\n            legs: [],\r\n          }) as Player,\r\n      );\r\n      return {\r\n        players,\r\n        currentPlayerIdx: 0,\r\n        startingScore,\r\n        inProgress: true,\r\n        roomId,\r\n        bestLegThisMatch: undefined,\r\n      };\r\n    }),\r\n\r\n  addVisit: (score, darts, meta) =>\r\n    set((state) => {\r\n      if (!state.inProgress) return state;\r\n      const p = state.players[state.currentPlayerIdx];\r\n      // ensure a current leg exists\r\n      let leg = p.legs[p.legs.length - 1];\r\n      if (!leg || leg.finished) {\r\n        leg = {\r\n          visits: [],\r\n          totalScoreStart: state.startingScore,\r\n          totalScoreRemaining: state.startingScore,\r\n          dartsThrown: 0,\r\n          finished: false,\r\n          checkoutScore: null,\r\n          startTime: Date.now(),\r\n        };\r\n        p.legs.push(leg);\r\n      }\r\n      const preRem = leg.totalScoreRemaining;\r\n      const postRem = Math.max(0, preRem - score);\r\n      leg.visits.push({\r\n        darts,\r\n        score,\r\n        preOpenDarts: meta?.preOpenDarts,\r\n        doubleWindowDarts: meta?.doubleWindowDarts,\r\n        finishedByDouble: meta?.finishedByDouble,\r\n        visitTotal: meta?.visitTotal ?? score,\r\n      });\r\n      leg.dartsThrown += darts;\r\n      leg.totalScoreRemaining = postRem;\r\n      // Audit record (best-effort; ignore failures)\r\n      try {\r\n        const bust = score === 0 && darts > 0 && postRem === preRem;\r\n        const finish = postRem === 0;\r\n        useAudit.getState().recordVisit(\"x01-match\", darts, score, {\r\n          preOpenDarts: meta?.preOpenDarts ?? 0,\r\n          preRemaining: preRem,\r\n          postRemaining: postRem,\r\n          bust,\r\n          finish,\r\n        });\r\n      } catch {}\r\n      return { ...state };\r\n    }),\r\n\r\n  undoVisit: () =>\r\n    set((state) => {\r\n      const p = state.players[state.currentPlayerIdx];\r\n      const leg = p.legs[p.legs.length - 1];\r\n      if (!leg || leg.finished || leg.visits.length === 0) return state;\r\n      const last = leg.visits.pop()!;\r\n      leg.dartsThrown -= last.darts;\r\n      leg.totalScoreRemaining += last.score;\r\n      return { ...state };\r\n    }),\r\n\r\n  endLeg: (checkoutScore) =>\r\n    set((state) => {\r\n      const p = state.players[state.currentPlayerIdx];\r\n      const leg = p.legs[p.legs.length - 1];\r\n      if (!leg || leg.finished) return state;\r\n      leg.finished = true;\r\n      leg.checkoutScore = checkoutScore;\r\n      leg.endTime = Date.now();\r\n      if (leg.totalScoreRemaining === 0) {\r\n        p.legsWon += 1;\r\n        // Check if this leg is the new best for this match (fewest darts)\r\n        const best = state.bestLegThisMatch;\r\n        if (!best || leg.dartsThrown < best.darts) {\r\n          state.bestLegThisMatch = {\r\n            playerId: p.id,\r\n            darts: leg.dartsThrown,\r\n            timestamp: leg.endTime,\r\n          };\r\n        }\r\n      }\r\n      return { ...state };\r\n    }),\r\n\r\n  nextPlayer: () =>\r\n    set((state) => ({\r\n      ...state,\r\n      currentPlayerIdx: (state.currentPlayerIdx + 1) % state.players.length,\r\n    })),\r\n\r\n  endGame: () =>\r\n    set((state) => {\r\n      // Only now compute best/worst 3-dart, best 9-dart, best checkout\r\n      for (const p of state.players) updatePlayerEndOfGameStats(p);\r\n      return { ...state, inProgress: false };\r\n    }),\r\n\r\n  importState: (newState) => set(() => ({ ...newState })),\r\n}));\r\n"],"names":["useAudit","create","set","get","mode","darts","visitTotal","meta","state","item","recent","totals","bm","tag","c","updated","raw","arr","s","calcThreeDartAvg","leg","finishedLegStats","avg","isCompleted","updatePlayerEndOfGameStats","player","avgs","bestNine","bestCheckout","st","useMatch","playerNames","startingScore","roomId","name","i","score","p","preRem","postRem","bust","finish","last","checkoutScore","best","newState"],"mappings":"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"}