{"version":3,"file":"OfflinePlay-UM5FHcb_.js","sources":["../../src/components/HeatMap.tsx","../../src/game/scamFivesSevens.ts","../../src/components/OfflinePlay.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react'\r\nimport useHeatmapStore from '../store/heatmap'\r\nimport { BoardRadii } from '../utils/vision'\r\n\r\nfunction polarToCartesian(cx: number, cy: number, r: number, angleDeg: number) {\r\n  const a = (angleDeg - 90) * Math.PI / 180.0\r\n  return { x: cx + (r * Math.cos(a)), y: cy + (r * Math.sin(a)) }\r\n}\r\n\r\nfunction sectorAngle(sector: number) {\r\n  // SectorOrder puts 20 at top; 360/20 = 18deg per sector\r\n  const SectorOrder = [20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5]\r\n  const idx = SectorOrder.indexOf(sector)\r\n  const mid = (idx * 18) + 9 // middle of sector\r\n  return mid\r\n}\r\n\r\nexport default function HeatMap({ width = 320, height = 320 }: { width?: number; height?: number }) {\r\n  const samples = useHeatmapStore(s => s.samples)\r\n  const ref = useRef<HTMLCanvasElement | null>(null)\r\n\r\n  useEffect(() => {\r\n    const c = ref.current\r\n    if (!c) return\r\n    const ctx = c.getContext('2d')\r\n    if (!ctx) return\r\n    c.width = width; c.height = height\r\n    ctx.clearRect(0,0,width,height)\r\n    // Draw a faint dartboard backdrop (rings)\r\n    const cx = width / 2\r\n    const cy = height / 2\r\n    const scale = Math.min(width, height) / (BoardRadii.doubleOuter * 2 + 20)\r\n    const radii = {\r\n      bullInner: BoardRadii.bullInner * scale,\r\n      bullOuter: BoardRadii.bullOuter * scale,\r\n      trebleInner: BoardRadii.trebleInner * scale,\r\n      trebleOuter: BoardRadii.trebleOuter * scale,\r\n      doubleInner: BoardRadii.doubleInner * scale,\r\n      doubleOuter: BoardRadii.doubleOuter * scale,\r\n    }\r\n    // rings\r\n    ctx.strokeStyle = 'rgba(255,255,255,0.06)'\r\n    ctx.lineWidth = 1\r\n    const ringOrder = ['doubleOuter','doubleInner','trebleOuter','trebleInner','bullOuter','bullInner'] as const\r\n    for (const k of ringOrder) {\r\n      ctx.beginPath(); ctx.arc(cx, cy, (radii as any)[k], 0, Math.PI*2); ctx.stroke();\r\n    }\r\n\r\n    // Aggregate sample weights by approximate xy\r\n    const points: { x:number;y:number;w:number }[] = []\r\n    for (const s of samples) {\r\n      // if sector unknown, scatter in board\r\n      let angle = Math.random() * 360\r\n      let r = Math.random() * radii.doubleOuter\r\n      if (typeof s.sector === 'number' && s.sector >= 1 && s.sector <= 20) {\r\n        angle = sectorAngle(s.sector)\r\n        // choose radius by mult/ring\r\n        if (s.ring === 'DOUBLE') r = (radii.doubleInner + radii.doubleOuter)/2\r\n        else if (s.ring === 'TRIPLE') r = (radii.trebleInner + radii.trebleOuter)/2\r\n        else if (s.ring === 'INNER_BULL') r = radii.bullInner * 0.5\r\n        else if (s.ring === 'BULL') r = radii.bullOuter * 0.8\r\n        else r = (radii.trebleOuter + radii.doubleInner)/2 * (0.6 + Math.random()*0.4)\r\n      }\r\n      const p = polarToCartesian(cx, cy, r, angle)\r\n      points.push({ x: p.x, y: p.y, w: 1 })\r\n    }\r\n\r\n    // Draw heat circles additive\r\n    for (const p of points) {\r\n      const grd = ctx.createRadialGradient(p.x, p.y, 1, p.x, p.y, 60)\r\n      grd.addColorStop(0, 'rgba(255,0,0,0.9)')\r\n      grd.addColorStop(0.3, 'rgba(255,100,0,0.5)')\r\n      grd.addColorStop(1, 'rgba(255,100,0,0)')\r\n      ctx.fillStyle = grd\r\n      ctx.beginPath(); ctx.arc(p.x, p.y, 60, 0, Math.PI*2); ctx.fill()\r\n    }\r\n\r\n    // Optionally overlay counts per sector\r\n    ctx.fillStyle = 'rgba(255,255,255,0.85)'\r\n    ctx.font = '12px ui-sans-serif'\r\n    // compute counts per sector\r\n    const sectorCounts: Record<number, number> = {}\r\n    for (const s of samples) if (s.sector) sectorCounts[s.sector] = (sectorCounts[s.sector] || 0) + 1\r\n    for (const secStr of Object.keys(sectorCounts)) {\r\n      const sec = Number(secStr)\r\n      const a = sectorAngle(sec)\r\n      const pos = polarToCartesian(cx, cy, radii.trebleOuter + 18, a)\r\n      ctx.fillText(String(sectorCounts[sec]), pos.x-6, pos.y+4)\r\n    }\r\n  }, [samples, width, height])\r\n\r\n  return <canvas ref={ref} style={{ width: '100%', height: 'auto', borderRadius: 8, background: '#081018' }} />\r\n}\r\n","/**\r\n * Scam, Fives, and Sevens game logic\r\n * All three follow a similar score-race pattern:\r\n * - Players accumulate scores\r\n * - Only certain numbers count\r\n * - First to reach target wins\r\n */\r\n\r\n// SCAM/SCUM - Hit targets 1→20→Bull in sequence\r\nexport interface ScamState {\r\n  targetIndex: number // 0-20 for numbers 1-20, 21 for bull (25/50)\r\n  darts: number\r\n  finished: boolean\r\n}\r\n\r\nexport function createScamState(): ScamState {\r\n  return {\r\n    targetIndex: 0,\r\n    darts: 0,\r\n    finished: false,\r\n  }\r\n}\r\n\r\nexport const SCAM_TARGETS = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 25]\r\nexport const SCAM_TARGET_NAMES = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', 'Bull']\r\n\r\nexport function getScamTarget(state: ScamState): number {\r\n  return SCAM_TARGETS[state.targetIndex]\r\n}\r\n\r\nexport function addScamAuto(state: ScamState, value: number, ring?: string): ScamState {\r\n  if (state.finished) return state\r\n\r\n  const target = getScamTarget(state)\r\n  const targetHit = (ring === 'SINGLE' && value === target) || (ring === 'DOUBLE' && value === target) || (ring === 'TRIPLE' && value === target) || (ring === 'INNER_BULL' && target === 25)\r\n\r\n  if (!targetHit) return state\r\n\r\n  // Hit! Move to next target\r\n  const newIndex = state.targetIndex + 1\r\n  const finished = newIndex >= SCAM_TARGETS.length\r\n\r\n  return {\r\n    targetIndex: newIndex,\r\n    darts: state.darts + 1,\r\n    finished,\r\n  }\r\n}\r\n\r\nexport function addScamNumeric(state: ScamState, value: number): ScamState {\r\n  // For manual input, assume single ring hit\r\n  return addScamAuto(state, value, 'SINGLE')\r\n}\r\n\r\nexport function resetScam(): ScamState {\r\n  return createScamState()\r\n}\r\n\r\n// FIVES - Only multiples of 5 count (5,10,15,20,25,50)\r\nexport interface FivesState {\r\n  score: number\r\n  darts: number\r\n  finished: boolean\r\n  target: number // default 50\r\n}\r\n\r\nexport function createFivesState(target: number = 50): FivesState {\r\n  return {\r\n    score: 0,\r\n    darts: 0,\r\n    finished: false,\r\n    target,\r\n  }\r\n}\r\n\r\nexport const FIVES_VALID_NUMBERS = [5, 10, 15, 20, 25, 50]\r\n\r\nexport function isFivesValid(value: number): boolean {\r\n  return FIVES_VALID_NUMBERS.includes(value)\r\n}\r\n\r\nexport function addFivesAuto(state: FivesState, value: number, ring?: string): FivesState {\r\n  if (state.finished) return state\r\n\r\n  // Only multiples of 5 count\r\n  if (!isFivesValid(value)) {\r\n    return { ...state, darts: state.darts + 1 }\r\n  }\r\n\r\n  const newScore = state.score + value\r\n  const finished = newScore >= state.target\r\n\r\n  return {\r\n    score: finished ? state.target : newScore,\r\n    darts: state.darts + 1,\r\n    finished,\r\n    target: state.target,\r\n  }\r\n}\r\n\r\nexport function addFivesNumeric(state: FivesState, value: number): FivesState {\r\n  return addFivesAuto(state, value, 'SINGLE')\r\n}\r\n\r\nexport function resetFives(target: number = 50): FivesState {\r\n  return createFivesState(target)\r\n}\r\n\r\n// SEVENS - Only multiples of 7 count (7,14,21)\r\nexport interface SevensState {\r\n  score: number\r\n  darts: number\r\n  finished: boolean\r\n  target: number // default 70\r\n}\r\n\r\nexport function createSevensState(target: number = 70): SevensState {\r\n  return {\r\n    score: 0,\r\n    darts: 0,\r\n    finished: false,\r\n    target,\r\n  }\r\n}\r\n\r\nexport const SEVENS_VALID_NUMBERS = [7, 14, 21]\r\n\r\nexport function isSevensValid(value: number): boolean {\r\n  return SEVENS_VALID_NUMBERS.includes(value)\r\n}\r\n\r\nexport function addSevensAuto(state: SevensState, value: number, ring?: string): SevensState {\r\n  if (state.finished) return state\r\n\r\n  // Only multiples of 7 count\r\n  if (!isSevensValid(value)) {\r\n    return { ...state, darts: state.darts + 1 }\r\n  }\r\n\r\n  const newScore = state.score + value\r\n  const finished = newScore >= state.target\r\n\r\n  return {\r\n    score: finished ? state.target : newScore,\r\n    darts: state.darts + 1,\r\n    finished,\r\n    target: state.target,\r\n  }\r\n}\r\n\r\nexport function addSevensNumeric(state: SevensState, value: number): SevensState {\r\n  return addSevensAuto(state, value, 'SINGLE')\r\n}\r\n\r\nexport function resetSevens(target: number = 70): SevensState {\r\n  return createSevensState(target)\r\n}\r\n","\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { suggestCheckouts, sayScore } from '../utils/checkout';\r\nimport { useUserSettings } from '../store/userSettings';\r\nimport { useToast } from '../store/toast';\r\nimport { useCalibration } from '../store/calibration';\r\nimport GameCalibrationStatus from './GameCalibrationStatus';\r\nimport CameraTile from './CameraTile';\r\nimport CameraView from './CameraView';\r\nimport HeatMap from './HeatMap';\r\nimport { getUserCurrency, formatPriceInCurrency } from '../utils/config';\r\nimport { bumpGameMode } from '../store/profileStats';\r\nimport { DOUBLE_PRACTICE_ORDER, isDoubleHit, parseManualDart } from '../game/types';\r\nimport { ATC_ORDER } from '../game/aroundTheClock';\r\nimport { createCricketState, applyCricketDart, CRICKET_NUMBERS, hasClosedAll as cricketClosedAll } from '../game/cricket';\r\nimport { createShanghaiState, applyShanghaiDart, endShanghaiTurn } from '../game/shanghai';\r\nimport { createDefaultHalveIt, getCurrentHalveTarget, applyHalveItDart, endHalveItTurn } from '../game/halveIt';\r\nimport { createHighLow, applyHighLowDart, endHighLowTurn } from '../game/highLow';\r\nimport { createKillerState, assignKillerNumbers, applyKillerDart, killerWinner, KillerState } from '../game/killer';\r\nimport { createBaseball, applyBaseballDart } from '../game/baseball';\r\nimport { createGolf, applyGolfDart } from '../game/golf';\r\nimport { createTicTacToe, tryClaimCell, TTT_TARGETS } from '../game/ticTacToe';\r\nimport { createScamState, addScamAuto, addScamNumeric, resetScam, getScamTarget, SCAM_TARGET_NAMES, ScamState, createFivesState, addFivesAuto, addFivesNumeric, resetFives, FivesState, createSevensState, addSevensAuto, addSevensNumeric, resetSevens, SevensState } from '../game/scamFivesSevens';\r\nimport { createAmCricketState, applyAmCricketDart, AM_CRICKET_NUMBERS, hasClosedAllAm } from '../game/americanCricket';\r\nimport ResizableModal from './ui/ResizableModal';\r\nimport { useAudit } from '../store/audit';\r\nimport ResizablePanel from './ui/ResizablePanel';\r\nimport GameHeaderBar from './ui/GameHeaderBar';\r\nimport GameScoreboard, { type PlayerStats } from './scoreboards/GameScoreboard';\r\nimport { useOfflineGameStats } from './scoreboards/useGameStats';\r\nimport { freeGames, premiumGames, allGames } from '../utils/games';\r\n\r\nconst aiLevels = ['Easy', 'Medium', 'Hardened'];\r\n\r\nfunction clamp(n: number, min: number, max: number) {\r\n  return Math.max(min, Math.min(max, n));\r\n}\r\n\r\ntype PendingAutoVisit = {\r\n  visitTotal: number\r\n  darts: number\r\n  preRemaining: number\r\n  remaining: number\r\n  doubleAttempts: number\r\n  finished: boolean\r\n  doubleWindow: boolean\r\n  highestCheckout?: number | null\r\n  announced?: boolean\r\n}\r\n\r\nconst BOARD_CLEAR_GRACE_MS = 6500;\r\n\r\nfunction aiVisitScore(remaining: number, level: string): number {\r\n  let target = 0;\r\n  if (level === 'Easy') {\r\n    const candidates = [22, 26, 41, 45, 60];\r\n    target = candidates[Math.floor(Math.random() * candidates.length)];\r\n  } else if (level === 'Medium') {\r\n    target = Math.round(clamp(60 + (Math.random() * 30 - 15), 30, 100));\r\n  } else {\r\n    target = Math.round(clamp(80 + (Math.random() * 20 - 10), 50, 120));\r\n  }\r\n  if (remaining <= 0) return 0;\r\n  if (target > remaining) {\r\n    const safe = [100, 85, 81, 60, 57, 45, 41, 26, 22, 20, 1].find(v => v <= remaining);\r\n    return safe ?? 0;\r\n  }\r\n  return target;\r\n}\r\n\r\nfunction X01RulesPopup({ onClose }: { onClose: () => void }) {\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n      <div className=\"card max-w-lg w-full relative\">\r\n        <button className=\"absolute top-2 right-2 btn px-2 py-1\" onClick={onClose}>Close</button>\r\n        <h3 className=\"text-xl font-bold mb-2\">X01 Rules & Regulations</h3>\r\n        <ul className=\"list-disc pl-5 text-left mb-2\">\r\n          <li>Double In: Start scoring only after hitting a double.</li>\r\n          <li>Double Out: Finish the game by hitting a double to reach exactly zero.</li>\r\n          <li>Best Of: Play a set number of legs, winner is first to reach majority.</li>\r\n          <li>First To: Play until a player reaches a set number of legs.</li>\r\n          <li>No Cheating: All scores must be valid, no manual score changes mid-leg.</li>\r\n          <li>Competitive Standard: Follow latest WDF/PDC rules for match play.</li>\r\n        </ul>\r\n        <p className=\"text-sm text-slate-600\">For full details, see official darts governing body rules.</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst API_URL = (import.meta as any).env?.VITE_API_URL || '';\r\n\r\nexport default function OfflinePlay({ user }: { user: any }) {\r\n  const {\r\n    offlineLayout,\r\n    favoriteDouble,\r\n    callerEnabled,\r\n    callerVoice,\r\n    callerVolume,\r\n    speakCheckoutOnly,\r\n    rememberLastOffline,\r\n    setLastOffline,\r\n    autoStartOffline,\r\n    cameraScale,\r\n    setCameraScale,\r\n    cameraAspect = 'wide',\r\n    setCameraAspect,\r\n    cameraFitMode = 'fill',\r\n    setCameraFitMode,\r\n    cameraEnabled,\r\n    textSize,\r\n    boxSize,\r\n    autoscoreProvider,\r\n    autoCommitMode = 'wait-for-clear',\r\n    matchType = 'singles',\r\n    setMatchType,\r\n    teamAName = 'Team A',\r\n    setTeamAName,\r\n    teamBName = 'Team B',\r\n    setTeamBName,\r\n  } = useUserSettings()\r\n  const manualScoring = autoscoreProvider === 'manual'\r\n  const cameraToolbarVisible = cameraEnabled && !manualScoring\r\n  const waitForBoardClear = cameraEnabled && !manualScoring && autoCommitMode !== 'immediate'\r\n  const [selectedMode, setSelectedMode] = useState<string>('X01');\r\n  const [x01Score, setX01Score] = useState(501);\r\n  const [ai, setAI] = useState('None');\r\n  const [showRules, setShowRules] = useState(false);\r\n  const [inMatch, setInMatch] = useState(false);\r\n  const [playerScore, setPlayerScore] = useState(x01Score);\r\n  const [aiScore, setAiScore] = useState(x01Score);\r\n  const [onDouble, setOnDouble] = useState(false);\r\n  const [showWinPopup, setShowWinPopup] = useState(false);\r\n  // Match format: First-to selector and leg counters\r\n  const [firstTo, setFirstTo] = useState<number>(1)\r\n  const [playerLegs, setPlayerLegs] = useState<number>(0)\r\n  const [aiLegs, setAiLegs] = useState<number>(0)\r\n  const [pendingLegWinner, setPendingLegWinner] = useState<'player'|'ai'|null>(null)\r\n  const [doubleDarts, setDoubleDarts] = useState(1);\r\n  const [checkoutDarts, setCheckoutDarts] = useState(1);\r\n  const [legStats, setLegStats] = useState<{ winner: 'player'|'ai'; doubleDarts: number; checkoutDarts: number; winnerDarts: number; doublesAtt?: number; doublesHit?: number }[]>([]);\r\n  // New: pre-game adjustable AI delay (ms)\r\n  const [aiDelayMs, setAiDelayMs] = useState<number>(2000)\r\n  const toast = useToast();\r\n  // New: match popup state\r\n  const [showMatchModal, setShowMatchModal] = useState(false)\r\n  // Mirror Online layout defaults when in modern layout, otherwise keep classic feel\r\n  const [maximized, setMaximized] = useState(offlineLayout === 'modern')\r\n  const [fitAll, setFitAll] = useState(offlineLayout === 'modern')\r\n  // React to layout changes at runtime\r\n  useEffect(() => {\r\n    setMaximized(offlineLayout === 'modern')\r\n    setFitAll(offlineLayout === 'modern')\r\n  }, [offlineLayout])\r\n  useEffect(() => {\r\n    if (cameraFitMode !== 'fit') {\r\n      setCameraFitMode('fit')\r\n    }\r\n  }, [cameraFitMode, setCameraFitMode])\r\n  const [fitScale, setFitScale] = useState(1)\r\n  const [fitOverflowing, setFitOverflowing] = useState(false)\r\n  const [isPlayerTurn, setIsPlayerTurn] = useState(true)\r\n  useEffect(() => {\r\n    const handleOpenManager = () => setShowCameraManager(true)\r\n    window.addEventListener('ndn:open-camera-manager', handleOpenManager)\r\n    return () => window.removeEventListener('ndn:open-camera-manager', handleOpenManager)\r\n  }, [])\r\n  // Per-dart input and stats\r\n  const [playerDartPoints, setPlayerDartPoints] = useState<number>(0)\r\n  const [dpIndex, setDpIndex] = useState<number>(0) // 0..20 (DBULL at 20)\r\n  const [dpHits, setDpHits] = useState<number>(0)\r\n  // Around the Clock (offline practice)\r\n  const [atcIndex, setAtcIndex] = useState<number>(0)\r\n  const [atcHits, setAtcHits] = useState<number>(0)\r\n  // Practice mode states\r\n  const [cricket, setCricket] = useState(createCricketState())\r\n  const [shanghai, setShanghai] = useState(createShanghaiState())\r\n  const [halve, setHalve] = useState(createDefaultHalveIt())\r\n  const [highlow, setHighlow] = useState(createHighLow())\r\n  const [practiceTurnDarts, setPracticeTurnDarts] = useState<number>(0)\r\n  // Phase 1 practice modes\r\n  const [b27Stage, setB27Stage] = useState<number>(1)\r\n  const [b27Score, setB27Score] = useState<number>(27)\r\n  const [b27Darts, setB27Darts] = useState<number>(0)\r\n  const [b27Hits, setB27Hits] = useState<number>(0)\r\n  const [b27Finished, setB27Finished] = useState<boolean>(false)\r\n  const [cuRound, setCuRound] = useState<number>(1)\r\n  const [cuScore, setCuScore] = useState<number>(0)\r\n  const [cuDarts, setCuDarts] = useState<number>(0)\r\n  const cuMaxRounds = 8\r\n  const [hsRound, setHsRound] = useState<number>(1)\r\n  const [hsScore, setHsScore] = useState<number>(0)\r\n  const [hsDarts, setHsDarts] = useState<number>(0)\r\n  const hsMaxRounds = 10\r\n  const [lsRound, setLsRound] = useState<number>(1)\r\n  const [lsScore, setLsScore] = useState<number>(0)\r\n  const [lsDarts, setLsDarts] = useState<number>(0)\r\n  const lsMaxRounds = 10\r\n  const [co170Rem, setCo170Rem] = useState<number>(170)\r\n  const [co170Darts, setCo170Darts] = useState<number>(0)\r\n  const [co170Attempts, setCo170Attempts] = useState<number>(0)\r\n  const [co170Successes, setCo170Successes] = useState<number>(0)\r\n  const [co121Rem, setCo121Rem] = useState<number>(121)\r\n  const [co121Darts, setCo121Darts] = useState<number>(0)\r\n  const [co121Attempts, setCo121Attempts] = useState<number>(0)\r\n  const [co121Successes, setCo121Successes] = useState<number>(0)\r\n  const [trebleTarget, setTrebleTarget] = useState<number>(20)\r\n  const [trebleHits, setTrebleHits] = useState<number>(0)\r\n  const [trebleDarts, setTrebleDarts] = useState<number>(0)\r\n  const [trebleMaxDarts, setTrebleMaxDarts] = useState<number>(30)\r\n  const [trebleFinished, setTrebleFinished] = useState<boolean>(false)\r\n  // Phase 2 states\r\n  const [baseball, setBaseball] = useState(createBaseball())\r\n  const [golf, setGolf] = useState(createGolf())\r\n  const [ttt, setTTT] = useState(createTicTacToe())\r\n  const [amCricket, setAmCricket] = useState(createAmCricketState())\r\n  // Killer (hotseat) state\r\n  const [killerPlayers, setKillerPlayers] = useState<Array<{ id: string; name: string }>>([\r\n    { id: 'p1', name: 'Player 1' },\r\n    { id: 'p2', name: 'Player 2' },\r\n  ])\r\n  const [killerStates, setKillerStates] = useState<Record<string, KillerState>>({})\r\n  const [killerAssigned, setKillerAssigned] = useState<Record<string, number>>({})\r\n  const [killerSetupDone, setKillerSetupDone] = useState<boolean>(false)\r\n  const [killerTurnIdx, setKillerTurnIdx] = useState<number>(0)\r\n  const [killerDarts, setKillerDarts] = useState<number>(0)\r\n  const [killerWinnerId, setKillerWinnerId] = useState<string | null>(null)\r\n  const [killerLastEvent, setKillerLastEvent] = useState<string>('')\r\n  // Scam/Scum state\r\n  const [scam, setScam] = useState(createScamState())\r\n  const [scamPlayer, setScamPlayer] = useState(createScamState())\r\n  // Fives state\r\n  const [fives, setFives] = useState(createFivesState(50))\r\n  const [fivesPlayer, setFivesPlayer] = useState(createFivesState(50))\r\n  // Sevens state\r\n  const [sevens, setSevens] = useState(createSevensState(70))\r\n  const [sevensPlayer, setSevensPlayer] = useState(createSevensState(70))\r\n  const [playerDartsThrown, setPlayerDartsThrown] = useState<number>(0)\r\n  const [playerLastDart, setPlayerLastDart] = useState<number>(0)\r\n  const [playerVisitDarts, setPlayerVisitDarts] = useState<number>(0)\r\n  const [playerVisitStart, setPlayerVisitStart] = useState<number>(x01Score)\r\n  const [playerVisitSum, setPlayerVisitSum] = useState<number>(0)\r\n  const [playerLastVisitScore, setPlayerLastVisitScore] = useState<number | null>(null)\r\n  const [playerVisitDartsAtDouble, setPlayerVisitDartsAtDouble] = useState<number>(0)\r\n  const lastBounceMissTsRef = useRef<number>(0)\r\n  const lastVisitDartsRef = useRef<number>(0)\r\n  const playerScoreRef = useRef<number>(playerScore)\r\n  const playerVisitDartsRef = useRef<number>(playerVisitDarts)\r\n  const playerVisitSumRef = useRef<number>(playerVisitSum)\r\n  const playerVisitStartRef = useRef<number>(playerVisitStart)\r\n  const playerVisitDartsAtDoubleRef = useRef<number>(playerVisitDartsAtDouble)\r\n\r\n  useEffect(() => { playerScoreRef.current = playerScore }, [playerScore])\r\n  useEffect(() => { playerVisitDartsRef.current = playerVisitDarts }, [playerVisitDarts])\r\n  useEffect(() => { playerVisitSumRef.current = playerVisitSum }, [playerVisitSum])\r\n  useEffect(() => { playerVisitStartRef.current = playerVisitStart }, [playerVisitStart])\r\n  useEffect(() => { playerVisitDartsAtDoubleRef.current = playerVisitDartsAtDouble }, [playerVisitDartsAtDouble])\r\n  const [aiCountdownMs, setAiCountdownMs] = useState<number>(0)\r\n  const aiTimerRef = useRef<number | null>(null)\r\n  const [aiDartsThrown, setAiDartsThrown] = useState<number>(0)\r\n  const [aiLastDart, setAiLastDart] = useState<number>(0)\r\n  const [aiVisitSum, setAiVisitSum] = useState<number>(0)\r\n  const [aiVisitDarts, setAiVisitDarts] = useState<number>(0)\r\n  const [aiLastVisitScore, setAiLastVisitScore] = useState<number | null>(null)\r\n  const [aiVisitDartsAtDouble, setAiVisitDartsAtDouble] = useState<number>(0)\r\n  // Doubles attempts/hits\r\n  const [playerDoublesAtt, setPlayerDoublesAtt] = useState<number>(0)\r\n  const [playerDoublesHit, setPlayerDoublesHit] = useState<number>(0)\r\n  const [aiDoublesAtt, setAiDoublesAtt] = useState<number>(0)\r\n  const [aiDoublesHit, setAiDoublesHit] = useState<number>(0)\r\n  // Match-long totals for averages\r\n  const [totalPlayerDarts, setTotalPlayerDarts] = useState<number>(0)\r\n  const [totalAiDarts, setTotalAiDarts] = useState<number>(0)\r\n  const [totalPlayerPoints, setTotalPlayerPoints] = useState<number>(0)\r\n  const [totalAiPoints, setTotalAiPoints] = useState<number>(0)\r\n  // Power scoring and checkout highs\r\n  const [player180s, setPlayer180s] = useState<number>(0)\r\n  const [player140s, setPlayer140s] = useState<number>(0)\r\n  const [player100s, setPlayer100s] = useState<number>(0)\r\n  const [ai180s, setAi180s] = useState<number>(0)\r\n  const [ai140s, setAi140s] = useState<number>(0)\r\n  const [ai100s, setAi100s] = useState<number>(0)\r\n  const [playerHighestCheckout, setPlayerHighestCheckout] = useState<number>(0)\r\n  const [aiHighestCheckout, setAiHighestCheckout] = useState<number>(0)\r\n  // End-of-match summary modal\r\n  const [showMatchSummary, setShowMatchSummary] = useState<boolean>(false)\r\n  // Manual correction input for offline (matches CameraView UX)\r\n  const [manualBox, setManualBox] = useState<string>('')\r\n  const [manualTextarea, setManualTextarea] = useState<string>('')\r\n  const [manualPlayerScoreInput, setManualPlayerScoreInput] = useState<string>('')\r\n  const [manualOpponentScoreInput, setManualOpponentScoreInput] = useState<string>('')\r\n  const [manualPlayerLegsInput, setManualPlayerLegsInput] = useState<string>('')\r\n  const [manualOpponentLegsInput, setManualOpponentLegsInput] = useState<string>('')\r\n  const [legOverrideConfirm, setLegOverrideConfirm] = useState<{ target: 'player' | 'ai'; value: number; stage: 1 | 2 } | null>(null)\r\n  const [showCameraManager, setShowCameraManager] = useState<boolean>(false)\r\n  const [dartCounts, setDartCounts] = useState<Record<string, number>>({})\r\n  const [awaitingBoardClear, setAwaitingBoardClear] = useState<boolean>(false)\r\n  const pendingVisitRef = useRef<PendingAutoVisit | null>(null)\r\n  const pendingVisitTimerRef = useRef<ReturnType<typeof setTimeout> | null>(null)\r\n\r\n  const clearPendingVisitTimer = useCallback(() => {\r\n    const timer = pendingVisitTimerRef.current\r\n    if (timer) {\r\n      clearTimeout(timer)\r\n      pendingVisitTimerRef.current = null\r\n    }\r\n  }, [])\r\n\r\n  const speakAutoVisit = useCallback((pending: PendingAutoVisit) => {\r\n    if (!callerEnabled) return\r\n    const speaker = user?.username || 'Player'\r\n    try {\r\n      sayScore(speaker, pending.visitTotal, Math.max(pending.remaining, 0), callerVoice, { volume: callerVolume, checkoutOnly: speakCheckoutOnly })\r\n    } catch {}\r\n  }, [callerEnabled, callerVoice, callerVolume, speakCheckoutOnly, user?.username])\r\n\r\n  const commitPendingVisit = useCallback((pending: PendingAutoVisit, _trigger: 'immediate' | 'event' | 'timeout') => {\r\n    setAwaitingBoardClear(false)\r\n  const { visitTotal, darts, preRemaining, remaining, doubleAttempts, finished, doubleWindow, highestCheckout } = pending\r\n\r\n    if (!finished) {\r\n      setPlayerScore(remaining)\r\n      playerScoreRef.current = remaining\r\n    } else {\r\n      setPlayerScore(0)\r\n      playerScoreRef.current = 0\r\n      if (typeof highestCheckout === 'number' && highestCheckout > 0) {\r\n        setPlayerHighestCheckout(h => Math.max(h, highestCheckout))\r\n      }\r\n    }\r\n\r\n    setPlayerLastVisitScore(visitTotal)\r\n\r\n    if (visitTotal === 180) setPlayer180s(n => n + 1)\r\n    else if (visitTotal >= 140) setPlayer140s(n => n + 1)\r\n    else if (visitTotal >= 100) setPlayer100s(n => n + 1)\r\n\r\n    if (doubleWindow && doubleAttempts > 0) {\r\n      setPlayerDoublesAtt(a => a + doubleAttempts)\r\n      if (finished) setPlayerDoublesHit(h => h + 1)\r\n    }\r\n\r\n    if (!pending.announced) speakAutoVisit(pending)\r\n\r\n    try {\r\n      useAudit.getState().recordVisit('offline-x01', darts, visitTotal, { preRemaining, postRemaining: finished ? 0 : remaining, finish: finished, bust: false })\r\n    } catch {}\r\n\r\n    if (finished) {\r\n      setPendingLegWinner('player')\r\n      setShowWinPopup(true)\r\n    }\r\n\r\n    endTurn(finished ? 0 : remaining)\r\n\r\n    setPlayerVisitSum(0)\r\n    playerVisitSumRef.current = 0\r\n    setPlayerVisitDarts(0)\r\n    playerVisitDartsRef.current = 0\r\n    setPlayerVisitDartsAtDouble(0)\r\n    playerVisitDartsAtDoubleRef.current = 0\r\n  }, [endTurn, setPlayerHighestCheckout, setPendingLegWinner, setPlayerScore, setPlayerLastVisitScore, setPlayerVisitSum, setPlayerVisitDarts, setPlayerVisitDartsAtDouble, setShowWinPopup, setPlayer180s, setPlayer140s, setPlayer100s, setPlayerDoublesAtt, setPlayerDoublesHit, speakAutoVisit])\r\n\r\n  const finalizePendingVisit = useCallback((trigger: 'event' | 'timeout') => {\r\n    const pending = pendingVisitRef.current\r\n    if (!pending) return\r\n    pendingVisitRef.current = null\r\n    clearPendingVisitTimer()\r\n    commitPendingVisit(pending, trigger)\r\n  }, [clearPendingVisitTimer, commitPendingVisit])\r\n\r\n  const queuePendingVisit = useCallback((pending: PendingAutoVisit) => {\r\n    speakAutoVisit(pending)\r\n    pendingVisitRef.current = { ...pending, announced: true }\r\n    setAwaitingBoardClear(true)\r\n    clearPendingVisitTimer()\r\n    pendingVisitTimerRef.current = setTimeout(() => finalizePendingVisit('timeout'), BOARD_CLEAR_GRACE_MS)\r\n  }, [clearPendingVisitTimer, finalizePendingVisit, speakAutoVisit])\r\n\r\n  useEffect(() => {\r\n    if (!waitForBoardClear) return\r\n    const handler = () => finalizePendingVisit('event')\r\n    window.addEventListener('ndn:darts-cleared', handler as EventListener)\r\n    return () => window.removeEventListener('ndn:darts-cleared', handler as EventListener)\r\n  }, [waitForBoardClear, finalizePendingVisit])\r\n\r\n  useEffect(() => {\r\n    if (!waitForBoardClear) finalizePendingVisit('timeout')\r\n  }, [waitForBoardClear, finalizePendingVisit])\r\n\r\n  useEffect(() => () => clearPendingVisitTimer(), [clearPendingVisitTimer])\r\n\r\n  useEffect(() => {\r\n    if (playerVisitDarts === 0 && lastVisitDartsRef.current > 0) {\r\n      try {\r\n        window.dispatchEvent(new CustomEvent('ndn:darts-cleared', { detail: { source: 'offline-play', ts: Date.now() } }))\r\n      } catch {}\r\n      lastBounceMissTsRef.current = 0\r\n    }\r\n    lastVisitDartsRef.current = playerVisitDarts\r\n  }, [playerVisitDarts])\r\n\r\n\r\n  const humanName = user?.username || 'Player 1'\r\n  const aiDisplayName = ai === 'None' ? 'Player 2' : ai\r\n\r\n  // Call all game stat hooks unconditionally at component level (React hooks rules)\r\n  const statsX01 = useOfflineGameStats(\r\n    'X01' as any,\r\n    playerScore, aiScore,\r\n    playerLegs, aiLegs,\r\n    playerLastDart, aiLastDart,\r\n    playerVisitSum, aiVisitSum,\r\n    playerLastVisitScore, aiLastVisitScore,\r\n    playerVisitDarts, aiVisitDarts,\r\n    playerDoublesHit, playerDoublesAtt,\r\n    aiDoublesHit, aiDoublesAtt,\r\n    legStats,\r\n    isPlayerTurn,\r\n    ai,\r\n    x01Score\r\n  )\r\n  const statsCricket = useOfflineGameStats(\r\n    'Cricket' as any,\r\n    undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined,\r\n    cricket\r\n  )\r\n  const statsShanghai = useOfflineGameStats(\r\n    'Shanghai' as any,\r\n    undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined,\r\n    isPlayerTurn, ai, undefined,\r\n    cricket, shanghai\r\n  )\r\n  const statsKiller = useOfflineGameStats(\r\n    'Killer' as any,\r\n    undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined,\r\n    undefined, undefined,\r\n    killerPlayers, killerStates, killerAssigned, killerTurnIdx\r\n  )\r\n  const statsScam = useOfflineGameStats('Scam' as any)\r\n  const statsFives = useOfflineGameStats('Fives' as any)\r\n  const statsSevens = useOfflineGameStats('Sevens' as any)\r\n\r\n  const activeScoreboardStats = useMemo(() => {\r\n    const list = statsX01 || []\r\n    const playerResolvedLastScore = playerVisitDarts > 0\r\n      ? playerVisitSum\r\n      : (playerLastVisitScore ?? playerLastDart)\r\n    const aiResolvedLastScore = aiVisitDarts > 0\r\n      ? aiVisitSum\r\n      : (aiLastVisitScore ?? aiLastDart)\r\n    if (list.length === 0) {\r\n      return {\r\n        name: isPlayerTurn ? humanName : aiDisplayName,\r\n        isCurrentTurn: true,\r\n        legsWon: isPlayerTurn ? playerLegs : aiLegs,\r\n        score: isPlayerTurn ? playerScore : aiScore,\r\n        lastScore: isPlayerTurn ? playerResolvedLastScore : aiResolvedLastScore,\r\n      } as PlayerStats\r\n    }\r\n    return list.find(player => player.isCurrentTurn) ?? list[0]\r\n  }, [\r\n    statsX01,\r\n    isPlayerTurn,\r\n    humanName,\r\n    aiDisplayName,\r\n    playerLegs,\r\n    aiLegs,\r\n    playerScore,\r\n    aiScore,\r\n    playerVisitDarts,\r\n    playerVisitSum,\r\n    playerLastVisitScore,\r\n    playerLastDart,\r\n    aiVisitSum,\r\n    aiLastVisitScore,\r\n    aiLastDart,\r\n    aiVisitDarts,\r\n  ])\r\n\r\n  const singlePlayerScoreboard: PlayerStats[] = useMemo(() => {\r\n    if (!activeScoreboardStats) return []\r\n    const { matchAvg, allTimeAvg, ...rest } = activeScoreboardStats\r\n    return [{ ...rest, matchAvg: undefined, allTimeAvg: undefined } as PlayerStats]\r\n  }, [activeScoreboardStats])\r\n\r\n  const inactivePlayerName = isPlayerTurn ? aiDisplayName : humanName\r\n  const activePlayerName = activeScoreboardStats?.name ?? (isPlayerTurn ? humanName : aiDisplayName)\r\n  const activeRemaining = isPlayerTurn ? playerScore : aiScore\r\n  const activeLastScore = isPlayerTurn\r\n    ? (playerVisitDarts > 0 ? playerVisitSum : (playerLastVisitScore ?? playerLastDart))\r\n    : (aiVisitDarts > 0 ? aiVisitSum : (aiLastVisitScore ?? aiLastDart))\r\n\r\n  const recordDart = useCallback((mode: string, count = 1) => {\r\n    if (!mode || count <= 0) return\r\n    setDartCounts(prev => ({\r\n      ...prev,\r\n      [mode]: (prev[mode] || 0) + count\r\n    }))\r\n  }, [])\r\n\r\n  const resetDartCount = useCallback((mode: string) => {\r\n    if (!mode) return\r\n    setDartCounts(prev => {\r\n      if (prev[mode] === undefined) return prev\r\n      return { ...prev, [mode]: 0 }\r\n    })\r\n  }, [])\r\n\r\n  const activeModeDarts = dartCounts[selectedMode] || 0\r\n\r\n  const parseManualScoreOverride = (value: string): number | null => {\r\n    if (!value.trim()) return null\r\n    const parsed = Number(value)\r\n    if (!Number.isFinite(parsed)) return null\r\n    return clamp(Math.round(parsed), 0, x01Score)\r\n  }\r\n\r\n  const parseManualLegsOverride = (value: string): number | null => {\r\n    if (!value.trim()) return null\r\n    const parsed = Number(value)\r\n    if (!Number.isFinite(parsed)) return null\r\n    return Math.max(0, Math.round(parsed))\r\n  }\r\n\r\n  const cancelPendingAutoVisit = useCallback(() => {\r\n    if (pendingVisitRef.current) {\r\n      pendingVisitRef.current = null\r\n    }\r\n    clearPendingVisitTimer()\r\n    setAwaitingBoardClear(false)\r\n  }, [clearPendingVisitTimer])\r\n\r\n  const applyPlayerScoreOverride = useCallback((nextScore: number) => {\r\n    const safeScore = clamp(nextScore, 0, x01Score)\r\n    cancelPendingAutoVisit()\r\n    setPlayerScore(safeScore)\r\n    playerScoreRef.current = safeScore\r\n\r\n    const nextVisitStart = safeScore === 0 ? x01Score : safeScore\r\n    setPlayerVisitStart(nextVisitStart)\r\n    playerVisitStartRef.current = nextVisitStart\r\n\r\n    setPlayerVisitSum(0)\r\n    playerVisitSumRef.current = 0\r\n    setPlayerVisitDarts(0)\r\n    playerVisitDartsRef.current = 0\r\n    setPlayerVisitDartsAtDouble(0)\r\n    playerVisitDartsAtDoubleRef.current = 0\r\n\r\n    setPlayerLastVisitScore(null)\r\n    setPlayerLastDart(0)\r\n    setPlayerDartPoints(0)\r\n    lastBounceMissTsRef.current = 0\r\n\r\n    if (safeScore === 0) {\r\n      setPendingLegWinner('player')\r\n      setShowWinPopup(true)\r\n    } else {\r\n      setPendingLegWinner(null)\r\n      setShowWinPopup(false)\r\n    }\r\n  }, [cancelPendingAutoVisit, setPlayerScore, x01Score, setPlayerVisitStart, setPlayerVisitSum, setPlayerVisitDarts, setPlayerVisitDartsAtDouble, setPlayerLastVisitScore, setPlayerLastDart, setPlayerDartPoints, setPendingLegWinner, setShowWinPopup])\r\n\r\n  const handleManualScoreOverride = (target: 'player' | 'ai') => {\r\n    const source = target === 'player' ? manualPlayerScoreInput : manualOpponentScoreInput\r\n    const parsed = parseManualScoreOverride(source)\r\n    if (parsed === null) {\r\n      toast(`Enter a number between 0 and ${x01Score}`, { type: 'error', timeout: 2500 })\r\n      return\r\n    }\r\n    if (target === 'player') {\r\n      applyPlayerScoreOverride(parsed)\r\n      setManualPlayerScoreInput('')\r\n      return\r\n    } else {\r\n      setAiScore(parsed)\r\n      setAiVisitSum(0)\r\n      setAiVisitDarts(0)\r\n      setAiLastVisitScore(null)\r\n      setAiVisitDartsAtDouble(0)\r\n      setAiLastDart(0)\r\n      setManualOpponentScoreInput('')\r\n    }\r\n    setPendingLegWinner(null)\r\n    setShowWinPopup(false)\r\n  }\r\n\r\n  const applyManualLegOverride = useCallback((target: 'player' | 'ai', value: number) => {\r\n    if (target === 'player') {\r\n      setPlayerLegs(value)\r\n      setManualPlayerLegsInput('')\r\n    } else {\r\n      setAiLegs(value)\r\n      setManualOpponentLegsInput('')\r\n    }\r\n    setPendingLegWinner(null)\r\n    setShowWinPopup(false)\r\n  }, [setAiLegs, setManualOpponentLegsInput, setManualPlayerLegsInput, setPendingLegWinner, setPlayerLegs, setShowWinPopup])\r\n\r\n  const handleManualLegsOverride = (target: 'player' | 'ai') => {\r\n    const source = target === 'player' ? manualPlayerLegsInput : manualOpponentLegsInput\r\n    const parsed = parseManualLegsOverride(source)\r\n    if (parsed === null) {\r\n      toast('Enter a non-negative whole number for legs', { type: 'error', timeout: 2500 })\r\n      return\r\n    }\r\n    setLegOverrideConfirm({ target, value: parsed, stage: 1 })\r\n  }\r\n\r\n  const handleLegOverrideYes = useCallback(() => {\r\n    setLegOverrideConfirm(prev => {\r\n      if (!prev) return prev\r\n      if (prev.stage === 1) return { ...prev, stage: 2 }\r\n      applyManualLegOverride(prev.target, prev.value)\r\n      return null\r\n    })\r\n  }, [applyManualLegOverride])\r\n\r\n  const handleLegOverrideNo = useCallback(() => {\r\n    setLegOverrideConfirm(null)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!legOverrideConfirm) return\r\n    const handleKey = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape') {\r\n        event.preventDefault()\r\n        handleLegOverrideNo()\r\n      }\r\n    }\r\n    window.addEventListener('keydown', handleKey)\r\n    return () => window.removeEventListener('keydown', handleKey)\r\n  }, [handleLegOverrideNo, legOverrideConfirm])\r\n\r\n  // Button size classes for toolbar buttons\r\n  const getButtonSizeClasses = (size: string) => {\r\n    switch (size) {\r\n      case 'small': return 'px-1.5 py-0.5 text-xs'\r\n      case 'large': return 'px-3 py-1 text-sm'\r\n      default: return 'px-2 py-0.5 text-sm'\r\n    }\r\n  }\r\n  const buttonSizeClass = getButtonSizeClasses(textSize)\r\n  // Fit-all scaling measurement\r\n  const scrollerRef = useRef<HTMLDivElement | null>(null)\r\n  const contentRef = useRef<HTMLDivElement | null>(null)\r\n  const headerBarRef = useRef<HTMLDivElement | null>(null)\r\n  // Match format controls (offline only): First to N or Best of N with editable count\r\n  const [formatType, setFormatType] = useState<'first'|'best'>('first')\r\n  const [formatCount, setFormatCount] = useState<number>(1)\r\n  const formatRef = useRef<HTMLDivElement | null>(null)\r\n  // Keep internal required wins (firstTo) in sync with format selection\r\n  useEffect(() => {\r\n    const n = Math.max(1, Math.floor(Number(formatCount) || 1))\r\n    const wins = formatType === 'first' ? n : Math.max(1, Math.ceil(n / 2))\r\n    setFirstTo(wins)\r\n  }, [formatType, formatCount])\r\n  useEffect(() => {\r\n    if (!fitAll) {\r\n      setFitScale(1)\r\n      setFitOverflowing(false)\r\n      return\r\n    }\r\n    const measure = () => {\r\n      const scroller = scrollerRef.current\r\n      const content = contentRef.current\r\n      if (!scroller || !content) return\r\n      // Available size excludes the sticky header inside the scroller\r\n      const headerH = headerBarRef.current ? headerBarRef.current.getBoundingClientRect().height : 0\r\n      const availH = Math.max(0, scroller.clientHeight - headerH - 6) // small breathing room\r\n      const availW = Math.max(0, scroller.clientWidth - 8)\r\n      // Measure the content size without scale\r\n      const rect = content.getBoundingClientRect()\r\n      const currentScale = fitScale || 1\r\n      const naturalHeight = rect.height / currentScale\r\n      const naturalWidth = rect.width / currentScale\r\n      // Compute scale to fit both height and width\r\n      const scaleH = availH > 0 ? (availH / naturalHeight) : 1\r\n      const scaleW = availW > 0 ? (availW / naturalWidth) : 1\r\n  const next = Math.min(1, Math.max(0.5, Math.min(scaleH, scaleW)))\r\n  const scaledHeight = naturalHeight * next\r\n  const overflowing = availH > 0 && (scaledHeight - availH) > 1\r\n  setFitOverflowing(overflowing)\r\n  setFitScale(next)\r\n    }\r\n    measure()\r\n  const RO: any = (window as any).ResizeObserver\r\n  const ro = RO ? new RO(() => measure()) : null\r\n  ro && scrollerRef.current && ro.observe(scrollerRef.current as any)\r\n  ro && contentRef.current && ro.observe(contentRef.current as any)\r\n    window.addEventListener('resize', measure)\r\n    return () => {\r\n      window.removeEventListener('resize', measure)\r\n      try { ro && scrollerRef.current && ro.unobserve(scrollerRef.current as any) } catch {}\r\n      try { ro && contentRef.current && ro.unobserve(contentRef.current as any) } catch {}\r\n    }\r\n  }, [fitAll, fitScale])\r\n\r\n\r\n  // Auto-start handler (from Home or other tabs)\r\n  useEffect(() => {\r\n    const onAuto = (e: any) => {\r\n      const m = e?.detail?.mode as string | undefined\r\n      if (!m) return\r\n      setSelectedMode(m)\r\n      // For Double Practice we could load a specific flow. For now, we just open the X01-like modal with immediate start.\r\n      startMatch()\r\n    }\r\n    window.addEventListener('ndn:auto-start', onAuto as any)\r\n    return () => window.removeEventListener('ndn:auto-start', onAuto as any)\r\n  }, [])\r\n\r\n  // Accept demo parameters to preconfigure format and starting score before auto-start\r\n  useEffect(() => {\r\n    const onFmt = (e: any) => {\r\n      const t = e?.detail?.formatType\r\n      const c = e?.detail?.formatCount\r\n      const s = e?.detail?.startScore\r\n      if (t === 'first' || t === 'best') setFormatType(t)\r\n      if (typeof c === 'number' && isFinite(c)) setFormatCount(Math.max(1, Math.floor(c)))\r\n      if (typeof s === 'number' && isFinite(s)) setX01Score(Math.max(1, Math.floor(s)))\r\n    }\r\n    window.addEventListener('ndn:offline-format', onFmt as any)\r\n    return () => window.removeEventListener('ndn:offline-format', onFmt as any)\r\n  }, [])\r\n\r\n  // Auto-start last offline match when opening this tab, if enabled\r\n  useEffect(() => {\r\n    if (!autoStartOffline) return\r\n    // Kick off a match after initial render for a smooth modal open\r\n    const id = setTimeout(() => startMatch(), 50)\r\n    return () => clearTimeout(id)\r\n  }, [autoStartOffline])\r\n\r\n  // Drive AI countdown and perform AI visit when countdown elapses\r\n  useEffect(() => {\r\n    if (!showMatchModal || isPlayerTurn || ai === 'None' || aiCountdownMs <= 0) return\r\n    let raf: number\r\n    let last = performance.now()\r\n    const tick = (now: number) => {\r\n      const dt = now - last\r\n      last = now\r\n      setAiCountdownMs(prev => {\r\n        const next = prev - dt\r\n        if (next <= 0) {\r\n          // Execute AI visit per dart (up to 3 darts or until finish/bust)\r\n          let visitDarts = 0\r\n          let visitTotal = 0\r\n          let remaining = aiScore\r\n          setAiVisitDarts(0)\r\n          while (visitDarts < 3 && remaining > 0) {\r\n            const targetVisit = aiVisitScore(remaining, ai)\r\n            // break target into up to 3 darts (roughly 20 per dart for easy split)\r\n            const dart = clamp(targetVisit - visitDarts*20, 0, Math.min(60, remaining))\r\n            const after = remaining - dart\r\n            setAiLastDart(dart)\r\n            setAiDartsThrown(d => d + 1)\r\n            setTotalAiDarts(d => d + 1)\r\n            if (after < 0) {\r\n              // bust: revert to remaining before visit\r\n              remaining = aiScore\r\n              setAiVisitSum(0)\r\n              setAiVisitDartsAtDouble(0)\r\n              visitTotal = 0\r\n              setAiLastVisitScore(0)\r\n              setAiVisitDarts(0)\r\n              break\r\n            }\r\n            // Only add points after confirming not a bust\r\n            visitTotal += dart\r\n            setAiVisitSum(s => s + dart)\r\n            setTotalAiPoints(p => p + dart)\r\n            // Track darts at double window\r\n            const preRem = remaining\r\n            const postRem = after\r\n            if (preRem > 50 && postRem <= 50) setAiVisitDartsAtDouble(1)\r\n            else if (preRem <= 50) setAiVisitDartsAtDouble(c => c + 1)\r\n            remaining = after\r\n            visitDarts += 1\r\n            setAiVisitDarts(visitDarts)\r\n            if (remaining === 0) break\r\n          }\r\n          setAiScore(remaining)\r\n          if (remaining === 0) {\r\n            // Power score classification\r\n            if (visitTotal === 180) setAi180s(n => n + 1)\r\n            else if (visitTotal >= 140) setAi140s(n => n + 1)\r\n            else if (visitTotal >= 100) setAi100s(n => n + 1)\r\n            // Highest checkout\r\n            const checkout = aiScore\r\n            if (checkout <= 170) setAiHighestCheckout(h => Math.max(h, checkout))\r\n            // Doubles attempts/hit if finished from <= 50\r\n            if (aiScore <= 50) {\r\n              setAiDoublesAtt(a => a + (aiVisitDartsAtDouble > 0 ? aiVisitDartsAtDouble : 1))\r\n              setAiDoublesHit(h => h + 1)\r\n            }\r\n            setAiLastVisitScore(visitTotal)\r\n            setAiVisitSum(0)\r\n            setAiVisitDartsAtDouble(0)\r\n            setAiVisitDarts(0)\r\n            // AI won the leg\r\n            setPendingLegWinner('ai')\r\n            setShowWinPopup(true)\r\n          }\r\n          // If AI did not finish, but threw 3 darts this visit, classify power score and reset visit sum\r\n          if (remaining > 0 && visitDarts >= 3) {\r\n            if (visitTotal === 180) setAi180s(n => n + 1)\r\n            else if (visitTotal >= 140) setAi140s(n => n + 1)\r\n            else if (visitTotal >= 100) setAi100s(n => n + 1)\r\n            setAiLastVisitScore(visitTotal)\r\n            setAiVisitSum(0)\r\n            setAiVisitDartsAtDouble(0)\r\n            setAiVisitDarts(0)\r\n          }\r\n          // Hand turn back to player\r\n          setAiVisitDarts(0)\r\n          setIsPlayerTurn(true)\r\n          return 0\r\n        }\r\n        return next\r\n      })\r\n      raf = requestAnimationFrame(tick)\r\n    }\r\n    raf = requestAnimationFrame(tick)\r\n    return () => cancelAnimationFrame(raf)\r\n  }, [showMatchModal, isPlayerTurn, ai, aiScore])\r\n\r\n  function startMatch() {\r\n    setInMatch(true);\r\n    setPlayerScore(x01Score);\r\n  playerScoreRef.current = x01Score\r\n    setAiScore(x01Score);\r\n    setOnDouble(false);\r\n    setShowMatchModal(true);\r\n    setIsPlayerTurn(true);\r\n    setPlayerDartPoints(0);\r\n    setPlayerDartsThrown(0);\r\n    setPlayerLastDart(0);\r\n    setPlayerVisitDarts(0);\r\n  playerVisitDartsRef.current = 0\r\n    setPlayerVisitStart(x01Score);\r\n    setPlayerVisitSum(0)\r\n    setPlayerLastVisitScore(null)\r\n  setPlayerVisitDartsAtDouble(0)\r\n    setAiCountdownMs(0);\r\n    setAiDartsThrown(0);\r\n    setAiLastDart(0);\r\n  setAiVisitSum(0)\r\n  setAiVisitDarts(0)\r\n    setAiLastVisitScore(null)\r\n    setPendingLegWinner(null)\r\n    // When starting a brand-new match from menu, reset legs\r\n  setPlayerLegs(0)\r\n  setAiLegs(0)\r\n    setLegStats([])\r\n  // Reset Treble Practice session state when starting a new match\r\n  setTrebleHits(0); setTrebleDarts(0); setTrebleFinished(false)\r\n    // Reset match-long totals\r\n    setTotalPlayerDarts(0); setTotalAiDarts(0)\r\n    setTotalPlayerPoints(0); setTotalAiPoints(0)\r\n    setPlayer180s(0); setPlayer140s(0); setPlayer100s(0)\r\n    setAi180s(0); setAi140s(0); setAi100s(0)\r\n    setPlayerHighestCheckout(0); setAiHighestCheckout(0)\r\n    setPlayerDoublesAtt(0); setPlayerDoublesHit(0)\r\n    setAiDoublesAtt(0); setAiDoublesHit(0)\r\n  resetDartCount('X01')\r\n    // Sync required wins from current format selection\r\n    const n = Math.max(1, Math.floor(Number(formatCount) || 1))\r\n    setFirstTo(formatType === 'first' ? n : Math.max(1, Math.ceil(n/2)))\r\n    if (rememberLastOffline) {\r\n      try { setLastOffline({ mode: selectedMode, x01Start: x01Score, firstTo, aiLevel: ai }) } catch {}\r\n    }\r\n  }\r\n\r\n  function startNextLeg() {\r\n    setPlayerScore(x01Score)\r\n  playerScoreRef.current = x01Score\r\n    setAiScore(x01Score)\r\n    setOnDouble(false)\r\n    setShowMatchModal(true)\r\n    setIsPlayerTurn(true)\r\n    setPlayerDartPoints(0)\r\n    setPlayerDartsThrown(0)\r\n    setPlayerLastDart(0)\r\n    setPlayerVisitDarts(0)\r\n  playerVisitDartsRef.current = 0\r\n    setPlayerVisitStart(x01Score)\r\n    setPlayerVisitSum(0)\r\n    playerVisitStartRef.current = x01Score\r\n    playerVisitSumRef.current = 0\r\n    setPlayerLastVisitScore(null)\r\n  setPlayerVisitDartsAtDouble(0)\r\n    playerVisitDartsAtDoubleRef.current = 0\r\n    playerVisitDartsAtDoubleRef.current = 0\r\n    setAiCountdownMs(0)\r\n    setAiDartsThrown(0)\r\n    setAiLastDart(0)\r\n    setAiVisitSum(0)\r\n    setAiVisitDarts(0)\r\n    setAiLastVisitScore(null)\r\n    setPendingLegWinner(null)\r\n  }\r\n\r\n  // --- Offline per-dart helpers ---\r\n  function endTurn(nextRemaining: number) {\r\n    setPlayerVisitDarts(0)\r\n    playerVisitDartsRef.current = 0\r\n    setPlayerVisitStart(nextRemaining === 0 ? x01Score : nextRemaining)\r\n    playerVisitStartRef.current = (nextRemaining === 0 ? x01Score : nextRemaining)\r\n    setPlayerVisitDartsAtDouble(0)\r\n    playerVisitDartsAtDoubleRef.current = 0\r\n    if (ai !== 'None') {\r\n      setIsPlayerTurn(false)\r\n      setAiCountdownMs(aiDelayMs)\r\n    } else {\r\n      setAiCountdownMs(0)\r\n      setIsPlayerTurn(true)\r\n    }\r\n  }\r\n\r\n  function applyDartValue(dart: number) {\r\n    if (waitForBoardClear && pendingVisitRef.current) {\r\n      if (!awaitingBoardClear) setAwaitingBoardClear(true)\r\n      toast('Remove your darts before starting the next throw', { type: 'info', timeout: 1800 })\r\n      return\r\n    }\r\n    recordDart('X01')\r\n    const currentScore = playerScoreRef.current\r\n    const currentVisitDarts = playerVisitDartsRef.current\r\n    const currentVisitSum = playerVisitSumRef.current\r\n    const currentVisitStart = playerVisitStartRef.current\r\n    const currentVisitDartsAtDouble = playerVisitDartsAtDoubleRef.current\r\n    const remaining = currentScore - dart\r\n    const newVisitDarts = currentVisitDarts + 1\r\n\r\n    setPlayerLastDart(dart)\r\n    setPlayerDartsThrown(d => d + 1)\r\n    setTotalPlayerDarts(d => d + 1)\r\n\r\n    if (remaining < 0) {\r\n      try {\r\n        const preRemaining = currentScore\r\n        const postRemaining = currentVisitStart\r\n        useAudit.getState().recordVisit('offline-x01', newVisitDarts, 0, { preRemaining, postRemaining, bust: true, finish: false })\r\n      } catch {}\r\n      setPlayerScore(currentVisitStart)\r\n      playerScoreRef.current = currentVisitStart\r\n\r\n      if (currentScore <= 50) {\r\n        const attemptsThisVisit = (currentVisitDartsAtDouble || 0) + 1\r\n        setPlayerDoublesAtt(a => a + attemptsThisVisit)\r\n      }\r\n\r\n      if (callerEnabled) {\r\n        try { sayScore(user?.username || 'Player', 0, Math.max(currentVisitStart, 0), callerVoice, { volume: callerVolume, checkoutOnly: speakCheckoutOnly }) } catch {}\r\n      }\r\n\r\n      setPlayerLastVisitScore(0)\r\n      setPlayerDartPoints(0)\r\n      setPlayerVisitSum(0)\r\n      playerVisitSumRef.current = 0\r\n      setPlayerVisitDartsAtDouble(0)\r\n      playerVisitDartsAtDoubleRef.current = 0\r\n      endTurn(currentVisitStart)\r\n      return\r\n    }\r\n\r\n    setPlayerScore(remaining)\r\n    playerScoreRef.current = remaining\r\n\r\n    setPlayerVisitDarts(newVisitDarts)\r\n    playerVisitDartsRef.current = newVisitDarts\r\n    const newVisitSum = currentVisitSum + dart\r\n    setPlayerVisitSum(newVisitSum)\r\n    playerVisitSumRef.current = newVisitSum\r\n\r\n    setTotalPlayerPoints(p => p + dart)\r\n    setPlayerDartPoints(0)\r\n\r\n    const preRemaining = currentScore\r\n    const postRemaining = remaining\r\n    const startedDoubleWindow = preRemaining > 50 && postRemaining <= 50\r\n    const stillInDoubleWindow = preRemaining <= 50\r\n    if (startedDoubleWindow) {\r\n      setPlayerVisitDartsAtDouble(1)\r\n      playerVisitDartsAtDoubleRef.current = 1\r\n    } else if (stillInDoubleWindow) {\r\n      setPlayerVisitDartsAtDouble(c => c + 1)\r\n      playerVisitDartsAtDoubleRef.current = (currentVisitDartsAtDouble || 0) + 1\r\n    }\r\n\r\n    const doubleAttemptsNow = playerVisitDartsAtDoubleRef.current || 0\r\n    const inDoubleWindow = preRemaining <= 50\r\n    const attemptsForVisit = inDoubleWindow ? Math.max(doubleAttemptsNow, Math.min(newVisitDarts, 3)) : 0\r\n\r\n    if (remaining === 0) {\r\n      const pending: PendingAutoVisit = {\r\n        visitTotal: newVisitSum,\r\n        darts: newVisitDarts,\r\n        preRemaining: currentScore,\r\n        remaining: 0,\r\n        doubleAttempts: attemptsForVisit,\r\n        finished: true,\r\n        doubleWindow: inDoubleWindow,\r\n        highestCheckout: currentVisitStart <= 170 ? currentVisitStart : null,\r\n      }\r\n      if (waitForBoardClear) {\r\n        queuePendingVisit(pending)\r\n      } else {\r\n        commitPendingVisit(pending, 'immediate')\r\n      }\r\n      return\r\n    }\r\n\r\n    if (newVisitDarts >= 3) {\r\n      const pending: PendingAutoVisit = {\r\n        visitTotal: newVisitSum,\r\n        darts: newVisitDarts,\r\n        preRemaining: currentScore,\r\n        remaining,\r\n        doubleAttempts: attemptsForVisit,\r\n        finished: false,\r\n        doubleWindow: inDoubleWindow,\r\n        highestCheckout: null,\r\n      }\r\n      if (waitForBoardClear) {\r\n        queuePendingVisit(pending)\r\n      } else {\r\n        commitPendingVisit(pending, 'immediate')\r\n      }\r\n      return\r\n    }\r\n  }\r\n\r\n  function addDartNumeric() {\r\n    const dart = clamp(Math.round(Number(playerDartPoints) || 0), 0, 60)\r\n    applyDartValue(dart)\r\n  }\r\n\r\n  function commitManualVisitTotal(rawTotal: number): boolean {\r\n    if (!Number.isFinite(rawTotal)) return false\r\n\r\n    const visitStart = playerVisitStartRef.current\r\n    const liveScore = playerScoreRef.current\r\n    const existingDarts = playerVisitDartsRef.current\r\n    const existingSum = playerVisitSumRef.current\r\n    const hadPartialVisit = existingDarts > 0 || existingSum > 0\r\n\r\n    if (hadPartialVisit) {\r\n      setPlayerScore(visitStart)\r\n      playerScoreRef.current = visitStart\r\n      setPlayerVisitDarts(0)\r\n      playerVisitDartsRef.current = 0\r\n      setPlayerVisitSum(0)\r\n      playerVisitSumRef.current = 0\r\n      setPlayerVisitDartsAtDouble(0)\r\n      playerVisitDartsAtDoubleRef.current = 0\r\n      setPlayerLastDart(0)\r\n      setPlayerDartPoints(0)\r\n      setPlayerDartsThrown(d => Math.max(0, d - existingDarts))\r\n      setTotalPlayerDarts(d => Math.max(0, d - existingDarts))\r\n      setTotalPlayerPoints(p => Math.max(0, p - existingSum))\r\n      lastBounceMissTsRef.current = 0\r\n    }\r\n\r\n    const preRemaining = hadPartialVisit ? visitStart : liveScore\r\n    const checkoutCap = preRemaining <= 170 ? 170 : 180\r\n    const total = clamp(Math.round(rawTotal), 0, checkoutCap)\r\n\r\n    recordDart('X01', 3)\r\n    setPlayerDartsThrown(d => d + 3)\r\n    setTotalPlayerDarts(d => d + 3)\r\n    setPlayerVisitDarts(3)\r\n    playerVisitDartsRef.current = 3\r\n    setPlayerVisitSum(total)\r\n    playerVisitSumRef.current = total\r\n    setPlayerLastVisitScore(total)\r\n\r\n    if (total === 180) setPlayer180s(n => n + 1)\r\n    else if (total >= 140) setPlayer140s(n => n + 1)\r\n    else if (total >= 100) setPlayer100s(n => n + 1)\r\n\r\n    const remaining = preRemaining - total\r\n\r\n    if (remaining < 0) {\r\n      if (callerEnabled) {\r\n        try { sayScore(humanName, 0, Math.max(visitStart, 0), callerVoice, { volume: callerVolume, checkoutOnly: speakCheckoutOnly }) } catch {}\r\n      }\r\n      try {\r\n        useAudit.getState().recordVisit('offline-x01', 3, 0, { preRemaining, postRemaining: visitStart, bust: true, finish: false })\r\n      } catch {}\r\n      setPlayerScore(visitStart)\r\n      playerScoreRef.current = visitStart\r\n      setPlayerLastVisitScore(0)\r\n      setPlayerVisitSum(0)\r\n      playerVisitSumRef.current = 0\r\n      setPlayerVisitDarts(0)\r\n      playerVisitDartsRef.current = 0\r\n      setPlayerVisitDartsAtDouble(0)\r\n      playerVisitDartsAtDoubleRef.current = 0\r\n      endTurn(visitStart)\r\n      return true\r\n    }\r\n\r\n    setPlayerScore(remaining)\r\n    playerScoreRef.current = remaining\r\n    setTotalPlayerPoints(p => p + total)\r\n\r\n    if (callerEnabled) {\r\n      try { sayScore(humanName, total, Math.max(remaining, 0), callerVoice, { volume: callerVolume, checkoutOnly: speakCheckoutOnly }) } catch {}\r\n    }\r\n\r\n    if (preRemaining <= 50) {\r\n      setPlayerDoublesAtt(a => a + 3)\r\n      if (remaining === 0) setPlayerDoublesHit(h => h + 1)\r\n    }\r\n\r\n    if (remaining === 0) {\r\n      if (preRemaining <= 170) setPlayerHighestCheckout(h => Math.max(h, preRemaining))\r\n      try {\r\n        useAudit.getState().recordVisit('offline-x01', 3, total, { preRemaining, postRemaining: 0, finish: true, bust: false })\r\n      } catch {}\r\n      setPendingLegWinner('player')\r\n      setShowWinPopup(true)\r\n      setPlayerVisitDarts(0)\r\n      playerVisitDartsRef.current = 0\r\n      setPlayerVisitSum(0)\r\n      playerVisitSumRef.current = 0\r\n      setPlayerVisitDartsAtDouble(0)\r\n      playerVisitDartsAtDoubleRef.current = 0\r\n      return true\r\n    }\r\n\r\n    try {\r\n      useAudit.getState().recordVisit('offline-x01', 3, total, { preRemaining, postRemaining: remaining, finish: false, bust: false })\r\n    } catch {}\r\n    endTurn(remaining)\r\n    setPlayerVisitSum(0)\r\n    playerVisitSumRef.current = 0\r\n    setPlayerVisitDarts(0)\r\n    playerVisitDartsRef.current = 0\r\n    setPlayerVisitDartsAtDouble(0)\r\n    playerVisitDartsAtDoubleRef.current = 0\r\n    return true\r\n  }\r\n\r\n  // Optional: Add a full-visit total (0–180) input for quick entry like \"93\"\r\n  const [visitTotalInput, setVisitTotalInput] = useState<string>(\"\")\r\n  const handleVisitTotalChange = (raw: string) => {\r\n    if (!raw) {\r\n      setVisitTotalInput('')\r\n      return\r\n    }\r\n    const numericOnly = raw.replace(/[^0-9]/g, '')\r\n    if (!numericOnly) {\r\n      setVisitTotalInput('')\r\n      return\r\n    }\r\n    const parsed = Number(numericOnly)\r\n    if (!Number.isFinite(parsed)) return\r\n    const maxAllowed = playerScoreRef.current <= 170 ? 170 : 180\r\n    const safe = clamp(Math.round(parsed), 0, maxAllowed)\r\n    setVisitTotalInput(String(safe))\r\n  }\r\n  function addVisitTotal() {\r\n    if (!visitTotalInput) { alert('Enter a number 0–180 for visit total'); return }\r\n    const parsed = Number(visitTotalInput)\r\n    if (!Number.isFinite(parsed)) { alert('Enter a number 0–180 for visit total'); return }\r\n    const maxAllowed = playerScoreRef.current <= 170 ? 170 : 180\r\n    const bounded = clamp(Math.round(parsed), 0, maxAllowed)\r\n    if (parsed > maxAllowed) {\r\n      toast(`Visit totals cannot exceed ${maxAllowed}.`, { type: 'info', timeout: 2200 })\r\n    }\r\n    if (commitManualVisitTotal(bounded)) {\r\n      setVisitTotalInput(\"\")\r\n    }\r\n  }\r\n\r\n  const clearCurrentVisit = useCallback(() => {\r\n    if (pendingVisitRef.current) {\r\n      pendingVisitRef.current = null\r\n      clearPendingVisitTimer()\r\n      setAwaitingBoardClear(false)\r\n    }\r\n    const visitDarts = playerVisitDartsRef.current\r\n    const visitTotal = playerVisitSumRef.current\r\n    const visitStart = playerVisitStartRef.current\r\n    if (visitDarts === 0 && visitTotal === 0) return\r\n    setPlayerScore(visitStart)\r\n  playerScoreRef.current = visitStart\r\n    setPlayerVisitDarts(0)\r\n  playerVisitDartsRef.current = 0\r\n    setPlayerVisitSum(0)\r\n  playerVisitSumRef.current = 0\r\n    setPlayerVisitDartsAtDouble(0)\r\n  playerVisitDartsAtDoubleRef.current = 0\r\n    setPlayerLastDart(0)\r\n    setPlayerDartPoints(0)\r\n    setPlayerDartsThrown(d => Math.max(0, d - visitDarts))\r\n    setTotalPlayerDarts(d => Math.max(0, d - visitDarts))\r\n    setTotalPlayerPoints(p => Math.max(0, p - visitTotal))\r\n    lastBounceMissTsRef.current = 0\r\n  }, [clearPendingVisitTimer])\r\n\r\n  useEffect(() => {\r\n    const onClearRequest = (evt: Event) => {\r\n      const detail = (evt as CustomEvent)?.detail\r\n      if (!detail || detail?.source === 'offline-play') return\r\n      clearCurrentVisit()\r\n    }\r\n    window.addEventListener('ndn:clear-visit-request', onClearRequest as EventListener)\r\n    return () => window.removeEventListener('ndn:clear-visit-request', onClearRequest as EventListener)\r\n  }, [clearCurrentVisit])\r\n\r\n  // --- Double Practice helpers ---\r\n  function addDpValue(val: number) {\r\n    recordDart('Double Practice')\r\n    const dart = clamp(Math.round(val || 0), 0, 60)\r\n    setPlayerLastDart(dart)\r\n    setPlayerDartsThrown(d => d + 1)\r\n    setTotalPlayerDarts(d => d + 1)\r\n    if (isDoubleHit(dart, dpIndex)) {\r\n      const nextHits = dpHits + 1\r\n      setDpHits(nextHits)\r\n      setDpIndex(i => Math.min(20, i + 1))\r\n      // End when DBULL (index 20) is hit\r\n      if (nextHits >= 21) {\r\n        setPendingLegWinner('player')\r\n        setShowWinPopup(true)\r\n      }\r\n    }\r\n    setPlayerDartPoints(0)\r\n  }\r\n  function addDpNumeric() { addDpValue(Number(playerDartPoints)) }\r\n  function addDpManual() {\r\n    const v = parseManualDart(manualBox)\r\n    if (v == null) { alert('Enter like D16, 50, 25, T20'); return }\r\n    addDpValue(v)\r\n    setManualBox('')\r\n  }\r\n\r\n  // Bob's 27\r\n  function addB27Auto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    if (b27Finished) return\r\n    recordDart(\"Bob's 27\")\r\n    const target = b27Stage\r\n    const hit = (ring === 'DOUBLE' && sector === target) || (!ring && value === target * 2)\r\n    if (hit) setB27Hits(h => h + 1)\r\n    setB27Darts(d => {\r\n      const nd = d + 1\r\n      if (nd >= 3) {\r\n        const totalHits = b27Hits + (hit ? 1 : 0)\r\n        if (totalHits > 0) setB27Score(s => s + totalHits * target * 2)\r\n        else setB27Score(s => s - target * 2)\r\n        const next = target + 1\r\n        setB27Stage(next)\r\n        setB27Hits(0)\r\n        if (next > 20) setB27Finished(true)\r\n        return 0\r\n      }\r\n      return nd\r\n    })\r\n  }\r\n  function addB27Numeric() { addB27Auto(Math.max(0, playerDartPoints | 0)); setPlayerDartPoints(0) }\r\n  function resetB27() { setB27Stage(1); setB27Score(27); setB27Darts(0); setB27Hits(0); setB27Finished(false); resetDartCount(\"Bob's 27\") }\r\n\r\n  // Count-Up / High Score / Low Score\r\n  function addCountUpAuto(value: number) {\r\n    recordDart('Count-Up')\r\n    setCuScore(s => s + Math.max(0, value | 0))\r\n    setCuDarts(d => { const nd = d + 1; if (nd >= 3) { setCuRound(r => r + 1); return 0 } return nd })\r\n  }\r\n  function addHighScoreAuto(value: number) {\r\n    recordDart('High Score')\r\n    setHsScore(s => s + Math.max(0, value | 0))\r\n    setHsDarts(d => { const nd = d + 1; if (nd >= 3) { setHsRound(r => r + 1); return 0 } return nd })\r\n  }\r\n  function addLowScoreAuto(value: number) {\r\n    recordDart('Low Score')\r\n    setLsScore(s => s + Math.max(0, value | 0))\r\n    setLsDarts(d => { const nd = d + 1; if (nd >= 3) { setLsRound(r => r + 1); return 0 } return nd })\r\n  }\r\n\r\n  // Checkout routines (double out)\r\n  function applyCheckout(rem: number, setRem: (n:number)=>void, darts: number, setDarts: (f:(n:number)=>number)=>void, setAttempts: (f:(n:number)=>number)=>void, setSuccesses: (f:(n:number)=>number)=>void, value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL') {\r\n    const next = rem - value\r\n    if (next < 0) {\r\n      // bust: ignore progress during attempt\r\n    } else if (next === 0) {\r\n      if (ring === 'DOUBLE' || ring === 'INNER_BULL') {\r\n        setSuccesses(s => s + 1)\r\n        setAttempts(a => a + 1)\r\n        setDarts(() => 0)\r\n        setRem(rem) // caller will reset to initial value right after\r\n        return\r\n      }\r\n      setRem(next)\r\n    } else {\r\n      setRem(next)\r\n    }\r\n    setDarts(d => { const nd = d + 1; if (nd >= 3) { setAttempts(a => a + 1); return 0 } return nd })\r\n  }\r\n  function addCo170Auto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL') {\r\n    recordDart('Checkout 170')\r\n    applyCheckout(co170Rem, setCo170Rem, co170Darts, setCo170Darts, setCo170Attempts, setCo170Successes, value, ring)\r\n    if (co170Darts + 1 >= 3) setCo170Rem(170)\r\n  }\r\n  function addCo121Auto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL') {\r\n    recordDart('Checkout 121')\r\n    applyCheckout(co121Rem, setCo121Rem, co121Darts, setCo121Darts, setCo121Attempts, setCo121Successes, value, ring)\r\n    if (co121Darts + 1 >= 3) setCo121Rem(121)\r\n  }\r\n  function addCoManual(is170: boolean) {\r\n    const v = parseManualDart(manualBox)\r\n    if (v == null) { alert('Enter like T20, D16, 25, 50'); return }\r\n    const t = manualBox.trim().toUpperCase()\r\n    const isDouble = t.startsWith('D') || t === '50' || t === 'BULL' || t === 'DBULL' || t === 'IBULL' || t.includes('INNER')\r\n    if (is170) addCo170Auto(v, isDouble ? 'DOUBLE' : undefined); else addCo121Auto(v, isDouble ? 'DOUBLE' : undefined)\r\n    setManualBox('')\r\n  }\r\n  function resetCo170() { setCo170Rem(170); setCo170Darts(0); setCo170Attempts(0); setCo170Successes(0); resetDartCount('Checkout 170') }\r\n  function resetCo121() { setCo121Rem(121); setCo121Darts(0); setCo121Attempts(0); setCo121Successes(0); resetDartCount('Checkout 121') }\r\n\r\n  // Treble practice\r\n  function addTrebleAuto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    if (trebleFinished) return\r\n    recordDart('Treble Practice')\r\n    const isHit = (ring === 'TRIPLE' && sector === trebleTarget) || (!ring && value === trebleTarget * 3)\r\n    if (isHit) setTrebleHits(h => h + 1)\r\n    setTrebleDarts(d => {\r\n      const nd = d + 1\r\n      // Auto-rotate target every 3 darts among T20→T19→T18\r\n      if (nd % 3 === 0 && [20, 19, 18].includes(trebleTarget)) {\r\n        const cycle = [20, 19, 18]\r\n        const idx = cycle.indexOf(trebleTarget)\r\n        const next = cycle[(idx + 1) % cycle.length]\r\n        setTrebleTarget(next)\r\n      }\r\n      // End session at configured throws\r\n      if (trebleMaxDarts > 0 && nd >= trebleMaxDarts) setTrebleFinished(true)\r\n      return nd\r\n    })\r\n  }\r\n  function resetTreble() { setTrebleHits(0); setTrebleDarts(0); setTrebleFinished(false); resetDartCount('Treble Practice') }\r\n\r\n  // Baseball\r\n  function addBaseballAuto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE', sector?: number | null) {\r\n    recordDart('Baseball')\r\n    setBaseball(prev => { const cp = { ...prev }; applyBaseballDart(cp as any, value, ring as any, sector); return cp })\r\n  }\r\n  function resetBaseball() { setBaseball(createBaseball()); resetDartCount('Baseball') }\r\n\r\n  // Golf\r\n  function addGolfAuto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE', sector?: number | null) {\r\n    recordDart('Golf')\r\n    setGolf(prev => { const cp = { ...prev }; applyGolfDart(cp as any, value, ring as any, sector); return cp })\r\n  }\r\n  function resetGolf() { setGolf(createGolf()); resetDartCount('Golf') }\r\n\r\n  // Tic Tac Toe\r\n  function addTttAuto(cell: number, value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    recordDart('Tic Tac Toe')\r\n    setTTT(prev => { const cp = { ...prev, board: [...prev.board] as any }; tryClaimCell(cp as any, cell as any, value, ring as any, sector); return cp })\r\n  }\r\n  function resetTtt() { setTTT(createTicTacToe()); resetDartCount('Tic Tac Toe') }\r\n\r\n  // American Cricket\r\n  function addAmCricketAuto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    recordDart('American Cricket')\r\n    setAmCricket(prev => { const cp = { ...prev, marks: { ...prev.marks } }; applyAmCricketDart(cp as any, value, ring as any, sector, () => false); return cp })\r\n  }\r\n  function resetAmCricket() { setAmCricket(createAmCricketState()); resetDartCount('American Cricket') }\r\n\r\n  // --- Around the Clock helpers ---\r\n  function addAtcValue(val: number, ring?: 'MISS'|'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    recordDart('Around the Clock')\r\n    const target = ATC_ORDER[atcIndex]\r\n    let hit = false\r\n    if (typeof sector === 'number' && sector === target && (ring === 'SINGLE' || ring === 'DOUBLE' || ring === 'TRIPLE')) hit = true\r\n    if (target === 25 && (ring === 'BULL' || val === 25)) hit = true\r\n    if (target === 50 && (ring === 'INNER_BULL' || val === 50)) hit = true\r\n    if (!hit) {\r\n      // Fallback by value only\r\n      if (val === target || val === target * 2 || val === target * 3) hit = true\r\n    }\r\n    if (hit) {\r\n      const newHits = atcHits + 1\r\n      setAtcHits(newHits)\r\n      setAtcIndex(i => i + 1)\r\n    }\r\n  }\r\n  function addAtcNumeric() { addAtcValue(Math.max(0, playerDartPoints|0)); setPlayerDartPoints(0) }\r\n  function addAtcManual() {\r\n    const v = parseManualDart(manualBox)\r\n    if (v == null) { alert('Enter like T20, D5, 25, 50'); return }\r\n    addAtcValue(v)\r\n    setManualBox('')\r\n  }\r\n\r\n  // --- Cricket helpers (solo practice) ---\r\n  function addCricketAuto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    recordDart('Cricket')\r\n    setCricket(prev => {\r\n      const copy = { ...prev, marks: { ...prev.marks } }\r\n      applyCricketDart(copy as any, value, ring, sector, () => false)\r\n      return copy\r\n    })\r\n    setPracticeTurnDarts(d => {\r\n      const nd = d + 1; if (nd >= 3) return 0; return nd\r\n    })\r\n  }\r\n  function addCricketNumeric() { addCricketAuto(Math.max(0, playerDartPoints|0)); setPlayerDartPoints(0) }\r\n\r\n  // --- Shanghai helpers ---\r\n  function addShanghaiAuto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    recordDart('Shanghai')\r\n    setShanghai(prev => {\r\n      const copy = { ...prev, turnHits: { ...prev.turnHits } }\r\n      applyShanghaiDart(copy as any, value, ring, sector)\r\n      return copy\r\n    })\r\n    setPracticeTurnDarts(d => {\r\n      const nd = d + 1\r\n      if (nd >= 3) {\r\n        setShanghai(prev => { const cp = { ...prev, turnHits: { ...prev.turnHits } }; endShanghaiTurn(cp as any); return cp })\r\n        return 0\r\n      }\r\n      return nd\r\n    })\r\n  }\r\n  function addShanghaiNumeric() { addShanghaiAuto(Math.max(0, playerDartPoints|0)); setPlayerDartPoints(0) }\r\n\r\n  // --- Halve It helpers ---\r\n  function addHalveAuto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    recordDart('Halve It')\r\n    setHalve(prev => {\r\n      const copy = { ...prev, targets: [...prev.targets] }\r\n      applyHalveItDart(copy as any, value, ring, sector)\r\n      return copy\r\n    })\r\n    setPracticeTurnDarts(d => {\r\n      const nd = d + 1\r\n      if (nd >= 3) {\r\n        setHalve(prev => { const cp = { ...prev, targets: [...prev.targets] }; endHalveItTurn(cp as any); return cp })\r\n        return 0\r\n      }\r\n      return nd\r\n    })\r\n  }\r\n  function addHalveNumeric() { addHalveAuto(Math.max(0, playerDartPoints|0)); setPlayerDartPoints(0) }\r\n\r\n  // --- High-Low helpers ---\r\n  function addHighLowAuto(value: number, ring?: 'SINGLE'|'DOUBLE'|'TRIPLE'|'BULL'|'INNER_BULL', sector?: number | null) {\r\n    recordDart('High-Low')\r\n    setHighlow(prev => {\r\n      const copy = { ...prev }\r\n      applyHighLowDart(copy as any, value, ring, sector)\r\n      return copy\r\n    })\r\n    setPracticeTurnDarts(d => {\r\n      const nd = d + 1\r\n      if (nd >= 3) {\r\n        setHighlow(prev => { const cp = { ...prev }; endHighLowTurn(cp as any); return cp })\r\n        return 0\r\n      }\r\n      return nd\r\n    })\r\n  }\r\n  function addHighLowNumeric() { addHighLowAuto(Math.max(0, playerDartPoints|0)); setPlayerDartPoints(0) }\r\n\r\n  function parseManualBox(): number | null {\r\n    const t = manualBox.trim().toUpperCase()\r\n    if (!t) return null\r\n    if (t === '50' || t === 'BULL' || t === 'DBULL' || t === 'IBULL') return 50\r\n    if (t === '25' || t === 'OBULL') return 25\r\n    const m = t.match(/^(S|D|T)?\\s*(\\d{1,2})$/)\r\n    if (!m) return null\r\n    const mult = (m[1] || 'S') as 'S'|'D'|'T'\r\n    const num = parseInt(m[2],10)\r\n    if (num < 1 || num > 20) return null\r\n    const multVal = mult==='S'?1:mult==='D'?2:3\r\n    return num * multVal\r\n  }\r\n\r\n  function addManual() {\r\n    const val = parseManualBox()\r\n    if (val == null) { alert('Enter like T20, D16, 5, 25, 50'); return }\r\n    applyDartValue(val)\r\n    setManualBox('')\r\n  }\r\n\r\n  function addManualTextarea() {\r\n    const lines = manualTextarea.trim().split('\\n').map(l => l.trim()).filter(l => l)\r\n    if (lines.length === 0) return\r\n    for (const line of lines) {\r\n      const val = parseManualDart(line)\r\n      if (val == null) { alert(`Invalid score: ${line}`); return }\r\n      applyDartValue(val)\r\n    }\r\n    setManualTextarea('')\r\n  }\r\n\r\n  function replaceLast() {\r\n    if (playerVisitDarts === 0) return\r\n    // Rewind one dart: approximate by adding back last dart into score\r\n    setPlayerScore(s => s + playerLastDart)\r\n    setPlayerVisitDarts(d => Math.max(0, d - 1))\r\n  }\r\n\r\n  function replaceLastManual() {\r\n    const val = parseManualBox()\r\n    if (val == null) { alert('Enter like T20, D16, 5, 25, 50'); return }\r\n    if (playerVisitDarts === 0) { addManual(); return }\r\n    // Rewind last then apply\r\n    const rewind = playerLastDart\r\n    setPlayerScore(s => s + rewind)\r\n    setPlayerVisitDarts(d => Math.max(0, d - 1))\r\n    // Apply new value in next microtask to ensure state has updated\r\n    setTimeout(() => applyDartValue(val), 0)\r\n    setManualBox('')\r\n  }\r\n\r\n  function playerThrow(points: number) {\r\n    let newScore = playerScore - points;\r\n    if (newScore < 0) {\r\n      setPlayerScore(playerScore); // bust\r\n      return;\r\n    }\r\n    setPlayerScore(newScore);\r\n    if (newScore === 0) {\r\n      setPendingLegWinner('player')\r\n      setShowWinPopup(true)\r\n    }\r\n    setOnDouble(newScore <= 40 && newScore % 2 === 0)\r\n  }\r\n\r\n  function aiTurn() {\r\n    // This is now automated inside the modal turn loop\r\n  }\r\n\r\n  function handleBust() {\r\n    setPlayerScore(playerScore); // bust, score unchanged\r\n    setOnDouble(false);\r\n  }\r\n\r\n  function handleWinPopupSubmit() {\r\n    const winner = pendingLegWinner ?? 'player'\r\n    // Approximate per-leg doubles attempts: if winner is player and they finished from <=50, attempts were counted in playerVisitDartsAtDouble; otherwise leave undefined\r\n    const legDoublesAtt = winner==='player' ? (playerVisitDartsAtDouble || undefined) : (aiVisitDartsAtDouble || undefined)\r\n    const legDoublesHit = 1\r\n    const winnerDarts = winner==='player' ? playerDartsThrown : aiDartsThrown\r\n    setLegStats([...legStats, { winner, doubleDarts, checkoutDarts, winnerDarts, doublesAtt: legDoublesAtt, doublesHit: legDoublesHit }]);\r\n    setShowWinPopup(false);\r\n    // Increment legs for the winner\r\n    let p = playerLegs\r\n    let a = aiLegs\r\n    if (pendingLegWinner === 'player') p += 1\r\n    else if (pendingLegWinner === 'ai') a += 1\r\n    setPlayerLegs(p)\r\n    setAiLegs(a)\r\n    setPendingLegWinner(null)\r\n    // Check if match is over\r\n    if (p >= firstTo || a >= firstTo) {\r\n      // End of match: close modal back to menu state\r\n      // Record per-game-mode result (local-only demo)\r\n      try { bumpGameMode(selectedMode, winner === 'player') } catch {}\r\n      setShowMatchModal(false)\r\n      setInMatch(false)\r\n      // Reset leg-specific stats for next match but keep the summary list visible\r\n      setPlayerScore(x01Score)\r\n      setAiScore(x01Score)\r\n      setShowMatchSummary(true)\r\n      return\r\n    }\r\n    // Otherwise, start the next leg immediately\r\n    startNextLeg()\r\n  }\r\n\r\n  const isFreeSelected = freeGames.includes(selectedMode as any)\r\n  const lockedPremium = !isFreeSelected && !(user?.fullAccess || user?.admin)\r\n\r\n  // no external overlay: we render the match modal as absolute inset-0 inside this card\r\n\r\n  return (\r\n  <div className=\"card ndn-game-shell relative overflow-hidden\">\r\n  <h2 className=\"text-2xl font-bold text-brand-700 mb-4\">Offline Game Modes {offlineLayout==='classic' ? <span className=\"ml-2 text-xs px-2 py-0.5 rounded-full bg-white/10 border border-white/10 align-middle\">Classic layout</span> : <span className=\"ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-400/30 text-emerald-200 align-middle\">Modern layout</span>}</h2>\r\n      <div className=\"ndn-shell-body\">\r\n      <div className=\"mb-4 flex flex-col gap-3\">\r\n        <label className=\"font-semibold\">Select game mode:</label>\r\n        <select className=\"input w-full\" value={selectedMode} onChange={e => setSelectedMode(e.target.value)}>\r\n          {freeGames.map(mode => <option key={mode} value={mode}>{mode}</option>)}\r\n          {premiumGames.map(mode => (\r\n            <option key={mode} value={mode} disabled={!(user?.fullAccess || user?.admin)}>{mode} {(user?.fullAccess || user?.admin) ? '' : '(Premium)'}</option>\r\n          ))}\r\n        </select>\r\n\r\n        {/* Calibration Status - displayed below game mode selector */}\r\n        <GameCalibrationStatus \r\n          gameMode={selectedMode} \r\n          compact={true}\r\n        />\r\n\r\n        {selectedMode === 'Treble Practice' && (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end\">\r\n            <div className=\"sm:col-span-1\">\r\n              <label className=\"font-semibold\">Throws per game</label>\r\n              <input className=\"input w-full\" type=\"number\" min={3} step={3} value={trebleMaxDarts} onChange={e=>setTrebleMaxDarts(Math.max(3, Math.floor(Number(e.target.value)||30)))} />\r\n            </div>\r\n            <div className=\"sm:col-span-2 text-xs text-slate-300\">Target cycles T20→T19→T18 every 3 darts. Game ends after the selected number of throws.</div>\r\n          </div>\r\n        )}\r\n        {!user?.fullAccess && (\r\n          <div className=\"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2\">\r\n            <span>🔒</span>\r\n            <span>Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM.</span>\r\n          </div>\r\n        )}\r\n        {selectedMode === 'X01' && (\r\n          <>\r\n            <label className=\"font-semibold mt-2\">Enter starting score (1-1001):</label>\r\n            <input\r\n              className=\"input w-full\"\r\n              type=\"number\"\r\n              min={1}\r\n              max={1001}\r\n              value={x01Score}\r\n              onChange={e => setX01Score(Number(e.target.value))}\r\n            />\r\n            <label className=\"font-semibold mt-2\">Play against AI bot?</label>\r\n            <select className=\"input w-full\" value={ai} onChange={e => setAI(e.target.value)}>\r\n              <option value=\"None\">None</option>\r\n              {aiLevels.map(level => <option key={level} value={level}>{level}</option>)}\r\n            </select>\r\n            {ai !== 'None' && (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2\">\r\n                <div className=\"sm:col-span-2\">\r\n                  <label className=\"font-semibold\">AI throw delay (seconds)</label>\r\n                  <input\r\n                    className=\"input w-full\"\r\n                    type=\"number\"\r\n                    min={0.5}\r\n                    max={10}\r\n                    step={0.5}\r\n                    value={aiDelayMs / 1000}\r\n                    onChange={e => setAiDelayMs(Math.round(Number(e.target.value) * 1000))}\r\n                  />\r\n                </div>\r\n                <div className=\"text-sm text-slate-300\">Controls how long the AI waits before its visit.</div>\r\n              </div>\r\n            )}\r\n            <button className=\"btn mt-2\" onClick={() => setShowRules(true)}>X01 Rules & Regulations!</button>\r\n          </>\r\n        )}\r\n        {selectedMode === 'Double Practice' && (\r\n          <div className=\"mt-2 text-brand-600\">Hit doubles D1 → D20 → DBULL in as few darts as possible. AI and X01 settings don’t apply.</div>\r\n        )}\r\n      </div>\r\n  {!inMatch && <button className=\"btn\" disabled={lockedPremium} title={lockedPremium ? 'PREMIUM required for this mode' : ''} onClick={startMatch}>Start Match</button>}\r\n      {/* Match Modal with turn-by-turn flow */}\r\n      {showMatchModal && (\r\n  <div className={`absolute inset-0 z-[1000] ${maximized ? '' : 'flex items-center justify-center p-3 sm:p-4'}` }>\r\n          <ResizableModal\r\n            storageKey=\"ndn:modal:offline-match\"\r\n            className={`${maximized ? 'w-full h-full ndn-modal-tight' : ''} relative flex flex-col overflow-hidden`}\r\n            fullScreen={maximized}\r\n            defaultWidth={1100}\r\n            defaultHeight={720}\r\n            minWidth={720}\r\n            minHeight={480}\r\n            maxWidth={1600}\r\n            maxHeight={1200}\r\n            initialFitHeight\r\n          >\r\n            {/* Header bar with visible mode and actions; sheen is clipped to this area */}\r\n            <div\r\n              className=\"flex-1 min-h-0 overflow-x-hidden pr-1 pt-2 pb-2\"\r\n              style={{ overflowY: fitAll && !fitOverflowing ? ('hidden' as const) : ('auto' as const) }}\r\n              ref={(el) => { (scrollerRef as any).current = el }}\r\n            >\r\n              <div ref={(el)=>{ (headerBarRef as any).current = el }}>\r\n                <GameHeaderBar\r\n                  left={(\r\n                    <>\r\n                      <span className=\"hidden xs:inline px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-[10px] sm:text-xs\">Game Mode</span>\r\n                      <span className=\"font-medium whitespace-nowrap\">{selectedMode}{selectedMode==='X01' ? ` / ${x01Score}` : ''}</span>\r\n                      <span className=\"opacity-80 whitespace-nowrap\">First to {firstTo} · Legs {playerLegs}-{aiLegs}</span>\r\n                      <span className={`ml-2 px-2 py-0.5 rounded-full border text-[10px] sm:text-xs ${offlineLayout==='modern' ? 'bg-emerald-500/15 text-emerald-200 border-emerald-400/30' : 'bg-white/10 text-white/70 border-white/20'}`}>{offlineLayout==='modern' ? 'Modern layout' : 'Classic layout'}</span>\r\n                    </>\r\n                  )}\r\n                  right={(\r\n                    <>\r\n                      {/* Camera scale controls (match Online UI) */}\r\n                      <div className=\"hidden items-center gap-2 mr-2 text-xs\">\r\n                        <span className=\"opacity-80\">Cam</span>\r\n                        <button\r\n                          className=\"btn btn--ghost px-2 py-1\"\r\n                          onClick={() => setCameraScale(Math.max(0.5, Math.round((cameraScale - 0.05) * 100) / 100))}\r\n                          title=\"Decrease camera size\"\r\n                        >−</button>\r\n                        <span className=\"w-9 text-center\">{Math.round(cameraScale * 100)}%</span>\r\n                        <button\r\n                          className=\"btn btn--ghost px-2 py-1\"\r\n                          onClick={() => setCameraScale(Math.min(1.25, Math.round((cameraScale + 0.05) * 100) / 100))}\r\n                          title=\"Increase camera size\"\r\n                        >+</button>\r\n                      </div>\r\n                      <button\r\n                        className=\"btn btn--ghost px-3 py-1 text-sm\"\r\n                        title={fitAll ? 'Actual Size' : 'Fit All'}\r\n                        onClick={() => setFitAll(v => !v)}\r\n                      >{fitAll ? 'Actual Size' : 'Fit All'}</button>\r\n                      <button\r\n                        className=\"btn btn--ghost px-3 py-1 text-sm\"\r\n                        title={maximized ? 'Restore' : 'Maximize'}\r\n                        onClick={() => setMaximized(m => !m)}\r\n                      >{maximized ? 'Restore' : 'Maximize'}</button>\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={() => { startMatch() }}>Restart</button>\r\n                      <button className=\"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm\" onClick={() => { setShowMatchModal(false); setInMatch(false); }}>Quit</button>\r\n                    </>\r\n                  )}\r\n                />\r\n              </div>\r\n              <div\r\n                ref={(el) => { (contentRef as any).current = el }}\r\n                className=\"will-change-transform\"\r\n                style={fitAll ? { transform: `scale(${fitScale})`, transformOrigin: 'top left', width: '100%', fontSize: `${Math.max(0.8, Math.min(1, fitScale))}em` } : undefined}\r\n              >\r\n            <h3 className=\"text-xl font-bold mb-2 mt-1 leading-tight\">{selectedMode === 'X01' ? 'X01 Match' : selectedMode}</h3>\r\n            <div className=\"flex items-center gap-2 mb-2 text-xs flex-wrap\">\r\n              <span className=\"px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">Mode: {selectedMode}</span>\r\n              <span className=\"px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">Start: {x01Score}</span>\r\n              <div ref={formatRef} className=\"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">\r\n                <span>Format:</span>\r\n                {(() => {\r\n                  const disabled = (playerScore !== x01Score || aiScore !== x01Score || playerVisitDarts > 0)\r\n                  const pillCls = `px-2 py-0.5 rounded border text-xs ${disabled? 'opacity-50 cursor-not-allowed': 'cursor-pointer'} `\r\n                  return (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className={`${pillCls} ${formatType==='first' ? 'bg-indigo-500/20 text-indigo-100 border-indigo-400/30' : 'bg-white/10 text-white/80 border-white/20'}`}\r\n                          onClick={() => { if (!disabled) setFormatType('first') }}\r\n                          title=\"First to N\"\r\n                        >First to</button>\r\n                        <button\r\n                          type=\"button\"\r\n                          className={`${pillCls} ${formatType==='best' ? 'bg-indigo-500/20 text-indigo-100 border-indigo-400/30' : 'bg-white/10 text-white/80 border-white/20'}`}\r\n                          onClick={() => { if (!disabled) setFormatType('best') }}\r\n                          title=\"Best of N (wins = ceil(N/2)\"\r\n                        >Best of</button>\r\n                      </div>\r\n                      <input\r\n                        className={`input w-16 text-center ${disabled ? 'opacity-50' : ''}`}\r\n                        type=\"number\"\r\n                        min={1}\r\n                        step={1}\r\n                        value={formatCount}\r\n                        onChange={e => setFormatCount(Math.max(1, Math.floor(Number(e.target.value)||1)))}\r\n                        disabled={disabled}\r\n                        title={formatType==='first' ? 'First to N' : 'Best of N (wins = ceil(N/2))'}\r\n                      />\r\n                    </div>\r\n                  )\r\n                })()}\r\n              </div>\r\n              <span className=\"px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">Legs: {playerLegs}–{aiLegs}</span>\r\n              {/* Move match type and team names to the right of Legs for a single-row header */}\r\n              <div className=\"ml-auto flex items-center gap-1 text-[10px] flex-wrap\">\r\n                <span className=\"opacity-70\">Match</span>\r\n                <select className={`btn ${buttonSizeClass}`} value={matchType} onChange={e=>setMatchType((e.target.value as 'singles'|'doubles'))}>\r\n                  <option value=\"singles\">Singles</option>\r\n                  <option value=\"doubles\">Doubles</option>\r\n                </select>\r\n                <input className={`input ${buttonSizeClass} w-[7.5rem]`} value={teamAName} onChange={e=>setTeamAName(e.target.value)} placeholder=\"Team A\" />\r\n                <span className=\"opacity-50\">vs</span>\r\n                <input className={`input ${buttonSizeClass} w-[7.5rem]`} value={teamBName} onChange={e=>setTeamBName(e.target.value)} placeholder=\"Team B\" />\r\n              </div>\r\n            </div>\r\n            {selectedMode !== 'X01' ? (\r\n              <div className=\"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2\">\r\n                {selectedMode === 'Double Practice' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600 flex items-center justify-between\">\r\n                      <span className=\"opacity-80\">Current Target</span>\r\n                      <span className=\"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold\">{DOUBLE_PRACTICE_ORDER[dpIndex]?.label || '—'}</span>\r\n                    </div>\r\n                    {/* Large counter moved to the camera column to allow the preview to be raised and enlarged */}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Around the Clock' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600 flex items-center justify-between\">\r\n                      <span className=\"opacity-80\">Current Target</span>\r\n                      <span className=\"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold\">{ATC_ORDER[atcIndex] === 25 ? '25 (Outer Bull)' : ATC_ORDER[atcIndex] === 50 ? '50 (Inner Bull)' : (ATC_ORDER[atcIndex] || '—')}</span>\r\n                    </div>\r\n                    {/* Large counter moved to the camera column to allow the preview to be raised and enlarged */}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Cricket' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600 mb-1\">Cricket — Close 20–15 and Bull; overflow scores points</div>\r\n                    <div className=\"grid grid-cols-7 gap-1 text-center text-[11px] mb-2\">\r\n                      {CRICKET_NUMBERS.map(n => (\r\n                        <div key={n} className=\"p-1 rounded bg-slate-800/50 border border-slate-700/50\">\r\n                          <div className=\"opacity-70\">{n===25?'Bull':n}</div>\r\n                          <div className=\"font-semibold\">{Math.min(3, cricket.marks?.[n]||0)} / 3</div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"text-sm\">Points: <span className=\"font-semibold\">{cricket.points}</span></div>\r\n                    {cricketClosedAll(cricket) && (\r\n                      <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Completed! <button className=\"ml-2 underline\" onClick={() => {\r\n                        setCricket(createCricketState())\r\n                        setPracticeTurnDarts(0)\r\n                        resetDartCount('Cricket')\r\n                      }}>Reset</button></div>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Shanghai' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600 flex items-center justify-between\"><span>Round</span><span className=\"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold\">{shanghai.round}</span></div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">Score: {shanghai.score}</div>\r\n                    {shanghai.finished && (\r\n                      <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Completed! <button className=\"ml-2 underline\" onClick={() => {\r\n                        setShanghai(createShanghaiState())\r\n                        setPracticeTurnDarts(0)\r\n                        resetDartCount('Shanghai')\r\n                      }}>Reset</button></div>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Halve It' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600 flex items-center justify-between\"><span>Stage</span><span className=\"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold\">{halve.stage+1}/{halve.targets.length}</span></div>\r\n                    <div className=\"text-sm\">Target: <span className=\"font-semibold\">{(() => { const t = getCurrentHalveTarget(halve); if (!t) return '—'; if (t.kind==='ANY_NUMBER') return 'Any'; if (t.kind==='BULL') return 'Bull'; if (t.kind==='DOUBLE' || t.kind==='TRIPLE' || t.kind==='NUMBER') return `${t.kind} ${(t as any).num}`; return '—' })()}</span></div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">Score: {halve.score}</div>\r\n                    {halve.finished && (\r\n                      <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Completed! <button className=\"ml-2 underline\" onClick={() => {\r\n                        setHalve(createDefaultHalveIt())\r\n                        setPracticeTurnDarts(0)\r\n                        resetDartCount('Halve It')\r\n                      }}>Reset</button></div>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'High-Low' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Round {highlow.round} · Target {highlow.target}</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">Score: {highlow.score}</div>\r\n                    {highlow.finished && (\r\n                      <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Completed! <button className=\"ml-2 underline\" onClick={() => {\r\n                        setHighlow(createHighLow())\r\n                        setPracticeTurnDarts(0)\r\n                        resetDartCount('High-Low')\r\n                      }}>Reset</button></div>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {selectedMode === \"Bob's 27\" && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600 flex items-center justify-between\"><span>Target</span><span className=\"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold\">D{b27Stage}</span></div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">Score: {b27Score}</div>\r\n                    {b27Finished && (\r\n                      <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Completed! <button className=\"ml-2 underline\" onClick={resetB27}>Reset</button></div>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Count-Up' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Round {cuRound}/8</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">Score: {cuScore}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'High Score' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Round {hsRound}/10</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">Score: {hsScore}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Low Score' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Round {lsRound}/10</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">Score: {lsScore}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Checkout 170' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Remaining</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">{co170Rem}</div>\r\n                    <div className=\"text-xs text-slate-400 mt-1\">Attempts: {co170Attempts} · Successes: {co170Successes}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Checkout 121' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Remaining</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">{co121Rem}</div>\r\n                    <div className=\"text-xs text-slate-400 mt-1\">Attempts: {co121Attempts} · Successes: {co121Successes}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Treble Practice' && (\r\n                  <>\r\n                    <div className=\"flex items-center justify-between gap-4\">\r\n                      <div>\r\n                        <div className=\"text-xs text-slate-600\">Treble Target: T{trebleTarget}</div>\r\n                        <div className=\"text-3xl font-extrabold tracking-tight\">Hits: {trebleHits}</div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 flex-wrap\">\r\n                        <label className=\"text-sm\">Target</label>\r\n                        <div className=\"inline-flex items-center gap-1\">\r\n                          {[20,19,18].map(n => (\r\n                            <button key={`tpick-header-${n}`} className={`btn px-2 py-0.5 text-xs ${trebleTarget===n?'bg-emerald-600/30 border border-emerald-400/30':''}`} onClick={()=>setTrebleTarget(n)}>T{n}</button>\r\n                          ))}\r\n                        </div>\r\n                        <span className=\"opacity-60 text-xs\">or</span>\r\n                        <select className=\"input w-24\" value={trebleTarget} onChange={e=> setTrebleTarget(parseInt(e.target.value,10))}>\r\n                          {Array.from({length:20},(_,i)=>i+1).map(n=> <option key={n} value={n}>{n}</option>)}\r\n                        </select>\r\n                        <button className=\"btn px-3 py-1 text-sm\" onClick={resetTreble}>Reset</button>\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Baseball' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Inning</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">{baseball.inning}</div>\r\n                    <div className=\"text-sm\">Score: <span className=\"font-semibold\">{baseball.score}</span></div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Golf' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Hole</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">{golf.hole}</div>\r\n                    <div className=\"text-sm\">Strokes: <span className=\"font-semibold\">{golf.strokes}</span></div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Tic Tac Toe' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Turn</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">{ttt.turn}</div>\r\n                    {ttt.finished && <div className=\"mt-1 text-xs\">Winner: {ttt.winner || '—'}</div>}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Scam' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Target</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">{SCAM_TARGET_NAMES[scam.targetIndex]}</div>\r\n                    <div className=\"text-sm\">Progress: <span className=\"font-semibold\">{scam.targetIndex + 1}/{SCAM_TARGET_NAMES.length}</span></div>\r\n                    {scam.finished && <div className=\"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200\">🎉 Finished in {scam.darts} darts!</div>}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Fives' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Score</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">{fives.score}/{fives.target}</div>\r\n                    <div className=\"text-sm\">Darts: <span className=\"font-semibold\">{fives.darts}</span></div>\r\n                    {fives.finished && <div className=\"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200\">✓ Reached {fives.target}!</div>}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Sevens' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600\">Score</div>\r\n                    <div className=\"text-3xl font-extrabold tracking-tight\">{sevens.score}/{sevens.target}</div>\r\n                    <div className=\"text-sm\">Darts: <span className=\"font-semibold\">{sevens.darts}</span></div>\r\n                    {sevens.finished && <div className=\"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200\">✓ Reached {sevens.target}!</div>}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'American Cricket' && (\r\n                  <>\r\n                    <div className=\"text-xs text-slate-600 mb-1\">Close 20–12 and Bull; overflow scores points</div>\r\n                    <div className=\"grid grid-cols-10 gap-1 text-center text-[11px] mb-2\">\r\n                      {AM_CRICKET_NUMBERS.map(n => (\r\n                        <div key={n} className=\"p-1 rounded bg-slate-800/50 border border-slate-700/50\">\r\n                          <div className=\"opacity-70\">{n===25?'Bull':n}</div>\r\n                          <div className=\"font-semibold\">{Math.min(3, amCricket.marks?.[n]||0)} / 3</div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"text-sm\">Points: <span className=\"font-semibold\">{amCricket.points}</span></div>\r\n                    {hasClosedAllAm(amCricket) && (\r\n                      <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Completed! <button className=\"ml-2 underline\" onClick={resetAmCricket}>Reset</button></div>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Killer' && (\r\n                  <>\r\n                    {!killerSetupDone ? (\r\n                      <div className=\"text-xs text-slate-600\">Setup players and assign numbers</div>\r\n                    ) : (\r\n                      <>\r\n                        <div className=\"text-xs text-slate-600 flex items-center justify-between\">\r\n                          <span>Turn</span>\r\n                          <span className=\"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold\">{killerPlayers[killerTurnIdx]?.name || '—'}</span>\r\n                        </div>\r\n                        <div className=\"text-3xl font-extrabold tracking-tight\">{killerWinnerId ? `${killerPlayers.find(p=>p.id===killerWinnerId)?.name || 'Winner'} Wins` : (killerLastEvent || 'Ready')}</div>\r\n                      </>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            ) : offlineLayout === 'modern' ? (\r\n              <div className=\"space-y-3 mb-2\">\r\n                {!manualScoring ? (\r\n                  <>\r\n                    <div className=\"flex items-center flex-wrap gap-1.5 mt-1\">\r\n                      <div className=\"ml-auto flex items-center gap-1 text-[10px]\">\r\n                        <span className=\"opacity-70\">Cam</span>\r\n                        <button className={`btn ${buttonSizeClass}`} onClick={() => setCameraScale(Math.max(0.5, Math.round((cameraScale - 0.05) * 100) / 100))}>−</button>\r\n                        <span className={`btn ${buttonSizeClass} min-w-[2.5rem] text-center`}>{Math.round(cameraScale * 100)}%</span>\r\n                        <button className={`btn ${buttonSizeClass}`} onClick={() => setCameraScale(Math.min(1.25, Math.round((cameraScale + 0.05) * 100) / 100))}>+</button>\r\n                        <span className=\"opacity-50\">|</span>\r\n                        <button className={`btn ${buttonSizeClass}`} title=\"Toggle fit/fill\" onClick={() => setCameraFitMode(cameraFitMode === 'fill' ? 'fit' : 'fill')}>{cameraFitMode === 'fill' ? 'Fill' : 'Fit'}</button>\r\n                        <span className=\"opacity-50\">|</span>\r\n                        <button className={`btn ${buttonSizeClass}`} title=\"Toggle camera aspect\" onClick={() => setCameraAspect(cameraAspect === 'square' ? 'wide' : 'square')}>{cameraAspect === 'square' ? 'Square' : 'Wide'}</button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"relative\">\r\n                      <div className=\"flex flex-col gap-4 md:flex-row-reverse md:items-start md:gap-6\">\r\n                        <div className=\"w-full h-[260px] rounded-2xl overflow-hidden bg-black shadow-xl md:w-[48%] md:min-h-[420px]\">\r\n                            <CameraView \r\n                              scoringMode=\"x01\"\r\n                              showToolbar={cameraToolbarVisible}\r\n                              onAutoDart={(value, ring, info) => {\r\n                                applyDartValue(value)\r\n                              }}\r\n                            />\r\n                          </div>\r\n\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"space-y-3 md:space-y-0 md:grid md:grid-cols-[minmax(0,1fr)_300px] md:items-start md:gap-4\">\r\n                            <div className=\"space-y-4\">\r\n                              <div className=\"rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm\">\r\n                                <div className=\"text-xs uppercase tracking-wide text-white/50\">Current Shooter</div>\r\n                                <div className=\"mt-1 text-xl font-semibold text-white\">{activePlayerName}</div>\r\n                                <div className=\"mt-3 grid grid-cols-2 gap-3 text-sm text-white/80\">\r\n                                  <div>\r\n                                    <div className=\"text-xs uppercase tracking-wide text-white/40\">Remaining</div>\r\n                                    <div className=\"font-mono text-lg text-white\">{activeRemaining}</div>\r\n                                  </div>\r\n                                  <div>\r\n                                    <div className=\"text-xs uppercase tracking-wide text-white/40\">Last Dart</div>\r\n                                    <div className=\"font-mono text-lg text-white\">{activeLastScore || 0}</div>\r\n                                  </div>\r\n                                  <div>\r\n                                    <div className=\"text-xs uppercase tracking-wide text-white/40\">Match Legs</div>\r\n                                    <div className=\"font-semibold text-white\">{playerLegs}-{aiLegs}</div>\r\n                                  </div>\r\n                                  <div>\r\n                                    <div className=\"text-xs uppercase tracking-wide text-white/40\">Next Up</div>\r\n                                    <div className=\"font-medium text-white\">{inactivePlayerName}</div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"hidden md:block\">\r\n                              <GameScoreboard\r\n                                gameMode={selectedMode as any}\r\n                                players={singlePlayerScoreboard}\r\n                                matchScore={`${playerLegs}-${aiLegs}`}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"md:hidden\">\r\n                            <GameScoreboard\r\n                              gameMode={selectedMode as any}\r\n                              players={singlePlayerScoreboard}\r\n                              matchScore={`${playerLegs}-${aiLegs}`}\r\n                            />\r\n                          </div>\r\n\r\n                          {(selectedMode as any) === 'X01' && (\r\n                            <div className=\"mt-3 md:mt-4 rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm\">\r\n                              <div className=\"text-xs uppercase tracking-wide text-white/50\">Manual Scoreboard Override</div>\r\n                              <p className=\"mt-1 text-xs text-white/40\">Adjust the live totals if a dart was misread. Values are clamped between 0 and {x01Score}.</p>\r\n                              <div className=\"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm\">\r\n                                <div className=\"space-y-3\">\r\n                                  <div className=\"text-sm font-semibold text-white\">{humanName}</div>\r\n                                  <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs uppercase tracking-wide text-white/50\">Commit Visit</label>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                      <button className=\"btn px-3 py-1 text-sm\" onClick={addVisitTotal}>Commit Visit</button>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs uppercase tracking-wide text-white/50\">Legs Override</label>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                      <input\r\n                                        className=\"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40\"\r\n                                        type=\"number\"\r\n                                        min={0}\r\n                                        value={manualPlayerLegsInput}\r\n                                        onChange={e => setManualPlayerLegsInput(e.target.value)}\r\n                                        onKeyDown={e => { if (e.key === 'Enter') handleManualLegsOverride('player') }}\r\n                                        placeholder={`${playerLegs}`}\r\n                                      />\r\n                                      <button className=\"btn px-3 py-1 text-sm\" onClick={() => handleManualLegsOverride('player')}>Set</button>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                                <div className=\"space-y-3\">\r\n                                  <div className=\"text-sm font-semibold text-white\">{aiDisplayName}</div>\r\n                                  <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs uppercase tracking-wide text-white/50\">Three Dart Edit</label>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                      <input\r\n                                        className=\"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40\"\r\n                                        type=\"number\"\r\n                                        min={0}\r\n                                        max={x01Score}\r\n                                        value={manualOpponentScoreInput}\r\n                                        onChange={e => setManualOpponentScoreInput(e.target.value)}\r\n                                        onKeyDown={e => { if (e.key === 'Enter') handleManualScoreOverride('ai') }}\r\n                                        placeholder={`${aiScore}`}\r\n                                      />\r\n                                      <button className=\"btn px-3 py-1 text-sm\" onClick={() => handleManualScoreOverride('ai')}>Set</button>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs uppercase tracking-wide text-white/50\">Legs Override</label>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                      <input\r\n                                        className=\"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40\"\r\n                                        type=\"number\"\r\n                                        min={0}\r\n                                        value={manualOpponentLegsInput}\r\n                                        onChange={e => setManualOpponentLegsInput(e.target.value)}\r\n                                        onKeyDown={e => { if (e.key === 'Enter') handleManualLegsOverride('ai') }}\r\n                                        placeholder={`${aiLegs}`}\r\n                                      />\r\n                                      <button className=\"btn px-3 py-1 text-sm\" onClick={() => handleManualLegsOverride('ai')}>Set</button>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <div className=\"card\">\r\n                    <div className=\"text-sm font-semibold mb-1\">Manual scoring active</div>\r\n                    <div className=\"text-xs opacity-70\">Camera previews are disabled. Use the manual entry controls below to record your turn.</div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 md:[grid-template-columns:minmax(0,0.75fr)_minmax(0,3fr)_minmax(0,0.75fr)] gap-2 mb-2 items-stretch min-w-0\">\r\n                <div className=\"flex items-stretch justify-center md:px-3 min-w-0\">\r\n              <div className=\"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full\">\r\n                <div className=\"text-xs text-slate-600 flex items-center justify-between\">\r\n                  <span className=\"opacity-80\">You Remain</span>\r\n                  {isPlayerTurn ? (\r\n                    <span className=\"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold\">THROWING</span>\r\n                  ) : (\r\n                    <span className=\"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold\">WAITING TO THROW</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"text-3xl font-extrabold tracking-tight\">{playerScore}</div>\r\n                <div className=\"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden\">\r\n                  <div className=\"h-full bg-emerald-400/70\" style={{ width: `${Math.max(0, Math.min(100, (1 - (playerScore / x01Score)) * 100))}%` }} />\r\n                </div>\r\n                <div className=\"text-sm mt-1 opacity-90\">Last dart: <span className=\"font-semibold\">{playerLastDart}</span></div>\r\n                <div className=\"text-sm opacity-90\">Last score: <span className=\"font-semibold\">{playerVisitDarts > 0 ? playerVisitSum : (playerLastVisitScore ?? playerLastDart)}</span></div>\r\n                <div className=\"text-sm opacity-90\">3-Dart Avg: <span className=\"font-semibold\">{totalPlayerDarts>0 ? ((totalPlayerPoints/totalPlayerDarts)*3).toFixed(1) : '0.0'}</span></div>\r\n                <div className=\"text-xs opacity-70 flex items-center gap-2\">\r\n                  <span>Darts thrown: {playerDartsThrown}</span>\r\n                  <span className=\"inline-flex items-center gap-1\" aria-label=\"Visit darts\">\r\n                    {[0,1,2].map(i => (\r\n                      <span key={i} className={`w-2 h-2 rounded-full ${i < playerVisitDarts ? 'bg-emerald-400' : 'bg-white/20'}`}></span>\r\n                    ))}\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-xs opacity-80 mt-1\">Doubles: <span className=\"font-semibold\">Att {playerDoublesAtt} · Hit {playerDoublesHit}</span></div>\r\n                {playerScore <= 170 && playerScore > 0 && (\r\n                  (() => {\r\n                    const sugs = suggestCheckouts(playerScore, favoriteDouble)\r\n                    const first = sugs[0] || '—'\r\n                    return (\r\n                      <div className=\"mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-sm\">\r\n                        <span className=\"opacity-70\">Checkout</span>\r\n                        <span className=\"font-semibold\">{first}</span>\r\n                      </div>\r\n                    )\r\n                  })()\r\n                )}\r\n              </div>\r\n              {/* Center camera preview: right-aligned and square when selected */}\r\n              <div className=\"flex items-stretch justify-center md:justify-end md:px-3 min-w-0 flex-1 min-h-0 ndn-camera-tall\">\r\n                <ResizablePanel\r\n                  storageKey=\"ndn:camera:tile:offline:center:v4\"\r\n                  className=\"relative rounded-2xl overflow-hidden bg-black w-full camera-fullwidth-card\"\r\n                  defaultWidth={0}\r\n                  defaultHeight={0}\r\n                  minWidth={300}\r\n                  minHeight={300}\r\n                  maxWidth={2000}\r\n                  maxHeight={1200}\r\n                  autoFill\r\n                >\r\n                  <CameraTile\r\n                    label=\"Your Board\"\r\n                    autoStart={true}\r\n                    className=\"min-w-0 h-full\"\r\n                    aspect=\"classic\"\r\n                    fill\r\n                  />\r\n                </ResizablePanel>\r\n              </div>\r\n              {/* Match summary (offline) */}\r\n              <div className={`mt-2 ${boxSize === 'small' ? 'p-2' : boxSize === 'large' ? 'p-4' : 'p-3'} rounded-2xl bg-slate-900/40 border border-white/10 text-white ${textSize === 'small' ? 'text-xs' : textSize === 'large' ? 'text-base' : 'text-sm'}`}>\r\n                <div className=\"font-semibold mb-2\">Match Summary</div>\r\n                {(() => {\r\n                  // In offline X01, player is vs AI or practice\r\n                  const currentThrower = isPlayerTurn ? (user?.username || 'You') : (ai === 'None' ? '—' : `${ai} AI`)\r\n                  const currentRemaining = isPlayerTurn ? playerScore : (ai === 'None' ? 0 : aiScore)\r\n                  const lastScoreDisplay = isPlayerTurn\r\n                    ? (playerVisitDarts > 0 ? playerVisitSum : (playerLastVisitScore ?? playerLastDart))\r\n                    : (aiVisitDarts > 0 ? aiVisitSum : (aiLastVisitScore ?? aiLastDart))\r\n                  const dartsThrown = isPlayerTurn ? playerDartsThrown : aiDartsThrown\r\n                  const scored = (x01Score - (isPlayerTurn ? playerScore : (ai === 'None' ? x01Score : aiScore)))\r\n                  const avg3 = dartsThrown > 0 ? ((scored / dartsThrown) * 3) : 0\r\n                  const matchScore = `${playerLegs}-${aiLegs}`\r\n                  const bestLegText = legStats.length > 0 ? `${Math.min(...legStats.map(l=>l.doubleDarts + (l.checkoutDarts||0))) || 0} darts` : '—'\r\n                  return (\r\n                    <div className=\"grid grid-cols-2 gap-y-1\">\r\n                      <div className=\"opacity-80\">Current score</div>\r\n                      <div className=\"font-mono text-right\">{matchScore}</div>\r\n                      <div className=\"opacity-80\">Current thrower</div>\r\n                      <div className=\"text-right font-semibold text-lg\">{currentThrower}</div>\r\n                      <div className=\"opacity-80\">Score remaining</div>\r\n                      <div className=\"text-right font-mono font-bold text-xl\">{currentRemaining}</div>\r\n                      <div className=\"opacity-80\">3-dart avg</div>\r\n                      <div className=\"text-right font-mono\">{avg3.toFixed(1)}</div>\r\n                      <div className=\"opacity-80\">Last score</div>\r\n                      <div className=\"text-right font-mono\">{lastScoreDisplay}</div>\r\n                      <div className=\"opacity-80\">Best leg</div>\r\n                      <div className=\"text-right\">{bestLegText}</div>\r\n                    </div>\r\n                  )\r\n                })()}\r\n              </div>\r\n              <div className=\"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full\">\r\n                <div className=\"text-xs flex items-center justify-between opacity-80\">\r\n                  <span>{ai === 'None' ? 'Opponent' : `${ai} AI`} Remain</span>\r\n                  {!isPlayerTurn ? (\r\n                    <span className=\"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold\">THROWING</span>\r\n                  ) : (\r\n                    <span className=\"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold\">WAITING TO THROW</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"text-3xl font-extrabold tracking-tight\">{ai !== 'None' ? aiScore : 'N/A'}</div>\r\n                {ai !== 'None' && (\r\n                  <div className=\"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden\">\r\n                    <div className=\"h-full bg-fuchsia-400/70\" style={{ width: `${Math.max(0, Math.min(100, (1 - (aiScore / x01Score)) * 100))}%` }} />\r\n                  </div>\r\n                )}\r\n                <div className=\"text-sm mt-1 opacity-90\">Last dart: <span className=\"font-semibold\">{ai === 'None' ? 0 : aiLastDart}</span></div>\r\n                <div className=\"text-sm opacity-90\">Last score: <span className=\"font-semibold\">{ai === 'None' ? '—' : (aiVisitDarts > 0 ? aiVisitSum : (aiLastVisitScore ?? aiLastDart))}</span></div>\r\n                <div className=\"text-sm opacity-90\">3-Dart Avg: <span className=\"font-semibold\">{ai !== 'None' ? (totalAiDarts>0 ? ((totalAiPoints/totalAiDarts)*3).toFixed(1) : '0.0') : '—'}</span></div>\r\n                {ai !== 'None' && (\r\n                  <div className=\"text-xs opacity-70\">Darts thrown: {aiDartsThrown}</div>\r\n                )}\r\n                {ai !== 'None' && (\r\n                  <div className=\"text-xs opacity-80 mt-1\">Doubles: <span className=\"font-semibold\">Att {aiDoublesAtt} · Hit {aiDoublesHit}</span></div>\r\n                )}\r\n              </div>\r\n                </div>\r\n            </div>\r\n            )}\r\n            {/* Turn area */}\r\n            {selectedMode !== 'X01' ? (\r\n              <div className=\"space-y-2\">\r\n                {selectedMode === 'Double Practice' && (\r\n                  <>\r\n                    <div className=\"font-semibold\">Target: <span className=\"px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">{DOUBLE_PRACTICE_ORDER[dpIndex]?.label || '—'}</span></div>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} onAutoDart={(value, ring) => {\r\n                        if (ring === 'DOUBLE' || ring === 'INNER_BULL') {\r\n                          const hit = isDoubleHit(value, dpIndex)\r\n                          if (hit) { const nh = dpHits + 1; const ni = dpIndex + 1; setDpHits(nh); setDpIndex(ni); if (nh >= DOUBLE_PRACTICE_ORDER.length) setTimeout(()=>{ setDpHits(0); setDpIndex(0) }, 250) }\r\n                        }\r\n                      }} immediateAutoCommit />\r\n                    </div>}\r\n                    <div className=\"flex flex-col gap-2\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <input className=\"input w-24\" type=\"number\" min={0} max={60} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e => { if (e.key==='Enter') addDpNumeric() }} />\r\n                        <button className=\"btn px-3 py-1 text-sm\" onClick={addDpNumeric}>Add Dart</button>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <input className=\"input w-44\" placeholder=\"Manual (D16, 50, 25, T20)\" value={manualBox} onChange={e=>setManualBox(e.target.value)} onKeyDown={e => { if (e.key==='Enter') addDpManual() }} />\r\n                        <button className=\"btn px-3 py-1 text-sm\" onClick={addDpManual}>Add</button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-300\">Progress: {dpHits} of 21</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Around the Clock' && (\r\n                  <>\r\n                    <div className=\"font-semibold\">Target: <span className=\"px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">{ATC_ORDER[atcIndex] === 25 ? '25 (Outer Bull)' : ATC_ORDER[atcIndex] === 50 ? '50 (Inner Bull)' : (ATC_ORDER[atcIndex] || '—')}</span></div>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring === 'MISS' ? undefined : ring; addAtcValue(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') addAtcNumeric() }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={addAtcNumeric}>Add Dart</button>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-44\" placeholder=\"Manual (T20, D5, 25, 50)\" value={manualBox} onChange={e=>setManualBox(e.target.value)} onKeyDown={e=>{ if(e.key==='Enter') addAtcManual() }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={addAtcManual}>Add</button>\r\n                    </div>\r\n                    {atcHits >= ATC_ORDER.length && (\r\n                      <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Completed! <button className=\"ml-2 underline\" onClick={() => {\r\n                        setAtcHits(0)\r\n                        setAtcIndex(0)\r\n                        resetDartCount('Around the Clock')\r\n                      }}>Reset</button></div>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Cricket' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring === 'MISS' ? undefined : ring; addCricketAuto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') addCricketNumeric() }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={addCricketNumeric}>Add Dart</button>\r\n                      <button\r\n                        className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\"\r\n                        onClick={() => {\r\n                          setCricket(createCricketState())\r\n                          setPracticeTurnDarts(0)\r\n                          resetDartCount('Cricket')\r\n                        }}\r\n                      >Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Shanghai' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring === 'MISS' ? undefined : ring; addShanghaiAuto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') addShanghaiNumeric() }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={addShanghaiNumeric}>Add Dart</button>\r\n                      <button\r\n                        className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\"\r\n                        onClick={() => {\r\n                          setShanghai(createShanghaiState())\r\n                          setPracticeTurnDarts(0)\r\n                          resetDartCount('Shanghai')\r\n                        }}\r\n                      >Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Halve It' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring === 'MISS' ? undefined : ring; addHalveAuto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') addHalveNumeric() }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={addHalveNumeric}>Add Dart</button>\r\n                      <button\r\n                        className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\"\r\n                        onClick={() => {\r\n                          setHalve(createDefaultHalveIt())\r\n                          setPracticeTurnDarts(0)\r\n                          resetDartCount('Halve It')\r\n                        }}\r\n                      >Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'High-Low' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring === 'MISS' ? undefined : ring; addHighLowAuto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') addHighLowNumeric() }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={addHighLowNumeric}>Add Dart</button>\r\n                      <button\r\n                        className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\"\r\n                        onClick={() => {\r\n                          setHighlow(createHighLow())\r\n                          setPracticeTurnDarts(0)\r\n                          resetDartCount('High-Low')\r\n                        }}\r\n                      >Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === \"Bob's 27\" && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring === 'MISS' ? undefined : ring; addB27Auto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') addB27Numeric() }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={addB27Numeric}>Add Dart</button>\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={resetB27}>Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Count-Up' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value) => addCountUpAuto(value)} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') { addCountUpAuto(playerDartPoints); setPlayerDartPoints(0) } }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>{ addCountUpAuto(playerDartPoints); setPlayerDartPoints(0) }}>Add Dart</button>\r\n                      <button\r\n                        className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\"\r\n                        onClick={() => {\r\n                          setCuRound(1)\r\n                          setCuScore(0)\r\n                          setCuDarts(0)\r\n                          resetDartCount('Count-Up')\r\n                        }}\r\n                      >Reset</button>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-400\">Round {cuRound}/{cuMaxRounds}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'High Score' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value) => addHighScoreAuto(value)} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') { addHighScoreAuto(playerDartPoints); setPlayerDartPoints(0) } }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>{ addHighScoreAuto(playerDartPoints); setPlayerDartPoints(0) }}>Add Dart</button>\r\n                      <button\r\n                        className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\"\r\n                        onClick={() => {\r\n                          setHsRound(1)\r\n                          setHsScore(0)\r\n                          setHsDarts(0)\r\n                          resetDartCount('High Score')\r\n                        }}\r\n                      >Reset</button>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-400\">Round {hsRound}/{hsMaxRounds}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Low Score' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value) => addLowScoreAuto(value)} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"number\" min={0} value={playerDartPoints} onChange={e => setPlayerDartPoints(Number(e.target.value||0))} onKeyDown={e=>{ if(e.key==='Enter') { addLowScoreAuto(playerDartPoints); setPlayerDartPoints(0) } }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>{ addLowScoreAuto(playerDartPoints); setPlayerDartPoints(0) }}>Add Dart</button>\r\n                      <button\r\n                        className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\"\r\n                        onClick={() => {\r\n                          setLsRound(1)\r\n                          setLsScore(0)\r\n                          setLsDarts(0)\r\n                          resetDartCount('Low Score')\r\n                        }}\r\n                      >Reset</button>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-400\">Round {lsRound}/{lsMaxRounds}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Checkout 170' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring) => addCo170Auto(value, ring === 'MISS' ? undefined : ring)} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"text\" placeholder=\"Manual (D16, T20)\" value={manualBox} onChange={e=>setManualBox(e.target.value)} onKeyDown={e=>{ if(e.key==='Enter') addCoManual(true) }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>addCoManual(true)}>Add Dart</button>\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={resetCo170}>Reset</button>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-400\">Remaining: {co170Rem} · Attempts: {co170Attempts} · Successes: {co170Successes}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Checkout 121' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring) => addCo121Auto(value, ring === 'MISS' ? undefined : ring)} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"text\" placeholder=\"Manual (D16, T20)\" value={manualBox} onChange={e=>setManualBox(e.target.value)} onKeyDown={e=>{ if(e.key==='Enter') addCoManual(false) }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>addCoManual(false)}>Add Dart</button>\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={resetCo121}>Reset</button>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-400\">Remaining: {co121Rem} · Attempts: {co121Attempts} · Successes: {co121Successes}</div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Treble Practice' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring === 'MISS' ? undefined : ring; addTrebleAuto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input className=\"input w-24\" type=\"text\" placeholder=\"Manual (T20)\" value={manualBox} onChange={e=>setManualBox(e.target.value)} onKeyDown={e=>{ if(e.key==='Enter') { const v = parseManualDart(manualBox); if (v!=null) addTrebleAuto(v, undefined, undefined); setManualBox('') } }} />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>{ const v = parseManualDart(manualBox); if (v!=null) addTrebleAuto(v, undefined, undefined); setManualBox('') }}>Add Dart</button>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-400\">Hits: {trebleHits} · Misses: {Math.max(0, trebleDarts - trebleHits)} · Darts: {trebleDarts}{trebleMaxDarts>0?`/${trebleMaxDarts}`:''}</div>\r\n                    {trebleFinished && (\r\n                      <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Completed! <button className=\"ml-2 underline\" onClick={resetTreble}>Reset</button></div>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Baseball' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring==='MISS'?undefined:ring; addBaseballAuto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={resetBaseball}>Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Golf' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring==='MISS'?undefined:ring; addGolfAuto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={resetGolf}>Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Tic Tac Toe' && (\r\n                  <>\r\n                    <div className=\"grid grid-cols-3 gap-1 mb-2\">\r\n                      {Array.from({length:9},(_,i)=>i).map(cell => (\r\n                        <button key={cell} className={`h-16 rounded-xl border ${ttt.board[cell]?'bg-emerald-500/20 border-emerald-400/30':'bg-slate-800/50 border-slate-700/50'}`} onClick={()=>{\r\n                          if (ttt.finished || ttt.board[cell]) return\r\n                          // One-tap claim attempt using autoscore last dart; fallback: prompt numeric\r\n                          // For simplicity here, we use a no-op value and rely on next autoscore dart; as a usable fallback, open a numeric prompt\r\n                          const promptVal = Number(prompt('Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)')||0)\r\n                          const ring = promptVal%3===0?'TRIPLE': promptVal%2===0?'DOUBLE':'SINGLE'\r\n                          const tcell = cell as unknown as 0|1|2|3|4|5|6|7|8\r\n                          const tgt = TTT_TARGETS[tcell]\r\n                          const num = tgt.type==='BULL'?null:(tgt.num||null)\r\n                          addTttAuto(tcell, promptVal, ring as any, num as any)\r\n                        }}>{ttt.board[cell] || ''}</button>\r\n                      ))}\r\n                    </div>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => {\r\n                        // Attempt to claim the currently tapped-looking cell not tracked; as a simple flow, map by round-robin preference or let user click a cell button above.\r\n                        // No-op here; primary interaction is via buttons with prompt for now.\r\n                      }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={resetTtt}>Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'American Cricket' && (\r\n                  <>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => { const r = ring==='MISS'?undefined:ring; addAmCricketAuto(value, r as any, info?.sector ?? null) }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={resetAmCricket}>Reset</button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Scam' && (\r\n                  <>\r\n                    <div className=\"font-semibold\">Target: <span className=\"px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">{SCAM_TARGET_NAMES[scamPlayer.targetIndex]}</span></div>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => {\r\n                        const r = ring === 'MISS' ? undefined : ring\r\n                        recordDart('Scam')\r\n                        setScamPlayer(addScamAuto(scamPlayer, value, r as any))\r\n                      }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input\r\n                        className=\"input w-24\"\r\n                        type=\"number\"\r\n                        min={1}\r\n                        max={25}\r\n                        value={playerDartPoints}\r\n                        onChange={e => setPlayerDartPoints(Number(e.target.value||0))}\r\n                        onKeyDown={e=>{\r\n                          if(e.key==='Enter') {\r\n                            recordDart('Scam')\r\n                            setScamPlayer(addScamNumeric(scamPlayer, playerDartPoints))\r\n                            setPlayerDartPoints(0)\r\n                          }\r\n                        }}\r\n                      />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>{\r\n                        recordDart('Scam')\r\n                        setScamPlayer(addScamNumeric(scamPlayer, playerDartPoints))\r\n                        setPlayerDartPoints(0)\r\n                      }}>Add Dart</button>\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={()=>{\r\n                        setScamPlayer(resetScam())\r\n                        resetDartCount('Scam')\r\n                      }}>Reset</button>\r\n                    </div>\r\n                    {scamPlayer.finished && <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">🎉 Finished in {scamPlayer.darts} darts!</div>}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Fives' && (\r\n                  <>\r\n                    <div className=\"font-semibold\">Score: <span className=\"px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">{fivesPlayer.score}/{fivesPlayer.target}</span></div>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => {\r\n                        recordDart('Fives')\r\n                        setFivesPlayer(addFivesAuto(fivesPlayer, value, ring as any))\r\n                      }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input\r\n                        className=\"input w-24\"\r\n                        type=\"number\"\r\n                        min={5}\r\n                        max={50}\r\n                        value={playerDartPoints}\r\n                        onChange={e => setPlayerDartPoints(Number(e.target.value||0))}\r\n                        onKeyDown={e=>{\r\n                          if(e.key==='Enter') {\r\n                            recordDart('Fives')\r\n                            setFivesPlayer(addFivesNumeric(fivesPlayer, playerDartPoints))\r\n                            setPlayerDartPoints(0)\r\n                          }\r\n                        }}\r\n                      />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>{\r\n                        recordDart('Fives')\r\n                        setFivesPlayer(addFivesNumeric(fivesPlayer, playerDartPoints))\r\n                        setPlayerDartPoints(0)\r\n                      }}>Add Dart</button>\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={()=>{\r\n                        setFivesPlayer(resetFives(fivesPlayer.target))\r\n                        resetDartCount('Fives')\r\n                      }}>Reset</button>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-400\">Valid scores: 5, 10, 15, 20, 25, 50 · Darts: {fivesPlayer.darts}</div>\r\n                    {fivesPlayer.finished && <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">✓ Reached {fivesPlayer.target} in {fivesPlayer.darts} darts!</div>}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Sevens' && (\r\n                  <>\r\n                    <div className=\"font-semibold\">Score: <span className=\"px-2 py-0.5 rounded-full bg-white/10 border border-white/10\">{sevensPlayer.score}/{sevensPlayer.target}</span></div>\r\n                    {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                      <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => {\r\n                        recordDart('Sevens')\r\n                        setSevensPlayer(addSevensAuto(sevensPlayer, value, ring as any))\r\n                      }} />\r\n                    </div>}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input\r\n                        className=\"input w-24\"\r\n                        type=\"number\"\r\n                        min={7}\r\n                        max={21}\r\n                        value={playerDartPoints}\r\n                        onChange={e => setPlayerDartPoints(Number(e.target.value||0))}\r\n                        onKeyDown={e=>{\r\n                          if(e.key==='Enter') {\r\n                            recordDart('Sevens')\r\n                            setSevensPlayer(addSevensNumeric(sevensPlayer, playerDartPoints))\r\n                            setPlayerDartPoints(0)\r\n                          }\r\n                        }}\r\n                      />\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={()=>{\r\n                        recordDart('Sevens')\r\n                        setSevensPlayer(addSevensNumeric(sevensPlayer, playerDartPoints))\r\n                        setPlayerDartPoints(0)\r\n                      }}>Add Dart</button>\r\n                      <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={()=>{\r\n                        setSevensPlayer(resetSevens(sevensPlayer.target))\r\n                        resetDartCount('Sevens')\r\n                      }}>Reset</button>\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-400\">Valid scores: 7, 14, 21 · Darts: {sevensPlayer.darts}</div>\r\n                    {sevensPlayer.finished && <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">✓ Reached {sevensPlayer.target} in {sevensPlayer.darts} darts!</div>}\r\n                  </>\r\n                )}\r\n                {selectedMode === 'Killer' && (\r\n                  <>\r\n                    {!killerSetupDone ? (\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"font-semibold\">Players</div>\r\n                        <div className=\"space-y-1\">\r\n                          {killerPlayers.map((p, idx) => (\r\n                            <div key={p.id} className=\"flex items-center gap-2\">\r\n                              <input className=\"input\" value={p.name} onChange={e=>{\r\n                                const name = e.target.value\r\n                                setKillerPlayers(list => list.map((it,i)=> i===idx?{...it,name}:it))\r\n                              }} />\r\n                              <button className=\"btn px-2 py-1\" onClick={()=> setKillerPlayers(list => list.filter((_,i)=>i!==idx))} disabled={killerPlayers.length<=2}>Remove</button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <button className=\"btn px-2 py-1\" onClick={()=> setKillerPlayers(list => {\r\n                            const id = `p${list.length+1}`; return [...list, { id, name: `Player ${list.length+1}` }]\r\n                          })}>Add Player</button>\r\n                          <button className=\"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1\" onClick={()=>{\r\n                            if (killerPlayers.length < 2) { alert('Need at least 2 players'); return }\r\n                            const ids = killerPlayers.map(p=>p.id)\r\n                            const assigned = assignKillerNumbers(ids)\r\n                            const initStates: Record<string,KillerState> = {}\r\n                            ids.forEach(id => { initStates[id] = createKillerState(assigned[id]) })\r\n                            setKillerAssigned(assigned)\r\n                            setKillerStates(initStates)\r\n                            setKillerTurnIdx(0)\r\n                            setKillerDarts(0)\r\n                            setKillerWinnerId(null)\r\n                            setKillerLastEvent('Assigned numbers')\r\n                            setKillerSetupDone(true)\r\n                          }}>Assign Numbers & Start</button>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"space-y-3\">\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n                          {killerPlayers.map(p => {\r\n                            const st = killerStates[p.id]\r\n                            const num = killerAssigned[p.id]\r\n                            return (\r\n                              <div key={p.id} className={`p-2 rounded-xl border ${st?.eliminated? 'opacity-50 border-red-500/40 bg-red-500/10' : 'border-slate-700/50 bg-slate-800/50'}`}>\r\n                                <div className=\"flex items-center justify-between text-xs\">\r\n                                  <div className=\"font-semibold\">{p.name}</div>\r\n                                  <div className={`text-[10px] px-1.5 py-0.5 rounded ${st?.isKiller?'bg-purple-500/20 text-purple-200 border border-purple-400/30':'bg-slate-600/30 text-slate-300'}`}>{st?.isKiller? 'Killer' : 'Not Killer'}</div>\r\n                                </div>\r\n                                <div className=\"mt-1 text-sm\">Number: <span className=\"font-semibold\">{num}</span></div>\r\n                                <div className=\"text-sm\">Lives: <span className=\"font-semibold\">{st?.lives ?? 0}</span></div>\r\n                              </div>\r\n                            )\r\n                          })}\r\n                        </div>\r\n                        {cameraEnabled && <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                          <CameraView scoringMode=\"custom\" showToolbar={cameraToolbarVisible} immediateAutoCommit onAutoDart={(value, ring, info) => {\r\n                            if (killerWinnerId) return\r\n                            const r = ring === 'MISS' ? undefined : ring\r\n                            const sector = info?.sector ?? null\r\n                            const cur = killerPlayers[killerTurnIdx]\r\n                            if (!cur) return\r\n                            setKillerStates(prev => {\r\n                              const copy: Record<string,KillerState> = {}\r\n                              Object.keys(prev).forEach(k => copy[k] = { ...prev[k] })\r\n                              const res = applyKillerDart(cur.id, copy, r as any, sector)\r\n                              if (res.becameKiller) setKillerLastEvent(`${cur.name} became a Killer`)\r\n                              else if (res.victimId) {\r\n                                const v = killerPlayers.find(p=>p.id===res.victimId)\r\n                                setKillerLastEvent(`${cur.name} hit ${v?.name}'s ${killerAssigned[res.victimId]} (${res.livesRemoved} life${(res.livesRemoved||0)>1?'s':''})`)\r\n                              } else setKillerLastEvent('No effect')\r\n                              // Check winner\r\n                              const win = killerWinner(copy)\r\n                              if (win) setKillerWinnerId(win)\r\n                              return copy\r\n                            })\r\n                            setKillerDarts(d => {\r\n                              const nd = d + 1\r\n                              if (nd >= 3) {\r\n                                // advance to next alive\r\n                                let next = killerTurnIdx\r\n                                for (let i=1;i<=killerPlayers.length;i++) {\r\n                                  const idx = (killerTurnIdx + i) % killerPlayers.length\r\n                                  const pid = killerPlayers[idx].id\r\n                                  const st = killerStates[pid]\r\n                                  if (st && !st.eliminated && st.lives > 0) { next = idx; break }\r\n                                }\r\n                                setKillerTurnIdx(next)\r\n                                return 0\r\n                              }\r\n                              return nd\r\n                            })\r\n                          }} />\r\n                        </div>}\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <input className=\"input w-40\" placeholder=\"Manual (D16, T5)\" value={manualBox} onChange={e=>setManualBox(e.target.value)} onKeyDown={e=>{ if(e.key==='Enter') {\r\n                            if (killerWinnerId) return\r\n                            const t = manualBox.trim().toUpperCase()\r\n                            const m = t.match(/^(S|D|T)?\\s*(\\d{1,2})$/)\r\n                            if (!m) { setManualBox(''); return }\r\n                            const mult = (m[1]||'S') as 'S'|'D'|'T'\r\n                            const num = parseInt(m[2],10)\r\n                            const ring = mult==='D'?'DOUBLE': mult==='T'?'TRIPLE':'SINGLE'\r\n                            const cur = killerPlayers[killerTurnIdx]\r\n                            setKillerStates(prev => {\r\n                              const copy: Record<string,KillerState> = {}\r\n                              Object.keys(prev).forEach(k => copy[k] = { ...prev[k] })\r\n                              const res = applyKillerDart(cur.id, copy, ring as any, num)\r\n                              if (res.becameKiller) setKillerLastEvent(`${cur.name} became a Killer`)\r\n                              else if (res.victimId) {\r\n                                const v = killerPlayers.find(p=>p.id===res.victimId)\r\n                                setKillerLastEvent(`${cur.name} hit ${v?.name}'s ${killerAssigned[res.victimId]} (${res.livesRemoved} life${(res.livesRemoved||0)>1?'s':''})`)\r\n                              } else setKillerLastEvent('No effect')\r\n                              const win = killerWinner(copy); if (win) setKillerWinnerId(win)\r\n                              return copy\r\n                            })\r\n                            setManualBox('')\r\n                            setKillerDarts(d => {\r\n                              const nd = d + 1\r\n                              if (nd >= 3) { let next = killerTurnIdx; for (let i=1;i<=killerPlayers.length;i++){ const idx=(killerTurnIdx+i)%killerPlayers.length; const pid=killerPlayers[idx].id; const st=killerStates[pid]; if (st && !st.eliminated && st.lives>0) { next=idx; break } } setKillerTurnIdx(next); return 0 } return nd\r\n                            })\r\n                          } }} />\r\n                          <button className=\"btn px-3 py-1 text-sm\" onClick={()=>{\r\n                            // Skip to next alive player\r\n                            let next = killerTurnIdx\r\n                            for (let i=1;i<=killerPlayers.length;i++) {\r\n                              const idx = (killerTurnIdx + i) % killerPlayers.length\r\n                              const pid = killerPlayers[idx].id\r\n                              const st = killerStates[pid]\r\n                              if (st && !st.eliminated && st.lives > 0) { next = idx; break }\r\n                            }\r\n                            setKillerTurnIdx(next); setKillerDarts(0)\r\n                          }}>Next Player</button>\r\n                          <button className=\"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm\" onClick={()=>{\r\n                            // Reset Killer\r\n                            setKillerStates({}); setKillerAssigned({}); setKillerSetupDone(false); setKillerTurnIdx(0); setKillerDarts(0); setKillerWinnerId(null); setKillerLastEvent('')\r\n                          }}>Reset</button>\r\n                        </div>\r\n                        {killerWinnerId && (\r\n                          <div className=\"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block\">Winner: {killerPlayers.find(p=>p.id===killerWinnerId)?.name} <button className=\"ml-2 underline\" onClick={()=>{\r\n                            setKillerStates({}); setKillerAssigned({}); setKillerSetupDone(false); setKillerTurnIdx(0); setKillerDarts(0); setKillerWinnerId(null); setKillerLastEvent('')\r\n                          }}>Play Again</button></div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-2\">\r\n                {/* Scorecard + Camera split (Option A): Scoreboard LEFT, Camera RIGHT */}\r\n                <div className=\"flex gap-3 min-h-0 flex-1 text-[14px]\">\r\n                      {/* Left column: Scoreboard + Manual Scoring (50% width) */}\r\n                      <div className=\"basis-1/2 shrink-0 min-w-0 flex flex-col gap-2 overflow-y-auto pr-2 text-sm\">\r\n                        <div className=\"text-sm font-semibold opacity-80\">Scoreboard</div>\r\n                        {/* Scoreboard */}\r\n                        <div className=\"flex-shrink-0\">\r\n                          <GameScoreboard\r\n                            gameMode={selectedMode as any}\r\n                            players={statsX01}\r\n                            matchScore={`${playerLegs}-${aiLegs}`}\r\n                          />\r\n                        </div>\r\n\r\n                        {/* Manual Scoring Section */}\r\n                        {isPlayerTurn && (\r\n                          <div className=\"p-4 rounded-2xl bg-slate-900/60 border border-white/10 text-slate-100 shadow-lg backdrop-blur-sm flex-shrink-0\">\r\n                            <div className=\"flex flex-wrap items-center justify-between gap-3\">\r\n                              <h4 className=\"text-sm font-semibold tracking-wide uppercase text-indigo-200\">Manual Scoring</h4>\r\n                              <span className=\"text-xs text-white/60\">Override a visit or enter dart-by-dart scores.</span>\r\n                            </div>\r\n                            <div className=\"mt-3 space-y-3\">\r\n                              <div className=\"flex flex-wrap items-center gap-2\">\r\n                                <label className=\"text-xs uppercase tracking-wide text-white/60\">Single Dart</label>\r\n                                <input\r\n                                  className=\"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40\"\r\n                                  type=\"number\"\r\n                                  min={0}\r\n                                  max={60}\r\n                                  value={playerDartPoints}\r\n                                  onChange={e => setPlayerDartPoints(Number(e.target.value||0))}\r\n                                  onKeyDown={e => { if (e.key === 'Enter') (e.shiftKey ? replaceLast() : addDartNumeric()) }}\r\n                                  placeholder=\"60\"\r\n                                />\r\n                                <button className=\"btn px-3 py-1 text-sm\" onClick={addDartNumeric}>Add Dart</button>\r\n                              </div>\r\n\r\n                              <div className=\"flex flex-wrap items-center gap-2\">\r\n                                <label className=\"text-xs uppercase tracking-wide text-white/60\">Three Dart Edit</label>\r\n                                <input\r\n                                  className=\"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40\"\r\n                                  type=\"number\"\r\n                                  min={0}\r\n                                  max={playerScore <= 170 ? 170 : 180}\r\n                                  value={visitTotalInput}\r\n                                  onChange={e=>handleVisitTotalChange(e.target.value)}\r\n                                  onKeyDown={e => { if (e.key==='Enter') addVisitTotal() }}\r\n                                  placeholder=\"100\"\r\n                                />\r\n                                <button className=\"btn px-3 py-1 text-sm\" onClick={addVisitTotal}>Commit Visit</button>\r\n                                <button className=\"btn btn--ghost px-3 py-1 text-sm\" onClick={replaceLast}>Undo Visit</button>\r\n                              </div>\r\n\r\n                              <div className=\"flex flex-wrap items-center gap-2\">\r\n                                <label className=\"text-xs uppercase tracking-wide text-white/60\">Manual</label>\r\n                                <input\r\n                                  className=\"input w-28 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40\"\r\n                                  value={manualBox}\r\n                                  onChange={e=>setManualBox(e.target.value)}\r\n                                  onKeyDown={e => { if (e.key==='Enter') (e.shiftKey? replaceLastManual() : addManual()) }}\r\n                                  placeholder=\"T20\"\r\n                                />\r\n                                <button className=\"btn px-3 py-1 text-sm\" onClick={addManual}>Apply</button>\r\n                                <button className=\"btn btn--ghost px-3 py-1 text-sm\" onClick={replaceLastManual} disabled={playerVisitDarts===0}>Replace Last</button>\r\n                              </div>\r\n\r\n                              <div>\r\n                                <label className=\"text-xs uppercase tracking-wide text-white/60\">Multi-entry (one per line)</label>\r\n                                <textarea\r\n                                  className=\"mt-2 w-full rounded-xl bg-slate-950/70 border border-white/10 text-sm text-slate-100 placeholder-white/40 p-3 focus:outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-500/30\"\r\n                                  rows={3}\r\n                                  value={manualTextarea}\r\n                                  onChange={e=>setManualTextarea(e.target.value)}\r\n                                  placeholder={'T20\\nD16\\n25'}\r\n                                />\r\n                                <div className=\"mt-2 flex flex-wrap gap-2\">\r\n                                  <button className=\"btn px-3 py-1 text-sm\" onClick={addManualTextarea}>Apply All</button>\r\n                                  <button className=\"btn btn--ghost px-3 py-1 text-sm\" onClick={() => setManualTextarea('')}>Clear</button>\r\n                                </div>\r\n                              </div>\r\n\r\n                              <div className=\"pt-2 border-t border-white/10 mt-3\">\r\n                                <button\r\n                                  className=\"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm\"\r\n                                  onClick={clearCurrentVisit}\r\n                                  disabled={playerVisitDarts === 0 && playerVisitSum === 0}\r\n                                >Clear Current Visit</button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Right column: Main Camera Feed (50% width) */}\r\n                      {cameraEnabled && (\r\n                        <div className=\"basis-1/2 shrink-0 min-w-0 rounded-2xl overflow-hidden bg-black\">\r\n                          <CameraView\r\n                            scoringMode=\"custom\"\r\n                            showToolbar={cameraToolbarVisible}\r\n                            immediateAutoCommit\r\n                            onAutoDart={(value, ring) => {\r\n                              const ringLabel = ring ?? 'MISS'\r\n                              const safeValue = Number.isFinite(value) ? Math.max(0, value) : 0\r\n                              const now = Date.now()\r\n                              if (safeValue <= 0) {\r\n                                if (ringLabel !== 'MISS') return\r\n                                if (now - (lastBounceMissTsRef.current || 0) < 1200) {\r\n                                  return\r\n                                }\r\n                                lastBounceMissTsRef.current = now\r\n                              } else {\r\n                                lastBounceMissTsRef.current = 0\r\n                              }\r\n                              applyDartValue(safeValue)\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                </div>\r\n                {/* Remove the separate camera view below scoreboard */}\r\n                {(selectedMode as any) === 'X01' && !cameraEnabled && (\r\n                  <>\r\n                    <GameScoreboard\r\n                      gameMode={selectedMode as any}\r\n                      players={statsX01}\r\n                      matchScore={`${playerLegs}-${aiLegs}`}\r\n                    />\r\n                  </>\r\n                )}\r\n                {(selectedMode as any) === 'Cricket' && (\r\n                  <>\r\n                    <GameScoreboard\r\n                      gameMode=\"Cricket\"\r\n                      players={statsCricket}\r\n                    />\r\n                  </>\r\n                )}\r\n                {/* Camera view for Cricket auto-scoring */}\r\n                {(selectedMode as any) === 'Cricket' && cameraEnabled && (\r\n                  <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                    <CameraView\r\n                      scoringMode=\"custom\"\r\n                      showToolbar={cameraToolbarVisible}\r\n                      immediateAutoCommit\r\n                      onAutoDart={(value, ring, info) => {\r\n                        if (value > 0) {\r\n                          const r = ring === 'MISS' ? undefined : ring\r\n                          addCricketAuto(value, r as any, info?.sector ?? null)\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n                {(selectedMode as any) === 'Shanghai' && (\r\n                  <>\r\n                    <GameScoreboard\r\n                      gameMode=\"Shanghai\"\r\n                      players={statsShanghai}\r\n                    />\r\n                  </>\r\n                )}\r\n                {/* Camera view for Shanghai auto-scoring */}\r\n                {(selectedMode as any) === 'Shanghai' && cameraEnabled && (\r\n                  <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                    <CameraView\r\n                      scoringMode=\"custom\"\r\n                      showToolbar={cameraToolbarVisible}\r\n                      immediateAutoCommit\r\n                      onAutoDart={(value, ring, info) => {\r\n                        if (value > 0) {\r\n                          const r = ring === 'MISS' ? undefined : ring\r\n                          addShanghaiAuto(value, r as any, info?.sector ?? null)\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n                {(selectedMode as any) === 'Killer' && (\r\n                  <>\r\n                    <GameScoreboard\r\n                      gameMode=\"Killer\"\r\n                      players={statsKiller}\r\n                    />\r\n                  </>\r\n                )}\r\n                {(selectedMode as any) === 'Scam' && (\r\n                  <>\r\n                    <GameScoreboard\r\n                      gameMode=\"Scam\"\r\n                      players={statsScam}\r\n                    />\r\n                  </>\r\n                )}\r\n                {/* Camera view for Scam auto-scoring */}\r\n                {(selectedMode as any) === 'Scam' && cameraEnabled && (\r\n                  <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                    <CameraView\r\n                      scoringMode=\"custom\"\r\n                      showToolbar={cameraToolbarVisible}\r\n                      immediateAutoCommit\r\n                      onAutoDart={(value, ring, info) => {\r\n                        if (value > 0) {\r\n                          setScamPlayer(addScamAuto(scamPlayer, value, ring as any))\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n                {(selectedMode as any) === 'Fives' && (\r\n                  <>\r\n                    <GameScoreboard\r\n                      gameMode=\"Fives\"\r\n                      players={statsFives}\r\n                    />\r\n                  </>\r\n                )}\r\n                {/* Camera view for Fives auto-scoring */}\r\n                {(selectedMode as any) === 'Fives' && cameraEnabled && (\r\n                  <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                    <CameraView\r\n                      scoringMode=\"custom\"\r\n                      showToolbar={cameraToolbarVisible}\r\n                      immediateAutoCommit\r\n                      onAutoDart={(value, ring, info) => {\r\n                        if (value > 0) {\r\n                          setFivesPlayer(addFivesAuto(fivesPlayer, value, ring as any))\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n                {(selectedMode as any) === 'Sevens' && (\r\n                  <>\r\n                    <GameScoreboard\r\n                      gameMode=\"Sevens\"\r\n                      players={statsSevens}\r\n                    />\r\n                  </>\r\n                )}\r\n                {/* Camera view for Sevens auto-scoring */}\r\n                {(selectedMode as any) === 'Sevens' && cameraEnabled && (\r\n                  <div className=\"rounded-2xl overflow-hidden bg-black\">\r\n                    <CameraView\r\n                      scoringMode=\"custom\"\r\n                      showToolbar={cameraToolbarVisible}\r\n                      immediateAutoCommit\r\n                      onAutoDart={(value, ring, info) => {\r\n                        if (value > 0) {\r\n                          setSevensPlayer(addSevensAuto(sevensPlayer, value, ring as any))\r\n                        }\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n                <div className=\"font-semibold\">Your Turn</div>\r\n                <div className=\"flex flex-col gap-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <input\r\n                      className=\"input w-24\"\r\n                      type=\"number\"\r\n                      min={0}\r\n                      max={60}\r\n                      value={playerDartPoints}\r\n                      onChange={e => setPlayerDartPoints(Number(e.target.value||0))}\r\n                      onKeyDown={e => { if (e.key==='Enter') (e.shiftKey? replaceLast() : addDartNumeric()) }}\r\n                    />\r\n                    <button className=\"btn px-3 py-1 text-sm\" onClick={addDartNumeric} title=\"Add a single dart (0–60)\">Add Dart</button>\r\n                  </div>\r\n                  {/* Visit total entry */}\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <input\r\n                      className=\"input w-28\"\r\n                      type=\"number\"\r\n                      min={0}\r\n                      max={playerScore <= 170 ? 170 : 180}\r\n                      placeholder=\"Visit total (0–180)\"\r\n                      value={visitTotalInput}\r\n                      onChange={e=>handleVisitTotalChange(e.target.value)}\r\n                      onKeyDown={e => { if (e.key==='Enter') addVisitTotal() }}\r\n                    />\r\n                    <button className=\"btn px-3 py-1 text-sm\" onClick={addVisitTotal} title=\"Commit a full 3-dart total like 93\">Commit Visit</button>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <input\r\n                      className=\"input w-44\"\r\n                      placeholder=\"Manual (T20, D16, 5, 25, 50)\"\r\n                      value={manualBox}\r\n                      onChange={e=>setManualBox(e.target.value)}\r\n                      onKeyDown={e => { if (e.key==='Enter') (e.shiftKey? replaceLastManual() : addManual()) }}\r\n                    />\r\n                    <button className=\"btn btn--ghost px-3 py-1 text-sm\" onClick={replaceLastManual} disabled={playerVisitDarts===0}>Replace Last</button>\r\n                    <button className=\"btn px-3 py-1 text-sm\" onClick={addManual}>Add</button>\r\n                  </div>\r\n                  <div>\r\n                    <textarea\r\n                      className=\"input w-full h-24 resize-none\"\r\n                      placeholder=\"Type scores manually (one per line, e.g. T20&#10;D16&#10;5&#10;25&#10;50) - No camera needed!\"\r\n                      value={manualTextarea}\r\n                      onChange={e=>setManualTextarea(e.target.value)}\r\n                    />\r\n                    <div className=\"flex gap-2 mt-1\">\r\n                      <button className=\"btn px-3 py-1 text-sm\" onClick={addManualTextarea}>Add All Scores</button>\r\n                      <button className=\"btn btn--ghost px-3 py-1 text-sm\" onClick={() => setManualTextarea('')}>Clear</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-xs text-slate-300\">Tip: Enter to Add · Shift+Enter to Replace Last</div>\r\n              </div>\r\n            )}\r\n            <div className=\"h-1\" />\r\n              </div>\r\n            </div>\r\n          </ResizableModal>\r\n        </div>\r\n      )}\r\n      {showRules && <X01RulesPopup onClose={() => setShowRules(false)} />}\r\n      {/* Frosted overlay when selecting premium mode without access */}\r\n      {lockedPremium && (\r\n        <div className=\"absolute inset-0 z-40 flex items-center justify-center\">\r\n          <div className=\"absolute inset-0 backdrop-blur-sm bg-slate-900/40\" />\r\n          <div className=\"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center\">\r\n            <div className=\"text-3xl mb-2\">🔒</div>\r\n            <div className=\"font-semibold\">Premium mode locked</div>\r\n            <div className=\"text-sm text-slate-200/80\">Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more.</div>\r\n            <button\r\n              onClick={async () => {\r\n                try {\r\n                  const res = await fetch(`${API_URL}/api/stripe/create-checkout-session`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ email: user?.email })\r\n                  });\r\n                  const data = await res.json();\r\n                  if (data.ok && data.url) {\r\n                    window.location.href = data.url;\r\n                    if (data.development) {\r\n                      toast(\"Opened Stripe test checkout (development mode)\", { type: 'info', timeout: 3000 });\r\n                    }\r\n                  } else if (data.error === 'STRIPE_NOT_CONFIGURED') {\r\n                    toast(\"Premium purchases are not available in this development environment. Please visit the production site to upgrade.\", { type: 'error', timeout: 4000 });\r\n                  } else {\r\n                    toast(\"Failed to create checkout session. Please try again.\", { type: 'error', timeout: 4000 });\r\n                  }\r\n                } catch (err) {\r\n                  toast(\"Error creating checkout. Please try again.\", { type: 'error', timeout: 4000 });\r\n                }\r\n              }}\r\n              className=\"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold\"\r\n            >\r\n              Upgrade to PREMIUM · {formatPriceInCurrency(getUserCurrency(), 5)}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {showCameraManager && typeof document !== 'undefined' ? createPortal(\r\n        <div className=\"fixed inset-0 bg-black/75 z-[200] flex items-center justify-center p-4\" onClick={() => setShowCameraManager(false)}>\r\n          <ResizableModal\r\n            storageKey=\"ndn:modal:offline-camera-manager\"\r\n            className=\"relative\"\r\n            defaultWidth={640}\r\n            defaultHeight={520}\r\n            minWidth={480}\r\n            minHeight={420}\r\n            maxWidth={1200}\r\n            maxHeight={900}\r\n            initialFitHeight\r\n            onClose={() => setShowCameraManager(false)}\r\n          >\r\n            <div className=\"space-y-3\" onClick={e => e.stopPropagation()}>\r\n              <div className=\"flex items-center justify-between gap-3\">\r\n                <div>\r\n                  <div className=\"text-xs uppercase tracking-wide text-white/50\">Camera Devices</div>\r\n                  <div className=\"text-xl font-semibold text-white mt-1\">Manage Offline Camera Feeds</div>\r\n                </div>\r\n                <button className=\"btn bg-slate-800 hover:bg-slate-700 text-white\" onClick={() => setShowCameraManager(false)}>Close</button>\r\n              </div>\r\n              <CameraTile\r\n                fill\r\n                user={user}\r\n                playerScore={playerScore}\r\n                aiScore={aiScore}\r\n                x01Score={x01Score}\r\n                inMatch={inMatch}\r\n                showWinPopup={showWinPopup}\r\n                pendingLegWinner={pendingLegWinner}\r\n                playerDartsThrown={playerDartsThrown}\r\n                aiDartsThrown={aiDartsThrown}\r\n                totalPlayerDarts={totalPlayerDarts}\r\n                totalAiDarts={totalAiDarts}\r\n                totalPlayerPoints={totalPlayerPoints}\r\n                totalAiPoints={totalAiPoints}\r\n                player180s={player180s}\r\n                player140s={player140s}\r\n                player100s={player100s}\r\n                ai180s={ai180s}\r\n                ai140s={ai140s}\r\n                ai100s={ai100s}\r\n                playerHighestCheckout={playerHighestCheckout}\r\n                aiHighestCheckout={aiHighestCheckout}\r\n                onClose={() => setShowCameraManager(false)}\r\n                onOpen={() => setShowCameraManager(true)}\r\n                layout={offlineLayout}\r\n              />\r\n            </div>\r\n          </ResizableModal>\r\n        </div>,\r\n        document.body\r\n      ) : null}\r\n      {legOverrideConfirm && typeof document !== 'undefined' ? createPortal((() => {\r\n        const { target, value, stage } = legOverrideConfirm\r\n        const targetName = target === 'player' ? humanName : aiDisplayName\r\n        const currentLegs = target === 'player' ? playerLegs : aiLegs\r\n        return (\r\n          <div className=\"fixed inset-0 bg-black/75 z-[240] flex items-center justify-center p-4\" onClick={handleLegOverrideNo}>\r\n            <ResizableModal\r\n              storageKey=\"ndn:modal:offline-leg-override\"\r\n              className=\"relative\"\r\n              defaultWidth={360}\r\n              defaultHeight={240}\r\n              minWidth={280}\r\n              minHeight={200}\r\n              maxWidth={420}\r\n              maxHeight={360}\r\n              initialFitHeight\r\n              onClose={handleLegOverrideNo}\r\n            >\r\n              <div className=\"space-y-3 max-w-[18rem] mx-auto\" onClick={e => e.stopPropagation()}>\r\n                <div>\r\n                  <div className=\"text-xs uppercase tracking-wide text-white/50\">Step {stage} of 2</div>\r\n                  <div className=\"text-xl font-semibold text-white mt-1\">Override legs?</div>\r\n                </div>\r\n                <div className=\"text-sm text-slate-200 leading-relaxed\">\r\n                  {stage === 1 ? (\r\n                    <>Set {targetName}&apos;s legs to <span className=\"font-semibold text-white\">{value}</span>? Confirm to continue.</>\r\n                  ) : (\r\n                    <>Final confirmation: set {targetName}&apos;s legs to <span className=\"font-semibold text-white\">{value}</span>. Select <span className=\"font-semibold text-emerald-200\">Yes</span> to apply immediately.</>\r\n                  )}\r\n                </div>\r\n                <div className=\"rounded-xl bg-black/40 border border-white/10 p-3 text-sm\">\r\n                  <div className=\"text-xs uppercase tracking-wide text-white/50 mb-1\">Current legs</div>\r\n                  <div className=\"text-base font-semibold text-white\">{currentLegs}</div>\r\n                </div>\r\n                <div className=\"flex items-center justify-end gap-2 pt-2\">\r\n                  <button className=\"btn bg-rose-600 hover:bg-rose-700 text-white\" onClick={handleLegOverrideNo}>No</button>\r\n                  <button className=\"btn bg-emerald-600 hover:bg-emerald-700 text-white\" onClick={handleLegOverrideYes}>Yes</button>\r\n                </div>\r\n              </div>\r\n            </ResizableModal>\r\n          </div>\r\n        )\r\n      })(), document.body) : null}\r\n        {showWinPopup && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n          <ResizableModal storageKey=\"ndn:modal:offline-win\" className=\"w-full relative\" defaultWidth={420} defaultHeight={360} minWidth={360} minHeight={300} maxWidth={800} maxHeight={700} initialFitHeight>\r\n            <h3 className=\"text-lg font-bold mb-2\">Leg Won!</h3>\r\n            <label className=\"block mb-1\">Darts to hit double:</label>\r\n            <div className=\"flex gap-2 mb-2\">\r\n              {[1,2,3].map(n => (\r\n                <button key={n} className={`btn ${doubleDarts===n?'bg-brand-600':''}`} onClick={()=>setDoubleDarts(n)}>{n}</button>\r\n              ))}\r\n            </div>\r\n            <label className=\"block mb-1\">Darts for checkout:</label>\r\n            <div className=\"flex gap-2 mb-2\">\r\n              {[1,2,3].map(n => (\r\n                <button key={n} className={`btn ${checkoutDarts===n?'bg-brand-600':''}`} onClick={()=>setCheckoutDarts(n)}>{n}</button>\r\n              ))}\r\n            </div>\r\n            <div className=\"grid grid-cols-1 gap-2 mt-2\">\r\n              <button className=\"btn w-full\" onClick={handleWinPopupSubmit}>Submit</button>\r\n              <button className=\"btn bg-emerald-600 hover:bg-emerald-700 w-full\" onClick={() => { setShowWinPopup(false); startMatch(); }}>Rematch</button>\r\n              <button className=\"btn bg-slate-700 hover:bg-slate-800 w-full\" onClick={() => { setShowWinPopup(false); setShowMatchModal(false); setInMatch(false); }}>Back to Menu</button>\r\n            </div>\r\n          </ResizableModal>\r\n        </div>\r\n      )}\r\n      {showMatchSummary && (\r\n        <div className=\"fixed inset-0 bg-black/60 flex items-center justify-center z-[60]\">\r\n          <ResizableModal storageKey=\"ndn:modal:offline-summary\" className=\"w-full relative\" defaultWidth={820} defaultHeight={520} minWidth={600} minHeight={400} maxWidth={1400} maxHeight={1000} initialFitHeight>\r\n            <h3 className=\"text-xl font-extrabold mb-2\">Match Summary</h3>\r\n            <div className=\"text-xs opacity-80 mb-3\">{selectedMode} · {x01Score} start · First to {firstTo}</div>\r\n            {(() => {\r\n              const player3da = totalPlayerDarts>0 ? ((totalPlayerPoints/totalPlayerDarts)*3) : 0\r\n              const player9da = player3da * 3\r\n              const playerBest = (() => {\r\n                const darts = legStats.filter(l=>l.winner==='player' && typeof l.winnerDarts==='number').map(l=>l.winnerDarts)\r\n                if (!darts.length) return '—'\r\n                return `${Math.min(...darts)} darts`\r\n              })()\r\n              const playerWorst = (() => {\r\n                const darts = legStats.filter(l=>l.winner==='player' && typeof l.winnerDarts==='number').map(l=>l.winnerDarts)\r\n                if (!darts.length) return '—'\r\n                return `${Math.max(...darts)} darts`\r\n              })()\r\n              const playerPct = playerDoublesAtt>0 ? Math.round((playerDoublesHit/playerDoublesAtt)*100) : 0\r\n\r\n              const ai3da = totalAiDarts>0 ? ((totalAiPoints/totalAiDarts)*3) : 0\r\n              const ai9da = ai3da * 3\r\n              const aiBest = (() => {\r\n                const darts = legStats.filter(l=>l.winner==='ai' && typeof l.winnerDarts==='number').map(l=>l.winnerDarts)\r\n                if (!darts.length) return '—'\r\n                return `${Math.min(...darts)} darts`\r\n              })()\r\n              const aiWorst = (() => {\r\n                const darts = legStats.filter(l=>l.winner==='ai' && typeof l.winnerDarts==='number').map(l=>l.winnerDarts)\r\n                if (!darts.length) return '—'\r\n                return `${Math.max(...darts)} darts`\r\n              })()\r\n              const aiPct = aiDoublesAtt>0 ? Math.round((aiDoublesHit/aiDoublesAtt)*100) : 0\r\n\r\n              return (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n                  <div className=\"p-3 rounded-2xl glass border border-white/10\">\r\n                    <div className=\"text-sm font-semibold mb-1\">{user?.username || 'You'}</div>\r\n                    <div className=\"text-3xl font-extrabold\">{playerLegs}</div>\r\n                    <div className=\"text-xs opacity-80\">Legs Won</div>\r\n                    <div className=\"mt-3 grid grid-cols-2 gap-2 text-sm\">\r\n                      <div><span className=\"opacity-70\">Final 3DA</span><div className=\"font-semibold\">{player3da.toFixed(1)}</div></div>\r\n                      <div><span className=\"opacity-70\">Final 9DA</span><div className=\"font-semibold\">{player9da.toFixed(1)}</div></div>\r\n                      <div><span className=\"opacity-70\">Darts At Double</span><div className=\"font-semibold\">{playerDoublesAtt}</div></div>\r\n                      <div><span className=\"opacity-70\">Double %</span><div className=\"font-semibold\">{playerPct}%</div></div>\r\n                      <div><span className=\"opacity-70\">Best Dart Leg</span><div className=\"font-semibold\">{playerBest}</div></div>\r\n                      <div><span className=\"opacity-70\">Worst Dart Leg</span><div className=\"font-semibold\">{playerWorst}</div></div>\r\n                      <div><span className=\"opacity-70\">180's Hit</span><div className=\"font-semibold\">{player180s}</div></div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"hidden md:flex items-center justify-center\">\r\n                    <div className=\"text-4xl font-black\">{playerLegs} – {aiLegs}</div>\r\n                  </div>\r\n                  <div className=\"p-3 rounded-2xl glass border border-white/10\">\r\n                    <div className=\"text-sm font-semibold mb-1\">{ai==='None' ? 'Opponent' : `${ai} AI`}</div>\r\n                    <div className=\"text-3xl font-extrabold\">{aiLegs}</div>\r\n                    <div className=\"text-xs opacity-80\">Legs Won</div>\r\n                    <div className=\"mt-3 grid grid-cols-2 gap-2 text-sm\">\r\n                      <div><span className=\"opacity-70\">Final 3DA</span><div className=\"font-semibold\">{ai3da.toFixed(1)}</div></div>\r\n                      <div><span className=\"opacity-70\">Final 9DA</span><div className=\"font-semibold\">{ai9da.toFixed(1)}</div></div>\r\n                      <div><span className=\"opacity-70\">Darts At Double</span><div className=\"font-semibold\">{aiDoublesAtt}</div></div>\r\n                      <div><span className=\"opacity-70\">Double %</span><div className=\"font-semibold\">{aiPct}%</div></div>\r\n                      <div><span className=\"opacity-70\">Best Dart Leg</span><div className=\"font-semibold\">{aiBest}</div></div>\r\n                      <div><span className=\"opacity-70\">Worst Dart Leg</span><div className=\"font-semibold\">{aiWorst}</div></div>\r\n                      <div><span className=\"opacity-70\">180's Hit</span><div className=\"font-semibold\">{ai180s}</div></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )\r\n            })()}\r\n            <div className=\"mt-4\">\r\n              <div className=\"text-sm font-semibold mb-2\">Legs Timeline</div>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {legStats.map((leg, i) => (\r\n                  <div key={i} className={`px-3 py-1 rounded-full border text-xs ${leg.winner==='player' ? 'bg-emerald-500/15 border-emerald-400/30' : 'bg-fuchsia-500/15 border-fuchsia-400/30'}`}>\r\n                    Leg {i+1}: {leg.winner==='player' ? 'You' : (ai==='None'?'Opp':'AI')} · Dbl {leg.doubleDarts} · CO {leg.checkoutDarts}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-4\">\r\n              <div className=\"text-sm font-semibold mb-2\">Shot Heat Map</div>\r\n              <div className=\"rounded-2xl overflow-hidden bg-black p-3\">\r\n                {/* Lazy-load HeatMap component to avoid increasing initial bundle too much */}\r\n                <HeatMap />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-2 mt-4\">\r\n              <button className=\"btn bg-slate-700 hover:bg-slate-800\" onClick={() => setShowMatchSummary(false)}>Close</button>\r\n              <button className=\"btn bg-emerald-600 hover:bg-emerald-700\" onClick={() => { setShowMatchSummary(false); startMatch(); }}>Rematch</button>\r\n            </div>\r\n          </ResizableModal>\r\n        </div>\r\n      )}\r\n      {legStats.length > 0 && (\r\n        <div className=\"mt-4\">\r\n          <h4 className=\"font-semibold mb-2\">Leg Stats</h4>\r\n          <ul>\r\n            {legStats.map((leg, i) => (\r\n              <li key={i}>Leg {i+1}: Double darts: {leg.doubleDarts}, Checkout darts: {leg.checkoutDarts}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n      \r\n  {/* Phone camera overlay removed per UX preference; use header badge preview only */}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["polarToCartesian","cx","cy","r","angleDeg","a","sectorAngle","sector","HeatMap","width","height","samples","useHeatmapStore","s","ref","useRef","useEffect","c","ctx","scale","BoardRadii","radii","ringOrder","points","angle","p","grd","sectorCounts","secStr","sec","pos","jsx","createScamState","SCAM_TARGETS","SCAM_TARGET_NAMES","getScamTarget","state","addScamAuto","value","ring","target","newIndex","finished","addScamNumeric","resetScam","createFivesState","FIVES_VALID_NUMBERS","isFivesValid","addFivesAuto","newScore","addFivesNumeric","resetFives","createSevensState","SEVENS_VALID_NUMBERS","isSevensValid","addSevensAuto","addSevensNumeric","resetSevens","aiLevels","clamp","n","min","max","BOARD_CLEAR_GRACE_MS","aiVisitScore","remaining","level","candidates","v","X01RulesPopup","onClose","jsxs","API_URL","OfflinePlay","user","offlineLayout","favoriteDouble","callerEnabled","callerVoice","callerVolume","speakCheckoutOnly","rememberLastOffline","setLastOffline","autoStartOffline","cameraScale","setCameraScale","cameraAspect","setCameraAspect","cameraFitMode","setCameraFitMode","cameraEnabled","textSize","boxSize","autoscoreProvider","autoCommitMode","matchType","setMatchType","teamAName","setTeamAName","teamBName","setTeamBName","useUserSettings","manualScoring","cameraToolbarVisible","waitForBoardClear","selectedMode","setSelectedMode","useState","x01Score","setX01Score","ai","setAI","showRules","setShowRules","inMatch","setInMatch","playerScore","setPlayerScore","aiScore","setAiScore","onDouble","setOnDouble","showWinPopup","setShowWinPopup","firstTo","setFirstTo","playerLegs","setPlayerLegs","aiLegs","setAiLegs","pendingLegWinner","setPendingLegWinner","doubleDarts","setDoubleDarts","checkoutDarts","setCheckoutDarts","legStats","setLegStats","aiDelayMs","setAiDelayMs","toast","useToast","showMatchModal","setShowMatchModal","maximized","setMaximized","fitAll","setFitAll","fitScale","setFitScale","fitOverflowing","setFitOverflowing","isPlayerTurn","setIsPlayerTurn","handleOpenManager","setShowCameraManager","playerDartPoints","setPlayerDartPoints","dpIndex","setDpIndex","dpHits","setDpHits","atcIndex","setAtcIndex","atcHits","setAtcHits","cricket","setCricket","createCricketState","shanghai","setShanghai","createShanghaiState","halve","setHalve","createDefaultHalveIt","highlow","setHighlow","createHighLow","practiceTurnDarts","setPracticeTurnDarts","b27Stage","setB27Stage","b27Score","setB27Score","b27Darts","setB27Darts","b27Hits","setB27Hits","b27Finished","setB27Finished","cuRound","setCuRound","cuScore","setCuScore","cuDarts","setCuDarts","cuMaxRounds","hsRound","setHsRound","hsScore","setHsScore","hsDarts","setHsDarts","hsMaxRounds","lsRound","setLsRound","lsScore","setLsScore","lsDarts","setLsDarts","lsMaxRounds","co170Rem","setCo170Rem","co170Darts","setCo170Darts","co170Attempts","setCo170Attempts","co170Successes","setCo170Successes","co121Rem","setCo121Rem","co121Darts","setCo121Darts","co121Attempts","setCo121Attempts","co121Successes","setCo121Successes","trebleTarget","setTrebleTarget","trebleHits","setTrebleHits","trebleDarts","setTrebleDarts","trebleMaxDarts","setTrebleMaxDarts","trebleFinished","setTrebleFinished","baseball","setBaseball","createBaseball","golf","setGolf","createGolf","ttt","setTTT","createTicTacToe","amCricket","setAmCricket","createAmCricketState","killerPlayers","setKillerPlayers","killerStates","setKillerStates","killerAssigned","setKillerAssigned","killerSetupDone","setKillerSetupDone","killerTurnIdx","setKillerTurnIdx","killerDarts","setKillerDarts","killerWinnerId","setKillerWinnerId","killerLastEvent","setKillerLastEvent","scam","setScam","scamPlayer","setScamPlayer","fives","setFives","fivesPlayer","setFivesPlayer","sevens","setSevens","sevensPlayer","setSevensPlayer","playerDartsThrown","setPlayerDartsThrown","playerLastDart","setPlayerLastDart","playerVisitDarts","setPlayerVisitDarts","playerVisitStart","setPlayerVisitStart","playerVisitSum","setPlayerVisitSum","playerLastVisitScore","setPlayerLastVisitScore","playerVisitDartsAtDouble","setPlayerVisitDartsAtDouble","lastBounceMissTsRef","lastVisitDartsRef","playerScoreRef","playerVisitDartsRef","playerVisitSumRef","playerVisitStartRef","playerVisitDartsAtDoubleRef","aiCountdownMs","setAiCountdownMs","aiDartsThrown","setAiDartsThrown","aiLastDart","setAiLastDart","aiVisitSum","setAiVisitSum","aiVisitDarts","setAiVisitDarts","aiLastVisitScore","setAiLastVisitScore","aiVisitDartsAtDouble","setAiVisitDartsAtDouble","playerDoublesAtt","setPlayerDoublesAtt","playerDoublesHit","setPlayerDoublesHit","aiDoublesAtt","setAiDoublesAtt","aiDoublesHit","setAiDoublesHit","totalPlayerDarts","setTotalPlayerDarts","totalAiDarts","setTotalAiDarts","totalPlayerPoints","setTotalPlayerPoints","totalAiPoints","setTotalAiPoints","player180s","setPlayer180s","player140s","setPlayer140s","player100s","setPlayer100s","ai180s","setAi180s","ai140s","setAi140s","ai100s","setAi100s","playerHighestCheckout","setPlayerHighestCheckout","aiHighestCheckout","setAiHighestCheckout","showMatchSummary","setShowMatchSummary","manualBox","setManualBox","manualTextarea","setManualTextarea","manualPlayerScoreInput","setManualPlayerScoreInput","manualOpponentScoreInput","setManualOpponentScoreInput","manualPlayerLegsInput","setManualPlayerLegsInput","manualOpponentLegsInput","setManualOpponentLegsInput","legOverrideConfirm","setLegOverrideConfirm","showCameraManager","dartCounts","setDartCounts","awaitingBoardClear","setAwaitingBoardClear","pendingVisitRef","pendingVisitTimerRef","clearPendingVisitTimer","useCallback","timer","speakAutoVisit","pending","speaker","sayScore","commitPendingVisit","_trigger","visitTotal","darts","preRemaining","doubleAttempts","doubleWindow","highestCheckout","h","useAudit","endTurn","finalizePendingVisit","trigger","queuePendingVisit","handler","humanName","aiDisplayName","statsX01","useOfflineGameStats","statsCricket","statsShanghai","statsKiller","statsScam","statsFives","statsSevens","activeScoreboardStats","useMemo","list","playerResolvedLastScore","aiResolvedLastScore","player","singlePlayerScoreboard","matchAvg","allTimeAvg","rest","inactivePlayerName","activePlayerName","activeRemaining","activeLastScore","recordDart","mode","count","prev","resetDartCount","parseManualScoreOverride","parsed","parseManualLegsOverride","cancelPendingAutoVisit","nextScore","safeScore","nextVisitStart","handleManualScoreOverride","applyManualLegOverride","handleManualLegsOverride","handleLegOverrideYes","handleLegOverrideNo","handleKey","event","buttonSizeClass","size","scrollerRef","contentRef","headerBarRef","formatType","setFormatType","formatCount","setFormatCount","formatRef","wins","measure","scroller","content","headerH","availH","availW","rect","currentScale","naturalHeight","naturalWidth","scaleH","scaleW","next","scaledHeight","overflowing","RO","ro","onAuto","e","m","startMatch","onFmt","t","id","raf","last","tick","now","dt","visitDarts","targetVisit","dart","after","d","preRem","postRem","checkout","startNextLeg","nextRemaining","applyDartValue","currentScore","currentVisitDarts","currentVisitSum","currentVisitStart","currentVisitDartsAtDouble","newVisitDarts","postRemaining","attemptsThisVisit","newVisitSum","startedDoubleWindow","stillInDoubleWindow","doubleAttemptsNow","inDoubleWindow","attemptsForVisit","addDartNumeric","commitManualVisitTotal","rawTotal","visitStart","liveScore","existingDarts","existingSum","hadPartialVisit","checkoutCap","total","visitTotalInput","setVisitTotalInput","handleVisitTotalChange","raw","numericOnly","maxAllowed","safe","addVisitTotal","bounded","clearCurrentVisit","onClearRequest","evt","detail","addDpValue","val","isDoubleHit","nextHits","i","addDpNumeric","addDpManual","parseManualDart","addB27Auto","hit","nd","totalHits","addB27Numeric","resetB27","addCountUpAuto","addHighScoreAuto","addLowScoreAuto","applyCheckout","rem","setRem","setDarts","setAttempts","setSuccesses","addCo170Auto","addCo121Auto","addCoManual","is170","isDouble","resetCo170","resetCo121","addTrebleAuto","cycle","idx","resetTreble","addBaseballAuto","cp","applyBaseballDart","resetBaseball","addGolfAuto","applyGolfDart","resetGolf","addTttAuto","cell","tryClaimCell","resetTtt","addAmCricketAuto","applyAmCricketDart","resetAmCricket","addAtcValue","ATC_ORDER","newHits","addAtcNumeric","addAtcManual","addCricketAuto","copy","applyCricketDart","addCricketNumeric","addShanghaiAuto","applyShanghaiDart","endShanghaiTurn","addShanghaiNumeric","addHalveAuto","applyHalveItDart","endHalveItTurn","addHalveNumeric","addHighLowAuto","applyHighLowDart","endHighLowTurn","addHighLowNumeric","parseManualBox","mult","num","addManual","addManualTextarea","lines","l","line","replaceLast","replaceLastManual","rewind","handleWinPopupSubmit","winner","legDoublesAtt","legDoublesHit","winnerDarts","bumpGameMode","lockedPremium","freeGames","premiumGames","GameCalibrationStatus","Fragment","ResizableModal","el","GameHeaderBar","disabled","pillCls","CRICKET_NUMBERS","cricketClosedAll","getCurrentHalveTarget","_","AM_CRICKET_NUMBERS","hasClosedAllAm","CameraView","info","GameScoreboard","first","suggestCheckouts","ResizablePanel","CameraTile","currentThrower","currentRemaining","lastScoreDisplay","dartsThrown","scored","avg3","matchScore","bestLegText","nh","ni","DOUBLE_PRACTICE_ORDER","promptVal","tcell","tgt","TTT_TARGETS","st","cur","k","res","applyKillerDart","win","killerWinner","pid","name","it","ids","assigned","assignKillerNumbers","initStates","createKillerState","ringLabel","safeValue","data","formatPriceInCurrency","getUserCurrency","createPortal","stage","targetName","currentLegs","player3da","player9da","playerBest","playerWorst","playerPct","ai3da","ai9da","aiBest","aiWorst","aiPct","leg"],"mappings":"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"}