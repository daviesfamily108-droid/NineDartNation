import{H as _,u as Me,r as Te,j as e,I as Be,J as Ee,i as V}from"./index-KP9-1sNN.js";import{r as a,R as ee,T as Re,I as Ae,Z as Le,J as Pe,U as ue,p as Ie,v as Fe,h as xe}from"./ui-CTb7K00u.js";import{M as pe,G as De}from"./MatchStartShowcase-0UFTnZOc.js";import"./vendor-D3F3s8fL.js";function Ue({open:c,onClose:j,onCreate:k}){const[p]=a.useState(()=>document.createElement("div")),[u,I]=a.useState("X01"),[r,v]=a.useState("bestof"),[F,f]=a.useState(3),C=a.useRef(null),[m,M]=a.useState(0),[S,T]=a.useState(()=>_(u)?.[0]),b=Me().username||"Anonymous";a.useLayoutEffect(()=>(p.className="ndn-create-match-portal",document.body.appendChild(p),()=>{try{p&&p.remove()}catch{}}),[p]),a.useLayoutEffect(()=>{function n(h){h.key==="Escape"&&j()}return c&&document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[c,j]);const B=()=>{k({createdBy:b,game:u,modeType:r,legs:F,avgChoice:m,startingScore:S}),j()};return!c||!p?null:Te.createPortal(e.jsxs("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/60 p-4",children:[e.jsx("button",{"aria-label":"Close dialog",className:"absolute inset-0 w-full h-full bg-transparent",onClick:j}),e.jsxs("div",{className:"card rounded-xl p-6 max-w-lg w-full relative text-white",role:"dialog",children:[e.jsx("button",{"aria-label":"Close",className:"absolute top-3 right-3 text-rose-400 font-bold",onClick:j,children:"âœ•"}),e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Create Match ðŸŽ¯"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-80",children:"Created By ðŸŽ¯"}),e.jsxs("div",{className:"mt-1 p-2 bg-white/5 rounded text-white",children:[b," ðŸŽ¯"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm opacity-80",htmlFor:"match-game",children:"Match Name (Game) ðŸŽ¯"}),e.jsx("select",{id:"match-game",className:"w-full p-2 border border-white/10 bg-white/5 rounded text-white",value:u,onChange:n=>{const h=n.target.value;I(h);const i=_(h);T(i?.[0])},onPointerDown:n=>{n.stopPropagation()},onMouseDown:n=>{n.stopPropagation()},onTouchStart:n=>{n.stopPropagation?.()},children:Be.map(n=>e.jsx("option",{value:n,children:n},n))})]}),_(u).length>0?e.jsxs("div",{children:[e.jsx("label",{className:"text-sm opacity-80",htmlFor:"match-start",children:`${u} Starting Score ðŸŽ¯`}),e.jsx("select",{id:"match-start",className:"ml-2 p-2 border border-white/10 bg-white/5 rounded text-white w-full",value:S,onChange:n=>T(Number(n.target.value)),onPointerDown:n=>{n.stopPropagation()},onMouseDown:n=>{n.stopPropagation()},onTouchStart:n=>{n.stopPropagation?.()},children:_(u).map(n=>e.jsx("option",{value:n,children:n},n))})]}):null,e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-80",children:"Mode ðŸŽ¯"}),e.jsxs("div",{className:"flex gap-2 mt-1 justify-center",children:[e.jsxs("label",{className:`btn ${r==="bestof"?"btn-primary":"btn-ghost"}`,children:[e.jsx("input",{type:"radio",name:"mode",value:"bestof",checked:r==="bestof",onChange:()=>{v("bestof"),f(n=>{const h=Math.max(1,n||3);return h%2===1?h:h+1}),setTimeout(()=>C.current?.focus(),0)},className:"sr-only"})," ","Best Of ðŸŽ¯"]}),e.jsxs("label",{className:`btn ${r==="firstto"?"btn-primary":"btn-ghost"}`,children:[e.jsx("input",{type:"radio",name:"mode",value:"firstto",checked:r==="firstto",onChange:()=>{v("firstto"),f(n=>Math.max(1,n||3)),setTimeout(()=>C.current?.focus(),0)},className:"sr-only"})," ","First To ðŸŽ¯"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm opacity-80",htmlFor:"match-legs",children:r==="bestof"?"Best Of ðŸŽ¯":"First To ðŸŽ¯"}),e.jsx("input",{id:"match-legs",type:"number",min:1,value:F,onChange:n=>f(Math.max(1,Number(n.target.value||1))),ref:C,className:"w-full p-2 border border-white/10 bg-white/5 rounded text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm opacity-80",htmlFor:"match-avg",children:"Average Choice (Â±) ðŸŽ¯"}),e.jsx("input",{id:"match-avg",type:"number",value:m,onChange:n=>M(Number(n.target.value||0)),className:"w-full p-2 border border-white/10 bg-white/5 rounded text-white"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{className:"btn btn-primary",onClick:B,children:"Create Match ðŸŽ¯"})})]})]}),p)}function _e({user:c}){const j=c?.username||"You",[k,p]=a.useState(0),[u,I]=a.useState(()=>[{id:1,name:"room-1",matches:[]}]),r=(()=>{try{return Ee()}catch{return null}})(),[v,F]=a.useState([]),f=V(t=>t.inProgress),C=V(t=>t.players),[m,M]=a.useState(!1),S=a.useRef(null);a.useEffect(()=>{if(!m)return;function t(s){try{if(!S.current)return;S.current.contains(s.target)||M(!1)}catch{}}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[m]);const[T,b]=a.useState(!1),B=ee.useRef(!1);a.useEffect(()=>{f&&(B.current||(B.current=!0,b(!0)))},[f]),a.useEffect(()=>{f||(B.current=!1)},[f]),a.useEffect(()=>{if(r?.connected&&c?.username)try{r.send({type:"presence",username:c.username,email:c.email||""})}catch{}},[r?.connected,c]),a.useEffect(()=>{const t=()=>{try{V.getState().endGame()}catch{}};try{window.addEventListener("ndn:match-quit",t)}catch{}return()=>{try{window.removeEventListener("ndn:match-quit",t)}catch{}}},[]);const[n,h]=a.useState(!1),[i,E]=a.useState(null),te=ee.useRef(null),[Oe,fe]=a.useState(null),[be,se]=a.useState({}),[Q,W]=a.useState(30),z=ee.useRef(!1),[g,D]=a.useState(null),[Y,U]=a.useState({}),[ae,O]=a.useState(!1),[X,ne]=a.useState(null),[re,Z]=a.useState(null),[le,ie]=a.useState(null),[H,$]=a.useState(!1),[R,ge]=a.useState(""),[A,je]=a.useState("all"),[L,ve]=a.useState("all"),[G,we]=a.useState("newest"),[w,J]=a.useState(1),K=16,P=u[k],oe=16,ce=a.useMemo(()=>v&&v.length?v:u.flatMap(t=>t.matches.map(s=>({...s,roomName:t.name}))),[u,v]),N=a.useMemo(()=>{const t=P?.matches||[],s=new Set(t.map(o=>o.id)),l=(ce||[]).filter(o=>!s.has(o.id));let d=[...t,...l];if(R.trim()){const o=R.toLowerCase();d=d.filter(x=>(x.game||"").toLowerCase().includes(o)||(x.createdBy||x.creatorName||"").toLowerCase().includes(o)||(x.id||"").toLowerCase().includes(o))}return A!=="all"&&(d=d.filter(o=>(o.game||"").toLowerCase()===A)),L!=="all"&&(d=d.filter(o=>{const x=(o.modeType||"").replace("_","").toLowerCase(),q=L.replace("_","").toLowerCase();return x.includes(q)})),d.sort((o,x)=>{const q=o.createdAt||0,he=x.createdAt||0;return G==="newest"?he-q:q-he}),d},[P,ce,R,A,L,G]);a.useEffect(()=>{J(1)},[R,A,L,G,k]);const y=Math.ceil(N.length/K),Ne=N.slice((w-1)*K,w*K),ye=()=>{N.length>0&&de(N[0])},Ce=t=>{const s={id:`m-${Date.now()}`,createdBy:t.createdBy||j,game:t.game,modeType:t.modeType,legs:t.legs,startingScore:t.startingScore,createdAt:Date.now()};r?.connected||I(l=>l.map((d,o)=>o===k?{...d,matches:[s,...d.matches]}:d));try{r?.connected&&(c?.username&&r.send({type:"presence",username:c.username,email:c.email||""}),r.send({type:"create-match",game:t.game,mode:t.modeType,value:t.legs,startingScore:t.startingScore,creatorAvg:t.avgChoice||0}))}catch{}},Se=()=>{I(t=>{const s=t.length+1,l=[...t,{id:s,name:`room-${s}`,matches:[]}];return p(l.length-1),l})};a.useEffect(()=>r?(r.connected&&r.send({type:"list-matches"}),r.addListener(s=>{try{if(s?.type==="joined"&&s.id&&fe(s.id),s?.type==="presence")try{s.id&&se(l=>({...l,[s.id]:s.username||s.name||s.id}))}catch{}if(s?.type==="matches"&&F(s.matches||[]),s?.type==="match-prestart"){const l=s.match||null;l&&(l.prestartEndsAt=s.prestartEndsAt);try{l?.creatorId&&l?.creatorName&&se(o=>({...o,[l.creatorId]:l.creatorName}))}catch{}z.current=!0,E(l);const d=s.prestartEndsAt||Date.now();W(Math.max(0,Math.ceil(((d||Date.now())-Date.now())/1e3))),setTimeout(()=>{z.current=!1},0),D(null),U({}),O(!1),ne(null),Z(null)}if(s?.type==="match-start"&&i&&s.roomId===i.id&&(E(null),D(null),U({})),s?.type==="prestart-choice-notify"){const{roomId:l,playerId:d,choice:o}=s;if(!l||!o)return;U(x=>({...x||{},[d]:o}))}s?.type==="prestart-bull"&&(O(!0),$(!1),ie(null)),s?.type==="prestart-bull-winner"&&(Z(s.winnerId||null),O(!1),$(!1)),s?.type==="prestart-bull-tie"&&(Z(null),O(!1),$(!1))}catch{}})):void 0,[r,g]),a.useEffect(()=>{if(!i||z.current||i.prestartEndsAt)return;W(30),D(null),U({});const t=setInterval(()=>W(s=>Math.max(0,s-1)),1e3);return()=>clearInterval(t)},[i]),a.useEffect(()=>{i&&setTimeout(()=>te.current?.focus(),0)},[i]);const ke=()=>{b(!0);try{r?.connected&&i?.id&&r.send({type:"invite-response",matchId:i.id,accept:!0,toId:i.creatorId})}catch{}E(null)},de=t=>{E(t),b(!0);try{r?.connected&&(c?.username&&r.send({type:"presence",username:c.username,email:c.email||""}),r.send({type:"join-match",matchId:t.id,calibrated:!0}))}catch{}},me=t=>{D(t);try{r?.connected&&i?.id&&r.send({type:"prestart-choice",roomId:i.id,choice:t})}catch{}};return e.jsx("div",{className:"flex-1 min-h-0",style:{position:"relative",marginTop:0},children:e.jsxs("div",{className:"card ndn-game-shell relative overflow-hidden h-full flex flex-col",children:[T&&e.jsx(pe,{players:C||[],user:c,onDone:()=>b(!1),onRequestClose:()=>b(!1)}),e.jsx("h2",{className:"text-3xl font-bold text-black dark:text-white mb-4",children:"Online Lobby ðŸŒ"}),e.jsx("div",{className:"ndn-shell-body flex-1 overflow-hidden p-3 pb-0",children:e.jsxs("div",{className:"rounded-xl border border-slate-700 bg-black/10 p-3 flex-1 min-h-0 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"mb-3 p-3 rounded-xl bg-indigo-500/10 border border-indigo-500/40 flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm opacity-80",children:"Room"}),e.jsxs("div",{className:"px-3 py-1 bg-white/5 rounded border border-white/10",children:["Room (",P?.id,")"]}),e.jsx("div",{style:{width:12}}),e.jsx("button",{className:"btn btn-ghost",onClick:Se,children:"New Room ðŸšª"})]}),e.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[e.jsxs("button",{className:"btn btn-primary flex items-center gap-2",onClick:()=>h(!0),disabled:(P?.matches?.length||0)>=oe,children:[e.jsx(Re,{className:"w-4 h-4"}),"Create Match + âš”ï¸"]}),(P?.matches?.length||0)>=oe&&e.jsx("div",{className:"text-xs text-rose-400 mt-1",children:"Room full â€” create a new room"})]})]}),e.jsx("p",{className:"mb-2"}),!f&&e.jsxs("div",{className:"mb-4 p-3 rounded-xl bg-gradient-to-br from-slate-800/50 to-slate-900/50 border border-white/5 flex flex-col gap-3 shadow-lg",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),e.jsx("input",{type:"text",placeholder:"Search matches, players...",className:"w-full pl-9 pr-3 py-2.5 rounded-lg bg-black/40 border border-white/10 text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50 transition-all",value:R,onChange:t=>ge(t.target.value)})]}),e.jsxs("button",{className:"btn bg-indigo-600 hover:bg-indigo-500 text-white border-none shadow-lg shadow-indigo-500/20 flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100",onClick:ye,disabled:N.length===0,children:[e.jsx(Le,{className:"w-4 h-4 fill-current"}),e.jsx("span",{className:"font-medium",children:"Quick Join âš¡"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-wide text-white/50",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"input input-compact cursor-pointer font-bold",value:A,onChange:t=>je(t.target.value),children:[e.jsx("option",{value:"all",children:"All Games ðŸŽ¯"}),e.jsx("option",{value:"x01",children:"X01"}),e.jsx("option",{value:"cricket",children:"Cricket"}),e.jsx("option",{value:"bermuda",children:"Bermuda"}),e.jsx("option",{value:"gotcha",children:"Gotcha"})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"input input-compact cursor-pointer font-bold",value:L,onChange:t=>ve(t.target.value),children:[e.jsx("option",{value:"all",children:"All Modes ðŸ†"}),e.jsx("option",{value:"first_to",children:"First To"}),e.jsx("option",{value:"best_of",children:"Best Of"})]})}),e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${m?"bg-red-600 text-white":"bg-white/5 text-white/80 hover:bg-white/10"}`,onClick:()=>M(t=>!t),"aria-pressed":m,title:"Toggle focus mode: hide small details and show focused view",children:m?"Exit Focus ðŸ”":"Focus Mode ðŸ”"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"input input-compact cursor-pointer font-bold",value:G,onChange:t=>we(t.target.value),children:[e.jsx("option",{value:"newest",children:"Newest First ðŸ†•"}),e.jsx("option",{value:"oldest",children:"Oldest First"})]})})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-indigo-400"}),"Active Matches ï¿½ï¸"]}),e.jsx("div",{className:"mb-3 p-1 rounded-xl border border-slate-700/50 bg-black/10",children:e.jsxs("div",{className:"mb-4",children:[(N.length||0)===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center opacity-60",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4",children:e.jsx(Ie,{className:"w-8 h-8 text-white/20"})}),e.jsx("p",{className:"text-lg font-medium mb-1",children:"No matches found"}),e.jsx("p",{className:"text-sm max-w-xs mx-auto",children:"Create a new match to get started or try adjusting your filters."})]}):null,(N.length||0)!==0&&e.jsxs("div",{className:"relative",children:[m&&e.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto bg-red-600/95 text-white px-6 py-3 rounded-lg shadow-lg text-lg font-bold transform transition-all duration-200 ease-out",children:e.jsx("button",{onClick:()=>M(!1),className:"w-full text-center",children:"FOCUS MODE â€” Click to exit"})})}),e.jsx("div",{ref:S,className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[28rem] overflow-auto p-2 ${m?"opacity-90":""}`,"data-testid":"matches-grid",children:Ne.map(t=>e.jsxs("div",{className:"group relative p-5 rounded-xl border border-white/5 bg-gradient-to-br from-slate-800/80 to-slate-900/80 hover:from-slate-800 hover:to-slate-900 transform transition-transform duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-indigo-500/10 flex flex-col gap-4 h-24","data-testid":`match-${t.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[!m&&e.jsx("div",{className:"w-9 h-9 rounded-full bg-indigo-500/10 flex items-center justify-center border border-indigo-500/20 group-hover:border-indigo-500/40 transition-colors text-xs font-bold",children:t.createdBy?(t.createdBy||"U").substring(0,2).toUpperCase():(t.creatorName||"U").substring(0,2).toUpperCase()}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-bold text-white group-hover:text-indigo-300 transition-colors truncate",children:t.game}),e.jsxs("div",{className:"text-xs text-white/50 flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3 h-3"}),new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})}),t.roomName&&e.jsx("div",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded bg-white/5 border border-white/10 text-white/60",children:t.roomName})]}),e.jsxs("div",{className:"flex flex-col gap-1 text-sm text-white/70 bg-black/20 p-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-white/10 text-xs font-medium",children:t.modeType==="bestof"?"Best Of":"First To"}),e.jsx("span",{className:"font-mono text-indigo-300",children:t.legs}),e.jsx("span",{children:"legs"}),t.startingScore&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),e.jsx("span",{className:"font-mono text-amber-300",children:t.startingScore})]})]}),!m&&e.jsxs("div",{className:"text-xs text-white/40 flex items-center gap-1 mt-1",children:[e.jsx(ue,{className:"w-3 h-3"}),"Created by:"," ",e.jsx("span",{className:"text-white/60",children:t.createdBy||t.creatorName||"Unknown"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-2 border-t border-white/5",children:[e.jsx("div",{className:"flex items-center gap-2 min-w-0",children:!m&&e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-[10px] font-bold text-white",children:(t.createdBy||t.creatorName||"U").substring(0,2).toUpperCase()}),e.jsx("span",{className:"text-xs text-white/60 truncate max-w-[120px]",children:t.createdBy||t.creatorName})]})}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{className:"btn btn-sm bg-indigo-600 hover:bg-indigo-500 text-white border-none shadow-lg shadow-indigo-500/20 px-4",onClick:()=>de(t),children:"Join âš”ï¸"})})]})]},t.id))})]}),y>1&&e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 pt-2 border-t border-white/5",children:[e.jsxs("button",{className:"btn btn-sm btn-ghost text-white/60 hover:text-white disabled:opacity-30",disabled:w===1,onClick:()=>J(t=>Math.max(1,t-1)),children:[e.jsx(xe,{className:"w-4 h-4 rotate-90"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,y)},(t,s)=>{let l=s+1;return y>5&&(w>3&&(l=w-2+s),l>y&&(l=y-4+s)),e.jsx("button",{className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${w===l?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/25":"bg-white/5 text-white/60 hover:bg-white/10"}`,onClick:()=>J(l),children:l},l)})}),e.jsxs("button",{className:"btn btn-sm btn-ghost text-white/60 hover:text-white disabled:opacity-30",disabled:w===y,onClick:()=>J(t=>Math.min(y,t+1)),children:["Next",e.jsx(xe,{className:"w-4 h-4 -rotate-90"})]})]})]})})]})]})}),e.jsx(Ue,{open:n,onClose:()=>h(!1),onCreate:t=>{Ce(t),h(!1)}}),i&&e.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"join-heading",tabIndex:-1,className:"fixed inset-0 z-60 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-md w-full",children:[e.jsx("div",{id:"join-heading",className:"text-lg font-bold mb-2",children:"Join Match âš”ï¸"}),e.jsxs("div",{className:"mb-3",children:[i.game," - ",i.modeType," Â· ",i.legs," legs"]}),e.jsxs("div",{className:"text-sm opacity-80 mb-3",children:["Created by ",i.createdBy]}),e.jsx("div",{className:"mb-3",children:e.jsx(De,{gameMode:i.game,compact:!0})}),i.startingScore&&e.jsxs("div",{className:"mb-3",children:["Starting score:"," ",e.jsx("span",{className:"font-mono",children:i.startingScore})]}),e.jsx(pe,{open:T,players:C,user:c,onRequestClose:()=>{},onDone:()=>{}}),e.jsxs("div",{className:"mb-3",children:["Timer: ",e.jsxs("span",{className:"font-mono",children:[Q,"s"]})]}),(Q<=15||i?.prestartEndsAt)&&e.jsxs("div",{className:"mb-3",children:["Choose:"," ",e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:`btn ${g==="bull"?"btn-primary":"btn-ghost"}`,onClick:()=>me("bull"),children:"Bull Up"}),e.jsx("button",{className:`btn ${g==="skip"?"btn-primary":"btn-ghost"}`,onClick:()=>me("skip"),children:"Skip"})]}),e.jsx("div",{className:"text-xs opacity-70 mt-2",children:g?`You chose: ${g}`:"Please choose Bull Up or Skip before accepting"}),Object.keys(Y).length>0&&e.jsx("div",{className:"text-xs opacity-70 mt-2",role:"status","aria-live":"polite",children:Object.entries(Y).map(([t,s])=>e.jsxs("div",{children:[be[t]||t," chose: ",s]},t))}),g==="skip"&&e.jsx("div",{className:"text-xs opacity-70 mt-2",children:"Skip requires both players to click Skip. Waiting for other playerâ€¦"}),g==="skip"&&Object.values(Y).some(t=>t==="skip")&&e.jsx("div",{className:"text-sm font-semibold mt-2",children:"Both players skipped â€” Left player throws first"}),ae&&e.jsxs("div",{className:"text-xs opacity-70 mt-2",children:["Bull Up active â€”",H?` you threw ${le??50}`:" throw to win the bull!"]}),ae&&!H&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("input",{className:"input input-sm","aria-label":"bull-throw",type:"number",min:0,max:50,value:X??50,onChange:t=>ne(Math.max(0,Math.min(50,Number(t.target.value||0))))}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{try{r?.connected&&i?.id&&r.send({type:"prestart-bull-throw",roomId:i.id,score:X??50})}catch{}ie(X??50),$(!0)},children:"Throw Bull"})]}),H&&e.jsxs("div",{className:"text-sm font-semibold mt-2 animate-pulse",children:["You threw: ",le??50]}),re&&e.jsxs("div",{className:"text-sm font-semibold mt-2",children:["Bull winner: ",re]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{ref:te,"aria-label":"Accept invitation",className:"btn btn-primary",onClick:ke,disabled:Q<=15&&!g,children:"Accept"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>{E(null)},children:"Cancel"})]})]})})]})})}export{_e as default};
//# sourceMappingURL=OnlinePlay.clean-C4lPR93u.js.map
