import{j as e,B as Oe,u as Wi,a as Ui,r as jr,f as Nr,p as Gi,R as Ot,b as _i,c as zi,d as Xi}from"./index-qEtc2rT9.js";import{r as n}from"./ui-CuWypN7C.js";import{c as pa,a as ga,b as va,d as ja,e as yr,f as wr,g as Sr,h as Cr,s as vs,u as Be,G as qi,i as Yi,D as Na,A as Ce,j as Ji,C as Qi,k as Zi,l as el,m as tl,n as me,o as sl,p as kr,q as Dr,r as rt,T as al,t as nl,v as Mr,w as Ar,x as rl,y as il,z as ll,B as cl,E as ol,F as dl,H as ml,I as ul,J as xl,K as hl,L as fl,M as bl}from"./useGameStats-Du-CQ4LX.js";import{u as pl,C as w,R as gl}from"./CameraView-C2UztPqq.js";import{u as Bt}from"./match-DaK2nqvI.js";import"./vendor-D3F3s8fL.js";import"./pendingVisit-BbRXmIZs.js";function Tr(c,p,D,C){const M=(C-90)*Math.PI/180;return{x:c+D*Math.cos(M),y:p+D*Math.sin(M)}}function Rr(c){return[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5].indexOf(c)*18+9}function vl({width:c=320,height:p=320}){const D=pl(M=>M.samples),C=n.useRef(null);return n.useEffect(()=>{const M=C.current;if(!M)return;const A=M.getContext("2d");if(!A)return;M.width=c,M.height=p,A.clearRect(0,0,c,p);const ae=c/2,it=p/2,pe=Math.min(c,p)/(Oe.doubleOuter*2+20),Y={bullInner:Oe.bullInner*pe,bullOuter:Oe.bullOuter*pe,trebleInner:Oe.trebleInner*pe,trebleOuter:Oe.trebleOuter*pe,doubleInner:Oe.doubleInner*pe,doubleOuter:Oe.doubleOuter*pe};A.strokeStyle="rgba(255,255,255,0.06)",A.lineWidth=1;const ge=["doubleOuter","doubleInner","trebleOuter","trebleInner","bullOuter","bullInner"];for(const k of ge)A.beginPath(),A.arc(ae,it,Y[k],0,Math.PI*2),A.stroke();const ke=[];for(const k of D){let _=Math.random()*360,te=Math.random()*Y.doubleOuter;typeof k.sector=="number"&&k.sector>=1&&k.sector<=20&&(_=Rr(k.sector),k.ring==="DOUBLE"?te=(Y.doubleInner+Y.doubleOuter)/2:k.ring==="TRIPLE"?te=(Y.trebleInner+Y.trebleOuter)/2:k.ring==="INNER_BULL"?te=Y.bullInner*.5:k.ring==="BULL"?te=Y.bullOuter*.8:te=(Y.trebleOuter+Y.doubleInner)/2*(.6+Math.random()*.4));const g=Tr(ae,it,te,_);ke.push({x:g.x,y:g.y,w:1})}for(const k of ke){const _=A.createRadialGradient(k.x,k.y,1,k.x,k.y,60);_.addColorStop(0,"rgba(255,0,0,0.9)"),_.addColorStop(.3,"rgba(255,100,0,0.5)"),_.addColorStop(1,"rgba(255,100,0,0)"),A.fillStyle=_,A.beginPath(),A.arc(k.x,k.y,60,0,Math.PI*2),A.fill()}A.fillStyle="rgba(255,255,255,0.85)",A.font="12px ui-sans-serif";const De={};for(const k of D)k.sector&&(De[k.sector]=(De[k.sector]||0)+1);for(const k of Object.keys(De)){const _=Number(k),te=Rr(_),g=Tr(ae,it,Y.trebleOuter+18,te);A.fillText(String(De[_]),g.x-6,g.y+4)}},[D,c,p]),e.jsx("canvas",{ref:C,style:{width:"100%",height:"auto",borderRadius:8,background:"#081018"}})}function wa(){return{targetIndex:0,darts:0,finished:!1}}const Ir=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25],ya=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","Bull"];function jl(c){return Ir[c.targetIndex]}function Sa(c,p,D){if(c.finished)return c;const C=jl(c);if(!(D==="SINGLE"&&p===C||D==="DOUBLE"&&p===C||D==="TRIPLE"&&p===C||D==="INNER_BULL"&&C===25))return c;const A=c.targetIndex+1,ae=A>=Ir.length;return{targetIndex:A,darts:c.darts+1,finished:ae}}function Lr(c,p){return Sa(c,p,"SINGLE")}function Nl(){return wa()}function Ca(c=50){return{score:0,darts:0,finished:!1,target:c}}const yl=[5,10,15,20,25,50];function wl(c){return yl.includes(c)}function ka(c,p,D){if(c.finished)return c;if(!wl(p))return{...c,darts:c.darts+1};const C=c.score+p,M=C>=c.target;return{score:M?c.target:C,darts:c.darts+1,finished:M,target:c.target}}function Er(c,p){return ka(c,p)}function Sl(c=50){return Ca(c)}function Da(c=70){return{score:0,darts:0,finished:!1,target:c}}const Cl=[7,14,21];function kl(c){return Cl.includes(c)}function Ma(c,p,D){if(c.finished)return c;if(!kl(p))return{...c,darts:c.darts+1};const C=c.score+p,M=C>=c.target;return{score:M?c.target:C,darts:c.darts+1,finished:M,target:c.target}}function Fr(c,p){return Ma(c,p)}function Dl(c=70){return Da(c)}const Ml=["Easy","Medium","Hardened"];function ue(c,p,D){return Math.max(p,Math.min(D,c))}const Al=6500;function Tl(c,p){let D=0;if(p==="Easy"){const C=[22,26,41,45,60];D=C[Math.floor(Math.random()*C.length)]}else p==="Medium"?D=Math.round(ue(60+(Math.random()*30-15),30,100)):D=Math.round(ue(80+(Math.random()*20-10),50,120));return c<=0?0:D>c?[100,85,81,60,57,45,41,26,22,20,1].find(M=>M<=c)??0:D}function Rl({onClose:c}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"card max-w-lg w-full relative",children:[e.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:c,children:"Close"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"X01 Rules & Regulations"}),e.jsxs("ul",{className:"list-disc pl-5 text-left mb-2",children:[e.jsx("li",{children:"Double In: Start scoring only after hitting a double."}),e.jsx("li",{children:"Double Out: Finish the game by hitting a double to reach exactly zero."}),e.jsx("li",{children:"Best Of: Play a set number of legs, winner is first to reach majority."}),e.jsx("li",{children:"First To: Play until a player reaches a set number of legs."}),e.jsx("li",{children:"No Cheating: All scores must be valid, no manual score changes mid-leg."}),e.jsx("li",{children:"Competitive Standard: Follow latest WDF/PDC rules for match play."})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"For full details, see official darts governing body rules."})]})})}const Ll="https://ninedartnation-1.onrender.com";function ec({user:c}){const{offlineLayout:p,favoriteDouble:D,callerEnabled:C,callerVoice:M,callerVolume:A,speakCheckoutOnly:ae,rememberLastOffline:it,setLastOffline:pe,autoStartOffline:Y,cameraScale:ge,setCameraScale:ke,cameraAspect:De="wide",setCameraAspect:k,cameraFitMode:_="fill",setCameraFitMode:te,cameraEnabled:g,textSize:js,boxSize:Aa,autoscoreProvider:Pr,autoCommitMode:Hr="wait-for-clear",matchType:Or="singles",setMatchType:Br,teamAName:Vr="Team A",setTeamAName:$r,teamBName:Kr="Team B",setTeamBName:Wr}=Wi(),Ns=Pr==="manual",N=g&&!Ns,Me=g&&!Ns&&Hr!=="immediate",[o,Ta]=n.useState("X01"),[v,Ra]=n.useState(501),[S,Ur]=n.useState("None"),[Gr,La]=n.useState(!1),[Ea,Vt]=n.useState(!1),[I,H]=n.useState(v),[O,lt]=n.useState(v),[El,Fa]=n.useState(!1),[Ia,J]=n.useState(!1),[ct,Pa]=n.useState(1),[B,$t]=n.useState(0),[V,Kt]=n.useState(0),[Wt,Q]=n.useState(null),[Ha,_r]=n.useState(1),[Oa,zr]=n.useState(1),[ne,Ba]=n.useState([]),[Va,Xr]=n.useState(2e3),ve=Ui(),[ys,ot]=n.useState(!1),[dt,$a]=n.useState(p==="modern"),[Ve,Ka]=n.useState(p==="modern");n.useEffect(()=>{$a(p==="modern"),Ka(p==="modern")},[p]),n.useEffect(()=>{_!=="fit"&&te("fit")},[_,te]);const[Ut,Wa]=n.useState(1),[qr,Ua]=n.useState(!1),[L,mt]=n.useState(!0);n.useEffect(()=>{const t=()=>Je(!0);return window.addEventListener("ndn:open-camera-manager",t),()=>window.removeEventListener("ndn:open-camera-manager",t)},[]);const[j,b]=n.useState(0),[ut,ws]=n.useState(0),[Ss,Cs]=n.useState(0),[Ae,Ga]=n.useState(0),[_a,za]=n.useState(0),[xt,ks]=n.useState(pa()),[Gt,_t]=n.useState(ga()),[ht,zt]=n.useState(va()),[Xt,qt]=n.useState(ja()),[Fl,se]=n.useState(0),[Xa,qa]=n.useState(1),[Yr,Ds]=n.useState(27),[Il,Ya]=n.useState(0),[Jr,Ms]=n.useState(0),[Ja,Qa]=n.useState(!1),[Za,en]=n.useState(1),[Qr,tn]=n.useState(0),[Pl,sn]=n.useState(0),Zr=8,[an,nn]=n.useState(1),[ei,rn]=n.useState(0),[Hl,ln]=n.useState(0),ti=10,[cn,on]=n.useState(1),[si,dn]=n.useState(0),[Ol,mn]=n.useState(0),ai=10,[As,Ts]=n.useState(170),[un,xn]=n.useState(0),[hn,fn]=n.useState(0),[bn,pn]=n.useState(0),[Rs,Ls]=n.useState(121),[gn,vn]=n.useState(0),[jn,Nn]=n.useState(0),[yn,wn]=n.useState(0),[Te,Es]=n.useState(20),[Fs,Is]=n.useState(0),[Sn,Ps]=n.useState(0),[ft,ni]=n.useState(30),[Cn,Hs]=n.useState(!1),[kn,Dn]=n.useState(yr()),[Mn,An]=n.useState(wr()),[Re,Tn]=n.useState(Sr()),[Os,Rn]=n.useState(Cr()),[R,Bs]=n.useState([{id:"p1",name:"Player 1"},{id:"p2",name:"Player 2"}]),[bt,pt]=n.useState({}),[Yt,Vs]=n.useState({}),[Ln,$s]=n.useState(!1),[le,$e]=n.useState(0),[Bl,Ke]=n.useState(0),[We,gt]=n.useState(null),[ri,xe]=n.useState(""),[Jt,Vl]=n.useState(wa()),[Le,vt]=n.useState(wa()),[jt,$l]=n.useState(Ca(50)),[re,Nt]=n.useState(Ca(50)),[yt,Kl]=n.useState(Da(70)),[ie,wt]=n.useState(Da(70)),[Qt,Ee]=n.useState(0),[he,je]=n.useState(0),[E,$]=n.useState(0),[Ks,St]=n.useState(v),[ce,Z]=n.useState(0),[Ue,fe]=n.useState(null),[Zt,z]=n.useState(0),Fe=n.useRef(0),En=n.useRef(0),K=n.useRef(I),W=n.useRef(E),X=n.useRef(ce),Ie=n.useRef(Ks),U=n.useRef(Zt);n.useEffect(()=>{K.current=I},[I]),n.useEffect(()=>{W.current=E},[E]),n.useEffect(()=>{X.current=ce},[ce]),n.useEffect(()=>{Ie.current=Ks},[Ks]),n.useEffect(()=>{U.current=Zt},[Zt]);const[ii,Ct]=n.useState(0);n.useRef(null);const[es,Ws]=n.useState(0),[Pe,ts]=n.useState(0),[Ge,He]=n.useState(0),[_e,be]=n.useState(0),[ze,Xe]=n.useState(null),[Us,qe]=n.useState(0),[kt,Dt]=n.useState(0),[Gs,ss]=n.useState(0),[Mt,Fn]=n.useState(0),[_s,In]=n.useState(0),[At,Ye]=n.useState(0),[Tt,Pn]=n.useState(0),[zs,Rt]=n.useState(0),[Xs,Hn]=n.useState(0),[On,as]=n.useState(0),[li,ns]=n.useState(0),[ci,rs]=n.useState(0),[Bn,qs]=n.useState(0),[oi,Ys]=n.useState(0),[di,Js]=n.useState(0),[mi,is]=n.useState(0),[ui,Vn]=n.useState(0),[xi,Qs]=n.useState(!1),[G,P]=n.useState(""),[Zs,Lt]=n.useState(""),[Wl,Ul]=n.useState(""),[$n,Kn]=n.useState(""),[Wn,ea]=n.useState(""),[Un,ta]=n.useState(""),[ls,sa]=n.useState(null),[hi,Je]=n.useState(!1),[fi,Gn]=n.useState({}),[bi,Et]=n.useState(!1),Ne=n.useRef(null),aa=n.useRef(null),oe=n.useCallback(()=>{const t=aa.current;t&&(clearTimeout(t),aa.current=null)},[]),cs=n.useCallback(t=>{if(!C)return;const s=c?.username||"Player";try{vs(s,t.visitTotal,Math.max(t.remaining,0),M,{volume:A,checkoutOnly:ae})}catch{}},[C,M,A,ae,c?.username]),os=n.useCallback((t,s)=>{Et(!1);const{visitTotal:a,darts:r,preRemaining:i,remaining:u,doubleAttempts:m,finished:f,doubleWindow:d,highestCheckout:x}=t;f?(H(0),K.current=0,typeof x=="number"&&x>0&&is(l=>Math.max(l,x))):(H(u),K.current=u),fe(a),a===180?as(l=>l+1):a>=140?ns(l=>l+1):a>=100&&rs(l=>l+1),d&&m>0&&(Dt(l=>l+m),f&&ss(l=>l+1)),t.announced||cs(t);try{Bt.getState().recordVisit("offline-x01",r,a,{preRemaining:i,postRemaining:f?0:u,finish:f,bust:!1})}catch{}f&&(Q("player"),J(!0)),It(f?0:u),Z(0),X.current=0,$(0),W.current=0,z(0),U.current=0},[It,is,Q,H,fe,Z,$,z,J,as,ns,rs,Dt,ss,cs]),Qe=n.useCallback(t=>{const s=Ne.current;s&&(Ne.current=null,oe(),os(s,t))},[oe,os]),_n=n.useCallback(t=>{cs(t),Ne.current={...t,announced:!0},Et(!0),oe(),aa.current=setTimeout(()=>Qe("timeout"),Al)},[oe,Qe,cs]);n.useEffect(()=>{if(!Me)return;const t=()=>Qe("event");return window.addEventListener("ndn:darts-cleared",t),()=>window.removeEventListener("ndn:darts-cleared",t)},[Me,Qe]),n.useEffect(()=>{Me||Qe("timeout")},[Me,Qe]),n.useEffect(()=>()=>oe(),[oe]),n.useEffect(()=>{if(E===0&&En.current>0){try{window.dispatchEvent(new CustomEvent("ndn:darts-cleared",{detail:{source:"offline-play",ts:Date.now()}}))}catch{}Fe.current=0}En.current=E},[E]);const ye=c?.username||"Player 1",Ze=S==="None"?"Player 2":S,ds=Be("X01",I,O,B,V,he,Pe,ce,Ge,Ue,ze,E,_e,Gs,kt,_s,Mt,ne,L,S),pi=Be("Cricket",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,xt),gi=Be("Shanghai",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,L,S,void 0,xt,Gt),vi=Be("Killer",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,R,bt,Yt,le),ji=Be("Scam"),Ni=Be("Fives"),yi=Be("Sevens"),ms=n.useMemo(()=>{const t=ds||[],s=E>0?ce:Ue??he,a=_e>0?Ge:ze??Pe;return t.length===0?{name:L?ye:Ze,isCurrentTurn:!0,legsWon:L?B:V,score:L?I:O,lastScore:L?s:a}:t.find(r=>r.isCurrentTurn)??t[0]},[ds,L,ye,Ze,B,V,I,O,E,ce,Ue,he,Ge,ze,Pe,_e]),zn=n.useMemo(()=>{if(!ms)return[];const{matchAvg:t,allTimeAvg:s,...a}=ms;return[{...a,matchAvg:void 0,allTimeAvg:void 0}]},[ms]),wi=L?Ze:ye,Si=ms?.name??(L?ye:Ze),Ci=L?I:O,ki=L?E>0?ce:Ue??he:_e>0?Ge:ze??Pe,y=n.useCallback((t,s=1)=>{!t||s<=0||Gn(a=>({...a,[t]:(a[t]||0)+s}))},[]),T=n.useCallback(t=>{t&&Gn(s=>s[t]===void 0?s:{...s,[t]:0})},[]);fi[o];const Di=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?ue(Math.round(s),0,v):null},Mi=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?Math.max(0,Math.round(s)):null},Xn=n.useCallback(()=>{Ne.current&&(Ne.current=null),oe(),Et(!1)},[oe]);n.useCallback(t=>{const s=ue(t,0,v);Xn(),H(s),K.current=s;const a=s===0?v:s;St(a),Ie.current=a,Z(0),X.current=0,$(0),W.current=0,z(0),U.current=0,fe(null),je(0),b(0),Fe.current=0,s===0?(Q("player"),J(!0)):(Q(null),J(!1))},[Xn,H,v,St,Z,$,z,fe,je,b,Q,J]);const qn=t=>{const a=Di($n);if(a===null){ve(`Enter a number between 0 and ${v}`,{type:"error",timeout:2500});return}lt(a),He(0),be(0),Xe(null),qe(0),ts(0),Kn(""),Q(null),J(!1)},Yn=n.useCallback((t,s)=>{t==="player"?($t(s),ea("")):(Kt(s),ta("")),Q(null),J(!1)},[Kt,ta,ea,Q,$t,J]),us=t=>{const a=Mi(t==="player"?Wn:Un);if(a===null){ve("Enter a non-negative whole number for legs",{type:"error",timeout:2500});return}sa({target:t,value:a,stage:1})},Ai=n.useCallback(()=>{sa(t=>t&&(t.stage===1?{...t,stage:2}:(Yn(t.target,t.value),null)))},[Yn]),Ft=n.useCallback(()=>{sa(null)},[]);n.useEffect(()=>{if(!ls)return;const t=s=>{s.key==="Escape"&&(s.preventDefault(),Ft())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[Ft,ls]);const we=(t=>{switch(t){case"small":return"px-1.5 py-0.5 text-xs";case"large":return"px-3 py-1 text-sm";default:return"px-2 py-0.5 text-sm"}})(js),et=n.useRef(null),tt=n.useRef(null),na=n.useRef(null),[st,ra]=n.useState("first"),[xs,Jn]=n.useState(1),Ti=n.useRef(null);n.useEffect(()=>{const t=Math.max(1,Math.floor(Number(xs)||1)),s=st==="first"?t:Math.max(1,Math.ceil(t/2));Pa(s)},[st,xs]),n.useEffect(()=>{if(!Ve){Wa(1),Ua(!1);return}const t=()=>{const r=et.current,i=tt.current;if(!r||!i)return;const u=na.current?na.current.getBoundingClientRect().height:0,m=Math.max(0,r.clientHeight-u-6),f=Math.max(0,r.clientWidth-8),d=i.getBoundingClientRect(),x=Ut||1,l=d.height/x,h=d.width/x,q=m>0?m/l:1,de=f>0?f/h:1,Se=Math.min(1,Math.max(.5,Math.min(q,de))),ee=l*Se,F=m>0&&ee-m>1;Ua(F),Wa(Se)};t();const s=window.ResizeObserver,a=s?new s(()=>t()):null;return a&&et.current&&a.observe(et.current),a&&tt.current&&a.observe(tt.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t);try{a&&et.current&&a.unobserve(et.current)}catch{}try{a&&tt.current&&a.unobserve(tt.current)}catch{}}},[Ve,Ut]),n.useEffect(()=>{const t=s=>{const a=s?.detail?.mode;a&&(Ta(a),at())};return window.addEventListener("ndn:auto-start",t),()=>window.removeEventListener("ndn:auto-start",t)},[]),n.useEffect(()=>{const t=s=>{const a=s?.detail?.formatType,r=s?.detail?.formatCount,i=s?.detail?.startScore;(a==="first"||a==="best")&&ra(a),typeof r=="number"&&isFinite(r)&&Jn(Math.max(1,Math.floor(r))),typeof i=="number"&&isFinite(i)&&Ra(Math.max(1,Math.floor(i)))};return window.addEventListener("ndn:offline-format",t),()=>window.removeEventListener("ndn:offline-format",t)},[]),n.useEffect(()=>{if(!Y)return;const t=setTimeout(()=>at(),50);return()=>clearTimeout(t)},[Y]),n.useEffect(()=>{if(!ys||L||S==="None"||ii<=0)return;let t,s=performance.now();const a=r=>{const i=r-s;s=r,Ct(u=>{const m=u-i;if(m<=0){let f=0,d=0,x=O;for(be(0);f<3&&x>0;){const l=Tl(x,S),h=ue(l-f*20,0,Math.min(60,x)),q=x-h;if(ts(h),Ws(ee=>ee+1),Pn(ee=>ee+1),q<0){x=O,He(0),qe(0),d=0,Xe(0),be(0);break}d+=h,He(ee=>ee+h),Hn(ee=>ee+h);const de=x,Se=q;if(de>50&&Se<=50?qe(1):de<=50&&qe(ee=>ee+1),x=q,f+=1,be(f),x===0)break}if(lt(x),x===0){d===180?qs(h=>h+1):d>=140?Ys(h=>h+1):d>=100&&Js(h=>h+1);const l=O;l<=170&&Vn(h=>Math.max(h,l)),O<=50&&(Fn(h=>h+(Us>0?Us:1)),In(h=>h+1)),Xe(d),He(0),qe(0),be(0),Q("ai"),J(!0)}return x>0&&f>=3&&(d===180?qs(l=>l+1):d>=140?Ys(l=>l+1):d>=100&&Js(l=>l+1),Xe(d),He(0),qe(0),be(0)),be(0),mt(!0),0}return m}),t=requestAnimationFrame(a)};return t=requestAnimationFrame(a),()=>cancelAnimationFrame(t)},[ys,L,S,O]);function at(){Vt(!0),H(v),K.current=v,lt(v),Fa(!1),ot(!0),mt(!0),b(0),Ee(0),je(0),$(0),W.current=0,St(v),Z(0),fe(null),z(0),Ct(0),Ws(0),ts(0),He(0),be(0),Xe(null),Q(null),$t(0),Kt(0),Ba([]),Is(0),Ps(0),Hs(!1),Ye(0),Pn(0),Rt(0),Hn(0),as(0),ns(0),rs(0),qs(0),Ys(0),Js(0),is(0),Vn(0),Dt(0),ss(0),Fn(0),In(0),T("X01");const t=Math.max(1,Math.floor(Number(xs)||1));if(Pa(st==="first"?t:Math.max(1,Math.ceil(t/2))),it)try{pe({mode:o,x01Start:v,firstTo:ct,aiLevel:S})}catch{}}function Ri(){H(v),K.current=v,lt(v),Fa(!1),ot(!0),mt(!0),b(0),Ee(0),je(0),$(0),W.current=0,St(v),Z(0),Ie.current=v,X.current=0,fe(null),z(0),U.current=0,U.current=0,Ct(0),Ws(0),ts(0),He(0),be(0),Xe(null),Q(null)}function It(t){$(0),W.current=0,St(t===0?v:t),Ie.current=t===0?v:t,z(0),U.current=0,S!=="None"?(mt(!1),Ct(Va)):(Ct(0),mt(!0))}function nt(t){if(Me&&Ne.current){bi||Et(!0),ve("Remove your darts before starting the next throw",{type:"info",timeout:1800});return}y("X01");const s=K.current,a=W.current,r=X.current,i=Ie.current,u=U.current,m=s-t,f=a+1;if(je(t),Ee(F=>F+1),Ye(F=>F+1),m<0){try{const F=s,ba=i;Bt.getState().recordVisit("offline-x01",f,0,{preRemaining:F,postRemaining:ba,bust:!0,finish:!1})}catch{}if(H(i),K.current=i,s<=50){const F=(u||0)+1;Dt(ba=>ba+F)}if(C)try{vs(c?.username||"Player",0,Math.max(i,0),M,{volume:A,checkoutOnly:ae})}catch{}fe(0),b(0),Z(0),X.current=0,z(0),U.current=0,It(i);return}H(m),K.current=m,$(f),W.current=f;const d=r+t;Z(d),X.current=d,Rt(F=>F+t),b(0);const x=s,l=m,h=x>50&&l<=50,q=x<=50;h?(z(1),U.current=1):q&&(z(F=>F+1),U.current=(u||0)+1);const de=U.current||0,Se=x<=50,ee=Se?Math.max(de,Math.min(f,3)):0;if(m===0){const F={visitTotal:d,darts:f,preRemaining:s,remaining:0,doubleAttempts:ee,finished:!0,doubleWindow:Se,highestCheckout:i<=170?i:null};Me?_n(F):os(F,"immediate");return}if(f>=3){const F={visitTotal:d,darts:f,preRemaining:s,remaining:m,doubleAttempts:ee,finished:!1,doubleWindow:Se,highestCheckout:null};Me?_n(F):os(F,"immediate");return}}function hs(){const t=ue(Math.round(Number(j)||0),0,60);nt(t)}function Li(t){if(!Number.isFinite(t))return!1;const s=Ie.current,a=K.current,r=W.current,i=X.current,u=r>0||i>0;u&&(H(s),K.current=s,$(0),W.current=0,Z(0),X.current=0,z(0),U.current=0,je(0),b(0),Ee(l=>Math.max(0,l-r)),Ye(l=>Math.max(0,l-r)),Rt(l=>Math.max(0,l-i)),Fe.current=0);const m=u?s:a,f=m<=170?170:180,d=ue(Math.round(t),0,f);y("X01",3),Ee(l=>l+3),Ye(l=>l+3),$(3),W.current=3,Z(d),X.current=d,fe(d),d===180?as(l=>l+1):d>=140?ns(l=>l+1):d>=100&&rs(l=>l+1);const x=m-d;if(x<0){if(C)try{vs(ye,0,Math.max(s,0),M,{volume:A,checkoutOnly:ae})}catch{}try{Bt.getState().recordVisit("offline-x01",3,0,{preRemaining:m,postRemaining:s,bust:!0,finish:!1})}catch{}return H(s),K.current=s,fe(0),Z(0),X.current=0,$(0),W.current=0,z(0),U.current=0,It(s),!0}if(H(x),K.current=x,Rt(l=>l+d),C)try{vs(ye,d,Math.max(x,0),M,{volume:A,checkoutOnly:ae})}catch{}if(m<=50&&(Dt(l=>l+3),x===0&&ss(l=>l+1)),x===0){m<=170&&is(l=>Math.max(l,m));try{Bt.getState().recordVisit("offline-x01",3,d,{preRemaining:m,postRemaining:0,finish:!0,bust:!1})}catch{}return Q("player"),J(!0),$(0),W.current=0,Z(0),X.current=0,z(0),U.current=0,!0}try{Bt.getState().recordVisit("offline-x01",3,d,{preRemaining:m,postRemaining:x,finish:!1,bust:!1})}catch{}return It(x),Z(0),X.current=0,$(0),W.current=0,z(0),U.current=0,!0}const[fs,bs]=n.useState(""),Qn=t=>{if(!t){bs("");return}const s=t.replace(/[^0-9]/g,"");if(!s){bs("");return}const a=Number(s);if(!Number.isFinite(a))return;const r=K.current<=170?170:180,i=ue(Math.round(a),0,r);bs(String(i))};function Pt(){if(!fs){alert("Enter a number 0â€“180 for visit total");return}const t=Number(fs);if(!Number.isFinite(t)){alert("Enter a number 0â€“180 for visit total");return}const s=K.current<=170?170:180,a=ue(Math.round(t),0,s);t>s&&ve(`Visit totals cannot exceed ${s}.`,{type:"info",timeout:2200}),Li(a)&&bs("")}const ia=n.useCallback(()=>{Ne.current&&(Ne.current=null,oe(),Et(!1));const t=W.current,s=X.current,a=Ie.current;t===0&&s===0||(H(a),K.current=a,$(0),W.current=0,Z(0),X.current=0,z(0),U.current=0,je(0),b(0),Ee(r=>Math.max(0,r-t)),Ye(r=>Math.max(0,r-t)),Rt(r=>Math.max(0,r-s)),Fe.current=0)},[oe]);n.useEffect(()=>{const t=s=>{const a=s?.detail;!a||a?.source==="offline-play"||ia()};return window.addEventListener("ndn:clear-visit-request",t),()=>window.removeEventListener("ndn:clear-visit-request",t)},[ia]);function Zn(t){y("Double Practice");const s=ue(Math.round(t||0),0,60);if(je(s),Ee(a=>a+1),Ye(a=>a+1),Dr(s,ut)){const a=Ss+1;Cs(a),ws(r=>Math.min(20,r+1)),a>=21&&(Q("player"),J(!0))}b(0)}function er(){Zn(Number(j))}function tr(){const t=rt(G);if(t==null){alert("Enter like D16, 50, 25, T20");return}Zn(t),P("")}function sr(t,s,a){if(Ja)return;y("Bob's 27");const r=Xa,i=s==="DOUBLE"&&a===r||!s&&t===r*2;i&&Ms(u=>u+1),Ya(u=>{const m=u+1;if(m>=3){const f=Jr+(i?1:0);f>0?Ds(x=>x+f*r*2):Ds(x=>x-r*2);const d=r+1;return qa(d),Ms(0),d>20&&Qa(!0),0}return m})}function ar(){sr(Math.max(0,j|0)),b(0)}function nr(){qa(1),Ds(27),Ya(0),Ms(0),Qa(!1),T("Bob's 27")}function la(t){y("Count-Up"),tn(s=>s+Math.max(0,t|0)),sn(s=>{const a=s+1;return a>=3?(en(r=>r+1),0):a})}function ca(t){y("High Score"),rn(s=>s+Math.max(0,t|0)),ln(s=>{const a=s+1;return a>=3?(nn(r=>r+1),0):a})}function oa(t){y("Low Score"),dn(s=>s+Math.max(0,t|0)),mn(s=>{const a=s+1;return a>=3?(on(r=>r+1),0):a})}function rr(t,s,a,r,i,u,m,f){const d=t-m;if(!(d<0))if(d===0){if(f==="DOUBLE"||f==="INNER_BULL"){u(x=>x+1),i(x=>x+1),r(()=>0),s(t);return}s(d)}else s(d);r(x=>{const l=x+1;return l>=3?(i(h=>h+1),0):l})}function ir(t,s){y("Checkout 170"),rr(As,Ts,un,xn,fn,pn,t,s),un+1>=3&&Ts(170)}function lr(t,s){y("Checkout 121"),rr(Rs,Ls,gn,vn,Nn,wn,t,s),gn+1>=3&&Ls(121)}function ps(t){const s=rt(G);if(s==null){alert("Enter like T20, D16, 25, 50");return}const a=G.trim().toUpperCase(),r=a.startsWith("D")||a==="50"||a==="BULL"||a==="DBULL"||a==="IBULL"||a.includes("INNER");t?ir(s,r?"DOUBLE":void 0):lr(s,r?"DOUBLE":void 0),P("")}function Ei(){Ts(170),xn(0),fn(0),pn(0),T("Checkout 170")}function Fi(){Ls(121),vn(0),Nn(0),wn(0),T("Checkout 121")}function da(t,s,a){if(Cn)return;y("Treble Practice"),(s==="TRIPLE"&&a===Te||!s&&t===Te*3)&&Is(i=>i+1),Ps(i=>{const u=i+1;if(u%3===0&&[20,19,18].includes(Te)){const m=[20,19,18],f=m.indexOf(Te),d=m[(f+1)%m.length];Es(d)}return ft>0&&u>=ft&&Hs(!0),u})}function cr(){Is(0),Ps(0),Hs(!1),T("Treble Practice")}function Ii(t,s,a){y("Baseball"),Dn(r=>{const i={...r};return rl(i,t,s,a),i})}function Pi(){Dn(yr()),T("Baseball")}function Hi(t,s,a){y("Golf"),An(r=>{const i={...r};return il(i,t,s,a),i})}function Oi(){An(wr()),T("Golf")}function Bi(t,s,a,r){y("Tic Tac Toe"),Tn(i=>{const u={...i,board:[...i.board]};return ll(u,t,s,a,r),u})}function Vi(){Tn(Sr()),T("Tic Tac Toe")}function $i(t,s,a){y("American Cricket"),Rn(r=>{const i={...r,marks:{...r.marks}};return cl(i,t,s,a,()=>!1),i})}function or(){Rn(Cr()),T("American Cricket")}function ma(t,s,a){y("Around the Clock");const r=Ce[Ae];let i=!1;if(typeof a=="number"&&a===r&&(s==="SINGLE"||s==="DOUBLE"||s==="TRIPLE")&&(i=!0),r===25&&(s==="BULL"||t===25)&&(i=!0),r===50&&(s==="INNER_BULL"||t===50)&&(i=!0),i||(t===r||t===r*2||t===r*3)&&(i=!0),i){const u=_a+1;za(u),Ga(m=>m+1)}}function dr(){ma(Math.max(0,j|0)),b(0)}function mr(){const t=rt(G);if(t==null){alert("Enter like T20, D5, 25, 50");return}ma(t),P("")}function ua(t,s,a){y("Cricket"),ks(r=>{const i={...r,marks:{...r.marks}};return ol(i,t,s,a,()=>!1),i}),se(r=>{const i=r+1;return i>=3?0:i})}function ur(){ua(Math.max(0,j|0)),b(0)}function xa(t,s,a){y("Shanghai"),_t(r=>{const i={...r,turnHits:{...r.turnHits}};return dl(i,t,s,a),i}),se(r=>{const i=r+1;return i>=3?(_t(u=>{const m={...u,turnHits:{...u.turnHits}};return ml(m),m}),0):i})}function xr(){xa(Math.max(0,j|0)),b(0)}function hr(t,s,a){y("Halve It"),zt(r=>{const i={...r,targets:[...r.targets]};return ul(i,t,s,a),i}),se(r=>{const i=r+1;return i>=3?(zt(u=>{const m={...u,targets:[...u.targets]};return xl(m),m}),0):i})}function fr(){hr(Math.max(0,j|0)),b(0)}function br(t,s,a){y("High-Low"),qt(r=>{const i={...r};return hl(i,t,s,a),i}),se(r=>{const i=r+1;return i>=3?(qt(u=>{const m={...u};return fl(m),m}),0):i})}function pr(){br(Math.max(0,j|0)),b(0)}function gr(){const t=G.trim().toUpperCase();if(!t)return null;if(t==="50"||t==="BULL"||t==="DBULL"||t==="IBULL")return 50;if(t==="25"||t==="OBULL")return 25;const s=t.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!s)return null;const a=s[1]||"S",r=parseInt(s[2],10);return r<1||r>20?null:r*(a==="S"?1:a==="D"?2:3)}function Ht(){const t=gr();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}nt(t),P("")}function vr(){const t=Zs.trim().split(`
`).map(s=>s.trim()).filter(s=>s);if(t.length!==0){for(const s of t){const a=rt(s);if(a==null){alert(`Invalid score: ${s}`);return}nt(a)}Lt("")}}function ha(){E!==0&&(H(t=>t+he),$(t=>Math.max(0,t-1)))}function gs(){const t=gr();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}if(E===0){Ht();return}const s=he;H(a=>a+s),$(a=>Math.max(0,a-1)),setTimeout(()=>nt(t),0),P("")}function Ki(){const t=Wt??"player",s=t==="player"?Zt||void 0:Us||void 0,a=1,r=t==="player"?Qt:es;Ba([...ne,{winner:t,doubleDarts:Ha,checkoutDarts:Oa,winnerDarts:r,doublesAtt:s,doublesHit:a}]),J(!1);let i=B,u=V;if(Wt==="player"?i+=1:Wt==="ai"&&(u+=1),$t(i),Kt(u),Q(null),i>=ct||u>=ct){try{Xi(o,t==="player")}catch{}ot(!1),Vt(!1),H(v),lt(v),Qs(!0);return}Ri()}const fa=!Nr.includes(o)&&!(c?.fullAccess||c?.admin);return e.jsxs("div",{className:"card ndn-game-shell relative overflow-hidden",children:[e.jsxs("h2",{className:"text-2xl font-bold text-brand-700 mb-4",children:["Offline Game Modes ",p==="classic"?e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-white/10 border border-white/10 align-middle",children:"Classic layout"}):e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-400/30 text-emerald-200 align-middle",children:"Modern layout"})]}),e.jsxs("div",{className:"ndn-shell-body",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[e.jsx("label",{className:"font-semibold",children:"Select game mode:"}),e.jsxs("select",{className:"input w-full",value:o,onChange:t=>Ta(t.target.value),children:[Nr.map(t=>e.jsx("option",{value:t,children:t},t)),Gi.map(t=>e.jsxs("option",{value:t,disabled:!(c?.fullAccess||c?.admin),children:[t," ",c?.fullAccess||c?.admin?"":"(Premium)"]},t))]}),e.jsx(qi,{gameMode:o,compact:!0}),o==="Treble Practice"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"font-semibold",children:"Throws per game"}),e.jsx("input",{className:"input w-full",type:"number",min:3,step:3,value:ft,onChange:t=>ni(Math.max(3,Math.floor(Number(t.target.value)||30)))})]}),e.jsx("div",{className:"sm:col-span-2 text-xs text-slate-300",children:"Target cycles T20â†’T19â†’T18 every 3 darts. Game ends after the selected number of throws."})]}),!c?.fullAccess&&e.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”’"}),e.jsx("span",{children:"Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM."})]}),o==="X01"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-semibold mt-2",children:"Enter starting score (1-1001):"}),e.jsx("input",{className:"input w-full",type:"number",min:1,max:1001,value:v,onChange:t=>Ra(Number(t.target.value))}),e.jsx("label",{className:"font-semibold mt-2",children:"Play against AI bot?"}),e.jsxs("select",{className:"input w-full",value:S,onChange:t=>Ur(t.target.value),children:[e.jsx("option",{value:"None",children:"None"}),Ml.map(t=>e.jsx("option",{value:t,children:t},t))]}),S!=="None"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"font-semibold",children:"AI throw delay (seconds)"}),e.jsx("input",{className:"input w-full",type:"number",min:.5,max:10,step:.5,value:Va/1e3,onChange:t=>Xr(Math.round(Number(t.target.value)*1e3))})]}),e.jsx("div",{className:"text-sm text-slate-300",children:"Controls how long the AI waits before its visit."})]}),e.jsx("button",{className:"btn mt-2",onClick:()=>La(!0),children:"X01 Rules & Regulations!"})]}),o==="Double Practice"&&e.jsx("div",{className:"mt-2 text-brand-600",children:"Hit doubles D1 â†’ D20 â†’ DBULL in as few darts as possible. AI and X01 settings donâ€™t apply."})]}),!Ea&&e.jsx("button",{className:"btn",disabled:fa,title:fa?"PREMIUM required for this mode":"",onClick:at,children:"Start Match"}),ys&&e.jsx("div",{className:`absolute inset-0 z-[1000] ${dt?"":"flex items-center justify-center p-3 sm:p-4"}`,children:e.jsx(Ot,{storageKey:"ndn:modal:offline-match",className:`${dt?"w-full h-full ndn-modal-tight":""} relative flex flex-col overflow-hidden`,fullScreen:dt,defaultWidth:1100,defaultHeight:720,minWidth:720,minHeight:480,maxWidth:1600,maxHeight:1200,initialFitHeight:!0,children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-x-hidden pr-1 pt-2 pb-2",style:{overflowY:Ve&&!qr?"hidden":"auto"},ref:t=>{et.current=t},children:[e.jsx("div",{ref:t=>{na.current=t},children:e.jsx(Yi,{left:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden xs:inline px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-[10px] sm:text-xs",children:"Game Mode"}),e.jsxs("span",{className:"font-medium whitespace-nowrap",children:[o,o==="X01"?` / ${v}`:""]}),e.jsxs("span",{className:"opacity-80 whitespace-nowrap",children:["First to ",ct," Â· Legs ",B,"-",V]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full border text-[10px] sm:text-xs ${p==="modern"?"bg-emerald-500/15 text-emerald-200 border-emerald-400/30":"bg-white/10 text-white/70 border-white/20"}`,children:p==="modern"?"Modern layout":"Classic layout"})]}),right:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden items-center gap-2 mr-2 text-xs",children:[e.jsx("span",{className:"opacity-80",children:"Cam"}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>ke(Math.max(.5,Math.round((ge-.05)*100)/100)),title:"Decrease camera size",children:"âˆ’"}),e.jsxs("span",{className:"w-9 text-center",children:[Math.round(ge*100),"%"]}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>ke(Math.min(1.25,Math.round((ge+.05)*100)/100)),title:"Increase camera size",children:"+"})]}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:Ve?"Actual Size":"Fit All",onClick:()=>Ka(t=>!t),children:Ve?"Actual Size":"Fit All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:dt?"Restore":"Maximize",onClick:()=>$a(t=>!t),children:dt?"Restore":"Maximize"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{at()},children:"Restart"}),e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:()=>{ot(!1),Vt(!1)},children:"Quit"})]})})}),e.jsxs("div",{ref:t=>{tt.current=t},className:"will-change-transform",style:Ve?{transform:`scale(${Ut})`,transformOrigin:"top left",width:"100%",fontSize:`${Math.max(.8,Math.min(1,Ut))}em`}:void 0,children:[e.jsx("h3",{className:"text-xl font-bold mb-2 mt-1 leading-tight",children:o==="X01"?"X01 Match":o}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Mode: ",o]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Start: ",v]}),e.jsxs("div",{ref:Ti,className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[e.jsx("span",{children:"Format:"}),(()=>{const t=I!==v||O!==v||E>0,s=`px-2 py-0.5 rounded border text-xs ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"} `;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:`${s} ${st==="first"?"bg-indigo-500/20 text-indigo-100 border-indigo-400/30":"bg-white/10 text-white/80 border-white/20"}`,onClick:()=>{t||ra("first")},title:"First to N",children:"First to"}),e.jsx("button",{type:"button",className:`${s} ${st==="best"?"bg-indigo-500/20 text-indigo-100 border-indigo-400/30":"bg-white/10 text-white/80 border-white/20"}`,onClick:()=>{t||ra("best")},title:"Best of N (wins = ceil(N/2)",children:"Best of"})]}),e.jsx("input",{className:`input w-16 text-center ${t?"opacity-50":""}`,type:"number",min:1,step:1,value:xs,onChange:a=>Jn(Math.max(1,Math.floor(Number(a.target.value)||1))),disabled:t,title:st==="first"?"First to N":"Best of N (wins = ceil(N/2))"})]})})()]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs: ",B,"â€“",V]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px] flex-wrap",children:[e.jsx("span",{className:"opacity-70",children:"Match"}),e.jsxs("select",{className:`btn ${we}`,value:Or,onChange:t=>Br(t.target.value),children:[e.jsx("option",{value:"singles",children:"Singles"}),e.jsx("option",{value:"doubles",children:"Doubles"})]}),e.jsx("input",{className:`input ${we} w-[7.5rem]`,value:Vr,onChange:t=>$r(t.target.value),placeholder:"Team A"}),e.jsx("span",{className:"opacity-50",children:"vs"}),e.jsx("input",{className:`input ${we} w-[7.5rem]`,value:Kr,onChange:t=>Wr(t.target.value),placeholder:"Team B"})]})]}),o!=="X01"?e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2",children:[o==="Double Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Na[ut]?.label||"â€”"})]})}),o==="Around the Clock"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Ce[Ae]===25?"25 (Outer Bull)":Ce[Ae]===50?"50 (Inner Bull)":Ce[Ae]||"â€”"})]})}),o==="Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Cricket â€” Close 20â€“15 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-[11px] mb-2",children:Qi.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,xt.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points: ",e.jsx("span",{className:"font-semibold",children:xt.points})]}),Ji(xt)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{ks(pa()),se(0),T("Cricket")},children:"Reset"})]})]}),o==="Shanghai"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Round"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:Gt.round})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Gt.score]}),Gt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{_t(ga()),se(0),T("Shanghai")},children:"Reset"})]})]}),o==="Halve It"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Stage"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[ht.stage+1,"/",ht.targets.length]})]}),e.jsxs("div",{className:"text-sm",children:["Target: ",e.jsx("span",{className:"font-semibold",children:(()=>{const t=Zi(ht);return t?t.kind==="ANY_NUMBER"?"Any":t.kind==="BULL"?"Bull":t.kind==="DOUBLE"||t.kind==="TRIPLE"||t.kind==="NUMBER"?`${t.kind} ${t.num}`:"â€”":"â€”"})()})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ht.score]}),ht.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{zt(va()),se(0),T("Halve It")},children:"Reset"})]})]}),o==="High-Low"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Xt.round," Â· Target ",Xt.target]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Xt.score]}),Xt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{qt(ja()),se(0),T("High-Low")},children:"Reset"})]})]}),o==="Bob's 27"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Target"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold",children:["D",Xa]})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Yr]}),Ja&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:nr,children:"Reset"})]})]}),o==="Count-Up"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Za,"/8"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Qr]})]}),o==="High Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",an,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ei]})]}),o==="Low Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",cn,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",si]})]}),o==="Checkout 170"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:As}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",hn," Â· Successes: ",bn]})]}),o==="Checkout 121"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Rs}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",jn," Â· Successes: ",yn]})]}),o==="Treble Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Treble Target: T",Te]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Hits: ",Fs]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("label",{className:"text-sm",children:"Target"}),e.jsx("div",{className:"inline-flex items-center gap-1",children:[20,19,18].map(t=>e.jsxs("button",{className:`btn px-2 py-0.5 text-xs ${Te===t?"bg-emerald-600/30 border border-emerald-400/30":""}`,onClick:()=>Es(t),children:["T",t]},`tpick-header-${t}`))}),e.jsx("span",{className:"opacity-60 text-xs",children:"or"}),e.jsx("select",{className:"input w-24",value:Te,onChange:t=>Es(parseInt(t.target.value,10)),children:Array.from({length:20},(t,s)=>s+1).map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:cr,children:"Reset"})]})]})}),o==="Baseball"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Inning"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:kn.inning}),e.jsxs("div",{className:"text-sm",children:["Score: ",e.jsx("span",{className:"font-semibold",children:kn.score})]})]}),o==="Golf"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Hole"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Mn.hole}),e.jsxs("div",{className:"text-sm",children:["Strokes: ",e.jsx("span",{className:"font-semibold",children:Mn.strokes})]})]}),o==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Turn"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Re.turn}),Re.finished&&e.jsxs("div",{className:"mt-1 text-xs",children:["Winner: ",Re.winner||"â€”"]})]}),o==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Target"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:ya[Jt.targetIndex]}),e.jsxs("div",{className:"text-sm",children:["Progress: ",e.jsxs("span",{className:"font-semibold",children:[Jt.targetIndex+1,"/",ya.length]})]}),Jt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["ðŸŽ‰ Finished in ",Jt.darts," darts!"]})]}),o==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[jt.score,"/",jt.target]}),e.jsxs("div",{className:"text-sm",children:["Darts: ",e.jsx("span",{className:"font-semibold",children:jt.darts})]}),jt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",jt.target,"!"]})]}),o==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[yt.score,"/",yt.target]}),e.jsxs("div",{className:"text-sm",children:["Darts: ",e.jsx("span",{className:"font-semibold",children:yt.darts})]}),yt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",yt.target,"!"]})]}),o==="American Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Close 20â€“12 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-10 gap-1 text-center text-[11px] mb-2",children:tl.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,Os.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points: ",e.jsx("span",{className:"font-semibold",children:Os.points})]}),el(Os)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:or,children:"Reset"})]})]}),o==="Killer"&&e.jsx(e.Fragment,{children:Ln?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Turn"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:R[le]?.name||"â€”"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:We?`${R.find(t=>t.id===We)?.name||"Winner"} Wins`:ri||"Ready"})]}):e.jsx("div",{className:"text-xs text-slate-600",children:"Setup players and assign numbers"})})]}):p==="modern"?e.jsx("div",{className:"space-y-3 mb-2",children:Ns?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Manual scoring active"}),e.jsx("div",{className:"text-xs opacity-70",children:"Camera previews are disabled. Use the manual entry controls below to record your turn."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-wrap gap-1.5 mt-1",children:e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"opacity-70",children:"Cam"}),e.jsx("button",{className:`btn ${we}`,onClick:()=>ke(Math.max(.5,Math.round((ge-.05)*100)/100)),children:"âˆ’"}),e.jsxs("span",{className:`btn ${we} min-w-[2.5rem] text-center`,children:[Math.round(ge*100),"%"]}),e.jsx("button",{className:`btn ${we}`,onClick:()=>ke(Math.min(1.25,Math.round((ge+.05)*100)/100)),children:"+"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${we}`,title:"Toggle fit/fill",onClick:()=>te(_==="fill"?"fit":"fill"),children:_==="fill"?"Fill":"Fit"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${we}`,title:"Toggle camera aspect",onClick:()=>k(De==="square"?"wide":"square"),children:De==="square"?"Square":"Wide"})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row-reverse md:items-start md:gap-6",children:[e.jsx("div",{className:"w-full h-[260px] rounded-2xl overflow-hidden bg-black shadow-xl md:w-[48%] md:min-h-[420px]",children:e.jsx(w,{scoringMode:"x01",showToolbar:N,onAutoDart:(t,s,a)=>{nt(t)}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-[minmax(0,1fr)_300px] md:items-start md:gap-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Current Shooter"}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-white",children:Si}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-white/80",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Remaining"}),e.jsx("div",{className:"font-mono text-lg text-white",children:Ci})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Last Dart"}),e.jsx("div",{className:"font-mono text-lg text-white",children:ki||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Match Legs"}),e.jsxs("div",{className:"font-semibold text-white",children:[B,"-",V]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Next Up"}),e.jsx("div",{className:"font-medium text-white",children:wi})]})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(me,{gameMode:o,players:zn,matchScore:`${B}-${V}`})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(me,{gameMode:o,players:zn,matchScore:`${B}-${V}`})}),o==="X01"&&e.jsxs("div",{className:"mt-3 md:mt-4 rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Manual Scoreboard Override"}),e.jsxs("p",{className:"mt-1 text-xs text-white/40",children:["Adjust the live totals if a dart was misread. Values are clamped between 0 and ",v,"."]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:ye}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Commit Visit"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Pt,children:"Commit Visit"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:Wn,onChange:t=>ea(t.target.value),onKeyDown:t=>{t.key==="Enter"&&us("player")},placeholder:`${B}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>us("player"),children:"Set"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:Ze}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Three Dart Edit"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:v,value:$n,onChange:t=>Kn(t.target.value),onKeyDown:t=>{t.key==="Enter"&&qn()},placeholder:`${O}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>qn(),children:"Set"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:Un,onChange:t=>ta(t.target.value),onKeyDown:t=>{t.key==="Enter"&&us("ai")},placeholder:`${V}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>us("ai"),children:"Set"})]})]})]})]})]})]})]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:[grid-template-columns:minmax(0,0.75fr)_minmax(0,3fr)_minmax(0,0.75fr)] gap-2 mb-2 items-stretch min-w-0",children:e.jsxs("div",{className:"flex items-stretch justify-center md:px-3 min-w-0",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"You Remain"}),L?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:I}),e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-400/70",style:{width:`${Math.max(0,Math.min(100,(1-I/v)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",e.jsx("span",{className:"font-semibold",children:he})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score: ",e.jsx("span",{className:"font-semibold",children:E>0?ce:Ue??he})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",e.jsx("span",{className:"font-semibold",children:At>0?(zs/At*3).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"text-xs opacity-70 flex items-center gap-2",children:[e.jsxs("span",{children:["Darts thrown: ",Qt]}),e.jsx("span",{className:"inline-flex items-center gap-1","aria-label":"Visit darts",children:[0,1,2].map(t=>e.jsx("span",{className:`w-2 h-2 rounded-full ${t<E?"bg-emerald-400":"bg-white/20"}`},t))})]}),e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",e.jsxs("span",{className:"font-semibold",children:["Att ",kt," Â· Hit ",Gs]})]}),I<=170&&I>0&&(()=>{const s=sl(I,D)[0]||"â€”";return e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-sm",children:[e.jsx("span",{className:"opacity-70",children:"Checkout"}),e.jsx("span",{className:"font-semibold",children:s})]})})()]}),e.jsx("div",{className:"flex items-stretch justify-center md:justify-end md:px-3 min-w-0 flex-1 min-h-0 ndn-camera-tall",children:e.jsx(gl,{storageKey:"ndn:camera:tile:offline:center:v4",className:"relative rounded-2xl overflow-hidden bg-black w-full camera-fullwidth-card",defaultWidth:0,defaultHeight:0,minWidth:300,minHeight:300,maxWidth:2e3,maxHeight:1200,autoFill:!0,children:e.jsx(kr,{label:"Your Board",autoStart:!0,className:"min-w-0 h-full",aspect:"classic",fill:!0})})}),e.jsxs("div",{className:`mt-2 ${Aa==="small"?"p-2":Aa==="large"?"p-4":"p-3"} rounded-2xl bg-slate-900/40 border border-white/10 text-white ${js==="small"?"text-xs":js==="large"?"text-base":"text-sm"}`,children:[e.jsx("div",{className:"font-semibold mb-2",children:"Match Summary"}),(()=>{const t=L?c?.username||"You":S==="None"?"â€”":`${S} AI`,s=L?I:S==="None"?0:O,a=L?E>0?ce:Ue??he:_e>0?Ge:ze??Pe,r=L?Qt:es,i=v-(L?I:S==="None"?v:O),u=r>0?i/r*3:0,m=`${B}-${V}`,f=ne.length>0?`${Math.min(...ne.map(d=>d.doubleDarts+(d.checkoutDarts||0)))||0} darts`:"â€”";return e.jsxs("div",{className:"grid grid-cols-2 gap-y-1",children:[e.jsx("div",{className:"opacity-80",children:"Current score"}),e.jsx("div",{className:"font-mono text-right",children:m}),e.jsx("div",{className:"opacity-80",children:"Current thrower"}),e.jsx("div",{className:"text-right font-semibold text-lg",children:t}),e.jsx("div",{className:"opacity-80",children:"Score remaining"}),e.jsx("div",{className:"text-right font-mono font-bold text-xl",children:s}),e.jsx("div",{className:"opacity-80",children:"3-dart avg"}),e.jsx("div",{className:"text-right font-mono",children:u.toFixed(1)}),e.jsx("div",{className:"opacity-80",children:"Last score"}),e.jsx("div",{className:"text-right font-mono",children:a}),e.jsx("div",{className:"opacity-80",children:"Best leg"}),e.jsx("div",{className:"text-right",children:f})]})})()]}),e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs flex items-center justify-between opacity-80",children:[e.jsxs("span",{children:[S==="None"?"Opponent":`${S} AI`," Remain"]}),L?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:S!=="None"?O:"N/A"}),S!=="None"&&e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-fuchsia-400/70",style:{width:`${Math.max(0,Math.min(100,(1-O/v)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart: ",e.jsx("span",{className:"font-semibold",children:S==="None"?0:Pe})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score: ",e.jsx("span",{className:"font-semibold",children:S==="None"?"â€”":_e>0?Ge:ze??Pe})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg: ",e.jsx("span",{className:"font-semibold",children:S!=="None"?Tt>0?(Xs/Tt*3).toFixed(1):"0.0":"â€”"})]}),S!=="None"&&e.jsxs("div",{className:"text-xs opacity-70",children:["Darts thrown: ",es]}),S!=="None"&&e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles: ",e.jsxs("span",{className:"font-semibold",children:["Att ",Mt," Â· Hit ",_s]})]})]})]})}),o!=="X01"?e.jsxs("div",{className:"space-y-2",children:[o==="Double Practice"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Na[ut]?.label||"â€”"})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,onAutoDart:(t,s)=>{if((s==="DOUBLE"||s==="INNER_BULL")&&Dr(t,ut)){const r=Ss+1,i=ut+1;Cs(r),ws(i),r>=Na.length&&setTimeout(()=>{Cs(0),ws(0)},250)}},immediateAutoCommit:!0})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&er()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:er,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&tr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:tr,children:"Add"})]})]}),e.jsxs("div",{className:"text-xs text-slate-300",children:["Progress: ",Ss," of 21"]})]}),o==="Around the Clock"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Ce[Ae]===25?"25 (Outer Bull)":Ce[Ae]===50?"50 (Inner Bull)":Ce[Ae]||"â€”"})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{ma(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&dr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:dr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D5, 25, 50)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&mr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:mr,children:"Add"})]}),_a>=Ce.length&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{za(0),Ga(0),T("Around the Clock")},children:"Reset"})]})]}),o==="Cricket"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{ua(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&ur()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:ur,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ks(pa()),se(0),T("Cricket")},children:"Reset"})]})]}),o==="Shanghai"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{xa(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&xr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:xr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{_t(ga()),se(0),T("Shanghai")},children:"Reset"})]})]}),o==="Halve It"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{hr(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&fr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:fr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{zt(va()),se(0),T("Halve It")},children:"Reset"})]})]}),o==="High-Low"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{br(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&pr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:pr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{qt(ja()),se(0),T("High-Low")},children:"Reset"})]})]}),o==="Bob's 27"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{sr(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&ar()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:ar,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:nr,children:"Reset"})]})]}),o==="Count-Up"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:t=>la(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(la(j),b(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{la(j),b(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{en(1),tn(0),sn(0),T("Count-Up")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",Za,"/",Zr]})]}),o==="High Score"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:t=>ca(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(ca(j),b(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{ca(j),b(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{nn(1),rn(0),ln(0),T("High Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",an,"/",ti]})]}),o==="Low Score"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:t=>oa(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(oa(j),b(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{oa(j),b(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{on(1),dn(0),mn(0),T("Low Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",cn,"/",ai]})]}),o==="Checkout 170"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s)=>ir(t,s==="MISS"?void 0:s)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&ps(!0)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>ps(!0),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ei,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",As," Â· Attempts: ",hn," Â· Successes: ",bn]})]}),o==="Checkout 121"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s)=>lr(t,s==="MISS"?void 0:s)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&ps(!1)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>ps(!1),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Fi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Rs," Â· Attempts: ",jn," Â· Successes: ",yn]})]}),o==="Treble Practice"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{da(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (T20)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){const s=rt(G);s!=null&&da(s,void 0,void 0),P("")}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{const t=rt(G);t!=null&&da(t,void 0,void 0),P("")},children:"Add Dart"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Hits: ",Fs," Â· Misses: ",Math.max(0,Sn-Fs)," Â· Darts: ",Sn,ft>0?`/${ft}`:""]}),Cn&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed! ",e.jsx("button",{className:"ml-2 underline",onClick:cr,children:"Reset"})]})]}),o==="Baseball"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{Ii(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Pi,children:"Reset"})})]}),o==="Golf"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{Hi(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Oi,children:"Reset"})})]}),o==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(t,s)=>s).map(t=>e.jsx("button",{className:`h-16 rounded-xl border ${Re.board[t]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(Re.finished||Re.board[t])return;const s=Number(prompt("Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)")||0),a=s%3===0?"TRIPLE":s%2===0?"DOUBLE":"SINGLE",r=t,i=al[r],u=i.type==="BULL"?null:i.num||null;Bi(r,s,a,u)},children:Re.board[t]||""},t))}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Vi,children:"Reset"})})]}),o==="American Cricket"&&e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{$i(t,s==="MISS"?void 0:s,a?.sector??null)}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:or,children:"Reset"})})]}),o==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target: ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:ya[Le.targetIndex]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{const r=s==="MISS"?void 0:s;y("Scam"),vt(Sa(Le,t,r))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:1,max:25,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(y("Scam"),vt(Lr(Le,j)),b(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{y("Scam"),vt(Lr(Le,j)),b(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{vt(Nl()),T("Scam")},children:"Reset"})]}),Le.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["ðŸŽ‰ Finished in ",Le.darts," darts!"]})]}),o==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score: ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[re.score,"/",re.target]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{y("Fives"),Nt(ka(re,t))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:5,max:50,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(y("Fives"),Nt(Er(re,j)),b(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{y("Fives"),Nt(Er(re,j)),b(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Nt(Sl(re.target)),T("Fives")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 5, 10, 15, 20, 25, 50 Â· Darts: ",re.darts]}),re.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",re.target," in ",re.darts," darts!"]})]}),o==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score: ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[ie.score,"/",ie.target]})]}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{y("Sevens"),wt(Ma(ie,t))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:7,max:21,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(y("Sevens"),wt(Fr(ie,j)),b(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{y("Sevens"),wt(Fr(ie,j)),b(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{wt(Dl(ie.target)),T("Sevens")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 7, 14, 21 Â· Darts: ",ie.darts]}),ie.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",ie.target," in ",ie.darts," darts!"]})]}),o==="Killer"&&e.jsx(e.Fragment,{children:Ln?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:R.map(t=>{const s=bt[t.id],a=Yt[t.id];return e.jsxs("div",{className:`p-2 rounded-xl border ${s?.eliminated?"opacity-50 border-red-500/40 bg-red-500/10":"border-slate-700/50 bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded ${s?.isKiller?"bg-purple-500/20 text-purple-200 border border-purple-400/30":"bg-slate-600/30 text-slate-300"}`,children:s?.isKiller?"Killer":"Not Killer"})]}),e.jsxs("div",{className:"mt-1 text-sm",children:["Number: ",e.jsx("span",{className:"font-semibold",children:a})]}),e.jsxs("div",{className:"text-sm",children:["Lives: ",e.jsx("span",{className:"font-semibold",children:s?.lives??0})]})]},t.id)})}),g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{if(We)return;const r=s==="MISS"?void 0:s,i=a?.sector??null,u=R[le];u&&(pt(m=>{const f={};Object.keys(m).forEach(l=>f[l]={...m[l]});const d=Mr(u.id,f,r,i);if(d.becameKiller)xe(`${u.name} became a Killer`);else if(d.victimId){const l=R.find(h=>h.id===d.victimId);xe(`${u.name} hit ${l?.name}'s ${Yt[d.victimId]} (${d.livesRemoved} life${(d.livesRemoved||0)>1?"s":""})`)}else xe("No effect");const x=Ar(f);return x&&gt(x),f}),Ke(m=>{const f=m+1;if(f>=3){let d=le;for(let x=1;x<=R.length;x++){const l=(le+x)%R.length,h=R[l].id,q=bt[h];if(q&&!q.eliminated&&q.lives>0){d=l;break}}return $e(d),0}return f}))}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-40",placeholder:"Manual (D16, T5)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){if(We)return;const a=G.trim().toUpperCase().match(/^(S|D|T)?\s*(\d{1,2})$/);if(!a){P("");return}const r=a[1]||"S",i=parseInt(a[2],10),u=r==="D"?"DOUBLE":r==="T"?"TRIPLE":"SINGLE",m=R[le];pt(f=>{const d={};Object.keys(f).forEach(h=>d[h]={...f[h]});const x=Mr(m.id,d,u,i);if(x.becameKiller)xe(`${m.name} became a Killer`);else if(x.victimId){const h=R.find(q=>q.id===x.victimId);xe(`${m.name} hit ${h?.name}'s ${Yt[x.victimId]} (${x.livesRemoved} life${(x.livesRemoved||0)>1?"s":""})`)}else xe("No effect");const l=Ar(d);return l&&gt(l),d}),P(""),Ke(f=>{const d=f+1;if(d>=3){let x=le;for(let l=1;l<=R.length;l++){const h=(le+l)%R.length,q=R[h].id,de=bt[q];if(de&&!de.eliminated&&de.lives>0){x=h;break}}return $e(x),0}return d})}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{let t=le;for(let s=1;s<=R.length;s++){const a=(le+s)%R.length,r=R[a].id,i=bt[r];if(i&&!i.eliminated&&i.lives>0){t=a;break}}$e(t),Ke(0)},children:"Next Player"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{pt({}),Vs({}),$s(!1),$e(0),Ke(0),gt(null),xe("")},children:"Reset"})]}),We&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Winner: ",R.find(t=>t.id===We)?.name," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{pt({}),Vs({}),$s(!1),$e(0),Ke(0),gt(null),xe("")},children:"Play Again"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Players"}),e.jsx("div",{className:"space-y-1",children:R.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input",value:t.name,onChange:a=>{const r=a.target.value;Bs(i=>i.map((u,m)=>m===s?{...u,name:r}:u))}}),e.jsx("button",{className:"btn px-2 py-1",onClick:()=>Bs(a=>a.filter((r,i)=>i!==s)),disabled:R.length<=2,children:"Remove"})]},t.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn px-2 py-1",onClick:()=>Bs(t=>{const s=`p${t.length+1}`;return[...t,{id:s,name:`Player ${t.length+1}`}]}),children:"Add Player"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1",onClick:()=>{if(R.length<2){alert("Need at least 2 players");return}const t=R.map(r=>r.id),s=nl(t),a={};t.forEach(r=>{a[r]=bl(s[r])}),Vs(s),pt(a),$e(0),Ke(0),gt(null),xe("Assigned numbers"),$s(!0)},children:"Assign Numbers & Start"})]})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-3 min-h-0 flex-1 text-[14px]",children:[e.jsxs("div",{className:"basis-1/2 shrink-0 min-w-0 flex flex-col gap-2 overflow-y-auto pr-2 text-sm",children:[e.jsx("div",{className:"text-sm font-semibold opacity-80",children:"Scoreboard"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(me,{gameMode:o,players:ds,matchScore:`${B}-${V}`})}),L&&e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-900/60 border border-white/10 text-slate-100 shadow-lg backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h4",{className:"text-sm font-semibold tracking-wide uppercase text-indigo-200",children:"Manual Scoring"}),e.jsx("span",{className:"text-xs text-white/60",children:"Override a visit or enter dart-by-dart scores."})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Single Dart"}),e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:60,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?ha():hs())},placeholder:"60"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:hs,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Three Dart Edit"}),e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:I<=170?170:180,value:fs,onChange:t=>Qn(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Pt()},placeholder:"100"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Pt,children:"Commit Visit"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:ha,children:"Undo Visit"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Manual"}),e.jsx("input",{className:"input w-28 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?gs():Ht())},placeholder:"T20"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ht,children:"Apply"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:gs,disabled:E===0,children:"Replace Last"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Multi-entry (one per line)"}),e.jsx("textarea",{className:"mt-2 w-full rounded-xl bg-slate-950/70 border border-white/10 text-sm text-slate-100 placeholder-white/40 p-3 focus:outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-500/30",rows:3,value:Zs,onChange:t=>Lt(t.target.value),placeholder:`T20
D16
25`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:vr,children:"Apply All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>Lt(""),children:"Clear"})]})]}),e.jsx("div",{className:"pt-2 border-t border-white/10 mt-3",children:e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:ia,disabled:E===0&&ce===0,children:"Clear Current Visit"})})]})]})]}),g&&e.jsx("div",{className:"basis-1/2 shrink-0 min-w-0 rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s)=>{const a=s??"MISS",r=Number.isFinite(t)?Math.max(0,t):0,i=Date.now();if(r<=0){if(a!=="MISS"||i-(Fe.current||0)<1200)return;Fe.current=i}else Fe.current=0;nt(r)}})})]}),o==="X01"&&!g&&e.jsx(e.Fragment,{children:e.jsx(me,{gameMode:o,players:ds,matchScore:`${B}-${V}`})}),o==="Cricket"&&e.jsx(e.Fragment,{children:e.jsx(me,{gameMode:"Cricket",players:pi})}),o==="Cricket"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&ua(t,s==="MISS"?void 0:s,a?.sector??null)}})}),o==="Shanghai"&&e.jsx(e.Fragment,{children:e.jsx(me,{gameMode:"Shanghai",players:gi})}),o==="Shanghai"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&xa(t,s==="MISS"?void 0:s,a?.sector??null)}})}),o==="Killer"&&e.jsx(e.Fragment,{children:e.jsx(me,{gameMode:"Killer",players:vi})}),o==="Scam"&&e.jsx(e.Fragment,{children:e.jsx(me,{gameMode:"Scam",players:ji})}),o==="Scam"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&vt(Sa(Le,t,s))}})}),o==="Fives"&&e.jsx(e.Fragment,{children:e.jsx(me,{gameMode:"Fives",players:Ni})}),o==="Fives"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&Nt(ka(re,t))}})}),o==="Sevens"&&e.jsx(e.Fragment,{children:e.jsx(me,{gameMode:"Sevens",players:yi})}),o==="Sevens"&&g&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(w,{scoringMode:"custom",showToolbar:N,immediateAutoCommit:!0,onAutoDart:(t,s,a)=>{t>0&&wt(Ma(ie,t))}})}),e.jsx("div",{className:"font-semibold",children:"Your Turn"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:j,onChange:t=>b(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?ha():hs())}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:hs,title:"Add a single dart (0â€“60)",children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-28",type:"number",min:0,max:I<=170?170:180,placeholder:"Visit total (0â€“180)",value:fs,onChange:t=>Qn(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Pt()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Pt,title:"Commit a full 3-dart total like 93",children:"Commit Visit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D16, 5, 25, 50)",value:G,onChange:t=>P(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?gs():Ht())}}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:gs,disabled:E===0,children:"Replace Last"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ht,children:"Add"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"input w-full h-24 resize-none",placeholder:`Type scores manually (one per line, e.g. T20
D16
5
25
50) - No camera needed!`,value:Zs,onChange:t=>Lt(t.target.value)}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:vr,children:"Add All Scores"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>Lt(""),children:"Clear"})]})]})]}),e.jsx("div",{className:"text-xs text-slate-300",children:"Tip: Enter to Add Â· Shift+Enter to Replace Last"})]}),e.jsx("div",{className:"h-1"})]})]})})}),Gr&&e.jsx(Rl,{onClose:()=>La(!1)}),fa&&e.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),e.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”’"}),e.jsx("div",{className:"font-semibold",children:"Premium mode locked"}),e.jsx("div",{className:"text-sm text-slate-200/80",children:"Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more."}),e.jsxs("button",{onClick:async()=>{try{const s=await(await fetch(`${Ll}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c?.email})})).json();s.ok&&s.url?(window.location.href=s.url,s.development&&ve("Opened Stripe test checkout (development mode)",{type:"info",timeout:3e3})):s.error==="STRIPE_NOT_CONFIGURED"?ve("Premium purchases are not available in this development environment. Please visit the production site to upgrade.",{type:"error",timeout:4e3}):ve("Failed to create checkout session. Please try again.",{type:"error",timeout:4e3})}catch{ve("Error creating checkout. Please try again.",{type:"error",timeout:4e3})}},className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM Â· ",_i(zi(),5)]})]})]}),hi&&typeof document<"u"?jr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[200] flex items-center justify-center p-4",onClick:()=>Je(!1),children:e.jsx(Ot,{storageKey:"ndn:modal:offline-camera-manager",className:"relative",defaultWidth:640,defaultHeight:520,minWidth:480,minHeight:420,maxWidth:1200,maxHeight:900,initialFitHeight:!0,onClose:()=>Je(!1),children:e.jsxs("div",{className:"space-y-3",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Camera Devices"}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Manage Offline Camera Feeds"})]}),e.jsx("button",{className:"btn bg-slate-800 hover:bg-slate-700 text-white",onClick:()=>Je(!1),children:"Close"})]}),e.jsx(kr,{fill:!0,user:c,playerScore:I,aiScore:O,x01Score:v,inMatch:Ea,showWinPopup:Ia,pendingLegWinner:Wt,playerDartsThrown:Qt,aiDartsThrown:es,totalPlayerDarts:At,totalAiDarts:Tt,totalPlayerPoints:zs,totalAiPoints:Xs,player180s:On,player140s:li,player100s:ci,ai180s:Bn,ai140s:oi,ai100s:di,playerHighestCheckout:mi,aiHighestCheckout:ui,onClose:()=>Je(!1),onOpen:()=>Je(!0),layout:p})]})})}),document.body):null,ls&&typeof document<"u"?jr.createPortal((()=>{const{target:t,value:s,stage:a}=ls,r=t==="player"?ye:Ze,i=t==="player"?B:V;return e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[240] flex items-center justify-center p-4",onClick:Ft,children:e.jsx(Ot,{storageKey:"ndn:modal:offline-leg-override",className:"relative",defaultWidth:360,defaultHeight:240,minWidth:280,minHeight:200,maxWidth:420,maxHeight:360,initialFitHeight:!0,onClose:Ft,children:e.jsxs("div",{className:"space-y-3 max-w-[18rem] mx-auto",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/50",children:["Step ",a," of 2"]}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Override legs?"})]}),e.jsx("div",{className:"text-sm text-slate-200 leading-relaxed",children:a===1?e.jsxs(e.Fragment,{children:["Set ",r,"'s legs to ",e.jsx("span",{className:"font-semibold text-white",children:s}),"? Confirm to continue."]}):e.jsxs(e.Fragment,{children:["Final confirmation: set ",r,"'s legs to ",e.jsx("span",{className:"font-semibold text-white",children:s}),". Select ",e.jsx("span",{className:"font-semibold text-emerald-200",children:"Yes"})," to apply immediately."]})}),e.jsxs("div",{className:"rounded-xl bg-black/40 border border-white/10 p-3 text-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Current legs"}),e.jsx("div",{className:"text-base font-semibold text-white",children:i})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 text-white",onClick:Ft,children:"No"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 text-white",onClick:Ai,children:"Yes"})]})]})})})})(),document.body):null,Ia&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs(Ot,{storageKey:"ndn:modal:offline-win",className:"w-full relative",defaultWidth:420,defaultHeight:360,minWidth:360,minHeight:300,maxWidth:800,maxHeight:700,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Leg Won!"}),e.jsx("label",{className:"block mb-1",children:"Darts to hit double:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${Ha===t?"bg-brand-600":""}`,onClick:()=>_r(t),children:t},t))}),e.jsx("label",{className:"block mb-1",children:"Darts for checkout:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${Oa===t?"bg-brand-600":""}`,onClick:()=>zr(t),children:t},t))}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[e.jsx("button",{className:"btn w-full",onClick:Ki,children:"Submit"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 w-full",onClick:()=>{J(!1),at()},children:"Rematch"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 w-full",onClick:()=>{J(!1),ot(!1),Vt(!1)},children:"Back to Menu"})]})]})}),xi&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60]",children:e.jsxs(Ot,{storageKey:"ndn:modal:offline-summary",className:"w-full relative",defaultWidth:820,defaultHeight:520,minWidth:600,minHeight:400,maxWidth:1400,maxHeight:1e3,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-xl font-extrabold mb-2",children:"Match Summary"}),e.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[o," Â· ",v," start Â· First to ",ct]}),(()=>{const t=At>0?zs/At*3:0,s=t*3,a=(()=>{const l=ne.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return l.length?`${Math.min(...l)} darts`:"â€”"})(),r=(()=>{const l=ne.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return l.length?`${Math.max(...l)} darts`:"â€”"})(),i=kt>0?Math.round(Gs/kt*100):0,u=Tt>0?Xs/Tt*3:0,m=u*3,f=(()=>{const l=ne.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return l.length?`${Math.min(...l)} darts`:"â€”"})(),d=(()=>{const l=ne.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return l.length?`${Math.max(...l)} darts`:"â€”"})(),x=Mt>0?Math.round(_s/Mt*100):0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:c?.username||"You"}),e.jsx("div",{className:"text-3xl font-extrabold",children:B}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:t.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:s.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:kt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[i,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:a})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:On})]})]})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-black",children:[B," â€“ ",V]})}),e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:S==="None"?"Opponent":`${S} AI`}),e.jsx("div",{className:"text-3xl font-extrabold",children:V}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:u.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:m.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:Mt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[x,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:f})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:d})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:Bn})]})]})]})]})})(),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Legs Timeline"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map((t,s)=>e.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs ${t.winner==="player"?"bg-emerald-500/15 border-emerald-400/30":"bg-fuchsia-500/15 border-fuchsia-400/30"}`,children:["Leg ",s+1,": ",t.winner==="player"?"You":S==="None"?"Opp":"AI"," Â· Dbl ",t.doubleDarts," Â· CO ",t.checkoutDarts]},s))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Shot Heat Map"}),e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black p-3",children:e.jsx(vl,{})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>Qs(!1),children:"Close"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{Qs(!1),at()},children:"Rematch"})]})]})}),ne.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Leg Stats"}),e.jsx("ul",{children:ne.map((t,s)=>e.jsxs("li",{children:["Leg ",s+1,": Double darts: ",t.doubleDarts,", Checkout darts: ",t.checkoutDarts]},s))})]})]})]})}export{ec as default};
//# sourceMappingURL=OfflinePlay-UM5FHcb_.js.map
