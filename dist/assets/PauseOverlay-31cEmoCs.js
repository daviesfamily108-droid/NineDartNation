import{r as E}from"./ui-Cl5S-Tv0.js";import{b as R,k as D,r as W,j as e}from"./index-CC0rYhL0.js";function Z(a,n,l,r,t,o,c,u,b,f,h,N,w,C,k,V,v,x,m,i,A,s,d,L,S,$,I){return E.useMemo(()=>{const p=[];if(a==="X01"){let j=0,T=0,M=0;if(x&&x.length>0){for(const g of x)g.dartsThrown&&g.totalScored&&(T+=g.dartsThrown,M+=g.totalScored);T>0&&(j=M/T*3)}const O=(N??0)>0?u??0:f??null??(o??0);if(p.push({name:"You",isCurrentTurn:!!m,legsWon:r||0,score:typeof n=="number"?n:typeof A=="number"?A:0,lastScore:O,avg:j,checkoutRate:k&&k>0?Math.round((C||0)/k*100):0,bestLeg:x&&x.length>0?`${Math.min(...x.map(g=>g.doubleDarts+(g.checkoutDarts||0)))||0} darts`:"—",matchAvg:j,allTimeAvg:R("You")||0}),i&&i!=="None"){const P=(w??0)>0?b??0:h??null??(c??0);p.push({name:`${i} AI`,isCurrentTurn:!m,legsWon:t||0,score:typeof l=="number"?l:typeof A=="number"?A:0,lastScore:P,avg:void 0,checkoutRate:v&&v>0?Math.round((V||0)/v*100):0,bestLeg:"—"})}}return a==="Cricket"&&(p.push({name:"You",isCurrentTurn:!!m,closed:s?.marks||{},points:s?.points||0}),i&&i!=="None"&&p.push({name:`${i} AI`,isCurrentTurn:!m,closed:{},points:0})),a==="Shanghai"&&(p.push({name:"You",isCurrentTurn:!!m,round:d?.round||1,target:d?.target||1,score:d?.score||0}),i&&i!=="None"&&p.push({name:`${i} AI`,isCurrentTurn:!m,round:d?.round||1,target:d?.target||1,score:0})),a==="Killer"&&L&&L.length>0&&L.forEach((j,T)=>{const M=S?.[j.id];p.push({name:j.name,isCurrentTurn:T===I,number:$?.[j.id],lives:M?.lives||0,eliminated:M?.eliminated||!1})}),p},[a,n,l,r,t,o,c,u,b,f,h,N,w,C,k,V,v,x,m,i,s,d,L,S,$,I])}function H(a,n,l){return E.useMemo(()=>{const r=[];return!n||!n.players||n.players.length===0||n.players.forEach((t,o)=>{const c=o===n.currentPlayerIdx;if(a==="X01"){let u=0,b=0,f=0;if(t.legs&&t.legs.length>0){for(const h of t.legs)if(h.finished){const N=h.dartsThrown||0,w=Math.max(0,h.totalScoreStart-h.totalScoreRemaining)||0;b+=N,f+=w}}b>0&&(u=f/b*3),r.push({name:t.name||`Player ${o+1}`,isCurrentTurn:c,legsWon:t.legsWon||0,score:t.score||0,lastScore:t.lastVisitScore||0,checkoutRate:t.doublesAttempted>0?Math.round(t.doublesHit/t.doublesAttempted*100):0,bestLeg:t.bestLegDarts?`${t.bestLegDarts} darts`:"—",matchAvg:u,allTimeAvg:t.name?R(t.name):0})}a==="Cricket"&&r.push({name:t.name||`Player ${o+1}`,isCurrentTurn:c,closed:t.cricket?.marks||{},points:t.cricket?.points||0}),a==="Killer"&&r.push({name:t.name||`Player ${o+1}`,isCurrentTurn:c,number:t.killerNumber||null,lives:t.killerLives||3,eliminated:t.killerEliminated||!1})}),r},[a,n,l])}const K=[{label:"1 min",minutes:1},{label:"3 min",minutes:3},{label:"5 min",minutes:5}];function Y(a){const n=Math.max(0,Math.floor(a/1e3)),l=Math.floor(n/60).toString().padStart(2,"0"),r=(n%60).toString().padStart(2,"0");return{mm:l,ss:r,totalSeconds:n}}function ee({localPlayerName:a,onResume:n}){const l=D(s=>s.paused),r=D(s=>s.pauseEndsAt),t=D(s=>s.pauseStartedAt),o=D(s=>s.pauseInitiator),c=D(s=>s.setPaused),[u,b]=E.useState(Date.now());E.useEffect(()=>{if(!l||!r)return;const s=setInterval(()=>{const d=Date.now();b(d),d>=r&&c(!1,null)},250);return()=>clearInterval(s)},[l,r,c]);const f=Math.max(0,(r??u)-u),N=Math.max(1,(r??u)-(t??u)),w=Math.max(0,Math.min(1,1-f/N)),C=Math.round(w*100),k=E.useMemo(()=>({background:`conic-gradient(rgba(251, 191, 36, 0.95) ${C}%, rgba(255, 255, 255, 0.08) ${C}%)`}),[C]);if(!l)return null;const V=!o||!a||o===a,v=()=>{n?n():c(!1,null)},x=s=>{const d=Date.now()+s*6e4;c(!0,d,o)},m=!r,{mm:i,ss:A}=m?{mm:"--",ss:"--"}:Y(f);return W.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center",style:{pointerEvents:"all"},onKeyDown:s=>s.stopPropagation(),onKeyUp:s=>s.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/[0.04] to-transparent"}),e.jsxs("div",{className:"relative w-full max-w-sm mx-4 rounded-3xl border border-white/15 bg-white/[0.08] shadow-2xl shadow-black/50 p-8 sm:p-10 backdrop-blur-xl",children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-white/10 to-transparent pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col items-center gap-6 text-center",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.35em] font-semibold text-amber-200/80",children:"Match Paused"}),o&&e.jsxs("div",{className:"text-sm text-amber-200/60",children:["Paused by"," ",e.jsx("span",{className:"font-semibold text-amber-100",children:o})]}),e.jsxs("div",{className:"relative flex items-center justify-center w-48 h-48 sm:w-56 sm:h-56",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border border-amber-300/30 shadow-inner",style:m?{background:"rgba(255, 255, 255, 0.08)"}:k}),e.jsx("div",{className:"absolute inset-3 rounded-full bg-slate-950/90 border border-white/10 flex items-center justify-center",children:e.jsxs("div",{className:"font-mono text-5xl sm:text-6xl font-black text-white tabular-nums",children:[i,e.jsx("span",{className:"text-amber-300/80",children:":"}),A]})})]}),m?V?e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-[0.25em] text-amber-200/60",children:"Select pause duration"}),e.jsx("div",{className:"flex items-center gap-3",children:K.map(s=>e.jsx("button",{className:"px-5 py-2.5 rounded-2xl text-sm font-semibold bg-amber-500/20 hover:bg-amber-500/40 text-amber-100 border border-amber-400/30 shadow-lg transition active:scale-95",onClick:()=>x(s.minutes),children:s.label},s.minutes))}),e.jsx("button",{className:"mt-1 px-8 py-3 rounded-2xl text-sm font-semibold bg-emerald-600 hover:bg-emerald-500 text-white border border-emerald-400/40 shadow-lg shadow-emerald-500/20 transition active:scale-95",onClick:v,children:"Resume"})]}):e.jsxs("div",{className:"text-xs text-amber-200/50 mt-1",children:["Waiting for"," ",e.jsx("span",{className:"font-semibold text-amber-100",children:o})," ","to select timer…"]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-[0.25em] text-amber-200/40",children:"Countdown"}),V?e.jsx("button",{className:"mt-1 px-8 py-3 rounded-2xl text-sm font-semibold bg-emerald-600 hover:bg-emerald-500 text-white border border-emerald-400/40 shadow-lg shadow-emerald-500/20 transition active:scale-95",onClick:v,children:"Resume"}):e.jsxs("div",{className:"text-xs text-amber-200/50 mt-1",children:["Only"," ",e.jsx("span",{className:"font-semibold text-amber-100",children:o})," ","can resume"]})]})]})]})]}),document.body)}export{ee as P,H as a,Z as u};
//# sourceMappingURL=PauseOverlay-31cEmoCs.js.map
