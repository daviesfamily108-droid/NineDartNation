import{b as Xi,u as Yi,i as qi,e as Qi,k as Zi,l as Ji,m as el,n as Tt,o as Cn,p as fs,j as e,M as tl,r as Hr,q as Fr,t as sl,R as nt,G as Fe,C as A,v as nl,w as al,h as rl,x as il,y as ll}from"./index-DUDb53yb.js";import{r as a}from"./ui-DygUIHRq.js";import{o as ol}from"./matchWindow-DHN3yDNG.js";import{M as cl,S as dl}from"./MatchControls-BRDiIVfO.js";import{f as ul}from"./stats-X3jz_E9o.js";import"./vendor-D3F3s8fL.js";const ps=[...Array.from({length:20},(n,i)=>({label:`D${i+1}`,score:(i+1)*2})),{label:"DBULL",score:50,isBull:!0}];function Vr(n,i){const o=ps[i];return!!o&&n===o.score}function Et(n){const i=n.trim().toUpperCase();if(!i)return null;if(i==="50"||i==="BULL"||i==="DBULL"||i==="IBULL")return 50;if(i==="25"||i==="OBULL")return 25;const o=i.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!o)return null;const x=o[1]||"S",c=parseInt(o[2],10);return c<1||c>20?null:c*(x==="S"?1:x==="D"?2:3)}const De=[...Array.from({length:20},(n,i)=>i+1),25,50],Fn=[20,19,18,17,16,15,25];function Dn(){const n={};return Fn.forEach(i=>{n[i]=0}),{marks:n,points:0}}function ml(n,i,o,x,c=()=>!1){let u=null,p=0;if(o==="BULL"||o==="INNER_BULL"||i===25||i===50)u=25,p=o==="INNER_BULL"||i===50?2:1;else if(typeof x=="number"&&x>=15&&x<=20)u=x,o==="TRIPLE"?p=3:o==="DOUBLE"?p=2:p=1;else if(i){const K=[20,19,18,17,16,15];for(const W of K){if(i===W){u=W,p=1;break}if(i===W*2){u=W,p=2;break}if(i===W*3){u=W,p=3;break}}!u&&(i===25||i===50)&&(u=25,p=i===50?2:1)}if(!u)return 0;const B=n.marks[u],Ne=Math.max(0,3-B),ie=Math.min(Ne,p),v=Math.max(0,p-ie),me=B+ie;n.marks[u]=me>3?3:me;let V=0;return v>0&&!c(u)&&(u===25?o==="INNER_BULL"?V+=50*v:V+=25*v:V+=u*v),n.points+=V,V}function xl(n){return Fn.every(i=>(n.marks[i]||0)>=3)}function An(){return{round:1,score:0,finished:!1,shanghaiAchieved:!1,turnHits:{singles:0,doubles:0,triples:0}}}function hl(n){return n.round}function fl(n,i,o,x){if(n.finished)return 0;const c=hl(n);let u=0;return typeof x=="number"&&x===c?o==="TRIPLE"?(u=c*3,n.turnHits.triples++):o==="DOUBLE"?(u=c*2,n.turnHits.doubles++):o==="SINGLE"&&(u=c*1,n.turnHits.singles++):!x&&(i===c||i===c*2||i===c*3)&&(i===c*3?(u=c*3,n.turnHits.triples++):i===c*2?(u=c*2,n.turnHits.doubles++):i===c&&(u=c,n.turnHits.singles++)),n.score+=u,u}function pl(n){if(!n.finished){if(n.turnHits.singles>0&&n.turnHits.doubles>0&&n.turnHits.triples>0){n.shanghaiAchieved=!0,n.finished=!0;return}const i=n.round+1;i>20?n.finished=!0:n.round=i}n.turnHits={singles:0,doubles:0,triples:0}}function Mn(){return{stage:0,targets:[{kind:"NUMBER",num:20},{kind:"DOUBLE",num:16},{kind:"TRIPLE",num:14},{kind:"NUMBER",num:19},{kind:"BULL"},{kind:"ANY_NUMBER"}],score:0,finished:!1,hitThisRound:!1}}function qr(n){return n.targets[n.stage]||null}function bl(n,i,o,x){if(n.finished)return 0;const c=qr(n);if(!c)return 0;let u=0;switch(c.kind){case"NUMBER":{typeof x=="number"&&x===c.num?o==="TRIPLE"?u=c.num*3:o==="DOUBLE"?u=c.num*2:o==="SINGLE"&&(u=c.num):!x&&(i===c.num||i===c.num*2||i===c.num*3)&&(u=i),u>0&&(n.hitThisRound=!0);break}case"DOUBLE":{(o==="DOUBLE"&&x===c.num||i===c.num*2)&&(u=c.num*2,n.hitThisRound=!0);break}case"TRIPLE":{(o==="TRIPLE"&&x===c.num||i===c.num*3)&&(u=c.num*3,n.hitThisRound=!0);break}case"BULL":{(o==="BULL"||o==="INNER_BULL"||i===25||i===50)&&(u=o==="INNER_BULL"||i===50?50:25,n.hitThisRound=!0);break}case"ANY_NUMBER":{i>0&&(u=i,n.hitThisRound=!0);break}}return n.score+=u,u}function gl(n){n.finished||(n.hitThisRound||(n.score=Math.floor(n.score/2)),n.hitThisRound=!1,n.stage+=1,n.stage>=n.targets.length&&(n.finished=!0))}function Ln(){return{round:1,score:0,target:"HIGH",finished:!1}}function vl(n,i,o,x){if(n.finished)return 0;let c=0;if(n.target==="HIGH")if(o==="INNER_BULL")c=50;else if(typeof x=="number"){const p=x*(o==="TRIPLE"?3:o==="DOUBLE"?2:1);x>=20&&(c=p)}else i>=40&&(c=i);else if(typeof x=="number"){const p=x*(o==="TRIPLE"?3:o==="DOUBLE"?2:1);x<=10&&(c=p)}else i>0&&i<=30&&(c=i);return n.score+=c,c}function jl(n){if(!n.finished){if(n.round+=1,n.round>10){n.finished=!0;return}n.target=n.target==="HIGH"?"LOW":"HIGH"}}function Nl(n,i=3){return{number:n,lives:i,isKiller:!1,eliminated:!1}}function yl(n){const i=Array.from({length:20},(x,c)=>c+1),o={};for(const x of n){const c=Math.floor(Math.random()*i.length),u=i.splice(c,1)[0];o[x]=u}return o}function Ur(n,i,o,x){const c=i[n];if(!c||!x||!o)return{becameKiller:!1};if(!c.isKiller&&o==="DOUBLE"&&x===c.number)return c.isKiller=!0,{becameKiller:!0};if(c.isKiller&&(o==="DOUBLE"||o==="TRIPLE")){const u=Object.keys(i).find(p=>p!==n&&!i[p].eliminated&&i[p].number===x);if(u){const p=i[u],B=o==="TRIPLE"?2:1;return p.lives=Math.max(0,p.lives-B),p.lives===0&&(p.eliminated=!0),{becameKiller:!1,victimId:u,livesRemoved:B}}}return{becameKiller:!1}}function Or(n){const i=Object.entries(n).filter(([,o])=>!o.eliminated&&o.lives>0);return i.length===1?i[0][0]:null}function _r(){return{inning:1,score:0,dartsThisInning:0,finished:!1}}function wl(n,i,o,x){if(n.finished)return 0;let c=0;if(typeof x=="number"&&x===n.inning?o==="TRIPLE"?c=3:o==="DOUBLE"?c=2:c=1:!x&&(i===n.inning||i===n.inning*2||i===n.inning*3)&&(c=i===n.inning*3?3:i===n.inning*2?2:1),n.score+=c,n.dartsThisInning+=1,n.dartsThisInning>=3){const u=n.inning+1;u>9?n.finished=!0:(n.inning=u,n.dartsThisInning=0)}return c}const Sl={1:5,2:20,3:1,4:18,5:4,6:13,7:6,8:10,9:15,10:2,11:17,12:3,13:19,14:7,15:16,16:8,17:11,18:14};function $r(){return{hole:1,strokes:0,dartsThisHole:0,finished:!1}}function kl(n,i,o,x){if(n.finished)return!1;const c=Sl[n.hole];if(n.dartsThisHole+=1,typeof x=="number"&&x===c&&(o==="SINGLE"||o==="DOUBLE"||o==="TRIPLE")||!x&&(i===c||i===c*2||i===c*3)){n.strokes+=n.dartsThisHole;const p=n.hole+1;return p>18?n.finished=!0:(n.hole=p,n.dartsThisHole=0),!0}if(n.dartsThisHole>=3){n.strokes+=3;const p=n.hole+1;p>18?n.finished=!0:(n.hole=p,n.dartsThisHole=0)}return!1}const Qr={0:{type:"NUM",num:20},1:{type:"NUM",num:19},2:{type:"NUM",num:18},3:{type:"NUM",num:17},4:{type:"BULL"},5:{type:"NUM",num:16},6:{type:"NUM",num:15},7:{type:"NUM",num:14},8:{type:"NUM",num:13}};function Kr(){return{board:Array(9).fill(null),turn:"X",finished:!1,winner:null}}function Cl(n){const i=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[o,x,c]of i)if(n[o]&&n[o]===n[x]&&n[o]===n[c])return n[o];return n.every(o=>o)?"Draw":null}function Dl(n,i,o,x,c){if(n.finished||n.board[i])return!1;const u=Qr[i];let p=!1;if(u.type==="BULL"?p=x==="BULL"||x==="INNER_BULL"||o===25||o===50:u.type==="NUM"&&typeof u.num=="number"&&(typeof c=="number"&&c===u.num||!c&&(o===u.num||o===u.num*2||o===u.num*3))&&(p=!0),!p)return!1;n.board[i]=n.turn;const B=Cl(n.board);return B?(n.finished=!0,n.winner=B,!0):(n.turn=n.turn==="X"?"O":"X",!0)}function En(){return{targetIndex:0,darts:0,finished:!1}}const Zr=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25],Tn=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","Bull"];function Al(n){return Zr[n.targetIndex]}function Rn(n,i,o){if(n.finished)return n;const x=Al(n);if(!(o==="SINGLE"&&i===x||o==="DOUBLE"&&i===x||o==="TRIPLE"&&i===x||o==="INNER_BULL"&&x===25))return n;const u=n.targetIndex+1,p=u>=Zr.length;return{targetIndex:u,darts:n.darts+1,finished:p}}function Wr(n,i){return Rn(n,i,"SINGLE")}function Ml(){return En()}function In(n=50){return{score:0,darts:0,finished:!1,target:n}}const Ll=[5,10,15,20,25,50];function Tl(n){return Ll.includes(n)}function Pn(n,i,o){if(n.finished)return n;if(!Tl(i))return{...n,darts:n.darts+1};const x=n.score+i,c=x>=n.target;return{score:c?n.target:x,darts:n.darts+1,finished:c,target:n.target}}function Gr(n,i){return Pn(n,i)}function El(n=50){return In(n)}function Bn(n=70){return{score:0,darts:0,finished:!1,target:n}}const Rl=[7,14,21];function Il(n){return Rl.includes(n)}function Hn(n,i,o){if(n.finished)return n;if(!Il(i))return{...n,darts:n.darts+1};const x=n.score+i,c=x>=n.target;return{score:c?n.target:x,darts:n.darts+1,finished:c,target:n.target}}function zr(n,i){return Hn(n,i)}function Pl(n=70){return Bn(n)}const Vn=[20,19,18,17,16,15,14,13,12,25];function Xr(){const n={};return Vn.forEach(i=>{n[i]=0}),{marks:n,points:0}}function Bl(n,i,o,x,c=()=>!1){let u=null,p=0;if(o==="BULL"||o==="INNER_BULL"||i===25||i===50)u=25,p=o==="INNER_BULL"||i===50?2:1;else if(typeof x=="number"&&x>=12&&x<=20)u=x,o==="TRIPLE"?p=3:o==="DOUBLE"?p=2:p=1;else if(i){for(const K of[20,19,18,17,16,15,14,13,12]){if(i===K){u=K,p=1;break}if(i===K*2){u=K,p=2;break}if(i===K*3){u=K,p=3;break}}!u&&(i===25||i===50)&&(u=25,p=i===50?2:1)}if(!u)return 0;const B=n.marks[u],Ne=Math.max(0,3-B),ie=Math.min(Ne,p),v=Math.max(0,p-ie),me=B+ie;n.marks[u]=me>3?3:me;let V=0;return v>0&&!c(u)&&(u===25?o==="INNER_BULL"?V+=50*v:V+=25*v:V+=u*v),n.points+=V,V}function Hl(n){return Vn.every(i=>(n.marks[i]||0)>=3)}function F(n){return(i,o)=>{n(i)}}function Fl(n){const{match:i,commitManualVisitTotal:o,endTurn:x}=n;return{addVisit:(c,u=3,p)=>{if(o){o(c);return}try{i.addVisit(c,u,p)}catch{i.addVisit(c,u)}},undoVisit:()=>{i.undoVisit()},nextPlayer:()=>{if(x)try{x(0)}catch{i.nextPlayer()}else i.nextPlayer()},endLeg:c=>{typeof c=="number"?i.endLeg(c):i.endLeg(0)},endGame:()=>{i.endGame()}}}function Ve(n,i,o,x,c,u,p,B,Ne,ie,v,me,V,K,W,Rt,Ue,pe,be,Z,Oe,_e,k,Ae,Me,m,at){return a.useMemo(()=>{const y=[];if(n==="X01"){let xe=0,L=0,Le=0;if(pe&&pe.length>0){for(const I of pe)I.dartsThrown&&I.totalScored&&(L+=I.dartsThrown,Le+=I.totalScored);L>0&&(xe=Le/L*3)}const _=(me??0)>0?B??0:ie??null??(u??0);if(y.push({name:"You",isCurrentTurn:!!be,legsWon:x||0,score:typeof i=="number"?i:typeof Oe=="number"?Oe:0,lastScore:_,avg:xe,checkoutRate:W&&W>0?Math.round((K||0)/W*100):0,bestLeg:pe&&pe.length>0?`${Math.min(...pe.map(I=>I.doubleDarts+(I.checkoutDarts||0)))||0} darts`:"â€”",matchAvg:xe,allTimeAvg:Xi("You")||0}),Z&&Z!=="None"){const U=(V??0)>0?Ne??0:v??null??(p??0);y.push({name:`${Z} AI`,isCurrentTurn:!be,legsWon:c||0,score:typeof o=="number"?o:typeof Oe=="number"?Oe:0,lastScore:U,avg:void 0,checkoutRate:Ue&&Ue>0?Math.round((Rt||0)/Ue*100):0,bestLeg:"â€”"})}}return n==="Cricket"&&(y.push({name:"You",isCurrentTurn:!!be,closed:_e?.marks||{},points:_e?.points||0}),Z&&Z!=="None"&&y.push({name:`${Z} AI`,isCurrentTurn:!be,closed:{},points:0})),n==="Shanghai"&&(y.push({name:"You",isCurrentTurn:!!be,round:k?.round||1,target:k?.target||1,score:k?.score||0}),Z&&Z!=="None"&&y.push({name:`${Z} AI`,isCurrentTurn:!be,round:k?.round||1,target:k?.target||1,score:0})),n==="Killer"&&Ae&&Ae.length>0&&Ae.forEach((xe,L)=>{const Le=Me?.[xe.id];y.push({name:xe.name,isCurrentTurn:L===at,number:m?.[xe.id],lives:Le?.lives||0,eliminated:Le?.eliminated||!1})}),y},[n,i,o,x,c,u,p,B,Ne,ie,v,me,V,K,W,Rt,Ue,pe,be,Z,_e,k,Ae,Me,m,at])}const Yr=a.memo(A),Vl=["Easy","Medium","Hardened"],Ul=6500;function je(n,i,o){return Math.max(i,Math.min(o,n))}function Ol(n,i){let o=0;if(i==="Easy"){const x=[22,26,41,45,60];o=x[Math.floor(Math.random()*x.length)]}else i==="Medium"?o=Math.round(je(60+(Math.random()*30-15),30,100)):o=Math.round(je(80+(Math.random()*20-10),50,120));return n<=0?0:o>n?[100,85,81,60,57,45,41,26,22,20,1].find(c=>c<=n)??0:o}function _l({onClose:n}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"card max-w-lg w-full relative",children:[e.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:n,children:"Close âœ•"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"X01 Rules & Regulations ðŸ“–"}),e.jsxs("ul",{className:"list-disc pl-5 text-left mb-2",children:[e.jsx("li",{children:"Double In: Start scoring only after hitting a double."}),e.jsx("li",{children:"Double Out: Finish the game by hitting a double to reach exactly zero."}),e.jsx("li",{children:"Best Of: Play a set number of legs, winner is first to reach majority."}),e.jsx("li",{children:"First To: Play until a player reaches a set number of legs."}),e.jsx("li",{children:"No Cheating: All scores must be valid, no manual score changes mid-leg."}),e.jsx("li",{children:"Competitive Standard: Follow latest WDF/PDC rules for match play."})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"For full details, see official darts governing body rules."})]})})}const $l=rl();function No({user:n}){const{offlineLayout:i,favoriteDouble:o,callerEnabled:x,callerVoice:c,callerVolume:u,speakCheckoutOnly:p,rememberLastOffline:B,setLastOffline:Ne,autoStartOffline:ie,cameraEnabled:v,textSize:me,boxSize:V,autoscoreProvider:K,autoCommitMode:W="wait-for-clear",matchType:Rt="singles",setMatchType:Ue,teamAName:pe="Team A",setTeamAName:be,teamBName:Z="Team B",setTeamBName:Oe}=Yi(),_e=K==="manual",k=v&&!_e,Ae="modern",Me=v&&!_e&&W!=="immediate",[m,at]=a.useState("X01"),[y,xe]=a.useState(501),[L,Le]=a.useState("None"),[Un,bs]=a.useState(!1),[gs,$e]=a.useState(!1),[le,_]=a.useState(y),[I,rt]=a.useState(y),[Jr,vs]=a.useState(!1),[js,U]=a.useState(!1),[It,On]=a.useState(1),[J,Pt]=a.useState(0),H=qi(),[ei,_n]=a.useState(!1),$n=a.useRef(!1),[ee,Bt]=a.useState(0),[Ht,G]=a.useState(null),[Ft,Kn]=a.useState(1),[Vt,Wn]=a.useState(1),[ge,Gn]=a.useState([]),[zn,ti]=a.useState(2e3),it=Qi(),[Ns,Ke]=a.useState(!1),[Kl,Xn]=a.useState(!1),[ys,Yn]=a.useState(!1),[lt,Ut]=a.useState({player:!1,opponent:!1});Zi(t=>t.setPaused),a.useEffect(()=>{const t=()=>{Ke(!1),$e(!1),Xn(!1)};try{window.addEventListener("ndn:match-quit",t)}catch{}return()=>{try{window.removeEventListener("ndn:match-quit",t)}catch{}}},[]);const[ws,Wl]=a.useState(!1),[Ss,Gl]=a.useState(!1),[Ot,qn]=a.useState(1),[zl,Qn]=a.useState(!1),[O,ot]=a.useState(!0),[ct,si]=a.useState(()=>typeof window<"u"&&window.innerWidth<768),[Zn,ks]=a.useState(!1);a.useEffect(()=>{if(typeof window>"u")return;const t=()=>si(window.innerWidth<768);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),a.useEffect(()=>{ct||ks(!1)},[ct]),a.useEffect(()=>{const t=()=>Qe(!0);return window.addEventListener("ndn:open-camera-manager",t),()=>window.removeEventListener("ndn:open-camera-manager",t)},[]);const[D,w]=a.useState(0),[dt,Cs]=a.useState(0),[Ds,As]=a.useState(0),[Te,Jn]=a.useState(0),[ea,ta]=a.useState(0),[ut,Ms]=a.useState(Dn()),[_t,$t]=a.useState(An()),[mt,Kt]=a.useState(Mn()),[Wt,Gt]=a.useState(Ln()),[Xl,te]=a.useState(0),[sa,na]=a.useState(1),[ni,Ls]=a.useState(27),[Yl,aa]=a.useState(0),[ai,Ts]=a.useState(0),[ra,ia]=a.useState(!1),[la,oa]=a.useState(1),[ri,ca]=a.useState(0),[ql,da]=a.useState(0),ii=8,[ua,ma]=a.useState(1),[li,xa]=a.useState(0),[Ql,ha]=a.useState(0),oi=10,[fa,pa]=a.useState(1),[ci,ba]=a.useState(0),[Zl,ga]=a.useState(0),di=10,[Es,Rs]=a.useState(170),[va,ja]=a.useState(0),[Na,ya]=a.useState(0),[wa,Sa]=a.useState(0),[Is,Ps]=a.useState(121),[ka,Ca]=a.useState(0),[Da,Aa]=a.useState(0),[Ma,La]=a.useState(0),[Ee,Bs]=a.useState(20),[Hs,Fs]=a.useState(0),[Ta,Vs]=a.useState(0),[xt,ui]=a.useState(30),[Ea,Us]=a.useState(!1),[Ra,Ia]=a.useState(_r()),[Pa,Ba]=a.useState($r()),[Re,Ha]=a.useState(Kr()),[Os,Fa]=a.useState(Xr()),[R,_s]=a.useState([{id:"p1",name:"Player 1"},{id:"p2",name:"Player 2"}]),[ht,ft]=a.useState({}),[zt,$s]=a.useState({}),[Va,Ks]=a.useState(!1),[he,We]=a.useState(0),[Jl,Ge]=a.useState(0),[ze,pt]=a.useState(null),[mi,ve]=a.useState(""),[Xt,eo]=a.useState(En()),[Ie,bt]=a.useState(En()),[gt,to]=a.useState(In(50)),[oe,vt]=a.useState(In(50)),[jt,so]=a.useState(Bn(70)),[ce,Nt]=a.useState(Bn(70)),[Ua,Xe]=a.useState(0),[Ws,Pe]=a.useState(0),[de,z]=a.useState(0),[Gs,yt]=a.useState(y),[Be,se]=a.useState(0),[zs,ye]=a.useState(null),[Yt,X]=a.useState(0),qt=a.useRef(0),xi=a.useRef(0),ne=a.useRef(le),$=a.useRef(de),ae=a.useRef(Be),Ye=a.useRef(Gs),re=a.useRef(Yt);a.useEffect(()=>{ne.current=le},[le]),a.useEffect(()=>{$.current=de},[de]),a.useEffect(()=>{ae.current=Be},[Be]),a.useEffect(()=>{Ye.current=Gs},[Gs]),a.useEffect(()=>{re.current=Yt},[Yt]);const[hi,wt]=a.useState(0);a.useRef(null);const[Oa,Xs]=a.useState(0),[Ys,qs]=a.useState(0),[Qs,qe]=a.useState(0),[Zs,we]=a.useState(0),[Js,St]=a.useState(null),[en,kt]=a.useState(0),[Qt,Ct]=a.useState(0),[_a,Zt]=a.useState(0),[Jt,$a]=a.useState(0),[Ka,Wa]=a.useState(0),[tn,Dt]=a.useState(0),[sn,Ga]=a.useState(0),[za,es]=a.useState(0),[Xa,Ya]=a.useState(0),[qa,ts]=a.useState(0),[fi,ss]=a.useState(0),[pi,ns]=a.useState(0),[Qa,nn]=a.useState(0),[bi,an]=a.useState(0),[gi,rn]=a.useState(0),[vi,as]=a.useState(0),[ji,Za]=a.useState(0),[rs,is]=a.useState(null),[Ni,Se]=a.useState(!1),[yi,ln]=a.useState(!1),[Y,q]=a.useState(""),[no,ao]=a.useState(""),[ro,io]=a.useState(""),[lo,oo]=a.useState(""),[co,Ja]=a.useState(""),[uo,er]=a.useState(""),[ls,tr]=a.useState(null),[wi,Qe]=a.useState(!1),[Si,sr]=a.useState({}),[mo,os]=a.useState(!1),He=a.useRef(null),on=a.useRef(null),fe=a.useCallback(()=>{const t=on.current;t&&(clearTimeout(t),on.current=null)},[]),ki=a.useCallback(t=>{if(t>0&&t<=60){const s=Ji(t,o);is({remaining:t,routes:s}),Se(!0)}else is(null),Se(!1)},[o]),nr=a.useCallback(()=>{try{el({type:"quit"})}catch{}Ke(!1),$e(!1),Xn(!1),Yn(!1),Ut({player:!1,opponent:!1})},[]);a.useEffect(()=>{ys&&lt.player&&lt.opponent&&nr()},[nr,lt,ys]);const ar=a.useCallback(t=>{if(!x)return;const s=Tt(n,"Player");try{Cn(s,t.visitTotal,Math.max(t.remaining,0),c,{volume:u,checkoutOnly:p})}catch{}},[x,c,u,p,n]),rr=a.useCallback((t,s)=>{os(!1);const{visitTotal:r,darts:l,preRemaining:d,remaining:b,doubleAttempts:g,finished:N,doubleWindow:f,highestCheckout:h}=t;N?(_(0),ne.current=0,typeof h=="number"&&h>0&&as(j=>Math.max(j,h))):(_(b),ne.current=b),ye(r),r===180?ts(j=>j+1):r>=140?ss(j=>j+1):r>=100&&ns(j=>j+1),f&&g>0&&(Ct(j=>j+g),N&&Zt(j=>j+1)),t.announced||ar(t);try{fs.getState().recordVisit("offline-x01",l,r,{preRemaining:d,postRemaining:N?0:b,finish:N,bust:!1})}catch{}try{H.addVisit(r,l,{visitTotal:r}),N&&H.endLeg(d)}catch{}N&&(G("player"),U(!0)),Lt(N?0:b),se(0),ae.current=0,z(0),$.current=0,X(0),re.current=0},[Lt,as,G,_,ye,se,z,X,U,ts,ss,ns,Ct,Zt,ar]),Ze=a.useCallback(t=>{const s=He.current;s&&(He.current=null,fe(),rr(s,t))},[fe,rr]);a.useCallback(t=>{He.current={...t,announced:!1},os(!0),fe(),on.current=setTimeout(()=>Ze("timeout"),Ul)},[fe,Ze]),a.useEffect(()=>{if(!Me)return;const t=()=>Ze("event");return window.addEventListener("ndn:darts-cleared",t),()=>window.removeEventListener("ndn:darts-cleared",t)},[Me,Ze]),a.useEffect(()=>{Me||Ze("timeout")},[Me,Ze]),a.useEffect(()=>()=>fe(),[fe]),a.useEffect(()=>{if(de===0){try{window.dispatchEvent(new CustomEvent("ndn:darts-cleared",{detail:{source:"offline-play",ts:Date.now()}}))}catch{}qt.current=0}xi.current=de},[de]);const ke=Tt(n,"Player 1"),Je=L==="None"?"Player 2":L,Ci=O?ke:Je,Di=O?Je:ke,Ai=O?J:ee,Mi=O?ee:J,cs=Ve("X01",le,I,J,ee,Ws,Ys,Be,Qs,zs,Js,de,Zs,_a,Qt,Ka,Jt,ge,O,L,y),ir=Ve("Cricket",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ut),cn=Ve("Shanghai",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,O,L,void 0,ut,_t),dn=Ve("Killer",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,R,ht,zt,he),un=Ve("Scam"),mn=Ve("Fives"),xn=Ve("Sevens");a.useMemo(()=>{switch(m){case"Cricket":return ir;case"Shanghai":return cn;case"Killer":return dn;case"Scam":return un;case"Fives":return mn;case"Sevens":return xn;default:return cs}},[m,ir,cn,dn,un,mn,xn,cs]);const Li=m==="X01"?`${J}-${ee}`:void 0,ds=a.useMemo(()=>{const t=cs||[],s=de>0?Be:zs??Ws,r=Zs>0?Qs:Js??Ys;return t.length===0?{name:O?ke:Je,isCurrentTurn:!0,legsWon:O?J:ee,score:O?le:I,lastScore:O?s:r}:t.find(l=>l.isCurrentTurn)??t[0]},[cs,O,ke,Je,J,ee,le,I,de,Be,zs,Ws,Qs,Js,Ys,Zs]),lr=a.useMemo(()=>{if(!ds)return[];const{matchAvg:t,allTimeAvg:s,...r}=ds;return[{...r,matchAvg:void 0,allTimeAvg:void 0}]},[ds]);ds?.name;const Ti=O?le:I,us=H.players?.[H.currentPlayerIdx];let or=0,cr=0;if(us&&us.legs&&us.legs.length>0){for(const t of us.legs)if(Array.isArray(t.visits))for(const s of t.visits)or+=s.score||0,cr+=s.darts||0}const Ei=or+(Be||0),dr=cr+(de||0),Ri=dr>0?Ei/dr*3:0,Ce=a.useCallback(t=>Math.max(0,Math.min(99,Math.round(t||0))).toString(),[]),M=a.useCallback((t,s=1)=>{!t||s<=0||sr(r=>({...r,[t]:(r[t]||0)+s}))},[]),E=a.useCallback(t=>{t&&sr(s=>s[t]===void 0?s:{...s,[t]:0})},[]);Si[m];const ur=a.useCallback(()=>{He.current&&(He.current=null),fe(),os(!1)},[fe]);a.useCallback(t=>{const s=je(t,0,y);ur(),_(s),ne.current=s;const r=s===0?y:s;yt(r),Ye.current=r,se(0),ae.current=0,z(0),$.current=0,X(0),re.current=0,ye(null),Pe(0),w(0),qt.current=0,s===0?(G("player"),U(!0)):(G(null),U(!1))},[ur,_,y,yt,se,z,X,ye,Pe,w,G,U]);const mr=a.useCallback((t,s)=>{t==="player"?(Pt(s),Ja("")):(Bt(s),er("")),G(null),U(!1)},[Bt,er,Ja,G,Pt,U]),Ii=a.useCallback(()=>{tr(t=>t&&(t.stage===1?{...t,stage:2}:(mr(t.target,t.value),null)))},[mr]),At=a.useCallback(()=>{tr(null)},[]);a.useEffect(()=>{if(!ls)return;const t=s=>{s.key==="Escape"&&(s.preventDefault(),At())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[At,ls]);const hn=(t=>{switch(t){case"small":return"px-1.5 py-0.5 text-xs";case"large":return"px-3 py-1 text-sm";default:return"px-2 py-0.5 text-sm"}})(me),et=a.useRef(null),tt=a.useRef(null),xr=a.useRef(null),[st,fn]=a.useState("first"),[ms,hr]=a.useState(1),Pi=a.useRef(null);a.useEffect(()=>{const t=Math.max(1,Math.floor(Number(ms)||1)),s=st==="first"?t:Math.max(1,Math.ceil(t/2));On(s)},[st,ms]),a.useEffect(()=>{if(!Ss){qn(1),Qn(!1);return}const t=()=>{const l=et.current,d=tt.current;if(!l||!d)return;const b=xr.current?xr.current.getBoundingClientRect().height:0,g=Math.max(0,l.clientHeight-b-6),N=Math.max(0,l.clientWidth-8),f=d.getBoundingClientRect(),h=Ot||1,j=f.height/h,S=f.width/h,T=g>0?g/j:1,C=N>0?N/S:1,hs=Math.min(1,Math.max(.5,Math.min(T,C))),ue=j*hs,zi=g>0&&ue-g>1;Qn(zi),qn(hs)};t();const s=window.ResizeObserver,r=s?new s(()=>t()):null;return r&&et.current&&r.observe(et.current),r&&tt.current&&r.observe(tt.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t);try{r&&et.current&&r.unobserve(et.current)}catch{}try{r&&tt.current&&r.unobserve(tt.current)}catch{}}},[Ss,Ot]),a.useEffect(()=>{const t=s=>{const r=s?.detail?.mode;r&&(at(r),Mt())};return window.addEventListener("ndn:auto-start",t),()=>window.removeEventListener("ndn:auto-start",t)},[]),a.useEffect(()=>{const t=s=>{const r=s?.detail?.formatType,l=s?.detail?.formatCount,d=s?.detail?.startScore;(r==="first"||r==="best")&&fn(r),typeof l=="number"&&isFinite(l)&&hr(Math.max(1,Math.floor(l))),typeof d=="number"&&isFinite(d)&&xe(Math.max(1,Math.floor(d)))};return window.addEventListener("ndn:offline-format",t),()=>window.removeEventListener("ndn:offline-format",t)},[]),a.useEffect(()=>{if(!ie)return;const t=setTimeout(()=>Mt(),50);return()=>clearTimeout(t)},[ie]),a.useEffect(()=>{if(!Ns||O||L==="None"||hi<=0)return;let t,s=performance.now();const r=l=>{const d=l-s;s=l,wt(b=>{const g=b-d;if(g<=0){let N=0,f=0,h=I;for(we(0);N<3&&h>0;){const j=Ol(h,L),S=je(j-N*20,0,Math.min(60,h)),T=h-S;if(qs(S),Xs(ue=>ue+1),Ga(ue=>ue+1),T<0){h=I,qe(0),kt(0),f=0,St(0),we(0);break}f+=S,qe(ue=>ue+S),Ya(ue=>ue+S);const C=h,hs=T;if(C>50&&hs<=50?kt(1):C<=50&&kt(ue=>ue+1),h=T,N+=1,we(N),h===0)break}if(rt(h),h===0){f===180?nn(S=>S+1):f>=140?an(S=>S+1):f>=100&&rn(S=>S+1);const j=I;j<=170&&Za(S=>Math.max(S,j)),I<=50&&($a(S=>S+(en>0?en:1)),Wa(S=>S+1)),St(f),qe(0),kt(0),we(0),G("ai"),U(!0)}return h>0&&N>=3&&(f===180?nn(j=>j+1):f>=140?an(j=>j+1):f>=100&&rn(j=>j+1),St(f),qe(0),kt(0),we(0)),we(0),ot(!0),0}return g}),t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>cancelAnimationFrame(t)},[Ns,O,L,I]),a.useEffect(()=>{H.inProgress&&($n.current||(_n(!0),$n.current=!0))},[H.inProgress]);function Mt(){$e(!0),_(y),ne.current=y,rt(y),vs(!1),Ke(!0),ot(!0),w(0),Xe(0),Pe(0),z(0),$.current=0,yt(y),se(0),ye(null),X(0),wt(0),Xs(0),qs(0),qe(0),we(0),St(null),G(null),Pt(0),Bt(0),Gn([]),Fs(0),Vs(0),Us(!1),Dt(0),Ga(0),es(0),Ya(0),ts(0),ss(0),ns(0),nn(0),an(0),rn(0),as(0),Za(0),Ct(0),Zt(0),$a(0),Wa(0),E("X01");const t=Math.max(1,Math.floor(Number(ms)||1));if(On(st==="first"?t:Math.max(1,Math.ceil(t/2))),B)try{Ne({mode:m,x01Start:y,firstTo:It,aiLevel:L})}catch{}const s=Tt(n,"You"),r=L!=="None"?`AI (${L})`:"Opponent",l=L!=="None"?[s,r]:[s];H.newMatch(l,y,`offline-${Date.now()}`);try{ol()}catch{}}function Bi(){_(y),ne.current=y,rt(y),vs(!1),is(null),Se(!1),Ke(!0),ot(!0),w(0),Xe(0),Pe(0),z(0),$.current=0,yt(y),se(0),Ye.current=y,ae.current=0,ye(null),X(0),re.current=0,re.current=0,wt(0),Xs(0),qs(0),qe(0),we(0),St(null),G(null)}function Lt(t){ki(t),z(0),$.current=0,yt(t===0?y:t),Ye.current=t===0?y:t,X(0),re.current=0,L!=="None"?(ot(!1),wt(zn)):(wt(0),ot(!0))}function P(t){if(!Number.isFinite(t))return!1;const s=Ye.current,r=ne.current,l=$.current,d=ae.current,b=l>0||d>0;b&&(_(s),ne.current=s,z(0),$.current=0,se(0),ae.current=0,X(0),re.current=0,Pe(0),w(0),Xe(C=>Math.max(0,C-l)),Dt(C=>Math.max(0,C-l)),es(C=>Math.max(0,C-d)),qt.current=0);const g=b?s:r,N=g<=170?170:180,f=je(Math.round(t),0,N),h=g-f,j=je(Math.round(Vt||0),0,3),S=je(Math.round(Ft||0),0,3),T=h===0?j:3;if(M("X01",T),Xe(C=>C+T),Dt(C=>C+T),z(T),$.current=T,se(f),ae.current=f,ye(f),f===180?ts(C=>C+1):f>=140?ss(C=>C+1):f>=100&&ns(C=>C+1),h<0){if(x)try{Cn(ke,0,Math.max(s,0),c,{volume:u,checkoutOnly:p})}catch{}try{fs.getState().recordVisit("offline-x01",T,0,{preRemaining:g,postRemaining:s,bust:!0,finish:!1})}catch{}_(s),ne.current=s,ye(0),se(0),ae.current=0,z(0),$.current=0,X(0),re.current=0;try{H.addVisit(0,T)}catch{}return Lt(s),!0}if(_(h),ne.current=h,es(C=>C+f),x)try{Cn(ke,f,Math.max(h,0),c,{volume:u,checkoutOnly:p})}catch{}if(h===0?(Ct(C=>C+S),Zt(C=>C+1),X(S),re.current=S):g<=50&&Ct(C=>C+3),h===0){g<=170&&as(C=>Math.max(C,g)),is(null),Se(!1);try{fs.getState().recordVisit("offline-x01",T,f,{preRemaining:g,postRemaining:0,finish:!0,bust:!1})}catch{}try{H.addVisit(f,T),H.endLeg(g)}catch{}return G("player"),U(!0),z(0),$.current=0,se(0),ae.current=0,X(0),re.current=0,!0}try{fs.getState().recordVisit("offline-x01",T,f,{preRemaining:g,postRemaining:h,finish:!1,bust:!1})}catch{}try{H.addVisit(f,T)}catch{}return Lt(h),se(0),ae.current=0,z(0),$.current=0,X(0),re.current=0,!0}const Q=Fl({match:H,commitManualVisitTotal:P,endTurn:Lt}),[pn,fr]=a.useState(""),pr=t=>{fr(t)},bn=()=>{const t=parseInt(pn,10);if(isNaN(t)||t<0||t>180){alert("Enter a number 0-180 for visit total");return}if(t>180){alert("Enter a number 0-180 for visit total");return}const s=ne.current<=170?170:180,r=je(Math.round(t),0,s);t>s&&it(`Visit totals cannot exceed ${s}.`,{type:"info",timeout:2200}),P(r)&&fr("")},br=a.useCallback(()=>{He.current&&(He.current=null,fe(),os(!1));const t=$.current,s=ae.current,r=Ye.current;t===0&&s===0||(_(r),ne.current=r,z(0),$.current=0,se(0),ae.current=0,X(0),re.current=0,Pe(0),w(0),Xe(l=>Math.max(0,l-t)),Dt(l=>Math.max(0,l-t)),es(l=>Math.max(0,l-s)),qt.current=0)},[fe]);a.useEffect(()=>{const t=s=>{const r=s?.detail;!r||r?.source==="offline-play"||br()};return window.addEventListener("ndn:clear-visit-request",t),()=>window.removeEventListener("ndn:clear-visit-request",t)},[br]);function gr(t){M("Double Practice");const s=je(Math.round(t||0),0,60);if(Pe(s),Xe(r=>r+1),Dt(r=>r+1),Vr(s,dt)){const r=Ds+1;As(r),Cs(l=>Math.min(20,l+1)),r>=21&&(G("player"),U(!0))}w(0)}function vr(){gr(Number(D))}function jr(){const t=Et(Y);if(t==null){alert("Enter like D16, 50, 25, T20");return}gr(t),q("")}function Nr(t,s,r){if(ra)return!1;M("Bob's 27");const l=sa,d=s==="DOUBLE"&&r===l||!s&&t===l*2;return d&&Ts(b=>b+1),aa(b=>{const g=b+1;if(g>=3){const N=ai+(d?1:0);N>0?Ls(h=>h+N*l*2):Ls(h=>h-l*2);const f=l+1;return na(f),Ts(0),f>20&&ia(!0),0}return g}),!0}function yr(){Nr(Math.max(0,D|0)),w(0)}function wr(){na(1),Ls(27),aa(0),Ts(0),ia(!1),E("Bob's 27")}function gn(t){return M("Count-Up"),ca(s=>s+Math.max(0,t|0)),da(s=>{const r=s+1;return r>=3?(oa(l=>l+1),0):r}),!0}function vn(t){return M("High Score"),xa(s=>s+Math.max(0,t|0)),ha(s=>{const r=s+1;return r>=3?(ma(l=>l+1),0):r}),!0}function jn(t){return M("Low Score"),ba(s=>s+Math.max(0,t|0)),ga(s=>{const r=s+1;return r>=3?(pa(l=>l+1),0):r}),!0}function Sr(t,s,r,l,d,b,g,N){const f=t-g;if(!(f<0))if(f===0){if(N==="DOUBLE"||N==="INNER_BULL"){b(h=>h+1),d(h=>h+1),l(()=>0),s(t);return}s(f)}else s(f);l(h=>{const j=h+1;return j>=3?(d(S=>S+1),0):j})}function kr(t,s){return M("Checkout 170"),Sr(Es,Rs,va,ja,ya,Sa,t,s),va+1>=3&&Rs(170),!0}function Cr(t,s){return M("Checkout 121"),Sr(Is,Ps,ka,Ca,Aa,La,t,s),ka+1>=3&&Ps(121),!0}function xs(t){const s=Et(Y);if(s==null){alert("Enter like T20, D16, 25, 50");return}const r=Y.trim().toUpperCase(),l=r.startsWith("D")||r==="50"||r==="BULL"||r==="DBULL"||r==="IBULL"||r.includes("INNER");t?kr(s,l?"DOUBLE":void 0):Cr(s,l?"DOUBLE":void 0),q("")}function Hi(){Rs(170),ja(0),ya(0),Sa(0),E("Checkout 170")}function Fi(){Ps(121),Ca(0),Aa(0),La(0),E("Checkout 121")}function Nn(t,s,r){return Ea?!1:(M("Treble Practice"),(s==="TRIPLE"&&r===Ee||!s&&t===Ee*3)&&Fs(d=>d+1),Vs(d=>{const b=d+1;if(b%3===0&&[20,19,18].includes(Ee)){const g=["T20","T19","T18"],N=g.indexOf(`T${Ee}`),f=g[(N+1)%g.length];Bs(Number(f.replace("T","")))}return xt>0&&b>=xt&&Us(!0),b}),!0)}function Dr(){Fs(0),Vs(0),Us(!1),E("Treble Practice")}function Vi(t,s,r){return M("Baseball"),Ia(l=>{const d={...l};return wl(d,t,s,r),d}),!0}function Ui(){Ia(_r()),E("Baseball")}function Oi(t,s,r){return M("Golf"),Ba(l=>{const d={...l};return kl(d,t,s,r),d}),!0}function _i(){Ba($r()),E("Golf")}function $i(t,s,r,l){return M("Tic Tac Toe"),Ha(d=>{const b={...d,board:[...d.board]};return Dl(b,t,s,r,l),b}),!0}function Ki(){Ha(Kr()),E("Tic Tac Toe")}function Wi(t,s,r){return M("American Cricket"),Fa(l=>{const d={...l,marks:{...l.marks}};return Bl(d,t,s,r,()=>!1),d}),!0}function Ar(){Fa(Xr()),E("American Cricket")}function yn(t,s,r){M("Around the Clock");const l=De[Te];let d=!1;if(typeof r=="number"&&r===l&&(s==="SINGLE"||s==="DOUBLE"||s==="TRIPLE")&&(d=!0),l===25&&(s==="BULL"||t===25)&&(d=!0),l===50&&(s==="INNER_BULL"||t===50)&&(d=!0),d||(t===l||t===l*2||t===l*3)&&(d=!0),d){const b=ea+1;return ta(b),Jn(g=>g+1),!0}return!0}function Mr(){yn(Math.max(0,D|0)),w(0)}function Lr(){const t=Et(Y);if(t==null){alert("Enter like T20, D5, 25, 50");return}yn(t),q("")}function wn(t,s,r){return M("Cricket"),Ms(l=>{const d={...l,marks:{...l.marks}};return ml(d,t,s,r,()=>!1),d}),te(l=>{const d=l+1;return d>=3?0:d}),!0}function Tr(){wn(Math.max(0,D|0)),w(0)}function Sn(t,s,r){return M("Shanghai"),$t(l=>{const d={...l,turnHits:{...l.turnHits}};return fl(d,t,s,r),d}),te(l=>{const d=l+1;return d>=3?($t(b=>{const g={...b,turnHits:{...b.turnHits}};return pl(g),g}),0):d}),!0}function Er(){Sn(Math.max(0,D|0)),w(0)}function Rr(t,s,r){return M("Halve It"),Kt(l=>{const d={...l,targets:[...l.targets]};return bl(d,t,s,r),d}),te(l=>{const d=l+1;return d>=3?(Kt(b=>{const g={...b,targets:[...b.targets]};return gl(g),g}),0):d}),!0}function Ir(){Rr(Math.max(0,D|0)),w(0)}function Pr(t,s,r){return M("High-Low"),Gt(l=>{const d={...l};return vl(d,t,s,r),d}),te(l=>{const d=l+1;return d>=3?(Gt(b=>{const g={...b};return jl(g),g}),0):d}),!0}function Br(){Pr(Math.max(0,D|0)),w(0)}function Gi(){const t=Ht??"player",s=t==="player"?Yt||void 0:en||void 0,r=1,l=t==="player"?Ua:Oa;Gn([...ge,{winner:t,doubleDarts:Ft,checkoutDarts:Vt,winnerDarts:l,doublesAtt:s,doublesHit:r}]),U(!1);let d=J,b=ee;if(Ht==="player"?d+=1:Ht==="ai"&&(b+=1),Pt(d),Bt(b),G(null),d>=It||b>=It){try{ll(m,t==="player")}catch{}try{H.endGame()}catch{}Ke(!1),$e(!1),_(y),rt(y),ln(!0);return}Bi()}const kn=!Fr.includes(m)&&!(n?.fullAccess||n?.admin);return e.jsxs("div",{className:"card ndn-game-shell ndn-page relative overflow-hidden md:overflow-hidden overflow-y-auto",children:[ei&&e.jsx(tl,{players:H.players||[],user:n,onDone:()=>_n(!1)}),e.jsxs("h2",{className:"text-3xl font-bold text-brand-700 mb-4 ndn-section-title",children:["Offline Mode ï¿½"," ",e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-400/30 text-emerald-200 align-middle",children:"Modern layout"})]}),e.jsxs("div",{className:"ndn-shell-body",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[e.jsxs("select",{onPointerDown:t=>{t.stopPropagation()},onMouseDown:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation?.()},className:"input w-full",value:m,onChange:t=>at(t.target.value),children:[Fr.map(t=>e.jsx("option",{value:t,children:t},t)),sl.map(t=>e.jsxs("option",{value:t,disabled:!(n?.fullAccess||n?.admin),children:[t," ",n?.fullAccess||n?.admin?"":"(Premium)"]},t))]}),m==="Treble Practice"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"font-semibold",children:"Throws per game"}),e.jsx("input",{className:"input w-full",type:"number",min:3,step:3,value:xt,onChange:t=>ui(Math.max(3,Math.floor(Number(t.target.value)||30)))})]}),e.jsx("div",{className:"sm:col-span-2 text-xs text-slate-300",children:"Target cycles T20â†’T19â†’T18 every 3 darts. Game ends after the selected number of throws."}),v&&!ct&&e.jsx("div",{className:"hidden md:block w-[360px] p-3 min-w-0",children:e.jsx("div",{"data-testid":"offline-camera-pane",className:"rounded-2xl overflow-hidden bg-black/70 p-2",style:{willChange:"transform, opacity"},children:e.jsx(Yr,{scoringMode:"x01",showToolbar:k,immediateAutoCommit:!0,cameraAutoCommit:"camera",onAddVisit:F(P),onAutoDart:(t,s,r)=>{}})})})]}),!n?.fullAccess&&e.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”’"}),e.jsx("span",{children:"Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM."})]}),m==="X01"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-semibold mt-2",children:"Enter starting score (1-1001):"}),e.jsx("input",{className:"input w-full",type:"number",min:1,max:1001,value:y,onChange:t=>xe(Number(t.target.value))}),e.jsx("label",{className:"font-semibold mt-2",children:"Play against AI bot?"}),e.jsxs("select",{onPointerDown:t=>{t.stopPropagation()},onMouseDown:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation?.()},className:"input w-full",value:L,onChange:t=>Le(t.target.value),children:[e.jsx("option",{value:"None",children:"None"}),Vl.map(t=>e.jsx("option",{value:t,children:t},t))]}),L!=="None"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"font-semibold",children:"AI throw delay (seconds)"}),e.jsx("input",{className:"input w-full",type:"number",min:.5,max:10,step:.5,value:zn/1e3,onChange:t=>ti(Math.round(Number(t.target.value)*1e3))})]}),e.jsx("div",{className:"text-sm text-slate-300",children:"Controls how long the AI waits before its visit."})]}),e.jsx("button",{className:"btn mt-2",onClick:()=>bs(!0),children:"X01 Rules & Regulations! ðŸ“–"})]}),m==="Double Practice"&&e.jsx("div",{className:"mt-2 text-brand-600",children:"Hit doubles D1 â†’ D20 â†’ DBULL in as few darts as possible. AI and X01 settings don't apply."})]}),!gs&&e.jsx("button",{className:"btn",disabled:kn,title:kn?"PREMIUM required for this mode":"",onClick:Mt,children:"Start Match ðŸš€"}),Ns&&e.jsx("div",{className:`fixed inset-0 z-[1000] ${ws?"":"flex items-center justify-center p-3 sm:p-4"}`,children:e.jsx(nt,{storageKey:"ndn:modal:offline-match:v2",className:`${ws?"w-full h-full ndn-modal-tight":""} relative flex flex-col overflow-hidden`,fullScreen:ws,defaultWidth:1100,defaultHeight:720,minWidth:720,minHeight:480,maxWidth:1600,maxHeight:1200,initialFitHeight:!0,children:e.jsx("div",{className:"flex h-full",children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-x-hidden pt-2 pb-2 pr-0 -ml-2 sm:-ml-3",style:{overflowY:"auto",willChange:"scroll-position",transform:"translateZ(0)",WebkitOverflowScrolling:"touch",contain:"layout style"},ref:t=>{et.current=t},children:[Ae!=="modern",ys&&e.jsx("div",{className:"fixed inset-0 z-[170] flex items-center justify-center bg-black/70 p-4",children:e.jsxs(nt,{storageKey:"ndn:modal:offline-quit-confirm",className:"w-full relative",defaultWidth:460,defaultHeight:320,minWidth:360,minHeight:260,maxWidth:720,maxHeight:520,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Confirm Quit (Both Players)"}),e.jsx("p",{className:"text-sm text-slate-200 mb-4",children:"Both players must accept to end the match. If either player wants to continue, the match will keep going."}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("button",{className:`btn w-full ${lt.player?"bg-emerald-600 hover:bg-emerald-700":"bg-slate-700 hover:bg-slate-800"}`,onClick:()=>Ut(t=>({...t,player:!0})),children:[Tt(n,"Player 1")," Accepts"]}),e.jsxs("button",{className:`btn w-full ${lt.opponent?"bg-emerald-600 hover:bg-emerald-700":"bg-slate-700 hover:bg-slate-800"}`,onClick:()=>Ut(t=>({...t,opponent:!0})),children:[L==="None"?"Opponent":`${L} AI`," Accepts"]}),e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 w-full",onClick:()=>{Ut({player:!1,opponent:!1}),Yn(!1)},children:"Continue Match"})]})]})}),m==="X01"&&Ni&&rs&&e.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center bg-black/70 p-4",onClick:()=>Se(!1),children:e.jsxs("div",{className:"w-full max-w-xl rounded-3xl border border-emerald-400/40 bg-slate-900/95 p-4 text-white shadow-2xl",onClick:t=>t.stopPropagation(),onKeyDown:t=>{(t.key==="Enter"||t.key==="Escape")&&(t.preventDefault(),Se(!1))},tabIndex:-1,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/70",children:"Checkout box"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-100",children:[rs.remaining," left"]})]}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>Se(!1),children:"Close"})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Darts used at double"}),e.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(t=>e.jsx("button",{className:`btn px-3 py-1 text-sm ${Ft===t?"bg-brand-600":"btn--ghost"}`,onClick:()=>Kn(t),children:Ce(t)},`double-${t}`))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Darts at checkout"}),e.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(t=>e.jsx("button",{className:`btn px-3 py-1 text-sm ${Vt===t?"bg-brand-600":"btn--ghost"}`,onClick:()=>Wn(t),children:Ce(t)},`checkout-${t}`))})]}),rs.routes.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-emerald-200/80 mb-1",children:"Suggested checkout"}),e.jsx("div",{className:"space-y-1",children:rs.routes.map(t=>e.jsx("div",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-sm font-semibold",children:t},t))})]}),e.jsx("div",{className:"pt-2 flex justify-end",children:e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-4 py-1 text-sm",onClick:()=>Se(!1),children:"Enter"})})]})]})}),e.jsxs("div",{ref:t=>{tt.current=t},className:"will-change-transform",style:Ss?{transform:`scale(${Ot})`,transformOrigin:"top left",width:"100%",fontSize:`${Math.max(.8,Math.min(1,Ot))}em`}:void 0,children:[e.jsx("h3",{className:"text-xl font-bold mb-2 mt-1 leading-tight",children:m==="X01"?"X01 Match âš”ï¸":`${m} âš”ï¸`}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Mode: ",m]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Start: ",y]}),e.jsxs("div",{ref:Pi,className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[e.jsx("span",{children:"Format:"}),(()=>{const t=le!==y||I!==y||de>0,s=`pill ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"} `;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:`${s} ${st==="first"?"pill--filled":"pill--ghost"}`,onClick:()=>{t||fn("first")},title:"First to N",children:"First to"}),e.jsx("button",{type:"button",className:`${s} ${st==="best"?"pill--filled":"pill--ghost"}`,onClick:()=>{t||fn("best")},title:"Best of N (wins = ceil(N/2)",children:"Best of"})]}),e.jsx("input",{className:`input w-16 text-center ${t?"opacity-50":""}`,type:"number",min:1,step:1,value:ms,onChange:r=>hr(Math.max(1,Math.floor(Number(r.target.value)||1))),disabled:t,title:st==="first"?"First to N":"Best of N (wins = ceil(N/2))"})]})})()]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs: ",J,"â€“",ee]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px] flex-wrap",children:[e.jsx("span",{className:"opacity-70",children:"Match"}),e.jsxs("select",{className:`input input-compact font-bold ${hn}`,value:Rt,onChange:t=>Ue(t.target.value),children:[e.jsx("option",{value:"singles",children:"Singles"}),e.jsx("option",{value:"doubles",children:"Doubles"})]}),e.jsx("input",{className:`input ${hn} w-[7.5rem]`,value:pe,onChange:t=>be(t.target.value),placeholder:"Team A"}),e.jsx("span",{className:"opacity-50",children:"vs"}),e.jsx("input",{className:`input ${hn} w-[7.5rem]`,value:Z,onChange:t=>Oe(t.target.value),placeholder:"Team B"})]})]}),m!=="X01"?e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2",children:[m==="Double Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:ps[dt]?.label||"â€”"})]})}),m==="Around the Clock"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:De[Te]===25?"25 (Outer Bull)":De[Te]===50?"50 (Inner Bull)":De[Te]||"â€”"})]})}),m==="Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Cricket â€” Close 20â€“15 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-[11px] mb-2",children:Fn.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,ut.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points:"," ",e.jsx("span",{className:"font-semibold",children:ut.points})]}),xl(ut)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Ms(Dn()),te(0),E("Cricket")},children:"Reset"})]})]}),m==="Shanghai"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Round"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:_t.round})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",_t.score]}),_t.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{$t(An()),te(0),E("Shanghai")},children:"Reset"})]})]}),m==="Halve It"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Stage"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[mt.stage+1,"/",mt.targets.length]})]}),e.jsxs("div",{className:"text-sm",children:["Target:"," ",e.jsx("span",{className:"font-semibold",children:(()=>{const t=qr(mt);return t?t.kind==="ANY_NUMBER"?"Any":t.kind==="BULL"?"Bull":t.kind==="DOUBLE"||t.kind==="TRIPLE"||t.kind==="NUMBER"?`${t.kind} ${t.num}`:"â€”":"â€”"})()})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",mt.score]}),mt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Kt(Mn()),te(0),E("Halve It")},children:"Reset"})]})]}),m==="High-Low"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Wt.round," Â· Target ",Wt.target]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Wt.score]}),Wt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Gt(Ln()),te(0),E("High-Low")},children:"Reset"})]})]}),m==="Bob's 27"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Target"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold",children:["D",sa]})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ni]}),ra&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:wr,children:"Reset"})]})]}),m==="Count-Up"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",la,"/8"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ri]})]}),m==="High Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",ua,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",li]})]}),m==="Low Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",fa,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ci]})]}),m==="Checkout 170"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Es}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",Na," Â· Successes:"," ",wa]})]}),m==="Checkout 121"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Is}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",Da," Â· Successes:"," ",Ma]})]}),m==="Treble Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Treble Target: T",Ee]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Hits: ",Hs]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("label",{className:"text-sm",children:"Target"}),e.jsx("div",{className:"inline-flex items-center gap-1",children:[20,19,18].map(t=>e.jsxs("button",{className:`btn px-2 py-0.5 text-xs ${Ee===t?"bg-emerald-600/30 border border-emerald-400/30":""}`,onClick:()=>Bs(t),children:["T",t]},`tpick-header-${t}`))}),e.jsx("span",{className:"opacity-60 text-xs",children:"or"}),e.jsx("select",{className:"input w-24",value:Ee,onChange:t=>Bs(parseInt(t.target.value,10)),children:Array.from({length:20},(t,s)=>s+1).map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Dr,children:"Reset"})]})]})}),m==="Baseball"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Inning"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ra.inning}),e.jsxs("div",{className:"text-sm",children:["Score:"," ",e.jsx("span",{className:"font-semibold",children:Ra.score})]})]}),m==="Golf"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Hole"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Pa.hole}),e.jsxs("div",{className:"text-sm",children:["Strokes:"," ",e.jsx("span",{className:"font-semibold",children:Pa.strokes})]})]}),m==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Turn"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Re.turn}),Re.finished&&e.jsxs("div",{className:"mt-1 text-xs",children:["Winner: ",Re.winner||"â€”"]})]}),m==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Target"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Tn[Xt.targetIndex]}),e.jsxs("div",{className:"text-sm",children:["Progress:"," ",e.jsxs("span",{className:"font-semibold",children:[Xt.targetIndex+1,"/",Tn.length]})]}),Xt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["ðŸŽ‰ Finished in ",Xt.darts," darts!"]})]}),m==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[gt.score,"/",gt.target]}),e.jsxs("div",{className:"text-sm",children:["Darts:"," ",e.jsx("span",{className:"font-semibold",children:gt.darts})]}),gt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",gt.target,"!"]})]}),m==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[jt.score,"/",jt.target]}),e.jsxs("div",{className:"text-sm",children:["Darts:"," ",e.jsx("span",{className:"font-semibold",children:jt.darts})]}),jt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",jt.target,"!"]})]}),m==="American Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Close 20â€“12 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-10 gap-1 text-center text-[11px] mb-2",children:Vn.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,Os.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points:"," ",e.jsx("span",{className:"font-semibold",children:Os.points})]}),Hl(Os)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Ar,children:"Reset"})]})]}),m==="Killer"&&e.jsx(e.Fragment,{children:Va?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Turn"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:R[he]?.name||"â€”"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:ze?`${R.find(t=>t.id===ze)?.name||"Winner"} Wins`:mi||"Ready"})]}):e.jsx("div",{className:"text-xs text-slate-600",children:"Setup players and assign numbers"})})]}):e.jsxs("div",{className:"space-y-3 mb-2",children:[e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:gap-4",children:[e.jsx("div",{className:"flex-1 min-w-0 space-y-2.5",children:m==="X01"&&e.jsx(cl,{inProgress:!0,startingScore:y,onAddVisit:F(P),quickButtons:[180,140,100,60],onNextPlayer:()=>Q?.nextPlayer(),onEndLeg:()=>{},onUndo:()=>{},showDartsSelect:!0})}),e.jsxs("div",{className:"flex flex-col gap-3 md:w-[340px] md:flex-shrink-0",children:[e.jsx(Fe,{gameMode:m,players:lr,matchScore:`${J}-${ee}`}),e.jsx("div",{className:"hidden md:block rounded-2xl overflow-hidden bg-black border border-white/10",children:v?e.jsx(A,{scoringMode:m==="X01"?"x01":"custom",showToolbar:k,immediateAutoCommit:!0,cameraAutoCommit:"camera",onAddVisit:F(P),onAutoDart:()=>{}}):e.jsx("div",{className:"p-4 text-sm text-slate-200 text-center",children:"Camera disabled"})})]})]}),ct&&v&&!Zn&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 md:hidden",children:[e.jsx("button",{className:"btn rounded-full border border-white/20 bg-white/10 px-4 py-2 text-sm text-white",onClick:()=>ks(!0),children:"Camera"}),e.jsx("span",{className:"text-xs text-white/60",children:"Tap to open the camera tab"})]})]})}),ct&&v&&Zn&&e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-start justify-center px-3 pt-6 md:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80"}),e.jsx("div",{className:"relative z-10 w-full max-w-[420px]",children:e.jsxs("div",{className:"relative h-[75vh] rounded-[28px] overflow-hidden bg-black shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx(A,{scoringMode:"x01",showToolbar:k,immediateAutoCommit:!0,cameraAutoCommit:"camera",onAddVisit:F(P),onAutoDart:(t,s,r)=>{}})}),e.jsx("button",{className:"absolute top-3 right-3 rounded-full bg-black/60 p-2 text-white",onClick:()=>ks(!1),"aria-label":"Close camera tab",children:"âœ•"}),e.jsxs("div",{className:"absolute bottom-4 right-4 w-full max-w-[220px] rounded-[20px] bg-black/70 p-3 text-left text-white shadow-lg",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-white/60",children:"Current thrower"}),e.jsx("div",{className:"text-sm font-semibold leading-tight",children:Ci}),e.jsxs("div",{className:"text-[11px] text-white/60",children:["Legs: ",Ai]}),e.jsx("div",{className:"mt-2 text-[10px] uppercase tracking-wide text-white/60",children:"Opponent"}),e.jsx("div",{className:"text-sm font-semibold leading-tight",children:Di}),e.jsxs("div",{className:"text-[11px] text-white/60",children:["Legs: ",Mi]})]})]})})]})]}),m!=="X01"?e.jsxs("div",{className:"space-y-2",children:[m==="Double Practice"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:ps[dt]?.label||"â€”"})]}),v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,onAutoDart:(t,s)=>{if((s==="DOUBLE"||s==="INNER_BULL")&&Vr(t,dt)){const l=Ds+1,d=dt+1;return As(l),Cs(d),l>=ps.length&&setTimeout(()=>{As(0),Cs(0)},250),!0}return!1},immediateAutoCommit:!0,onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&vr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:vr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:Y,onChange:t=>q(t.target.value),onKeyDown:t=>{t.key==="Enter"&&jr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:jr,children:"Add"})]})]}),e.jsxs("div",{className:"text-xs text-slate-300",children:["Progress: ",Ds," of 21"]})]}),m==="Around the Clock"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:De[Te]===25?"25 (Outer Bull)":De[Te]===50?"50 (Inner Bull)":De[Te]||"â€”"})]}),v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>yn(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Mr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Mr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D5, 25, 50)",value:Y,onChange:t=>q(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Lr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Lr,children:"Add"})]}),ea>=De.length&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{ta(0),Jn(0),E("Around the Clock")},children:"Reset"})]})]}),m==="Cricket"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>wn(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Tr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Tr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ms(Dn()),te(0),E("Cricket")},children:"Reset"})]})]}),m==="Shanghai"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Sn(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Er()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Er,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{$t(An()),te(0),E("Shanghai")},children:"Reset"})]})]}),m==="Halve It"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Rr(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Ir()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ir,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Kt(Mn()),te(0),E("Halve It")},children:"Reset"})]})]}),m==="High-Low"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Pr(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Br()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Br,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Gt(Ln()),te(0),E("High-Low")},children:"Reset"})]})]}),m==="Bob's 27"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Nr(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&yr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:yr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:wr,children:"Reset"})]})]}),m==="Count-Up"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:t=>gn(t),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(gn(D),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{gn(D),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{oa(1),ca(0),da(0),E("Count-Up")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",la,"/",ii]})]}),m==="High Score"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:t=>vn(t),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(vn(D),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{vn(D),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ma(1),xa(0),ha(0),E("High Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",ua,"/",oi]})]}),m==="Low Score"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:t=>jn(t),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(jn(D),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{jn(D),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{pa(1),ba(0),ga(0),E("Low Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",fa,"/",di]})]}),m==="Checkout 170"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s)=>kr(t,s==="MISS"?void 0:s),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:Y,onChange:t=>q(t.target.value),onKeyDown:t=>{t.key==="Enter"&&xs(!0)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>xs(!0),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Hi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Es," Â· Attempts: ",Na," ","Â· Successes: ",wa]})]}),m==="Checkout 121"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s)=>Cr(t,s==="MISS"?void 0:s),onAddVisit:F(P),onEndLeg:t=>Q.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:Y,onChange:t=>q(t.target.value),onKeyDown:t=>{t.key==="Enter"&&xs(!1)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>xs(!1),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Fi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Is," Â· Attempts: ",Da," ","Â· Successes: ",Ma]})]}),m==="Treble Practice"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Nn(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (T20)",value:Y,onChange:t=>q(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){const s=Et(Y);s!=null&&Nn(s,void 0,void 0),q("")}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{const t=Et(Y);t!=null&&Nn(t,void 0,void 0),q("")},children:"Add Dart"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Hits: ",Hs," Â· Misses:"," ",Math.max(0,Ta-Hs)," Â· Darts:"," ",Ta,xt>0?`/${xt}`:""]}),Ea&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Dr,children:"Reset"})]})]}),m==="Baseball"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Vi(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ui,children:"Reset"})})]}),m==="Golf"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Oi(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:_i,children:"Reset"})})]}),m==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(t,s)=>s).map(t=>e.jsx("button",{className:`h-16 rounded-xl border ${Re.board[t]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(Re.finished||Re.board[t])return;const s=Number(prompt("Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)")||0),r=s%3===0?"TRIPLE":s%2===0?"DOUBLE":"SINGLE",l=t,d=Qr[l],b=d.type==="BULL"?null:d.num||null;$i(l,s,r,b)},children:Re.board[t]||""},t))}),v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ki,children:"Reset"})})]}),m==="American Cricket"&&e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Wi(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ar,children:"Reset"})})]}),m==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Tn[Ie.targetIndex]})]}),v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{const l=s==="MISS"?void 0:s;return M("Scam"),bt(Rn(Ie,t,l)),!0}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:1,max:25,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(M("Scam"),bt(Wr(Ie,D)),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{M("Scam"),bt(Wr(Ie,D)),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{bt(Ml()),E("Scam")},children:"Reset"})]}),Ie.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["ðŸŽ‰ Finished in ",Ie.darts," darts!"]})]}),m==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score:"," ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[oe.score,"/",oe.target]})]}),v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>(M("Fives"),vt(Pn(oe,t)),!0)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:5,max:50,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(M("Fives"),vt(Gr(oe,D)),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{M("Fives"),vt(Gr(oe,D)),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{vt(El(oe.target)),E("Fives")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 5, 10, 15, 20, 25, 50 Â· Darts:"," ",oe.darts]}),oe.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",oe.target," in"," ",oe.darts," darts!"]})]}),m==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score:"," ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[ce.score,"/",ce.target]})]}),v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>(M("Sevens"),Nt(Hn(ce,t)),!0)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:7,max:21,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(M("Sevens"),Nt(zr(ce,D)),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{M("Sevens"),Nt(zr(ce,D)),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Nt(Pl(ce.target)),E("Sevens")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 7, 14, 21 Â· Darts:"," ",ce.darts]}),ce.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",ce.target," in"," ",ce.darts," darts!"]})]}),m==="Killer"&&e.jsx(e.Fragment,{children:Va?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:R.map(t=>{const s=ht[t.id],r=zt[t.id];return e.jsxs("div",{className:`p-2 rounded-xl border ${s?.eliminated?"opacity-50 border-red-500/40 bg-red-500/10":"border-slate-700/50 bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded ${s?.isKiller?"bg-purple-500/20 text-purple-200 border border-purple-400/30":"bg-slate-600/30 text-slate-300"}`,children:s?.isKiller?"Killer":"Not Killer"})]}),e.jsxs("div",{className:"mt-1 text-sm",children:["Number:"," ",e.jsx("span",{className:"font-semibold",children:r})]}),e.jsxs("div",{className:"text-sm",children:["Lives:"," ",e.jsx("span",{className:"font-semibold",children:s?.lives??0})]})]},t.id)})}),v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(ze)return!1;const l=s==="MISS"?void 0:s,d=r?.sector??null,b=R[he];return b?(ft(g=>{const N={};Object.keys(g).forEach(j=>N[j]={...g[j]});const f=Ur(b.id,N,l,d);if(f.becameKiller)ve(`${b.name} became a Killer`);else if(f.victimId){const j=R.find(S=>S.id===f.victimId);ve(`${b.name} hit ${j?.name}'s ${zt[f.victimId]} (${f.livesRemoved} life${(f.livesRemoved||0)>1?"s":""})`)}else ve("No effect");const h=Or(N);return h&&pt(h),N}),Ge(g=>{const N=g+1;if(N>=3){let f=he;for(let h=1;h<=R.length;h++){const j=(he+h)%R.length,S=R[j].id,T=ht[S];if(T&&!T.eliminated&&T.lives>0){f=j;break}}return We(f),0}return N}),!0):!1}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-40",placeholder:"Manual (D16, T5)",value:Y,onChange:t=>q(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){if(ze)return;const r=Y.trim().toUpperCase().match(/^(S|D|T)?\s*(\d{1,2})$/);if(!r){q("");return}const l=r[1]||"S",d=parseInt(r[2],10),b=l==="D"?"DOUBLE":l==="T"?"TRIPLE":"SINGLE",g=R[he];ft(N=>{const f={};Object.keys(N).forEach(S=>f[S]={...N[S]});const h=Ur(g.id,f,b,d);if(h.becameKiller)ve(`${g.name} became a Killer`);else if(h.victimId){const S=R.find(T=>T.id===h.victimId);ve(`${g.name} hit ${S?.name}'s ${zt[h.victimId]} (${h.livesRemoved} life${(h.livesRemoved||0)>1?"s":""})`)}else ve("No effect");const j=Or(f);return j&&pt(j),f}),q(""),Ge(N=>{const f=N+1;if(f>=3){let h=he;for(let j=1;j<=R.length;j++){const S=(he+j)%R.length,T=R[S].id,C=ht[T];if(C&&!C.eliminated&&C.lives>0){h=S;break}}return We(h),0}return f})}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{let t=he;for(let s=1;s<=R.length;s++){const r=(he+s)%R.length,l=R[r].id,d=ht[l];if(d&&!d.eliminated&&d.lives>0){t=r;break}}We(t),Ge(0)},children:"Next Player"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ft({}),$s({}),Ks(!1),We(0),Ge(0),pt(null),ve("")},children:"Reset"})]}),ze&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Winner:"," ",R.find(t=>t.id===ze)?.name," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{ft({}),$s({}),Ks(!1),We(0),Ge(0),pt(null),ve("")},children:"Play Again"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Players"}),e.jsx("div",{className:"space-y-1",children:R.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input",value:t.name,onChange:r=>{const l=r.target.value;_s(d=>d.map((b,g)=>g===s?{...b,name:l}:b))}}),e.jsx("button",{className:"btn px-2 py-1",onClick:()=>_s(r=>r.filter((l,d)=>d!==s)),disabled:R.length<=2,children:"Remove"})]},t.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn px-2 py-1",onClick:()=>_s(t=>{const s=`p${t.length+1}`;return[...t,{id:s,name:`Player ${t.length+1}`}]}),children:"Add Player"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1",onClick:()=>{if(R.length<2){alert("Need at least 2 players");return}const t=R.map(l=>l.id),s=yl(t),r={};t.forEach(l=>{r[l]=Nl(s[l])}),$s(s),ft(r),We(0),Ge(0),pt(null),ve("Assigned numbers"),Ks(!0)},children:"Assign Numbers & Start"})]})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Your Turn"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col-reverse md:grid md:grid-cols-12 gap-4 items-start",children:[e.jsx("div",{className:"col-span-12 md:col-span-4 space-y-3",children:e.jsxs("div",{className:"rounded-2xl bg-slate-900/70 border border-white/10 p-4 shadow-lg",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-2",children:"Visit total"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-28",type:"number",min:0,max:le<=170?170:180,placeholder:"0â€“180",value:pn,onChange:t=>pr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&bn()}}),e.jsx("button",{className:"btn px-4 py-1 text-sm",onClick:bn,title:"Commit a full 3-dart total like 93",children:"Commit Visit"})]}),e.jsx("div",{className:"mt-3",children:e.jsx(dl,{value:pn,onChange:pr,onSubmit:bn,helperText:"Tap numbers then Enter to commit the visit total."})})]})}),e.jsxs("div",{className:"col-span-12 md:col-span-4 space-y-3",children:[e.jsx("div",{className:"rounded-2xl bg-slate-900/70 border border-white/10 p-2 text-slate-100 shadow-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"rounded-lg bg-black/30 px-2 py-1",children:[e.jsx("div",{className:"uppercase tracking-wide text-white/50",children:"Current score"}),e.jsx("div",{className:"text-lg font-bold text-white",children:Ti})]}),e.jsxs("div",{className:"rounded-lg bg-black/30 px-2 py-1",children:[e.jsx("div",{className:"uppercase tracking-wide text-white/50",children:"3-dart avg"}),e.jsx("div",{className:"text-lg font-bold text-emerald-300",children:Ri.toFixed(1)})]})]})}),e.jsxs("div",{className:"rounded-2xl bg-slate-900/70 border border-white/10 p-2 text-slate-100 shadow-lg",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Scoreboard"}),e.jsx(Fe,{gameMode:m,players:lr,matchScore:Li})]})]}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsxs("div",{className:"relative rounded-2xl bg-black/60 border border-white/10 overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"absolute inset-x-0 top-0 z-10 flex items-center justify-between px-2 py-1 text-[11px] uppercase tracking-wide text-white/70 bg-black/40 backdrop-blur-sm",children:[e.jsx("span",{children:"Board camera"}),!v&&e.jsx("span",{className:"text-amber-300 font-semibold",children:"Camera disabled"})]}),v?e.jsx("div",{className:"bg-black aspect-video max-h-[420px]",children:e.jsx(Yr,{scoringMode:"custom",showToolbar:!1,immediateAutoCommit:!0,onAutoDart:()=>!1})}):e.jsx("div",{className:"p-4 text-sm text-slate-200/80",children:"Enable the camera to keep the board visible while you score."})]})})]}),e.jsx("div",{className:"text-xs text-slate-300",children:"Tip: Tap numbers then Enter to commit a 3-dart visit."})]}),e.jsx("div",{className:"flex flex-col gap-3 min-h-0 flex-1 text-[14px]",children:e.jsx("div",{className:"min-w-0 flex flex-col gap-2 overflow-y-auto pr-2 text-sm",style:{willChange:"scroll-position",transform:"translateZ(0)",WebkitOverflowScrolling:"touch"}})}),m==="Cricket"&&v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return wn(t,s==="MISS"?void 0:s,r?.sector??null),!0}})}),m==="Shanghai"&&e.jsx(e.Fragment,{children:e.jsx(Fe,{gameMode:"Shanghai",players:cn})}),m==="Shanghai"&&v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return Sn(t,s==="MISS"?void 0:s,r?.sector??null),!0}})}),m==="Killer"&&e.jsx(e.Fragment,{children:e.jsx(Fe,{gameMode:"Killer",players:dn})}),m==="Scam"&&e.jsx(e.Fragment,{children:e.jsx(Fe,{gameMode:"Scam",players:un})}),m==="Scam"&&v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return bt(Rn(Ie,t,s)),!0}})}),m==="Fives"&&e.jsx(e.Fragment,{children:e.jsx(Fe,{gameMode:"Fives",players:mn})}),m==="Fives"&&v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return vt(Pn(oe,t)),!0}})}),m==="Sevens"&&e.jsx(e.Fragment,{children:e.jsx(Fe,{gameMode:"Sevens",players:xn})}),m==="Sevens"&&v&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(A,{scoringMode:"custom",showToolbar:k,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return Nt(Hn(ce,t)),!0}})})]}),e.jsx("div",{className:"h-1"})]})]})})})}),Un&&e.jsx(_l,{onClose:()=>bs(!1)}),kn&&e.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),e.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”’"}),e.jsx("div",{className:"font-semibold",children:"Premium mode locked"}),e.jsx("div",{className:"text-sm text-slate-200/80",children:"Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more."}),e.jsxs("button",{onClick:async()=>{try{const s=await(await fetch(`${$l}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n?.email})})).json();s.ok&&s.url?(window.location.href=s.url,s.development&&it("Opened Stripe test checkout (development mode)",{type:"info",timeout:3e3})):s.error==="STRIPE_NOT_CONFIGURED"?it("Premium purchases are not available in this development environment. Please visit the production site to upgrade.",{type:"error",timeout:4e3}):it("Failed to create checkout session. Please try again.",{type:"error",timeout:4e3})}catch{it("Error creating checkout. Please try again.",{type:"error",timeout:4e3})}},className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM Â·"," ",nl(al(),5)]})]})]}),wi&&typeof document<"u"?Hr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[200] flex items-center justify-center p-4",onClick:()=>Qe(!1),children:e.jsx(nt,{storageKey:"ndn:modal:offline-camera-manager",className:"relative",defaultWidth:640,defaultHeight:520,minWidth:480,minHeight:420,maxWidth:1200,maxHeight:900,initialFitHeight:!0,onClose:()=>Qe(!1),children:e.jsxs("div",{className:"space-y-3",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Camera Devices"}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Manage Offline Camera Feeds"})]}),e.jsx("button",{className:"btn bg-slate-800 hover:bg-slate-700 text-white",onClick:()=>Qe(!1),children:"Close"})]}),e.jsx(il,{fill:!0,user:n,playerScore:le,aiScore:I,x01Score:y,inMatch:gs,showWinPopup:js,pendingLegWinner:Ht,playerDartsThrown:Ua,aiDartsThrown:Oa,totalPlayerDarts:tn,totalAiDarts:sn,totalPlayerPoints:za,totalAiPoints:Xa,player180s:qa,player140s:fi,player100s:pi,ai180s:Qa,ai140s:bi,ai100s:gi,playerHighestCheckout:vi,aiHighestCheckout:ji,onClose:()=>Qe(!1),onOpen:()=>Qe(!0),layout:Ae})]})})}),document.body):null,ls&&typeof document<"u"?Hr.createPortal((()=>{const{target:t,value:s,stage:r}=ls,l=t==="player"?ke:Je,d=t==="player"?J:ee;return e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[240] flex items-center justify-center p-4",onClick:At,children:e.jsx(nt,{storageKey:"ndn:modal:offline-leg-override",className:"relative",defaultWidth:360,defaultHeight:240,minWidth:280,minHeight:200,maxWidth:420,maxHeight:360,initialFitHeight:!0,onClose:At,children:e.jsxs("div",{className:"space-y-3 max-w-[18rem] mx-auto",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/50",children:["Step ",r," of 2"]}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Override legs?"})]}),e.jsx("div",{className:"text-sm text-slate-200 leading-relaxed",children:r===1?e.jsxs(e.Fragment,{children:["Set ",l,"'s legs to"," ",e.jsx("span",{className:"font-semibold text-white",children:s}),"? Confirm to continue."]}):e.jsxs(e.Fragment,{children:["Final confirmation: set ",l,"'s legs to"," ",e.jsx("span",{className:"font-semibold text-white",children:s}),". Select"," ",e.jsx("span",{className:"font-semibold text-emerald-200",children:"Yes"})," ","to apply immediately."]})}),e.jsxs("div",{className:"rounded-xl bg-black/40 border border-white/10 p-3 text-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Current legs"}),e.jsx("div",{className:"text-base font-semibold text-white",children:d})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 text-white",onClick:At,children:"No"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 text-white",onClick:Ii,children:"Yes"})]})]})})})})(),document.body):null,js&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-[99999]",children:e.jsxs(nt,{storageKey:"ndn:modal:offline-win",className:"w-full relative",defaultWidth:420,defaultHeight:360,minWidth:360,minHeight:300,maxWidth:800,maxHeight:700,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Leg Won!"}),e.jsxs("div",{className:"mb-2 text-sm text-slate-200",children:["Average:"," ",e.jsx("span",{className:"font-mono",children:ul(H.players?.[H.currentPlayerIdx]?.currentThreeDartAvg??0)})]}),e.jsxs("div",{className:"grid gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Darts used at double"}),e.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(t=>e.jsx("button",{className:`btn px-3 py-1 text-sm ${Ft===t?"bg-brand-600":"btn--ghost"}`,onClick:()=>Kn(t),children:Ce(t)},`win-double-${t}`))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Darts at checkout"}),e.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(t=>e.jsx("button",{className:`btn px-3 py-1 text-sm ${Vt===t?"bg-brand-600":"btn--ghost"}`,onClick:()=>Wn(t),children:Ce(t)},`win-checkout-${t}`))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[e.jsx("button",{className:"btn w-full",onClick:Gi,children:"Submit"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 w-full",onClick:()=>{U(!1),Mt()},children:"Rematch"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 w-full",onClick:()=>{U(!1),Ke(!1),$e(!1)},children:"Back to Menu"})]})]})}),yi&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60]",children:e.jsxs(nt,{storageKey:"ndn:modal:offline-summary",className:"w-full relative",defaultWidth:820,defaultHeight:520,minWidth:600,minHeight:400,maxWidth:1400,maxHeight:1e3,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-xl font-extrabold mb-2",children:"Match Summary"}),e.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[m," Â· ",y," start Â· First to ",It]}),(()=>{const t=tn>0?za/tn*3:0,s=(()=>{const f=ge.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return f.length?`${Math.min(...f)} darts`:"â€”"})(),r=(()=>{const f=ge.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return f.length?`${Math.max(...f)} darts`:"â€”"})(),l=Qt>0?Math.round(_a/Qt*100):0,d=sn>0?Xa/sn*3:0,b=(()=>{const f=ge.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return f.length?`${Math.min(...f)} darts`:"â€”"})(),g=(()=>{const f=ge.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return f.length?`${Math.max(...f)} darts`:"â€”"})(),N=Jt>0?Math.round(Ka/Jt*100):0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:Tt(n,"You")}),e.jsx("div",{className:"text-3xl font-extrabold",children:J}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:t.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:Qt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[l,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:s})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:qa})]})]})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-black",children:[J," â€“ ",ee]})}),e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:L==="None"?"Opponent":`${L} AI`}),e.jsx("div",{className:"text-3xl font-extrabold",children:ee}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:d.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:Jt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[N,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:b})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:g})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:Qa})]})]})]})]})})(),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Legs Timeline"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ge.map((t,s)=>e.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs ${t.winner==="player"?"bg-emerald-500/15 border-emerald-400/30":"bg-fuchsia-500/15 border-fuchsia-400/30"}`,children:["Leg ",s+1,":"," ",t.winner==="player"?"You":L==="None"?"Opp":"AI"," ","Â· Dbl ",Ce(t.doubleDarts)," Â· CO"," ",Ce(t.checkoutDarts||0)]},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>ln(!1),children:"Close"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{ln(!1),Mt()},children:"Rematch"})]})]})}),ge.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Leg Stats"}),e.jsx("ul",{children:ge.map((t,s)=>e.jsxs("li",{children:["Leg ",s+1,": Double darts: ",Ce(t.doubleDarts),", Checkout darts: ",Ce(t.checkoutDarts||0)]},s))})]})]})]})}export{No as default};
//# sourceMappingURL=OfflinePlay-D96IhALS.js.map
