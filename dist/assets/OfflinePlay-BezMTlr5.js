import{h as hl,j as e,B as qe,b as fl,u as pl,i as bl,e as gl,k as vl,l as Is,m as Zt,r as Wr,n as Gr,p as jl,R as Jt,G as Nl,P as yl,o as zr,q as De,C as M,t as wl,v as Sl,w as kl,x as Cl,f as Dl,y as Al}from"./index-DHjJuWW-.js";import{r as a}from"./ui-C3zlW9wh.js";import{M as Ml,G as Ll,C as Tl}from"./MatchStartShowcase-MzvId03J.js";import{f as Hn}from"./stats-X3jz_E9o.js";import{M as Rl}from"./MatchControls-Dnm6_0ku.js";import"./vendor-D3F3s8fL.js";function Xr(n,i,d,x){const o=(x-90)*Math.PI/180;return{x:n+d*Math.cos(o),y:i+d*Math.sin(o)}}function Yr(n){return[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5].indexOf(n)*18+9}function El({width:n=320,height:i=320}){const d=hl(o=>o.samples),x=a.useRef(null);return a.useEffect(()=>{const o=x.current;if(!o)return;const m=o.getContext("2d");if(!m)return;o.width=n,o.height=i,m.clearRect(0,0,n,i);const p=n/2,H=i/2,te=Math.min(n,i)/(qe.doubleOuter*2+20),I={bullInner:qe.bullInner*te,bullOuter:qe.bullOuter*te,trebleInner:qe.trebleInner*te,trebleOuter:qe.trebleOuter*te,doubleInner:qe.doubleInner*te,doubleOuter:qe.doubleOuter*te};m.strokeStyle="rgba(255,255,255,0.06)",m.lineWidth=1;const F=["doubleOuter","doubleInner","trebleOuter","trebleInner","bullOuter","bullInner"];for(const C of F)m.beginPath(),m.arc(p,H,I[C],0,Math.PI*2),m.stroke();const Y=[];for(const C of d){let T=Math.random()*360,se=Math.random()*I.doubleOuter;typeof C.sector=="number"&&C.sector>=1&&C.sector<=20&&(T=Yr(C.sector),C.ring==="DOUBLE"?se=(I.doubleInner+I.doubleOuter)/2:C.ring==="TRIPLE"?se=(I.trebleInner+I.trebleOuter)/2:C.ring==="INNER_BULL"?se=I.bullInner*.5:C.ring==="BULL"?se=I.bullOuter*.8:se=(I.trebleOuter+I.doubleInner)/2*(.6+Math.random()*.4));const y=Xr(p,H,se,T);Y.push({x:y.x,y:y.y,w:1})}for(const C of Y){const T=m.createRadialGradient(C.x,C.y,1,C.x,C.y,60);T.addColorStop(0,"rgba(255,0,0,0.9)"),T.addColorStop(.3,"rgba(255,100,0,0.5)"),T.addColorStop(1,"rgba(255,100,0,0)"),m.fillStyle=T,m.beginPath(),m.arc(C.x,C.y,60,0,Math.PI*2),m.fill()}m.fillStyle="rgba(255,255,255,0.85)",m.font="12px ui-sans-serif";const P={};for(const C of d)C.sector&&(P[C.sector]=(P[C.sector]||0)+1);for(const C of Object.keys(P)){const T=Number(C),se=Yr(T),y=Xr(p,H,I.trebleOuter+18,se);m.fillText(String(P[T]),y.x-6,y.y+4)}},[d,n,i]),e.jsx("canvas",{ref:x,style:{width:"100%",height:"auto",borderRadius:8,background:"#081018"}})}const Ps=[...Array.from({length:20},(n,i)=>({label:`D${i+1}`,score:(i+1)*2})),{label:"DBULL",score:50,isBull:!0}];function qr(n,i){const d=Ps[i];return!!d&&n===d.score}function gt(n){const i=n.trim().toUpperCase();if(!i)return null;if(i==="50"||i==="BULL"||i==="DBULL"||i==="IBULL")return 50;if(i==="25"||i==="OBULL")return 25;const d=i.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!d)return null;const x=d[1]||"S",o=parseInt(d[2],10);return o<1||o>20?null:o*(x==="S"?1:x==="D"?2:3)}const Ve=[...Array.from({length:20},(n,i)=>i+1),25,50],qn=[20,19,18,17,16,15,25];function On(){const n={};return qn.forEach(i=>{n[i]=0}),{marks:n,points:0}}function Il(n,i,d,x,o=()=>!1){let m=null,p=0;if(d==="BULL"||d==="INNER_BULL"||i===25||i===50)m=25,p=d==="INNER_BULL"||i===50?2:1;else if(typeof x=="number"&&x>=15&&x<=20)m=x,d==="TRIPLE"?p=3:d==="DOUBLE"?p=2:p=1;else if(i){const C=[20,19,18,17,16,15];for(const T of C){if(i===T){m=T,p=1;break}if(i===T*2){m=T,p=2;break}if(i===T*3){m=T,p=3;break}}!m&&(i===25||i===50)&&(m=25,p=i===50?2:1)}if(!m)return 0;const H=n.marks[m],te=Math.max(0,3-H),I=Math.min(te,p),F=Math.max(0,p-I),Y=H+I;n.marks[m]=Y>3?3:Y;let P=0;return F>0&&!o(m)&&(m===25?d==="INNER_BULL"?P+=50*F:P+=25*F:P+=m*F),n.points+=P,P}function Pl(n){return qn.every(i=>(n.marks[i]||0)>=3)}function Vn(){return{round:1,score:0,finished:!1,shanghaiAchieved:!1,turnHits:{singles:0,doubles:0,triples:0}}}function Bl(n){return n.round}function Fl(n,i,d,x){if(n.finished)return 0;const o=Bl(n);let m=0;return typeof x=="number"&&x===o?d==="TRIPLE"?(m=o*3,n.turnHits.triples++):d==="DOUBLE"?(m=o*2,n.turnHits.doubles++):d==="SINGLE"&&(m=o*1,n.turnHits.singles++):!x&&(i===o||i===o*2||i===o*3)&&(i===o*3?(m=o*3,n.turnHits.triples++):i===o*2?(m=o*2,n.turnHits.doubles++):i===o&&(m=o,n.turnHits.singles++)),n.score+=m,m}function Hl(n){if(!n.finished){if(n.turnHits.singles>0&&n.turnHits.doubles>0&&n.turnHits.triples>0){n.shanghaiAchieved=!0,n.finished=!0;return}const i=n.round+1;i>20?n.finished=!0:n.round=i}n.turnHits={singles:0,doubles:0,triples:0}}function Un(){return{stage:0,targets:[{kind:"NUMBER",num:20},{kind:"DOUBLE",num:16},{kind:"TRIPLE",num:14},{kind:"NUMBER",num:19},{kind:"BULL"},{kind:"ANY_NUMBER"}],score:0,finished:!1,hitThisRound:!1}}function li(n){return n.targets[n.stage]||null}function Ol(n,i,d,x){if(n.finished)return 0;const o=li(n);if(!o)return 0;let m=0;switch(o.kind){case"NUMBER":{typeof x=="number"&&x===o.num?d==="TRIPLE"?m=o.num*3:d==="DOUBLE"?m=o.num*2:d==="SINGLE"&&(m=o.num):!x&&(i===o.num||i===o.num*2||i===o.num*3)&&(m=i),m>0&&(n.hitThisRound=!0);break}case"DOUBLE":{(d==="DOUBLE"&&x===o.num||i===o.num*2)&&(m=o.num*2,n.hitThisRound=!0);break}case"TRIPLE":{(d==="TRIPLE"&&x===o.num||i===o.num*3)&&(m=o.num*3,n.hitThisRound=!0);break}case"BULL":{(d==="BULL"||d==="INNER_BULL"||i===25||i===50)&&(m=d==="INNER_BULL"||i===50?50:25,n.hitThisRound=!0);break}case"ANY_NUMBER":{i>0&&(m=i,n.hitThisRound=!0);break}}return n.score+=m,m}function Vl(n){n.finished||(n.hitThisRound||(n.score=Math.floor(n.score/2)),n.hitThisRound=!1,n.stage+=1,n.stage>=n.targets.length&&(n.finished=!0))}function $n(){return{round:1,score:0,target:"HIGH",finished:!1}}function Ul(n,i,d,x){if(n.finished)return 0;let o=0;if(n.target==="HIGH")if(d==="INNER_BULL")o=50;else if(typeof x=="number"){const p=x*(d==="TRIPLE"?3:d==="DOUBLE"?2:1);x>=20&&(o=p)}else i>=40&&(o=i);else if(typeof x=="number"){const p=x*(d==="TRIPLE"?3:d==="DOUBLE"?2:1);x<=10&&(o=p)}else i>0&&i<=30&&(o=i);return n.score+=o,o}function $l(n){if(!n.finished){if(n.round+=1,n.round>10){n.finished=!0;return}n.target=n.target==="HIGH"?"LOW":"HIGH"}}function _l(n,i=3){return{number:n,lives:i,isKiller:!1,eliminated:!1}}function Kl(n){const i=Array.from({length:20},(x,o)=>o+1),d={};for(const x of n){const o=Math.floor(Math.random()*i.length),m=i.splice(o,1)[0];d[x]=m}return d}function Qr(n,i,d,x){const o=i[n];if(!o||!x||!d)return{becameKiller:!1};if(!o.isKiller&&d==="DOUBLE"&&x===o.number)return o.isKiller=!0,{becameKiller:!0};if(o.isKiller&&(d==="DOUBLE"||d==="TRIPLE")){const m=Object.keys(i).find(p=>p!==n&&!i[p].eliminated&&i[p].number===x);if(m){const p=i[m],H=d==="TRIPLE"?2:1;return p.lives=Math.max(0,p.lives-H),p.lives===0&&(p.eliminated=!0),{becameKiller:!1,victimId:m,livesRemoved:H}}}return{becameKiller:!1}}function Zr(n){const i=Object.entries(n).filter(([,d])=>!d.eliminated&&d.lives>0);return i.length===1?i[0][0]:null}function Jr(){return{inning:1,score:0,dartsThisInning:0,finished:!1}}function Wl(n,i,d,x){if(n.finished)return 0;let o=0;if(typeof x=="number"&&x===n.inning?d==="TRIPLE"?o=3:d==="DOUBLE"?o=2:o=1:!x&&(i===n.inning||i===n.inning*2||i===n.inning*3)&&(o=i===n.inning*3?3:i===n.inning*2?2:1),n.score+=o,n.dartsThisInning+=1,n.dartsThisInning>=3){const m=n.inning+1;m>9?n.finished=!0:(n.inning=m,n.dartsThisInning=0)}return o}const Gl={1:5,2:20,3:1,4:18,5:4,6:13,7:6,8:10,9:15,10:2,11:17,12:3,13:19,14:7,15:16,16:8,17:11,18:14};function ei(){return{hole:1,strokes:0,dartsThisHole:0,finished:!1}}function zl(n,i,d,x){if(n.finished)return!1;const o=Gl[n.hole];if(n.dartsThisHole+=1,typeof x=="number"&&x===o&&(d==="SINGLE"||d==="DOUBLE"||d==="TRIPLE")||!x&&(i===o||i===o*2||i===o*3)){n.strokes+=n.dartsThisHole;const p=n.hole+1;return p>18?n.finished=!0:(n.hole=p,n.dartsThisHole=0),!0}if(n.dartsThisHole>=3){n.strokes+=3;const p=n.hole+1;p>18?n.finished=!0:(n.hole=p,n.dartsThisHole=0)}return!1}const oi={0:{type:"NUM",num:20},1:{type:"NUM",num:19},2:{type:"NUM",num:18},3:{type:"NUM",num:17},4:{type:"BULL"},5:{type:"NUM",num:16},6:{type:"NUM",num:15},7:{type:"NUM",num:14},8:{type:"NUM",num:13}};function ti(){return{board:Array(9).fill(null),turn:"X",finished:!1,winner:null}}function Xl(n){const i=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[d,x,o]of i)if(n[d]&&n[d]===n[x]&&n[d]===n[o])return n[d];return n.every(d=>d)?"Draw":null}function Yl(n,i,d,x,o){if(n.finished||n.board[i])return!1;const m=oi[i];let p=!1;if(m.type==="BULL"?p=x==="BULL"||x==="INNER_BULL"||d===25||d===50:m.type==="NUM"&&typeof m.num=="number"&&(typeof o=="number"&&o===m.num||!o&&(d===m.num||d===m.num*2||d===m.num*3))&&(p=!0),!p)return!1;n.board[i]=n.turn;const H=Xl(n.board);return H?(n.finished=!0,n.winner=H,!0):(n.turn=n.turn==="X"?"O":"X",!0)}function Kn(){return{targetIndex:0,darts:0,finished:!1}}const ci=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25],_n=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","Bull"];function ql(n){return ci[n.targetIndex]}function Wn(n,i,d){if(n.finished)return n;const x=ql(n);if(!(d==="SINGLE"&&i===x||d==="DOUBLE"&&i===x||d==="TRIPLE"&&i===x||d==="INNER_BULL"&&x===25))return n;const m=n.targetIndex+1,p=m>=ci.length;return{targetIndex:m,darts:n.darts+1,finished:p}}function si(n,i){return Wn(n,i,"SINGLE")}function Ql(){return Kn()}function Gn(n=50){return{score:0,darts:0,finished:!1,target:n}}const Zl=[5,10,15,20,25,50];function Jl(n){return Zl.includes(n)}function zn(n,i,d){if(n.finished)return n;if(!Jl(i))return{...n,darts:n.darts+1};const x=n.score+i,o=x>=n.target;return{score:o?n.target:x,darts:n.darts+1,finished:o,target:n.target}}function ni(n,i){return zn(n,i)}function eo(n=50){return Gn(n)}function Xn(n=70){return{score:0,darts:0,finished:!1,target:n}}const to=[7,14,21];function so(n){return to.includes(n)}function Yn(n,i,d){if(n.finished)return n;if(!so(i))return{...n,darts:n.darts+1};const x=n.score+i,o=x>=n.target;return{score:o?n.target:x,darts:n.darts+1,finished:o,target:n.target}}function ai(n,i){return Yn(n,i)}function no(n=70){return Xn(n)}const Qn=[20,19,18,17,16,15,14,13,12,25];function ri(){const n={};return Qn.forEach(i=>{n[i]=0}),{marks:n,points:0}}function ao(n,i,d,x,o=()=>!1){let m=null,p=0;if(d==="BULL"||d==="INNER_BULL"||i===25||i===50)m=25,p=d==="INNER_BULL"||i===50?2:1;else if(typeof x=="number"&&x>=12&&x<=20)m=x,d==="TRIPLE"?p=3:d==="DOUBLE"?p=2:p=1;else if(i){for(const C of[20,19,18,17,16,15,14,13,12]){if(i===C){m=C,p=1;break}if(i===C*2){m=C,p=2;break}if(i===C*3){m=C,p=3;break}}!m&&(i===25||i===50)&&(m=25,p=i===50?2:1)}if(!m)return 0;const H=n.marks[m],te=Math.max(0,3-H),I=Math.min(te,p),F=Math.max(0,p-I),Y=H+I;n.marks[m]=Y>3?3:Y;let P=0;return F>0&&!o(m)&&(m===25?d==="INNER_BULL"?P+=50*F:P+=25*F:P+=m*F),n.points+=P,P}function ro(n){return Qn.every(i=>(n.marks[i]||0)>=3)}function X(n){return(i,d)=>{n(i)}}function io(n){const{match:i,commitManualVisitTotal:d,endTurn:x}=n;return{addVisit:(o,m=3,p)=>{if(d){d(o);return}try{i.addVisit(o,m,p)}catch{i.addVisit(o,m)}},undoVisit:()=>{i.undoVisit()},nextPlayer:()=>{if(x)try{x(0)}catch{i.nextPlayer()}else i.nextPlayer()},endLeg:o=>{typeof o=="number"?i.endLeg(o):i.endLeg(0)},endGame:()=>{i.endGame()}}}function Qe(n,i,d,x,o,m,p,H,te,I,F,Y,P,C,T,se,y,pe,Ne,he,Zn,vt,Ee,Ze,es,ts,ss){return a.useMemo(()=>{const me=[];if(n==="X01"){let S=0,ue=0,u=0;if(pe&&pe.length>0){for(const be of pe)be.dartsThrown&&be.totalScored&&(ue+=be.dartsThrown,u+=be.totalScored);ue>0&&(S=u/ue*3)}const Hs=(Y??0)>0?H??0:I??null??(m??0);if(me.push({name:"You",isCurrentTurn:!!Ne,legsWon:x||0,score:i||0,lastScore:Hs,checkoutRate:T&&T>0?Math.round((C||0)/T*100):0,bestLeg:pe&&pe.length>0?`${Math.min(...pe.map(be=>be.doubleDarts+(be.checkoutDarts||0)))||0} darts`:"â€”",matchAvg:S,allTimeAvg:fl("You")||0}),he&&he!=="None"){const K=(P??0)>0?te??0:F??null??(p??0);me.push({name:`${he} AI`,isCurrentTurn:!Ne,legsWon:o||0,score:d||0,lastScore:K,checkoutRate:y&&y>0?Math.round((se||0)/y*100):0,bestLeg:"â€”"})}}return n==="Cricket"&&(me.push({name:"You",isCurrentTurn:!!Ne,closed:vt?.marks||{},points:vt?.points||0}),he&&he!=="None"&&me.push({name:`${he} AI`,isCurrentTurn:!Ne,closed:{},points:0})),n==="Shanghai"&&(me.push({name:"You",isCurrentTurn:!!Ne,round:Ee?.round||1,target:Ee?.target||1,score:Ee?.score||0}),he&&he!=="None"&&me.push({name:`${he} AI`,isCurrentTurn:!Ne,round:Ee?.round||1,target:Ee?.target||1,score:0})),n==="Killer"&&Ze&&Ze.length>0&&Ze.forEach((S,ue)=>{const u=es?.[S.id];me.push({name:S.name,isCurrentTurn:ue===ss,number:ts?.[S.id],lives:u?.lives||0,eliminated:u?.eliminated||!1})}),me},[n,i,d,x,o,m,p,H,te,I,F,Y,P,C,T,se,y,pe,Ne,he,vt,Ee,Ze,es,ts,ss])}const ii=a.memo(M),lo=["Easy","Medium","Hardened"],oo=6500;function Re(n,i,d){return Math.max(i,Math.min(d,n))}function co(n,i){let d=0;if(i==="Easy"){const x=[22,26,41,45,60];d=x[Math.floor(Math.random()*x.length)]}else i==="Medium"?d=Math.round(Re(60+(Math.random()*30-15),30,100)):d=Math.round(Re(80+(Math.random()*20-10),50,120));return n<=0?0:d>n?[100,85,81,60,57,45,41,26,22,20,1].find(o=>o<=n)??0:d}function mo({onClose:n}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"card max-w-lg w-full relative",children:[e.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:n,children:"Close âœ•"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"X01 Rules & Regulations ðŸ“–"}),e.jsxs("ul",{className:"list-disc pl-5 text-left mb-2",children:[e.jsx("li",{children:"Double In: Start scoring only after hitting a double."}),e.jsx("li",{children:"Double Out: Finish the game by hitting a double to reach exactly zero."}),e.jsx("li",{children:"Best Of: Play a set number of legs, winner is first to reach majority."}),e.jsx("li",{children:"First To: Play until a player reaches a set number of legs."}),e.jsx("li",{children:"No Cheating: All scores must be valid, no manual score changes mid-leg."}),e.jsx("li",{children:"Competitive Standard: Follow latest WDF/PDC rules for match play."})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"For full details, see official darts governing body rules."})]})})}const uo=Dl();function Io({user:n}){const{offlineLayout:i,favoriteDouble:d,callerEnabled:x,callerVoice:o,callerVolume:m,speakCheckoutOnly:p,rememberLastOffline:H,setLastOffline:te,autoStartOffline:I,cameraScale:F,setCameraScale:Y,cameraAspect:P="wide",setCameraAspect:C,cameraFitMode:T="fill",setCameraFitMode:se,cameraEnabled:y,textSize:pe,boxSize:Ne,autoscoreProvider:he,autoCommitMode:Zn="wait-for-clear",matchType:vt="singles",setMatchType:Ee,teamAName:Ze="Team A",setTeamAName:es,teamBName:ts="Team B",setTeamBName:ss}=pl(),me=he==="manual",S=y&&!me,ue=y&&!me&&Zn!=="immediate",[u,Bs]=a.useState("X01"),[k,Fs]=a.useState(501),[A,Jn]=a.useState("None"),[Hs,be]=a.useState(!1),[Os,Je]=a.useState(!1),[O,G]=a.useState(k),[K,jt]=a.useState(k),[xo,ea]=a.useState(!1),[ta,le]=a.useState(!1),[Nt,sa]=a.useState(1),[V,ns]=a.useState(0),q=bl(),[di,na]=a.useState(!1),aa=a.useRef(!1),[W,as]=a.useState(0),[rs,oe]=a.useState(null),[ra,mi]=a.useState(1),[ia,ui]=a.useState(1),[ge,la]=a.useState([]),[oa,xi]=a.useState(2e3),Ie=gl(),[Vs,et]=a.useState(!1),[hi,yt]=a.useState(!1),fi=vl(t=>t.setPaused);a.useEffect(()=>{const t=()=>{et(!1),Je(!1),yt(!1)};try{window.addEventListener("ndn:match-quit",t)}catch{}return()=>{try{window.removeEventListener("ndn:match-quit",t)}catch{}}},[]);const[wt,ca]=a.useState(i==="modern"),[St,da]=a.useState(i==="modern");a.useEffect(()=>{ca(i==="modern"),da(i==="modern")},[i]),a.useEffect(()=>{T!=="fit"&&se("fit")},[T,se]);const[is,ma]=a.useState(1),[ho,ua]=a.useState(!1),[R,kt]=a.useState(!0),[Ct,pi]=a.useState(()=>typeof window<"u"&&window.innerWidth<768),[xa,Us]=a.useState(!1);a.useEffect(()=>{if(typeof window>"u")return;const t=()=>pi(window.innerWidth<768);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),a.useEffect(()=>{Ct||Us(!1)},[Ct]),a.useEffect(()=>{const t=()=>mt(!0);return window.addEventListener("ndn:open-camera-manager",t),()=>window.removeEventListener("ndn:open-camera-manager",t)},[]);const[D,w]=a.useState(0),[Dt,$s]=a.useState(0),[_s,Ks]=a.useState(0),[Ue,ha]=a.useState(0),[fa,pa]=a.useState(0),[At,Ws]=a.useState(On()),[ls,os]=a.useState(Vn()),[Mt,cs]=a.useState(Un()),[ds,ms]=a.useState($n()),[fo,fe]=a.useState(0),[ba,ga]=a.useState(1),[bi,Gs]=a.useState(27),[po,va]=a.useState(0),[gi,zs]=a.useState(0),[ja,Na]=a.useState(!1),[ya,wa]=a.useState(1),[vi,Sa]=a.useState(0),[bo,ka]=a.useState(0),ji=8,[Ca,Da]=a.useState(1),[Ni,Aa]=a.useState(0),[go,Ma]=a.useState(0),yi=10,[La,Ta]=a.useState(1),[wi,Ra]=a.useState(0),[vo,Ea]=a.useState(0),Si=10,[Xs,Ys]=a.useState(170),[Ia,Pa]=a.useState(0),[Ba,Fa]=a.useState(0),[Ha,Oa]=a.useState(0),[qs,Qs]=a.useState(121),[Va,Ua]=a.useState(0),[$a,_a]=a.useState(0),[Ka,Wa]=a.useState(0),[$e,Zs]=a.useState(20),[Js,en]=a.useState(0),[Ga,tn]=a.useState(0),[Lt,ki]=a.useState(30),[za,sn]=a.useState(!1),[Xa,Ya]=a.useState(Jr()),[qa,Qa]=a.useState(ei()),[_e,Za]=a.useState(ti()),[nn,Ja]=a.useState(ri()),[B,an]=a.useState([{id:"p1",name:"Player 1"},{id:"p2",name:"Player 2"}]),[Tt,Rt]=a.useState({}),[us,rn]=a.useState({}),[er,ln]=a.useState(!1),[ye,tt]=a.useState(0),[jo,st]=a.useState(0),[nt,Et]=a.useState(null),[Ci,Ae]=a.useState(""),[xs,No]=a.useState(Kn()),[Ke,It]=a.useState(Kn()),[Pt,yo]=a.useState(Gn(50)),[ve,Bt]=a.useState(Gn(50)),[Ft,wo]=a.useState(Xn(70)),[je,Ht]=a.useState(Xn(70)),[hs,We]=a.useState(0),[Me,Pe]=a.useState(0),[U,Q]=a.useState(0),[on,Ot]=a.useState(k),[we,ce]=a.useState(0),[at,Le]=a.useState(null),[fs,ne]=a.useState(0),Ge=a.useRef(0),Di=a.useRef(0),ae=a.useRef(O),Z=a.useRef(U),re=a.useRef(we),ze=a.useRef(on),J=a.useRef(fs);a.useEffect(()=>{ae.current=O},[O]),a.useEffect(()=>{Z.current=U},[U]),a.useEffect(()=>{re.current=we},[we]),a.useEffect(()=>{ze.current=on},[on]),a.useEffect(()=>{J.current=fs},[fs]);const[Ai,Vt]=a.useState(0);a.useRef(null);const[ps,cn]=a.useState(0),[Xe,bs]=a.useState(0),[rt,Ye]=a.useState(0),[it,Te]=a.useState(0),[lt,ot]=a.useState(null),[dn,ct]=a.useState(0),[Ut,$t]=a.useState(0),[mn,gs]=a.useState(0),[_t,tr]=a.useState(0),[un,sr]=a.useState(0),[Kt,dt]=a.useState(0),[Wt,nr]=a.useState(0),[xn,Gt]=a.useState(0),[hn,ar]=a.useState(0),[rr,vs]=a.useState(0),[Mi,js]=a.useState(0),[Li,Ns]=a.useState(0),[ir,fn]=a.useState(0),[Ti,pn]=a.useState(0),[Ri,bn]=a.useState(0),[Ei,ys]=a.useState(0),[Ii,lr]=a.useState(0),[Pi,gn]=a.useState(!1),[ee,z]=a.useState(""),[vn,zt]=a.useState(""),[So,ko]=a.useState(""),[or,cr]=a.useState(""),[dr,jn]=a.useState(""),[mr,Nn]=a.useState(""),[ws,yn]=a.useState(null),[Bi,mt]=a.useState(!1),[Fi,ur]=a.useState({}),[Hi,Xt]=a.useState(!1),Be=a.useRef(null),wn=a.useRef(null),Se=a.useCallback(()=>{const t=wn.current;t&&(clearTimeout(t),wn.current=null)},[]),xr=a.useCallback(t=>{if(!x)return;const s=n?.username||"Player";try{Is(s,t.visitTotal,Math.max(t.remaining,0),o,{volume:m,checkoutOnly:p})}catch{}},[x,o,m,p,n?.username]),Ss=a.useCallback((t,s)=>{Xt(!1);const{visitTotal:r,darts:l,preRemaining:c,remaining:g,doubleAttempts:b,finished:N,doubleWindow:f,highestCheckout:v}=t;N?(G(0),ae.current=0,typeof v=="number"&&v>0&&ys(h=>Math.max(h,v))):(G(g),ae.current=g),Le(r),r===180?vs(h=>h+1):r>=140?js(h=>h+1):r>=100&&Ns(h=>h+1),f&&b>0&&($t(h=>h+b),N&&gs(h=>h+1)),t.announced||xr(t);try{Zt.getState().recordVisit("offline-x01",l,r,{preRemaining:c,postRemaining:N?0:g,finish:N,bust:!1})}catch{}N&&(oe("player"),le(!0)),bt(N?0:g),ce(0),re.current=0,Q(0),Z.current=0,ne(0),J.current=0},[bt,ys,oe,G,Le,ce,Q,ne,le,vs,js,Ns,$t,gs,xr]),ut=a.useCallback(t=>{const s=Be.current;s&&(Be.current=null,Se(),Ss(s,t))},[Se,Ss]),hr=a.useCallback(t=>{Be.current={...t,announced:!1},Xt(!0),Se(),wn.current=setTimeout(()=>ut("timeout"),oo)},[Se,ut]);a.useEffect(()=>{if(!ue)return;const t=()=>ut("event");return window.addEventListener("ndn:darts-cleared",t),()=>window.removeEventListener("ndn:darts-cleared",t)},[ue,ut]),a.useEffect(()=>{ue||ut("timeout")},[ue,ut]),a.useEffect(()=>()=>Se(),[Se]),a.useEffect(()=>{if(U===0){try{window.dispatchEvent(new CustomEvent("ndn:darts-cleared",{detail:{source:"offline-play",ts:Date.now()}}))}catch{}Ge.current=0}Di.current=U},[U]);const ke=n?.username||"Player 1",Fe=A==="None"?"Player 2":A,Oi=R?ke:Fe,Vi=R?Fe:ke,Ui=R?V:W,$i=R?W:V,ks=Qe("X01",O,K,V,W,Me,Xe,we,rt,at,lt,U,it,mn,Ut,un,_t,ge,R,A),_i=Qe("Cricket",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,At),Ki=Qe("Shanghai",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,R,A,void 0,At,ls),Wi=Qe("Killer",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,B,Tt,us,ye),Gi=Qe("Scam"),zi=Qe("Fives"),Xi=Qe("Sevens"),Cs=a.useMemo(()=>{const t=ks||[],s=U>0?we:at??Me,r=it>0?rt:lt??Xe;return t.length===0?{name:R?ke:Fe,isCurrentTurn:!0,legsWon:R?V:W,score:R?O:K,lastScore:R?s:r}:t.find(l=>l.isCurrentTurn)??t[0]},[ks,R,ke,Fe,V,W,O,K,U,we,at,Me,rt,lt,Xe,it]),fr=a.useMemo(()=>{if(!Cs)return[];const{matchAvg:t,allTimeAvg:s,...r}=Cs;return[{...r,matchAvg:void 0,allTimeAvg:void 0}]},[Cs]),Yi=R?Fe:ke,qi=Cs?.name??(R?ke:Fe),pr=R?O:K,br=R?U>0?we:at??Me:it>0?rt:lt??Xe,Ds=q.players?.[q.currentPlayerIdx];let Qi=0,Zi=0;if(Ds&&Ds.legs&&Ds.legs.length>0){for(const t of Ds.legs)if(Array.isArray(t.visits))for(const s of t.visits)Qi+=s.score||0,Zi+=s.darts||0}const L=a.useCallback((t,s=1)=>{!t||s<=0||ur(r=>({...r,[t]:(r[t]||0)+s}))},[]),E=a.useCallback(t=>{t&&ur(s=>s[t]===void 0?s:{...s,[t]:0})},[]);Fi[u];const Ji=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?Re(Math.round(s),0,k):null},el=t=>{if(!t.trim())return null;const s=Number(t);return Number.isFinite(s)?Math.max(0,Math.round(s)):null},gr=a.useCallback(()=>{Be.current&&(Be.current=null),Se(),Xt(!1)},[Se]);a.useCallback(t=>{const s=Re(t,0,k);gr(),G(s),ae.current=s;const r=s===0?k:s;Ot(r),ze.current=r,ce(0),re.current=0,Q(0),Z.current=0,ne(0),J.current=0,Le(null),Pe(0),w(0),Ge.current=0,s===0?(oe("player"),le(!0)):(oe(null),le(!1))},[gr,G,k,Ot,ce,Q,ne,Le,Pe,w,oe,le]);const vr=t=>{const r=Ji(or);if(r===null){Ie(`Enter a number between 0 and ${k}`,{type:"error",timeout:2500});return}jt(r),Ye(0),Te(0),ot(null),ct(0),bs(0),cr(""),oe(null),le(!1)},jr=a.useCallback((t,s)=>{t==="player"?(ns(s),jn("")):(as(s),Nn("")),oe(null),le(!1)},[as,Nn,jn,oe,ns,le]),As=t=>{const r=el(t==="player"?dr:mr);if(r===null){Ie("Enter a non-negative whole number for legs",{type:"error",timeout:2500});return}yn({target:t,value:r,stage:1})},tl=a.useCallback(()=>{yn(t=>t&&(t.stage===1?{...t,stage:2}:(jr(t.target,t.value),null)))},[jr]),Yt=a.useCallback(()=>{yn(null)},[]);a.useEffect(()=>{if(!ws)return;const t=s=>{s.key==="Escape"&&(s.preventDefault(),Yt())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[Yt,ws]);const He=(t=>{switch(t){case"small":return"px-1.5 py-0.5 text-xs";case"large":return"px-3 py-1 text-sm";default:return"px-2 py-0.5 text-sm"}})(pe),xt=a.useRef(null),ht=a.useRef(null),Sn=a.useRef(null),[ft,kn]=a.useState("first"),[Ms,Nr]=a.useState(1),sl=a.useRef(null);a.useEffect(()=>{const t=Math.max(1,Math.floor(Number(Ms)||1)),s=ft==="first"?t:Math.max(1,Math.ceil(t/2));sa(s)},[ft,Ms]),a.useEffect(()=>{if(!St){ma(1),ua(!1);return}const t=()=>{const l=xt.current,c=ht.current;if(!l||!c)return;const g=Sn.current?Sn.current.getBoundingClientRect().height:0,b=Math.max(0,l.clientHeight-g-6),N=Math.max(0,l.clientWidth-8),f=c.getBoundingClientRect(),v=is||1,h=f.height/v,j=f.width/v,ie=b>0?b/h:1,Ce=N>0?N/j:1,Oe=Math.min(1,Math.max(.5,Math.min(ie,Ce))),de=h*Oe,_=b>0&&de-b>1;ua(_),ma(Oe)};t();const s=window.ResizeObserver,r=s?new s(()=>t()):null;return r&&xt.current&&r.observe(xt.current),r&&ht.current&&r.observe(ht.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t);try{r&&xt.current&&r.unobserve(xt.current)}catch{}try{r&&ht.current&&r.unobserve(ht.current)}catch{}}},[St,is]),a.useEffect(()=>{const t=s=>{const r=s?.detail?.mode;r&&(Bs(r),pt())};return window.addEventListener("ndn:auto-start",t),()=>window.removeEventListener("ndn:auto-start",t)},[]),a.useEffect(()=>{const t=s=>{const r=s?.detail?.formatType,l=s?.detail?.formatCount,c=s?.detail?.startScore;(r==="first"||r==="best")&&kn(r),typeof l=="number"&&isFinite(l)&&Nr(Math.max(1,Math.floor(l))),typeof c=="number"&&isFinite(c)&&Fs(Math.max(1,Math.floor(c)))};return window.addEventListener("ndn:offline-format",t),()=>window.removeEventListener("ndn:offline-format",t)},[]),a.useEffect(()=>{if(!I)return;const t=setTimeout(()=>pt(),50);return()=>clearTimeout(t)},[I]),a.useEffect(()=>{if(!Vs||R||A==="None"||Ai<=0)return;let t,s=performance.now();const r=l=>{const c=l-s;s=l,Vt(g=>{const b=g-c;if(b<=0){let N=0,f=0,v=K;for(Te(0);N<3&&v>0;){const h=co(v,A),j=Re(h-N*20,0,Math.min(60,v)),ie=v-j;if(bs(j),cn(de=>de+1),nr(de=>de+1),ie<0){v=K,Ye(0),ct(0),f=0,ot(0),Te(0);break}f+=j,Ye(de=>de+j),ar(de=>de+j);const Ce=v,Oe=ie;if(Ce>50&&Oe<=50?ct(1):Ce<=50&&ct(de=>de+1),v=ie,N+=1,Te(N),v===0)break}if(jt(v),v===0){f===180?fn(j=>j+1):f>=140?pn(j=>j+1):f>=100&&bn(j=>j+1);const h=K;h<=170&&lr(j=>Math.max(j,h)),K<=50&&(tr(j=>j+(dn>0?dn:1)),sr(j=>j+1)),ot(f),Ye(0),ct(0),Te(0),oe("ai"),le(!0)}return v>0&&N>=3&&(f===180?fn(h=>h+1):f>=140?pn(h=>h+1):f>=100&&bn(h=>h+1),ot(f),Ye(0),ct(0),Te(0)),Te(0),kt(!0),0}return b}),t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>cancelAnimationFrame(t)},[Vs,R,A,K]),a.useEffect(()=>{q.inProgress&&(aa.current||(na(!0),aa.current=!0))},[q.inProgress]);function pt(){Je(!0),G(k),ae.current=k,jt(k),ea(!1),et(!0),kt(!0),w(0),We(0),Pe(0),Q(0),Z.current=0,Ot(k),ce(0),Le(null),ne(0),Vt(0),cn(0),bs(0),Ye(0),Te(0),ot(null),oe(null),ns(0),as(0),la([]),en(0),tn(0),sn(!1),dt(0),nr(0),Gt(0),ar(0),vs(0),js(0),Ns(0),fn(0),pn(0),bn(0),ys(0),lr(0),$t(0),gs(0),tr(0),sr(0),E("X01");const t=Math.max(1,Math.floor(Number(Ms)||1));if(sa(ft==="first"?t:Math.max(1,Math.ceil(t/2))),H)try{te({mode:u,x01Start:k,firstTo:Nt,aiLevel:A})}catch{}const s=n?.username||"You",r=A!=="None"?`AI (${A})`:"Opponent",l=A!=="None"?[s,r]:[s];q.newMatch(l,k,`offline-${Date.now()}`)}function nl(){G(k),ae.current=k,jt(k),ea(!1),et(!0),kt(!0),w(0),We(0),Pe(0),Q(0),Z.current=0,Ot(k),ce(0),ze.current=k,re.current=0,Le(null),ne(0),J.current=0,J.current=0,Vt(0),cn(0),bs(0),Ye(0),Te(0),ot(null),oe(null)}function bt(t){Q(0),Z.current=0,Ot(t===0?k:t),ze.current=t===0?k:t,ne(0),J.current=0,A!=="None"?(kt(!1),Vt(oa)):(Vt(0),kt(!0))}function qt(t){if(ue&&Be.current){Hi||Xt(!0),Ie("Remove your darts before starting the next throw",{type:"info",timeout:1800});return}L("X01");const s=ae.current,r=Z.current,l=re.current,c=ze.current,g=J.current,b=s-t,N=r+1;if(Pe(t),We(_=>_+1),dt(_=>_+1),b<0){try{const _=s,Fn=c;Zt.getState().recordVisit("offline-x01",N,0,{preRemaining:_,postRemaining:Fn,bust:!0,finish:!1})}catch{}if(G(c),ae.current=c,s<=50){const _=(g||0)+1;$t(Fn=>Fn+_)}if(x)try{Is(n?.username||"Player",0,Math.max(c,0),o,{volume:m,checkoutOnly:p})}catch{}Le(0),w(0),ce(0),re.current=0,ne(0),J.current=0,bt(c);return}G(b),ae.current=b,Q(N),Z.current=N;const f=l+t;ce(f),re.current=f,Gt(_=>_+t),w(0);const v=s,h=b,j=v>50&&h<=50,ie=v<=50;j?(ne(1),J.current=1):ie&&(ne(_=>_+1),J.current=(g||0)+1);const Ce=J.current||0,Oe=v<=50,de=Oe?Math.max(Ce,Math.min(N,3)):0;if(b===0){const _={visitTotal:f,darts:N,preRemaining:s,remaining:0,doubleAttempts:de,finished:!0,doubleWindow:Oe,highestCheckout:c<=170?c:null};ue?hr(_):Ss(_,"immediate");return}if(N>=3){const _={visitTotal:f,darts:N,preRemaining:s,remaining:b,doubleAttempts:de,finished:!1,doubleWindow:Oe,highestCheckout:null};ue?hr(_):Ss(_,"immediate");return}}function Ls(){const t=Re(Math.round(Number(D)||0),0,60);qt(t)}function $(t){if(!Number.isFinite(t))return!1;const s=ze.current,r=ae.current,l=Z.current,c=re.current,g=l>0||c>0;g&&(G(s),ae.current=s,Q(0),Z.current=0,ce(0),re.current=0,ne(0),J.current=0,Pe(0),w(0),We(h=>Math.max(0,h-l)),dt(h=>Math.max(0,h-l)),Gt(h=>Math.max(0,h-c)),Ge.current=0);const b=g?s:r,N=b<=170?170:180,f=Re(Math.round(t),0,N);L("X01",3),We(h=>h+3),dt(h=>h+3),Q(3),Z.current=3,ce(f),re.current=f,Le(f),f===180?vs(h=>h+1):f>=140?js(h=>h+1):f>=100&&Ns(h=>h+1);const v=b-f;if(v<0){if(x)try{Is(ke,0,Math.max(s,0),o,{volume:m,checkoutOnly:p})}catch{}try{Zt.getState().recordVisit("offline-x01",3,0,{preRemaining:b,postRemaining:s,bust:!0,finish:!1})}catch{}G(s),ae.current=s,Le(0),ce(0),re.current=0,Q(0),Z.current=0,ne(0),J.current=0;try{q.addVisit(0,3)}catch{}return bt(s),!0}if(G(v),ae.current=v,Gt(h=>h+f),x)try{Is(ke,f,Math.max(v,0),o,{volume:m,checkoutOnly:p})}catch{}if(b<=50&&($t(h=>h+3),v===0&&gs(h=>h+1)),v===0){b<=170&&ys(h=>Math.max(h,b));try{Zt.getState().recordVisit("offline-x01",3,f,{preRemaining:b,postRemaining:0,finish:!0,bust:!1})}catch{}try{q.addVisit(f,3)}catch{}return oe("player"),le(!0),Q(0),Z.current=0,ce(0),re.current=0,ne(0),J.current=0,!0}try{Zt.getState().recordVisit("offline-x01",3,f,{preRemaining:b,postRemaining:v,finish:!1,bust:!1})}catch{}try{q.addVisit(f,3)}catch{}return bt(v),ce(0),re.current=0,Q(0),Z.current=0,ne(0),J.current=0,!0}const xe=io({match:q,commitManualVisitTotal:$,endTurn:bt}),[Cn,yr]=a.useState(""),wr=t=>{yr(t)},Ts=()=>{const t=parseInt(Cn,10);if(isNaN(t)||t<0||t>180){alert("Enter a number 0-180 for visit total");return}if(t>180){alert("Enter a number 0-180 for visit total");return}const s=ae.current<=170?170:180,r=Re(Math.round(t),0,s);t>s&&Ie(`Visit totals cannot exceed ${s}.`,{type:"info",timeout:2200}),$(r)&&yr("")},Dn=a.useCallback(()=>{Be.current&&(Be.current=null,Se(),Xt(!1));const t=Z.current,s=re.current,r=ze.current;t===0&&s===0||(G(r),ae.current=r,Q(0),Z.current=0,ce(0),re.current=0,ne(0),J.current=0,Pe(0),w(0),We(l=>Math.max(0,l-t)),dt(l=>Math.max(0,l-t)),Gt(l=>Math.max(0,l-s)),Ge.current=0)},[Se]);a.useEffect(()=>{const t=s=>{const r=s?.detail;!r||r?.source==="offline-play"||Dn()};return window.addEventListener("ndn:clear-visit-request",t),()=>window.removeEventListener("ndn:clear-visit-request",t)},[Dn]);function Sr(t){L("Double Practice");const s=Re(Math.round(t||0),0,60);if(Pe(s),We(r=>r+1),dt(r=>r+1),qr(s,Dt)){const r=_s+1;Ks(r),$s(l=>Math.min(20,l+1)),r>=21&&(oe("player"),le(!0))}w(0)}function kr(){Sr(Number(D))}function Cr(){const t=gt(ee);if(t==null){alert("Enter like D16, 50, 25, T20");return}Sr(t),z("")}function Dr(t,s,r){if(ja)return!1;L("Bob's 27");const l=ba,c=s==="DOUBLE"&&r===l||!s&&t===l*2;return c&&zs(g=>g+1),va(g=>{const b=g+1;if(b>=3){const N=gi+(c?1:0);N>0?Gs(v=>v+N*l*2):Gs(v=>v-l*2);const f=l+1;return ga(f),zs(0),f>20&&Na(!0),0}return b}),!0}function Ar(){Dr(Math.max(0,D|0)),w(0)}function Mr(){ga(1),Gs(27),va(0),zs(0),Na(!1),E("Bob's 27")}function An(t){return L("Count-Up"),Sa(s=>s+Math.max(0,t|0)),ka(s=>{const r=s+1;return r>=3?(wa(l=>l+1),0):r}),!0}function Mn(t){return L("High Score"),Aa(s=>s+Math.max(0,t|0)),Ma(s=>{const r=s+1;return r>=3?(Da(l=>l+1),0):r}),!0}function Ln(t){return L("Low Score"),Ra(s=>s+Math.max(0,t|0)),Ea(s=>{const r=s+1;return r>=3?(Ta(l=>l+1),0):r}),!0}function Lr(t,s,r,l,c,g,b,N){const f=t-b;if(!(f<0))if(f===0){if(N==="DOUBLE"||N==="INNER_BULL"){g(v=>v+1),c(v=>v+1),l(()=>0),s(t);return}s(f)}else s(f);l(v=>{const h=v+1;return h>=3?(c(j=>j+1),0):h})}function Tr(t,s){return L("Checkout 170"),Lr(Xs,Ys,Ia,Pa,Fa,Oa,t,s),Ia+1>=3&&Ys(170),!0}function Rr(t,s){return L("Checkout 121"),Lr(qs,Qs,Va,Ua,_a,Wa,t,s),Va+1>=3&&Qs(121),!0}function Rs(t){const s=gt(ee);if(s==null){alert("Enter like T20, D16, 25, 50");return}const r=ee.trim().toUpperCase(),l=r.startsWith("D")||r==="50"||r==="BULL"||r==="DBULL"||r==="IBULL"||r.includes("INNER");t?Tr(s,l?"DOUBLE":void 0):Rr(s,l?"DOUBLE":void 0),z("")}function al(){Ys(170),Pa(0),Fa(0),Oa(0),E("Checkout 170")}function rl(){Qs(121),Ua(0),_a(0),Wa(0),E("Checkout 121")}function Tn(t,s,r){return za?!1:(L("Treble Practice"),(s==="TRIPLE"&&r===$e||!s&&t===$e*3)&&en(c=>c+1),tn(c=>{const g=c+1;if(g%3===0&&[20,19,18].includes($e)){const b=["T20","T19","T18"],N=b.indexOf(`T${$e}`),f=b[(N+1)%b.length];Zs(Number(f.replace("T","")))}return Lt>0&&g>=Lt&&sn(!0),g}),!0)}function Er(){en(0),tn(0),sn(!1),E("Treble Practice")}function il(t,s,r){return L("Baseball"),Ya(l=>{const c={...l};return Wl(c,t,s,r),c}),!0}function ll(){Ya(Jr()),E("Baseball")}function ol(t,s,r){return L("Golf"),Qa(l=>{const c={...l};return zl(c,t,s,r),c}),!0}function cl(){Qa(ei()),E("Golf")}function dl(t,s,r,l){return L("Tic Tac Toe"),Za(c=>{const g={...c,board:[...c.board]};return Yl(g,t,s,r,l),g}),!0}function ml(){Za(ti()),E("Tic Tac Toe")}function ul(t,s,r){return L("American Cricket"),Ja(l=>{const c={...l,marks:{...l.marks}};return ao(c,t,s,r,()=>!1),c}),!0}function Ir(){Ja(ri()),E("American Cricket")}function Rn(t,s,r){L("Around the Clock");const l=Ve[Ue];let c=!1;if(typeof r=="number"&&r===l&&(s==="SINGLE"||s==="DOUBLE"||s==="TRIPLE")&&(c=!0),l===25&&(s==="BULL"||t===25)&&(c=!0),l===50&&(s==="INNER_BULL"||t===50)&&(c=!0),c||(t===l||t===l*2||t===l*3)&&(c=!0),c){const g=fa+1;return pa(g),ha(b=>b+1),!0}return!0}function Pr(){Rn(Math.max(0,D|0)),w(0)}function Br(){const t=gt(ee);if(t==null){alert("Enter like T20, D5, 25, 50");return}Rn(t),z("")}function En(t,s,r){return L("Cricket"),Ws(l=>{const c={...l,marks:{...l.marks}};return Il(c,t,s,r,()=>!1),c}),fe(l=>{const c=l+1;return c>=3?0:c}),!0}function Fr(){En(Math.max(0,D|0)),w(0)}function In(t,s,r){return L("Shanghai"),os(l=>{const c={...l,turnHits:{...l.turnHits}};return Fl(c,t,s,r),c}),fe(l=>{const c=l+1;return c>=3?(os(g=>{const b={...g,turnHits:{...g.turnHits}};return Hl(b),b}),0):c}),!0}function Hr(){In(Math.max(0,D|0)),w(0)}function Or(t,s,r){return L("Halve It"),cs(l=>{const c={...l,targets:[...l.targets]};return Ol(c,t,s,r),c}),fe(l=>{const c=l+1;return c>=3?(cs(g=>{const b={...g,targets:[...g.targets]};return Vl(b),b}),0):c}),!0}function Vr(){Or(Math.max(0,D|0)),w(0)}function Ur(t,s,r){return L("High-Low"),ms(l=>{const c={...l};return Ul(c,t,s,r),c}),fe(l=>{const c=l+1;return c>=3?(ms(g=>{const b={...g};return $l(b),b}),0):c}),!0}function $r(){Ur(Math.max(0,D|0)),w(0)}function _r(){const t=ee.trim().toUpperCase();if(!t)return null;if(t==="50"||t==="BULL"||t==="DBULL"||t==="IBULL")return 50;if(t==="25"||t==="OBULL")return 25;const s=t.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!s)return null;const r=s[1]||"S",l=parseInt(s[2],10);return l<1||l>20?null:l*(r==="S"?1:r==="D"?2:3)}function Qt(){const t=_r();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}qt(t),z("")}function Kr(){const t=vn.trim().split(`
`).map(s=>s.trim()).filter(s=>s);if(t.length!==0){for(const s of t){const r=gt(s);if(r==null){alert(`Invalid score: ${s}`);return}qt(r)}zt("")}}function Pn(){U!==0&&(G(t=>t+Me),Q(t=>Math.max(0,t-1)))}function Es(){const t=_r();if(t==null){alert("Enter like T20, D16, 5, 25, 50");return}if(U===0){Qt();return}const s=Me;G(r=>r+s),Q(r=>Math.max(0,r-1)),setTimeout(()=>qt(t),0),z("")}function xl(){const t=rs??"player",s=t==="player"?fs||void 0:dn||void 0,r=1,l=t==="player"?hs:ps;la([...ge,{winner:t,doubleDarts:ra,checkoutDarts:ia,winnerDarts:l,doublesAtt:s,doublesHit:r}]),le(!1);let c=V,g=W;if(rs==="player"?c+=1:rs==="ai"&&(g+=1),ns(c),as(g),oe(null),c>=Nt||g>=Nt){try{Al(u,t==="player")}catch{}et(!1),Je(!1),G(k),jt(k),gn(!0);return}nl()}const Bn=!Gr.includes(u)&&!(n?.fullAccess||n?.admin);return e.jsxs("div",{className:"card ndn-game-shell relative overflow-hidden",children:[di&&e.jsx(Ml,{players:q.players||[],user:n,onDone:()=>na(!1)}),e.jsxs("h2",{className:"text-3xl font-bold text-brand-700 mb-4",children:["Offline Mode ï¿½"," ",i==="classic"?e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-white/10 border border-white/10 align-middle",children:"Classic layout"}):e.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 border border-emerald-400/30 text-emerald-200 align-middle",children:"Modern layout"})]}),e.jsxs("div",{className:"ndn-shell-body",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[e.jsxs("select",{onPointerDown:t=>{t.stopPropagation()},onMouseDown:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation?.()},className:"input w-full",value:u,onChange:t=>Bs(t.target.value),children:[Gr.map(t=>e.jsx("option",{value:t,children:t},t)),jl.map(t=>e.jsxs("option",{value:t,disabled:!(n?.fullAccess||n?.admin),children:[t," ",n?.fullAccess||n?.admin?"":"(Premium)"]},t))]}),e.jsx(Ll,{gameMode:u,compact:!0}),u==="Treble Practice"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"font-semibold",children:"Throws per game"}),e.jsx("input",{className:"input w-full",type:"number",min:3,step:3,value:Lt,onChange:t=>ki(Math.max(3,Math.floor(Number(t.target.value)||30)))})]}),e.jsx("div",{className:"sm:col-span-2 text-xs text-slate-300",children:"Target cycles T20â†’T19â†’T18 every 3 darts. Game ends after the selected number of throws."}),y&&!Ct&&e.jsx("div",{className:"hidden md:block w-[360px] p-3 min-w-0",children:e.jsx("div",{"data-testid":"offline-camera-pane",className:"rounded-2xl overflow-hidden bg-black/70 p-2",style:{willChange:"transform, opacity"},children:e.jsx(ii,{scoringMode:"x01",showToolbar:S,immediateAutoCommit:!0,cameraAutoCommit:"camera",onAddVisit:X($),onAutoDart:(t,s,r)=>{}})})})]}),!n?.fullAccess&&e.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”’"}),e.jsx("span",{children:"Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM."})]}),u==="X01"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-semibold mt-2",children:"Enter starting score (1-1001):"}),e.jsx("input",{className:"input w-full",type:"number",min:1,max:1001,value:k,onChange:t=>Fs(Number(t.target.value))}),e.jsx("label",{className:"font-semibold mt-2",children:"Play against AI bot?"}),e.jsxs("select",{onPointerDown:t=>{t.stopPropagation()},onMouseDown:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation?.()},className:"input w-full",value:A,onChange:t=>Jn(t.target.value),children:[e.jsx("option",{value:"None",children:"None"}),lo.map(t=>e.jsx("option",{value:t,children:t},t))]}),A!=="None"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"font-semibold",children:"AI throw delay (seconds)"}),e.jsx("input",{className:"input w-full",type:"number",min:.5,max:10,step:.5,value:oa/1e3,onChange:t=>xi(Math.round(Number(t.target.value)*1e3))})]}),e.jsx("div",{className:"text-sm text-slate-300",children:"Controls how long the AI waits before its visit."})]}),e.jsx("button",{className:"btn mt-2",onClick:()=>be(!0),children:"X01 Rules & Regulations! ðŸ“–"})]}),u==="Double Practice"&&e.jsx("div",{className:"mt-2 text-brand-600",children:"Hit doubles D1 â†’ D20 â†’ DBULL in as few darts as possible. AI and X01 settings don't apply."})]}),!Os&&e.jsx("button",{className:"btn",disabled:Bn,title:Bn?"PREMIUM required for this mode":"",onClick:pt,children:"Start Match ðŸš€"}),Vs&&e.jsx("div",{className:`absolute inset-0 z-[1000] ${wt?"":"flex items-center justify-center p-3 sm:p-4"}`,children:e.jsx(Jt,{storageKey:"ndn:modal:offline-match",className:`${wt?"w-full h-full ndn-modal-tight":""} relative flex flex-col overflow-hidden`,fullScreen:wt,defaultWidth:1100,defaultHeight:720,minWidth:720,minHeight:480,maxWidth:1600,maxHeight:1200,initialFitHeight:!0,children:e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"flex-1 min-h-0 overflow-x-hidden pr-1 pt-2 pb-2",style:{overflowY:"auto",willChange:"scroll-position",transform:"translateZ(0)",WebkitOverflowScrolling:"touch",contain:"layout style"},ref:t=>{xt.current=t},children:[e.jsx("div",{ref:t=>{Sn.current=t},children:e.jsx(Nl,{left:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden xs:inline px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-[10px] sm:text-xs",children:"Game Mode"}),e.jsxs("span",{className:"font-medium whitespace-nowrap",children:[u,u==="X01"?` / ${k}`:""]}),e.jsxs("span",{className:"opacity-80 whitespace-nowrap",children:["First to ",Nt," Â· Legs ",V,"-",W]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full border text-[10px] sm:text-xs ${i==="modern"?"bg-emerald-500/15 text-emerald-200 border-emerald-400/30":"bg-white/10 text-white/70 border-white/20"}`,children:i==="modern"?"Modern layout":"Classic layout"})]}),right:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden items-center gap-2 mr-2 text-xs",children:[e.jsx("span",{className:"opacity-80",children:"Cam"}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>Y(Math.max(.5,Math.round((F-.05)*100)/100)),title:"Decrease camera size",children:"âˆ’"}),e.jsxs("span",{className:"w-9 text-center",children:[Math.round(F*100),"%"]}),e.jsx("button",{className:"btn btn--ghost px-2 py-1",onClick:()=>Y(Math.min(1.25,Math.round((F+.05)*100)/100)),title:"Increase camera size",children:"+"})]}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:St?"Actual Size":"Fit All",onClick:()=>da(t=>!t),children:St?"Actual Size":"Fit All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:wt?"Restore":"Maximize",onClick:()=>ca(t=>!t),children:wt?"Restore":"Maximize"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{pt()},children:"Restart"}),e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:()=>yt(!0),children:"Quit"})]})})}),hi&&e.jsx(yl,{onClose:()=>yt(!1),onQuit:()=>{try{zr({type:"quit"})}catch{}et(!1),Je(!1),yt(!1)},onPause:t=>{const s=Date.now()+t*60*1e3;try{fi(!0,s),zr({type:"pause",pauseEndsAt:s,pauseStartedAt:Date.now()})}catch{}yt(!1)}}),e.jsxs("div",{ref:t=>{ht.current=t},className:"will-change-transform",style:St?{transform:`scale(${is})`,transformOrigin:"top left",width:"100%",fontSize:`${Math.max(.8,Math.min(1,is))}em`}:void 0,children:[e.jsx("h3",{className:"text-xl font-bold mb-2 mt-1 leading-tight",children:u==="X01"?"X01 Match âš”ï¸":`${u} âš”ï¸`}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Mode: ",u]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Start: ",k]}),e.jsxs("div",{ref:sl,className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[e.jsx("span",{children:"Format:"}),(()=>{const t=O!==k||K!==k||U>0,s=`pill ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"} `;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:`${s} ${ft==="first"?"pill--filled":"pill--ghost"}`,onClick:()=>{t||kn("first")},title:"First to N",children:"First to"}),e.jsx("button",{type:"button",className:`${s} ${ft==="best"?"pill--filled":"pill--ghost"}`,onClick:()=>{t||kn("best")},title:"Best of N (wins = ceil(N/2)",children:"Best of"})]}),e.jsx("input",{className:`input w-16 text-center ${t?"opacity-50":""}`,type:"number",min:1,step:1,value:Ms,onChange:r=>Nr(Math.max(1,Math.floor(Number(r.target.value)||1))),disabled:t,title:ft==="first"?"First to N":"Best of N (wins = ceil(N/2))"})]})})()]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs: ",V,"â€“",W]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px] flex-wrap",children:[e.jsx("span",{className:"opacity-70",children:"Match"}),e.jsxs("select",{className:`input input-compact font-bold ${He}`,value:vt,onChange:t=>Ee(t.target.value),children:[e.jsx("option",{value:"singles",children:"Singles"}),e.jsx("option",{value:"doubles",children:"Doubles"})]}),e.jsx("input",{className:`input ${He} w-[7.5rem]`,value:Ze,onChange:t=>es(t.target.value),placeholder:"Team A"}),e.jsx("span",{className:"opacity-50",children:"vs"}),e.jsx("input",{className:`input ${He} w-[7.5rem]`,value:ts,onChange:t=>ss(t.target.value),placeholder:"Team B"})]})]}),u!=="X01"?e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2",children:[u==="Double Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Ps[Dt]?.label||"â€”"})]})}),u==="Around the Clock"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Ve[Ue]===25?"25 (Outer Bull)":Ve[Ue]===50?"50 (Inner Bull)":Ve[Ue]||"â€”"})]})}),u==="Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Cricket â€” Close 20â€“15 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-[11px] mb-2",children:qn.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,At.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points:"," ",e.jsx("span",{className:"font-semibold",children:At.points})]}),Pl(At)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Ws(On()),fe(0),E("Cricket")},children:"Reset"})]})]}),u==="Shanghai"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Round"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:ls.round})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ls.score]}),ls.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{os(Vn()),fe(0),E("Shanghai")},children:"Reset"})]})]}),u==="Halve It"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Stage"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[Mt.stage+1,"/",Mt.targets.length]})]}),e.jsxs("div",{className:"text-sm",children:["Target:"," ",e.jsx("span",{className:"font-semibold",children:(()=>{const t=li(Mt);return t?t.kind==="ANY_NUMBER"?"Any":t.kind==="BULL"?"Bull":t.kind==="DOUBLE"||t.kind==="TRIPLE"||t.kind==="NUMBER"?`${t.kind} ${t.num}`:"â€”":"â€”"})()})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Mt.score]}),Mt.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{cs(Un()),fe(0),E("Halve It")},children:"Reset"})]})]}),u==="High-Low"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",ds.round," Â· Target ",ds.target]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ds.score]}),ds.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{ms($n()),fe(0),E("High-Low")},children:"Reset"})]})]}),u==="Bob's 27"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Target"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold",children:["D",ba]})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",bi]}),ja&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Mr,children:"Reset"})]})]}),u==="Count-Up"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",ya,"/8"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",vi]})]}),u==="High Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Ca,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Ni]})]}),u==="Low Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",La,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",wi]})]}),u==="Checkout 170"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Xs}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",Ba," Â· Successes:"," ",Ha]})]}),u==="Checkout 121"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:qs}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",$a," Â· Successes:"," ",Ka]})]}),u==="Treble Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Treble Target: T",$e]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Hits: ",Js]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("label",{className:"text-sm",children:"Target"}),e.jsx("div",{className:"inline-flex items-center gap-1",children:[20,19,18].map(t=>e.jsxs("button",{className:`btn px-2 py-0.5 text-xs ${$e===t?"bg-emerald-600/30 border border-emerald-400/30":""}`,onClick:()=>Zs(t),children:["T",t]},`tpick-header-${t}`))}),e.jsx("span",{className:"opacity-60 text-xs",children:"or"}),e.jsx("select",{className:"input w-24",value:$e,onChange:t=>Zs(parseInt(t.target.value,10)),children:Array.from({length:20},(t,s)=>s+1).map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Er,children:"Reset"})]})]})}),u==="Baseball"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Inning"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Xa.inning}),e.jsxs("div",{className:"text-sm",children:["Score:"," ",e.jsx("span",{className:"font-semibold",children:Xa.score})]})]}),u==="Golf"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Hole"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:qa.hole}),e.jsxs("div",{className:"text-sm",children:["Strokes:"," ",e.jsx("span",{className:"font-semibold",children:qa.strokes})]})]}),u==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Turn"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:_e.turn}),_e.finished&&e.jsxs("div",{className:"mt-1 text-xs",children:["Winner: ",_e.winner||"â€”"]})]}),u==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Target"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:_n[xs.targetIndex]}),e.jsxs("div",{className:"text-sm",children:["Progress:"," ",e.jsxs("span",{className:"font-semibold",children:[xs.targetIndex+1,"/",_n.length]})]}),xs.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["ðŸŽ‰ Finished in ",xs.darts," darts!"]})]}),u==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[Pt.score,"/",Pt.target]}),e.jsxs("div",{className:"text-sm",children:["Darts:"," ",e.jsx("span",{className:"font-semibold",children:Pt.darts})]}),Pt.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",Pt.target,"!"]})]}),u==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[Ft.score,"/",Ft.target]}),e.jsxs("div",{className:"text-sm",children:["Darts:"," ",e.jsx("span",{className:"font-semibold",children:Ft.darts})]}),Ft.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",Ft.target,"!"]})]}),u==="American Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Close 20â€“12 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-10 gap-1 text-center text-[11px] mb-2",children:Qn.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,nn.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points:"," ",e.jsx("span",{className:"font-semibold",children:nn.points})]}),ro(nn)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Ir,children:"Reset"})]})]}),u==="Killer"&&e.jsx(e.Fragment,{children:er?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Turn"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:B[ye]?.name||"â€”"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:nt?`${B.find(t=>t.id===nt)?.name||"Winner"} Wins`:Ci||"Ready"})]}):e.jsx("div",{className:"text-xs text-slate-600",children:"Setup players and assign numbers"})})]}):i==="modern"?e.jsxs("div",{className:"space-y-3 mb-2",children:[me?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Manual scoring active"}),e.jsx("div",{className:"text-xs opacity-70",children:"Camera previews are disabled. Use the manual entry controls below to record your turn."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-wrap gap-1.5 mt-1",children:e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px]",children:[e.jsx("span",{className:"opacity-70",children:"Cam"}),e.jsx("button",{className:`btn ${He}`,onClick:()=>Y(Math.max(.5,Math.round((F-.05)*100)/100)),children:"âˆ’"}),e.jsxs("span",{className:`btn ${He} min-w-[2.5rem] text-center`,children:[Math.round(F*100),"%"]}),e.jsx("button",{className:`btn ${He}`,onClick:()=>Y(Math.min(1.25,Math.round((F+.05)*100)/100)),children:"+"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${He}`,title:"Toggle fit/fill",onClick:()=>se(T==="fill"?"fit":"fill"),children:T==="fill"?"Fill":"Fit"}),e.jsx("span",{className:"opacity-50",children:"|"}),e.jsx("button",{className:`btn ${He}`,title:"Toggle camera aspect",onClick:()=>C(P==="square"?"wide":"square"),children:P==="square"?"Square":"Wide"})]})}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:gap-6",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-[minmax(0,1fr)_300px] md:items-start md:gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{"data-testid":"offline-current-shooter",className:"rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Current Shooter"}),e.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[e.jsx("div",{className:"text-xl font-semibold text-white",children:qi}),e.jsx("div",{className:"ml-auto text-sm text-slate-300",children:"3-Dart Avg (Live)"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-white/80",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Remaining"}),e.jsx("div",{className:"font-mono text-lg text-white",children:pr})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Last Dart"}),e.jsx("div",{className:"font-mono text-lg text-white",children:br||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Match Legs"}),e.jsxs("div",{className:"font-semibold text-white",children:[V,"-",W]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"Next Up"}),e.jsx("div",{className:"font-medium text-white",children:Yi})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{"data-testid":"offline-live-avg",className:"rounded-xl bg-slate-900/60 border border-white/10 p-3 text-white/80",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"3-Dart Avg (Live)"}),e.jsx("div",{className:"mt-1 text-lg font-semibold",children:Hn(q.players?.[q.currentPlayerIdx]?.currentThreeDartAvg??0)})]}),e.jsxs("div",{"data-testid":"offline-player-stats",className:"rounded-lg border p-3 bg-slate-900/50 border-white/10 text-white/80",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"You"}),e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsxs("div",{children:["Legs Won:"," ",e.jsx("span",{className:"font-semibold",children:V})]}),e.jsxs("div",{children:["Score:"," ",e.jsx("span",{className:"font-mono",children:pr})]}),e.jsxs("div",{children:["Last Score:"," ",e.jsx("span",{className:"font-mono",children:br||0})]})]})]})]})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"rounded-lg border p-3 bg-slate-900/50 border-white/10 text-white/80",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/40",children:"3-Dart Avg (Live)"}),e.jsx("div",{className:"mt-1 text-lg font-semibold",children:Hn(q.players?.[q.currentPlayerIdx]?.currentThreeDartAvg??0)})]})}),e.jsx(De,{gameMode:u,players:fr,matchScore:`${V}-${W}`})]})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(De,{gameMode:u,players:fr,matchScore:`${V}-${W}`})}),Ct&&y&&!xa&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 md:hidden",children:[e.jsx("button",{className:"btn rounded-full border border-white/20 bg-white/10 px-4 py-2 text-sm text-white",onClick:()=>Us(!0),children:"Camera"}),e.jsx("span",{className:"text-xs text-white/60",children:"Tap to open the camera tab"})]}),u==="X01"&&e.jsxs("div",{className:"mt-3 md:mt-4 rounded-2xl bg-slate-900/60 border border-white/10 p-4 text-slate-100 shadow-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Manual Scoreboard Override"}),e.jsxs("p",{className:"mt-1 text-xs text-white/40",children:["Adjust the live totals if a dart was misread. Values are clamped between 0 and ",k,"."]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:ke}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Commit Visit"}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx(Rl,{inProgress:!0,startingScore:k,onAddVisit:X($),quickButtons:[180,140,100,60],onNextPlayer:()=>xe?.nextPlayer(),onEndLeg:()=>{},onUndo:()=>{},showDartsSelect:!0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:dr,onChange:t=>jn(t.target.value),onKeyDown:t=>{t.key==="Enter"&&As("player")},placeholder:`${V}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>As("player"),children:"Set"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:Fe}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Three Dart Edit"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:k,value:or,onChange:t=>cr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&vr()},placeholder:`${K}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>vr(),children:"Set"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/50",children:"Legs Override"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,value:mr,onChange:t=>Nn(t.target.value),onKeyDown:t=>{t.key==="Enter"&&As("ai")},placeholder:`${W}`}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>As("ai"),children:"Set"})]})]})]})]})]})]})})})]}),Ct&&y&&xa&&e.jsxs("div",{className:"fixed inset-0 z-[90] flex items-start justify-center px-3 pt-6 md:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80"}),e.jsx("div",{className:"relative z-10 w-full max-w-[420px]",children:e.jsxs("div",{className:"relative h-[75vh] rounded-[28px] overflow-hidden bg-black shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx(M,{scoringMode:"x01",showToolbar:S,immediateAutoCommit:!0,cameraAutoCommit:"camera",onAddVisit:X($),onAutoDart:(t,s,r)=>{}})}),e.jsx("button",{className:"absolute top-3 right-3 rounded-full bg-black/60 p-2 text-white",onClick:()=>Us(!1),"aria-label":"Close camera tab",children:"âœ•"}),e.jsxs("div",{className:"absolute bottom-4 right-4 w-full max-w-[220px] rounded-[20px] bg-black/70 p-3 text-left text-white shadow-lg",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-white/60",children:"Current thrower"}),e.jsx("div",{className:"text-sm font-semibold leading-tight",children:Oi}),e.jsxs("div",{className:"text-[11px] text-white/60",children:["Legs: ",Ui]}),e.jsx("div",{className:"mt-2 text-[10px] uppercase tracking-wide text-white/60",children:"Opponent"}),e.jsx("div",{className:"text-sm font-semibold leading-tight",children:Vi}),e.jsxs("div",{className:"text-[11px] text-white/60",children:["Legs: ",$i]})]})]})})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:[grid-template-columns:minmax(0,0.75fr)_minmax(0,3fr)_minmax(0,0.75fr)] gap-2 mb-2 items-stretch min-w-0",children:e.jsxs("div",{className:"flex items-stretch justify-center md:px-3 min-w-0",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"You Remain"}),R?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:O}),e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-400/70",style:{width:`${Math.max(0,Math.min(100,(1-O/k)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart:"," ",e.jsx("span",{className:"font-semibold",children:Me})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score:"," ",e.jsx("span",{className:"font-semibold",children:U>0?we:at??Me})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg:"," ",e.jsx("span",{className:"font-semibold",children:Kt>0?(xn/Kt*3).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"text-xs opacity-70 flex items-center gap-2",children:[e.jsxs("span",{children:["Darts thrown: ",hs]}),e.jsx("span",{className:"inline-flex items-center gap-1","aria-label":"Visit darts",children:[0,1,2].map(t=>e.jsx("span",{className:`w-2 h-2 rounded-full ${t<U?"bg-emerald-400":"bg-white/20"}`},t))})]}),e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles:"," ",e.jsxs("span",{className:"font-semibold",children:["Att ",Ut," Â· Hit ",mn]})]}),O<=170&&O>0&&(()=>{const s=wl(O,d)[0]||"â€”";return e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/10 text-white text-sm",children:[e.jsx("span",{className:"opacity-70",children:"Checkout"}),e.jsx("span",{className:"font-semibold",children:s})]})})()]}),e.jsx("div",{className:"flex items-stretch justify-center md:justify-end md:px-3 min-w-0 flex-1 min-h-0 ndn-camera-tall",children:e.jsx(Sl,{storageKey:"ndn:camera:tile:offline:center:v4",className:"relative rounded-2xl overflow-hidden bg-black w-full camera-fullwidth-card",defaultWidth:0,defaultHeight:0,minWidth:300,minHeight:300,maxWidth:2e3,maxHeight:1200,autoFill:!0,children:e.jsx(M,{scoringMode:"x01",showToolbar:S,immediateAutoCommit:!0,cameraAutoCommit:"camera",onAddVisit:X($),onAutoDart:(t,s,r)=>{}})})}),e.jsxs("div",{className:`mt-2 ${Ne==="small"?"p-2":Ne==="large"?"p-4":"p-3"} rounded-2xl bg-slate-900/40 border border-white/10 text-white ${pe==="small"?"text-xs":pe==="large"?"text-base":"text-sm"}`,children:[e.jsx("div",{className:"font-semibold mb-2",children:"Match Summary"}),(()=>{const t=R?n?.username||"You":A==="None"?"â€”":`${A} AI`,s=R?O:A==="None"?0:K,r=R?U>0?we:at??Me:it>0?rt:lt??Xe,l=R?hs:ps,c=k-(R?O:A==="None"?k:K),g=l>0?c/l*3:0,b=`${V}-${W}`,N=ge.length>0?`${Math.min(...ge.map(f=>f.doubleDarts+(f.checkoutDarts||0)))||0} darts`:"â€”";return e.jsxs("div",{className:"grid grid-cols-2 gap-y-1",children:[e.jsx("div",{className:"opacity-80",children:"Current score"}),e.jsx("div",{className:"font-mono text-right",children:b}),e.jsx("div",{className:"opacity-80",children:"Current thrower"}),e.jsx("div",{className:"text-right font-semibold text-lg",children:t}),e.jsx("div",{className:"opacity-80",children:"Score remaining"}),e.jsx("div",{className:"text-right font-mono font-bold text-xl",children:s}),e.jsx("div",{className:"opacity-80",children:"3-dart avg"}),e.jsx("div",{className:"text-right font-mono",children:g.toFixed(1)}),e.jsx("div",{className:"opacity-80",children:"Last score"}),e.jsx("div",{className:"text-right font-mono",children:r}),e.jsx("div",{className:"opacity-80",children:"Best leg"}),e.jsx("div",{className:"text-right",children:N})]})})()]}),e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full",children:[e.jsxs("div",{className:"text-xs flex items-center justify-between opacity-80",children:[e.jsxs("span",{children:[A==="None"?"Opponent":`${A} AI`," Remain"]}),R?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-200 text-xs font-bold",children:"WAITING TO THROW"}):e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:"THROWING"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:A!=="None"?K:"N/A"}),A!=="None"&&e.jsx("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-fuchsia-400/70",style:{width:`${Math.max(0,Math.min(100,(1-K/k)*100))}%`}})}),e.jsxs("div",{className:"text-sm mt-1 opacity-90",children:["Last dart:"," ",e.jsx("span",{className:"font-semibold",children:A==="None"?0:Xe})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["Last score:"," ",e.jsx("span",{className:"font-semibold",children:A==="None"?"â€”":it>0?rt:lt??Xe})]}),e.jsxs("div",{className:"text-sm opacity-90",children:["3-Dart Avg:"," ",e.jsx("span",{className:"font-semibold",children:A!=="None"?Wt>0?(hn/Wt*3).toFixed(1):"0.0":"â€”"})]}),A!=="None"&&e.jsxs("div",{className:"text-xs opacity-70",children:["Darts thrown: ",ps]}),A!=="None"&&e.jsxs("div",{className:"text-xs opacity-80 mt-1",children:["Doubles:"," ",e.jsxs("span",{className:"font-semibold",children:["Att ",_t," Â· Hit ",un]})]})]})]})}),u!=="X01"?e.jsxs("div",{className:"space-y-2",children:[u==="Double Practice"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Ps[Dt]?.label||"â€”"})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,onAutoDart:(t,s)=>{if((s==="DOUBLE"||s==="INNER_BULL")&&qr(t,Dt)){const l=_s+1,c=Dt+1;return Ks(l),$s(c),l>=Ps.length&&setTimeout(()=>{Ks(0),$s(0)},250),!0}return!1},immediateAutoCommit:!0,onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&kr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:kr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:ee,onChange:t=>z(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Cr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Cr,children:"Add"})]})]}),e.jsxs("div",{className:"text-xs text-slate-300",children:["Progress: ",_s," of 21"]})]}),u==="Around the Clock"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Ve[Ue]===25?"25 (Outer Bull)":Ve[Ue]===50?"50 (Inner Bull)":Ve[Ue]||"â€”"})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Rn(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Pr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Pr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D5, 25, 50)",value:ee,onChange:t=>z(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Br()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Br,children:"Add"})]}),fa>=Ve.length&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{pa(0),ha(0),E("Around the Clock")},children:"Reset"})]})]}),u==="Cricket"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>En(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Fr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Fr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ws(On()),fe(0),E("Cricket")},children:"Reset"})]})]}),u==="Shanghai"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>In(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Hr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Hr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{os(Vn()),fe(0),E("Shanghai")},children:"Reset"})]})]}),u==="Halve It"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Or(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Vr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Vr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{cs(Un()),fe(0),E("Halve It")},children:"Reset"})]})]}),u==="High-Low"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Ur(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&$r()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:$r,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ms($n()),fe(0),E("High-Low")},children:"Reset"})]})]}),u==="Bob's 27"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Dr(t,s==="MISS"?void 0:s,r?.sector??null),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Ar()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ar,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Mr,children:"Reset"})]})]}),u==="Count-Up"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>An(t),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(An(D),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{An(D),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{wa(1),Sa(0),ka(0),E("Count-Up")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",ya,"/",ji]})]}),u==="High Score"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>Mn(t),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(Mn(D),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{Mn(D),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Da(1),Aa(0),Ma(0),E("High Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",Ca,"/",yi]})]}),u==="Low Score"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:t=>Ln(t),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(Ln(D),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{Ln(D),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ta(1),Ra(0),Ea(0),E("Low Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",La,"/",Si]})]}),u==="Checkout 170"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>Tr(t,s==="MISS"?void 0:s),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:ee,onChange:t=>z(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Rs(!0)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>Rs(!0),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:al,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",Xs," Â· Attempts: ",Ba," ","Â· Successes: ",Ha]})]}),u==="Checkout 121"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>Rr(t,s==="MISS"?void 0:s),onAddVisit:X($),onEndLeg:t=>xe.endLeg(t)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:ee,onChange:t=>z(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Rs(!1)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>Rs(!1),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:rl,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",qs," Â· Attempts: ",$a," ","Â· Successes: ",Ka]})]}),u==="Treble Practice"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>Tn(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (T20)",value:ee,onChange:t=>z(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){const s=gt(ee);s!=null&&Tn(s,void 0,void 0),z("")}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{const t=gt(ee);t!=null&&Tn(t,void 0,void 0),z("")},children:"Add Dart"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Hits: ",Js," Â· Misses:"," ",Math.max(0,Ga-Js)," Â· Darts:"," ",Ga,Lt>0?`/${Lt}`:""]}),za&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Er,children:"Reset"})]})]}),u==="Baseball"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>il(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:ll,children:"Reset"})})]}),u==="Golf"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>ol(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:cl,children:"Reset"})})]}),u==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(t,s)=>s).map(t=>e.jsx("button",{className:`h-16 rounded-xl border ${_e.board[t]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(_e.finished||_e.board[t])return;const s=Number(prompt("Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)")||0),r=s%3===0?"TRIPLE":s%2===0?"DOUBLE":"SINGLE",l=t,c=oi[l],g=c.type==="BULL"?null:c.num||null;dl(l,s,r,g)},children:_e.board[t]||""},t))}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{}})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:ml,children:"Reset"})})]}),u==="American Cricket"&&e.jsxs(e.Fragment,{children:[y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>ul(t,s==="MISS"?void 0:s,r?.sector??null)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ir,children:"Reset"})})]}),u==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:_n[Ke.targetIndex]})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{const l=s==="MISS"?void 0:s;return L("Scam"),It(Wn(Ke,t,l)),!0}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:1,max:25,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(L("Scam"),It(si(Ke,D)),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{L("Scam"),It(si(Ke,D)),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{It(Ql()),E("Scam")},children:"Reset"})]}),Ke.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["ðŸŽ‰ Finished in ",Ke.darts," darts!"]})]}),u==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score:"," ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[ve.score,"/",ve.target]})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>(L("Fives"),Bt(zn(ve,t)),!0)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:5,max:50,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(L("Fives"),Bt(ni(ve,D)),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{L("Fives"),Bt(ni(ve,D)),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Bt(eo(ve.target)),E("Fives")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 5, 10, 15, 20, 25, 50 Â· Darts:"," ",ve.darts]}),ve.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",ve.target," in"," ",ve.darts," darts!"]})]}),u==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score:"," ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[je.score,"/",je.target]})]}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>(L("Sevens"),Ht(Yn(je,t)),!0)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:7,max:21,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(L("Sevens"),Ht(ai(je,D)),w(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{L("Sevens"),Ht(ai(je,D)),w(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ht(no(je.target)),E("Sevens")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 7, 14, 21 Â· Darts:"," ",je.darts]}),je.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",je.target," in"," ",je.darts," darts!"]})]}),u==="Killer"&&e.jsx(e.Fragment,{children:er?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:B.map(t=>{const s=Tt[t.id],r=us[t.id];return e.jsxs("div",{className:`p-2 rounded-xl border ${s?.eliminated?"opacity-50 border-red-500/40 bg-red-500/10":"border-slate-700/50 bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded ${s?.isKiller?"bg-purple-500/20 text-purple-200 border border-purple-400/30":"bg-slate-600/30 text-slate-300"}`,children:s?.isKiller?"Killer":"Not Killer"})]}),e.jsxs("div",{className:"mt-1 text-sm",children:["Number:"," ",e.jsx("span",{className:"font-semibold",children:r})]}),e.jsxs("div",{className:"text-sm",children:["Lives:"," ",e.jsx("span",{className:"font-semibold",children:s?.lives??0})]})]},t.id)})}),y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(nt)return!1;const l=s==="MISS"?void 0:s,c=r?.sector??null,g=B[ye];return g?(Rt(b=>{const N={};Object.keys(b).forEach(h=>N[h]={...b[h]});const f=Qr(g.id,N,l,c);if(f.becameKiller)Ae(`${g.name} became a Killer`);else if(f.victimId){const h=B.find(j=>j.id===f.victimId);Ae(`${g.name} hit ${h?.name}'s ${us[f.victimId]} (${f.livesRemoved} life${(f.livesRemoved||0)>1?"s":""})`)}else Ae("No effect");const v=Zr(N);return v&&Et(v),N}),st(b=>{const N=b+1;if(N>=3){let f=ye;for(let v=1;v<=B.length;v++){const h=(ye+v)%B.length,j=B[h].id,ie=Tt[j];if(ie&&!ie.eliminated&&ie.lives>0){f=h;break}}return tt(f),0}return N}),!0):!1}})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-40",placeholder:"Manual (D16, T5)",value:ee,onChange:t=>z(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){if(nt)return;const r=ee.trim().toUpperCase().match(/^(S|D|T)?\s*(\d{1,2})$/);if(!r){z("");return}const l=r[1]||"S",c=parseInt(r[2],10),g=l==="D"?"DOUBLE":l==="T"?"TRIPLE":"SINGLE",b=B[ye];Rt(N=>{const f={};Object.keys(N).forEach(j=>f[j]={...N[j]});const v=Qr(b.id,f,g,c);if(v.becameKiller)Ae(`${b.name} became a Killer`);else if(v.victimId){const j=B.find(ie=>ie.id===v.victimId);Ae(`${b.name} hit ${j?.name}'s ${us[v.victimId]} (${v.livesRemoved} life${(v.livesRemoved||0)>1?"s":""})`)}else Ae("No effect");const h=Zr(f);return h&&Et(h),f}),z(""),st(N=>{const f=N+1;if(f>=3){let v=ye;for(let h=1;h<=B.length;h++){const j=(ye+h)%B.length,ie=B[j].id,Ce=Tt[ie];if(Ce&&!Ce.eliminated&&Ce.lives>0){v=j;break}}return tt(v),0}return f})}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{let t=ye;for(let s=1;s<=B.length;s++){const r=(ye+s)%B.length,l=B[r].id,c=Tt[l];if(c&&!c.eliminated&&c.lives>0){t=r;break}}tt(t),st(0)},children:"Next Player"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Rt({}),rn({}),ln(!1),tt(0),st(0),Et(null),Ae("")},children:"Reset"})]}),nt&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Winner:"," ",B.find(t=>t.id===nt)?.name," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Rt({}),rn({}),ln(!1),tt(0),st(0),Et(null),Ae("")},children:"Play Again"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Players"}),e.jsx("div",{className:"space-y-1",children:B.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input",value:t.name,onChange:r=>{const l=r.target.value;an(c=>c.map((g,b)=>b===s?{...g,name:l}:g))}}),e.jsx("button",{className:"btn px-2 py-1",onClick:()=>an(r=>r.filter((l,c)=>c!==s)),disabled:B.length<=2,children:"Remove"})]},t.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn px-2 py-1",onClick:()=>an(t=>{const s=`p${t.length+1}`;return[...t,{id:s,name:`Player ${t.length+1}`}]}),children:"Add Player"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1",onClick:()=>{if(B.length<2){alert("Need at least 2 players");return}const t=B.map(l=>l.id),s=Kl(t),r={};t.forEach(l=>{r[l]=_l(s[l])}),rn(s),Rt(r),tt(0),st(0),Et(null),Ae("Assigned numbers"),ln(!0)},children:"Assign Numbers & Start"})]})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-3 min-h-0 flex-1 text-[14px]",children:[e.jsxs("div",{className:"basis-1/2 shrink-0 min-w-0 flex flex-col gap-2 overflow-y-auto pr-2 text-sm",style:{willChange:"scroll-position",transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},children:[e.jsx("div",{className:"text-sm font-semibold opacity-80",children:"Scoreboard"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(De,{gameMode:u,players:ks,matchScore:`${V}-${W}`})}),R&&e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-900/60 border border-white/10 text-slate-100 shadow-lg backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h4",{className:"text-sm font-semibold tracking-wide uppercase text-indigo-200",children:"Manual Scoring"}),e.jsx("span",{className:"text-xs text-white/60",children:"Override a visit or enter dart-by-dart scores."})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Single Dart"}),e.jsx("input",{className:"input w-20 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:60,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?Pn():Ls())},placeholder:"60"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ls,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Three Dart Edit"}),e.jsx("input",{className:"input w-24 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",type:"number",min:0,max:O<=170?170:180,value:Cn,onChange:t=>wr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Ts()},placeholder:"100"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ts,children:"Commit Visit"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:Pn,children:"Undo Visit"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Manual"}),e.jsx("input",{className:"input w-28 bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-emerald-400/60 focus:ring-emerald-500/40",value:ee,onChange:t=>z(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?Es():Qt())},placeholder:"T20"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Qt,children:"Apply"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:Es,disabled:U===0,children:"Replace Last"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60",children:"Multi-entry (one per line)"}),e.jsx("textarea",{className:"mt-2 w-full rounded-xl bg-slate-950/70 border border-white/10 text-sm text-slate-100 placeholder-white/40 p-3 focus:outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-500/30",rows:3,value:vn,onChange:t=>zt(t.target.value),placeholder:`T20
D16
25`}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Kr,children:"Apply All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>zt(""),children:"Clear"})]})]}),e.jsx("div",{className:"pt-2 border-t border-white/10 mt-3",children:e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:Dn,disabled:U===0&&we===0,children:"Clear Current Visit"})})]})]})]}),y&&e.jsx("div",{className:"basis-1/2 shrink-0 min-w-0 rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s)=>{const r=s??"MISS",l=Number.isFinite(t)?Math.max(0,t):0,c=Date.now();if(l<=0){if(r!=="MISS"||c-(Ge.current||0)<1200)return;Ge.current=c}else Ge.current=0;qt(l)}})})]}),u==="X01"&&!y&&e.jsx(e.Fragment,{children:e.jsx(De,{gameMode:u,players:ks,matchScore:`${V}-${W}`})}),u==="Cricket"&&e.jsx(e.Fragment,{children:e.jsx(De,{gameMode:"Cricket",players:_i})}),u==="Cricket"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return En(t,s==="MISS"?void 0:s,r?.sector??null),!0}})}),u==="Shanghai"&&e.jsx(e.Fragment,{children:e.jsx(De,{gameMode:"Shanghai",players:Ki})}),u==="Shanghai"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return In(t,s==="MISS"?void 0:s,r?.sector??null),!0}})}),u==="Killer"&&e.jsx(e.Fragment,{children:e.jsx(De,{gameMode:"Killer",players:Wi})}),u==="Scam"&&e.jsx(e.Fragment,{children:e.jsx(De,{gameMode:"Scam",players:Gi})}),u==="Scam"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return It(Wn(Ke,t,s)),!0}})}),u==="Fives"&&e.jsx(e.Fragment,{children:e.jsx(De,{gameMode:"Fives",players:zi})}),u==="Fives"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return Bt(zn(ve,t)),!0}})}),u==="Sevens"&&e.jsx(e.Fragment,{children:e.jsx(De,{gameMode:"Sevens",players:Xi})}),u==="Sevens"&&y&&e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black",children:e.jsx(M,{scoringMode:"custom",showToolbar:S,immediateAutoCommit:!0,onAutoDart:(t,s,r)=>{if(t>0)return Ht(Yn(je,t)),!0}})}),e.jsx("div",{className:"font-semibold",children:"Your Turn"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:D,onChange:t=>w(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?Pn():Ls())}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ls,title:"Add a single dart (0â€“60)",children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-28",type:"number",min:0,max:O<=170?170:180,placeholder:"Visit total (0â€“180)",value:Cn,onChange:t=>wr(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Ts()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ts,title:"Commit a full 3-dart total like 93",children:"Commit Visit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D16, 5, 25, 50)",value:ee,onChange:t=>z(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.shiftKey?Es():Qt())}}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:Es,disabled:U===0,children:"Replace Last"}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Qt,children:"Add"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"input w-full h-24 resize-none",placeholder:`Type scores manually (one per line, e.g. T20
D16
5
25
50) - No camera needed!`,value:vn,onChange:t=>zt(t.target.value)}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Kr,children:"Add All Scores"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>zt(""),children:"Clear"})]})]})]}),e.jsx("div",{className:"text-xs text-slate-300",children:"Tip: Enter to Add Â· Shift+Enter to Replace Last"})]}),e.jsx("div",{className:"h-1"})]})]}),e.jsx("div",{className:"hidden md:block w-[380px] p-3 min-w-0",children:e.jsx("div",{"data-testid":"offline-camera-pane",className:"rounded-2xl overflow-hidden bg-black/70 p-2 sticky top-4 self-start",style:{willChange:"transform, opacity"},children:e.jsx(ii,{scoringMode:u==="X01"?"x01":"custom",showToolbar:S,immediateAutoCommit:!1,cameraAutoCommit:y&&!me?"camera":"parent",onAddVisit:X($),onAutoDart:()=>{}})})})]})})}),Hs&&e.jsx(mo,{onClose:()=>be(!1)}),Bn&&e.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),e.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”’"}),e.jsx("div",{className:"font-semibold",children:"Premium mode locked"}),e.jsx("div",{className:"text-sm text-slate-200/80",children:"Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more."}),e.jsxs("button",{onClick:async()=>{try{const s=await(await fetch(`${uo}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n?.email})})).json();s.ok&&s.url?(window.location.href=s.url,s.development&&Ie("Opened Stripe test checkout (development mode)",{type:"info",timeout:3e3})):s.error==="STRIPE_NOT_CONFIGURED"?Ie("Premium purchases are not available in this development environment. Please visit the production site to upgrade.",{type:"error",timeout:4e3}):Ie("Failed to create checkout session. Please try again.",{type:"error",timeout:4e3})}catch{Ie("Error creating checkout. Please try again.",{type:"error",timeout:4e3})}},className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM Â·"," ",kl(Cl(),5)]})]})]}),Bi&&typeof document<"u"?Wr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[200] flex items-center justify-center p-4",onClick:()=>mt(!1),children:e.jsx(Jt,{storageKey:"ndn:modal:offline-camera-manager",className:"relative",defaultWidth:640,defaultHeight:520,minWidth:480,minHeight:420,maxWidth:1200,maxHeight:900,initialFitHeight:!0,onClose:()=>mt(!1),children:e.jsxs("div",{className:"space-y-3",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Camera Devices"}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Manage Offline Camera Feeds"})]}),e.jsx("button",{className:"btn bg-slate-800 hover:bg-slate-700 text-white",onClick:()=>mt(!1),children:"Close"})]}),e.jsx(Tl,{fill:!0,user:n,playerScore:O,aiScore:K,x01Score:k,inMatch:Os,showWinPopup:ta,pendingLegWinner:rs,playerDartsThrown:hs,aiDartsThrown:ps,totalPlayerDarts:Kt,totalAiDarts:Wt,totalPlayerPoints:xn,totalAiPoints:hn,player180s:rr,player140s:Mi,player100s:Li,ai180s:ir,ai140s:Ti,ai100s:Ri,playerHighestCheckout:Ei,aiHighestCheckout:Ii,onClose:()=>mt(!1),onOpen:()=>mt(!0),layout:i})]})})}),document.body):null,ws&&typeof document<"u"?Wr.createPortal((()=>{const{target:t,value:s,stage:r}=ws,l=t==="player"?ke:Fe,c=t==="player"?V:W;return e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[240] flex items-center justify-center p-4",onClick:Yt,children:e.jsx(Jt,{storageKey:"ndn:modal:offline-leg-override",className:"relative",defaultWidth:360,defaultHeight:240,minWidth:280,minHeight:200,maxWidth:420,maxHeight:360,initialFitHeight:!0,onClose:Yt,children:e.jsxs("div",{className:"space-y-3 max-w-[18rem] mx-auto",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/50",children:["Step ",r," of 2"]}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Override legs?"})]}),e.jsx("div",{className:"text-sm text-slate-200 leading-relaxed",children:r===1?e.jsxs(e.Fragment,{children:["Set ",l,"'s legs to"," ",e.jsx("span",{className:"font-semibold text-white",children:s}),"? Confirm to continue."]}):e.jsxs(e.Fragment,{children:["Final confirmation: set ",l,"'s legs to"," ",e.jsx("span",{className:"font-semibold text-white",children:s}),". Select"," ",e.jsx("span",{className:"font-semibold text-emerald-200",children:"Yes"})," ","to apply immediately."]})}),e.jsxs("div",{className:"rounded-xl bg-black/40 border border-white/10 p-3 text-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Current legs"}),e.jsx("div",{className:"text-base font-semibold text-white",children:c})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 text-white",onClick:Yt,children:"No"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 text-white",onClick:tl,children:"Yes"})]})]})})})})(),document.body):null,ta&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-[99999]",children:e.jsxs(Jt,{storageKey:"ndn:modal:offline-win",className:"w-full relative",defaultWidth:420,defaultHeight:360,minWidth:360,minHeight:300,maxWidth:800,maxHeight:700,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Leg Won!"}),e.jsxs("div",{className:"mb-2 text-sm text-slate-200",children:["Average:"," ",e.jsx("span",{className:"font-mono",children:Hn(q.players?.[q.currentPlayerIdx]?.currentThreeDartAvg??0)})]}),e.jsx("label",{className:"block mb-1",children:"Darts to hit double:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${ra===t?"bg-brand-600":""}`,onClick:()=>mi(t),children:t},t))}),e.jsx("label",{className:"block mb-1",children:"Darts for checkout:"}),e.jsx("div",{className:"flex gap-2 mb-2",children:[1,2,3].map(t=>e.jsx("button",{className:`btn ${ia===t?"bg-brand-600":""}`,onClick:()=>ui(t),children:t},t))}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[e.jsx("button",{className:"btn w-full",onClick:xl,children:"Submit"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 w-full",onClick:()=>{le(!1),pt()},children:"Rematch"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 w-full",onClick:()=>{le(!1),et(!1),Je(!1)},children:"Back to Menu"})]})]})}),Pi&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60]",children:e.jsxs(Jt,{storageKey:"ndn:modal:offline-summary",className:"w-full relative",defaultWidth:820,defaultHeight:520,minWidth:600,minHeight:400,maxWidth:1400,maxHeight:1e3,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-xl font-extrabold mb-2",children:"Match Summary"}),e.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[u," Â· ",k," start Â· First to ",Nt]}),(()=>{const t=Kt>0?xn/Kt*3:0,s=t*3,r=(()=>{const h=ge.filter(j=>j.winner==="player"&&typeof j.winnerDarts=="number").map(j=>j.winnerDarts);return h.length?`${Math.min(...h)} darts`:"â€”"})(),l=(()=>{const h=ge.filter(j=>j.winner==="player"&&typeof j.winnerDarts=="number").map(j=>j.winnerDarts);return h.length?`${Math.max(...h)} darts`:"â€”"})(),c=Ut>0?Math.round(mn/Ut*100):0,g=Wt>0?hn/Wt*3:0,b=g*3,N=(()=>{const h=ge.filter(j=>j.winner==="ai"&&typeof j.winnerDarts=="number").map(j=>j.winnerDarts);return h.length?`${Math.min(...h)} darts`:"â€”"})(),f=(()=>{const h=ge.filter(j=>j.winner==="ai"&&typeof j.winnerDarts=="number").map(j=>j.winnerDarts);return h.length?`${Math.max(...h)} darts`:"â€”"})(),v=_t>0?Math.round(un/_t*100):0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:n?.username||"You"}),e.jsx("div",{className:"text-3xl font-extrabold",children:V}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:t.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:s.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:Ut})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[c,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:l})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:rr})]})]})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-black",children:[V," â€“ ",W]})}),e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:A==="None"?"Opponent":`${A} AI`}),e.jsx("div",{className:"text-3xl font-extrabold",children:W}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:g.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 9DA"}),e.jsx("div",{className:"font-semibold",children:b.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:_t})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[v,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:N})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:f})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:ir})]})]})]})]})})(),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Legs Timeline"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ge.map((t,s)=>e.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs ${t.winner==="player"?"bg-emerald-500/15 border-emerald-400/30":"bg-fuchsia-500/15 border-fuchsia-400/30"}`,children:["Leg ",s+1,":"," ",t.winner==="player"?"You":A==="None"?"Opp":"AI"," ","Â· Dbl ",t.doubleDarts," Â· CO ",t.checkoutDarts]},s))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Shot Heat Map"}),e.jsx("div",{className:"rounded-2xl overflow-hidden bg-black p-3",children:e.jsx(El,{})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>gn(!1),children:"Close"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{gn(!1),pt()},children:"Rematch"})]})]})}),ge.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Leg Stats"}),e.jsx("ul",{children:ge.map((t,s)=>e.jsxs("li",{children:["Leg ",s+1,": Double darts: ",t.doubleDarts,", Checkout darts:"," ",t.checkoutDarts]},s))})]})]})]})}export{Io as default};
//# sourceMappingURL=OfflinePlay-BezMTlr5.js.map
