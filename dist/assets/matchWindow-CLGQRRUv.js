import{j as e,k as Pe,u as _,l as K,a0 as He,o as pe,m as Ce,M as Ge,a1 as Ye,G as ze,C as Fe,P as Qe,n as De,p as Ke,a2 as Xe}from"./index-B57aKmL2.js";import{r}from"./ui-Cl5S-Tv0.js";import{A as X,a as qe,P as Ue}from"./aroundTheClock-DY6sitx7.js";const Je=[...X].reverse();function Te(c){return c===25?"Outer Bull":c===50?"Inner Bull":String(c)}function Me({direction:c,onPickDirection:A,currentTargetIndex:H,isUsersTurn:d,onTurnComplete:G,onDartHit:C,completed:M,playerName:N}){const D=c==="bull-to-1"?Je:X,T=D.length,R=H>=T,[O,y]=r.useState([null,null,null]),v=O.filter(a=>a!==null).length,l=O.filter(a=>a==="hit").length,[P,q]=r.useState([]),k=H,U=D[k]??null,E=r.useCallback(()=>{y([null,null,null]),q([])},[]),J=r.useCallback(a=>{if(v>=3||R)return;const n=[...O];n[v]=a,y(n);let Y=0;if(a==="hit"&&(Y=D[k]??0,q(b=>[...b,Y]),C()),v+1>=3){const b=n.filter(I=>I==="hit").length,h=a==="hit"?[...P,Y].reduce((I,ee)=>I+ee,0):P.reduce((I,ee)=>I+ee,0);setTimeout(()=>{G(b,h),E()},350)}},[O,v,R,D,k,P,C,G,E]);if(!c)return e.jsxs("div",{className:"relative w-full rounded-2xl border-2 border-dashed border-indigo-400/40 bg-indigo-500/5 p-6 sm:p-8 text-center",children:[e.jsx("div",{className:"text-indigo-300/70 text-xs sm:text-sm uppercase tracking-widest font-semibold mb-4",children:"Choose Direction"}),e.jsx("p",{className:"text-white/70 text-sm mb-6",children:"The first thrower picks the order for both players."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs("button",{type:"button",className:"px-6 py-4 rounded-2xl border border-emerald-400/40 bg-emerald-500/10 hover:bg-emerald-500/20 active:scale-95 transition-all text-center",onClick:()=>A("1-to-bull"),children:[e.jsx("div",{className:"font-bold text-emerald-200 text-lg",children:"1 â†’ Bull"}),e.jsx("div",{className:"text-emerald-300/60 text-xs mt-1",children:"Start at 1, finish on Bullseye"})]}),e.jsxs("button",{type:"button",className:"px-6 py-4 rounded-2xl border border-amber-400/40 bg-amber-500/10 hover:bg-amber-500/20 active:scale-95 transition-all text-center",onClick:()=>A("bull-to-1"),children:[e.jsx("div",{className:"font-bold text-amber-200 text-lg",children:"Bull â†’ 1"}),e.jsx("div",{className:"text-amber-300/60 text-xs mt-1",children:"Start at Bullseye, finish on 1"})]})]})]});if(R&&v===0)return e.jsxs("div",{className:"relative w-full rounded-2xl border border-emerald-400/30 bg-emerald-500/10 p-6 sm:p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸŽ¯"}),e.jsx("div",{className:"font-bold text-emerald-200 text-xl",children:"Around the Clock Complete!"}),e.jsxs("div",{className:"text-emerald-300/60 text-sm mt-2",children:["All ",T," targets hit"]})]});const V=T>0?Math.round(M/T*100):0,Z=D.slice(k+1,k+6),m=v>=3;return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"relative rounded-2xl border border-white/10 bg-slate-950/70 p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs uppercase tracking-wider text-slate-400 font-semibold",children:"Progress"}),e.jsxs("span",{className:"text-xs text-slate-400 tabular-nums font-medium",children:[M," / ",T," (",V,"%)"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-white/10 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-500 to-emerald-400 transition-all duration-300",style:{width:`${V}%`}})}),e.jsxs("div",{className:"mt-2 text-[10px] text-slate-500",children:["Direction:"," ",c==="1-to-bull"?"1 â†’ 20 â†’ Bull":"Bull â†’ 20 â†’ 1"]})]}),d&&e.jsx("div",{className:"flex items-center justify-center gap-3",children:O.map((a,n)=>e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"text-[9px] uppercase tracking-wider text-slate-500 font-semibold",children:["Dart ",n+1]}),e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold border-2 transition-all ${a==="hit"?"bg-emerald-500/20 border-emerald-400/60 text-emerald-300":a==="miss"?"bg-rose-500/20 border-rose-400/60 text-rose-300":n===v?"bg-white/10 border-white/30 text-white/60 animate-pulse":"bg-white/5 border-white/10 text-white/20"}`,children:a==="hit"?"âœ“":a==="miss"?"âœ—":"â€¢"})]},n))}),e.jsxs("div",{className:`relative w-full rounded-2xl border-2 p-6 sm:p-8 text-center transition-all ${d&&!m?"border-emerald-400/40 bg-emerald-500/5":d&&m?"border-amber-400/40 bg-amber-500/5":"border-white/10 bg-white/5 opacity-60"}`,children:[N&&e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 mb-1",children:d?"Your target":`${N}'s target`}),e.jsx("div",{className:"text-emerald-300/60 text-xs sm:text-sm uppercase tracking-widest font-semibold mb-2",children:m?"Turn Complete":`Current Target â€” Dart ${v+1} of 3`}),e.jsx("div",{className:"font-mono text-6xl sm:text-7xl font-black text-white leading-none mb-4",children:R?"âœ“":U!=null?Te(U):"â€”"}),d&&!m&&!R&&e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{type:"button",className:"flex-1 max-w-[10rem] py-4 rounded-2xl text-lg font-bold bg-emerald-600 hover:bg-emerald-500 active:bg-emerald-400 border border-emerald-400/30 text-white shadow-lg shadow-emerald-600/30 transition-all active:scale-95",onClick:()=>J("hit"),children:"âœ“ Hit"}),e.jsx("button",{type:"button",className:"flex-1 max-w-[10rem] py-4 rounded-2xl text-lg font-bold bg-rose-600/80 hover:bg-rose-500 active:bg-rose-400 border border-rose-400/30 text-white shadow-lg shadow-rose-600/20 transition-all active:scale-95",onClick:()=>J("miss"),children:"âœ— Miss"})]}),d&&m&&e.jsx("div",{className:"text-sm text-amber-200/70 mt-2 animate-pulse",children:"Submitting turnâ€¦"}),!d&&e.jsx("div",{className:"text-sm text-white/40 mt-2",children:"Waiting for opponentâ€¦"})]}),d&&v>0&&e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-emerald-300 font-semibold",children:["Hits: ",l]}),e.jsxs("span",{className:"text-rose-300 font-semibold",children:["Misses: ",v-l]})]}),Z.length>0&&e.jsxs("div",{className:"flex items-center gap-2 px-1",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold whitespace-nowrap",children:"Next:"}),e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:Z.map((a,n)=>e.jsx("span",{className:"px-2.5 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/60 font-medium tabular-nums",children:Te(a)},n))})]})]})}function lt({user:c,showStartShowcase:A,onShowStartShowcaseChange:H,onCommitVisit:d,onQuit:G,onPause:C,onResume:M,onPauseDurationSelected:N,onStateChange:D,localPlayerIndexOverride:T,gameModeOverride:R,isOnline:O,remoteStream:y,remoteFrame:v}){const l=Pe();_(t=>t.hideInGameSidebar??!0),K(t=>t.setPaused),K(),He();const[P,q]=r.useState(null),k=v??null,U=r.useRef(null);r.useEffect(()=>{const t=U.current;if(!(!t||!y))return t.srcObject=y,t.play().catch(()=>{}),()=>{t.srcObject=null}},[y]);const E=_(t=>t.lastOffline?.x01Start||501),J=_(t=>t.user),V=pe(c,"")||pe(J,"")||c?.email?.split("@")[0]||J?.email?.split("@")[0]||"You",Z=typeof T=="number"&&T>=0?T:(l.players||[]).findIndex(t=>t?.name&&t.name===V),m=Z>=0?Z:0,a=(l.currentPlayerIdx??0)===m,n=l.players?.[m],Y=n?.legs?.[n.legs.length-1],L=Y?.totalScoreRemaining??l.startingScore??E,b=(l.players||[]).findIndex((t,s)=>s!==m),h=(l.players||[])[b>=0?b:0],I=h?.legs?.[h.legs.length-1],ee=I?.totalScoreRemaining??l.startingScore??E,re=r.useMemo(()=>{const t=s=>{if(!s)return{lastVisit:0,avg3:0};let f=0,i=0;for(const x of s.legs||[])f+=(x.totalScoreStart??0)-(x.totalScoreRemaining??0),i+=(x.visits||[]).reduce((u,w)=>u+(w.darts||0)-(w.preOpenDarts||0),0);const o=(s.legs?.[s.legs.length-1]?.visits||[]).slice(-1)[0];return{lastVisit:o?.score??o?.visitTotal??0,avg3:i>0?f/i*3:0}};return{local:t(n),away:t(h)}},[n,h,Y?.visits?.length,I?.visits?.length]),te=a?L:ee,S=R||l?.game||"X01",p=S==="X01",me=qe(S,l),se=S==="Around the Clock",[z,Ee]=r.useState(null),[ne,Ie]=r.useState({});z==="bull-to-1"?[...X].reverse():X;const ge=ne[m]??0,fe=ne[b>=0?b:1]??0,ie=r.useMemo(()=>{const t=(s,f)=>{const i=me[f];if(p){const o=s?.legs?.[s.legs.length-1];return{primary:String(o?.totalScoreRemaining??l.startingScore??E),primaryLabel:"Remaining"}}if(S==="Around the Clock"){const o=f===0?m:b>=0?b:1,x=ne[o]??0,u=z==="bull-to-1"?[...X].reverse():X,w=u[x],ae=x>=u.length?"Done!":w===25?"Outer Bull":w===50?"Inner Bull":String(w);return{primary:x>=u.length?"âœ“":ae,primaryLabel:x>=u.length?"Complete":`Target ${x+1}/${u.length}`}}if(S==="Cricket"||S==="American Cricket")return{primary:String(i?.points??0),primaryLabel:"Points"};if(S==="Killer"){const o=i?.lives??0;return{primary:i?.eliminated?"OUT":String(o),primaryLabel:i?.eliminated?"Eliminated":"Lives"}}return{primary:String(i?.score??i?.points??0),primaryLabel:"Score"}};return{local:t(n,m),away:t(h,b>=0?b:0)}},[p,S,me,n,h,m,b,l.startingScore,E,ne,z]),$e=_(t=>t.callerEnabled),Ae=_(t=>t.callerVoice),Re=_(t=>t.callerVolume),Oe=_(t=>t.speakCheckoutOnly),[we,oe]=r.useState(!1),ce=K(t=>t.setPaused),xe=K(t=>t.paused),ue=K(t=>t.pauseEndsAt);K(t=>t.pauseInitiator);const[Ze,Ve]=r.useState(Date.now());r.useEffect(()=>(document.documentElement.setAttribute("data-ndn-ingame","true"),()=>{document.documentElement.removeAttribute("data-ndn-ingame")}),[]),r.useEffect(()=>{if(!xe||!ue)return;const t=setInterval(()=>{const s=Date.now();Ve(s),s>=ue&&ce(!1,null)},250);return()=>clearInterval(t)},[xe,ue,ce]);const Le=r.useMemo(()=>{if(!p||L>170||L<=0)return null;const t=Ce(L);return t&&t.length>0?t:null},[p,L]),ve=r.useMemo(()=>{if(!p||te>170||te<=0)return null;const t=Ce(te);return t&&t.length>0?t:null},[p,te]),$=p?180:999,be=r.useMemo(()=>(l.players||[]).map(s=>({name:s.name||"Player",legsWon:s.legsWon||0})),[l.players]),Be=r.useMemo(()=>(l.players||[]).some(t=>(t.legs||[]).some(s=>(s.visits||[]).length>0)),[l.players]),je=typeof A=="boolean"?A&&!Be:!1,Ne=t=>{H?.(t)},[de,B]=r.useState(!1),[g,j]=r.useState(""),F=r.useRef(null);r.useEffect(()=>{de&&F.current&&F.current.focus()},[de]);const[he,ye]=r.useState(null),[et,ke]=r.useState(0);r.useEffect(()=>{a?(ye(null),ke(0)):ye(Date.now())},[a]),r.useEffect(()=>{if(!he)return;const t=setInterval(()=>{ke(Math.floor((Date.now()-he)/1e3))},1e3);return()=>clearInterval(t)},[he]);const W=(t,s,f)=>{const i=l.players?.[l.currentPlayerIdx],o=i?.legs?.[i.legs.length-1],x=o?o.totalScoreRemaining:l.startingScore,u=typeof t=="number"?t:0;let w=x-u;(!Number.isFinite(w)||w<0)&&(w=0);const ae=w===0&&u>0,Q={visitTotal:u,...f||{}};if(Q.doubleWindowDarts==null){let le=0;x<=50?le=s:x<=170&&(le=ae||w<=50?1:0),Q.doubleWindowDarts=le}if(Q.finishedByDouble==null&&(Q.finishedByDouble=ae),d){d(u,s,Q);return}if($e){const le=i?.name||pe(c,"Player");try{Ke(le,u,w,Ae,{volume:Re,checkoutOnly:Oe})}catch{}}l.addVisit(u,s,Q),ae?l.endLeg(u):l.nextPlayer(),D?.()},We=r.useCallback(()=>{const t=l.currentPlayerIdx??m;Ie(s=>({...s,[t]:(s[t]??0)+1}))},[l.currentPlayerIdx,m]),_e=r.useCallback((t,s)=>{W(s,3,{visitTotal:s,atcHit:t>0,atcHits:t})},[]),Se=r.useCallback(()=>{try{const t=[];if((l.players||[]).forEach(i=>{(i.legs||[]).forEach(o=>{if(o?.finished){const x=(o.visits||[]).slice(-1)[0];t.push({ts:o.endTime||Date.now(),visit:x,player:i})}})}),!t.length)return null;const s=t.sort((i,o)=>o.ts-i.ts)[0],f=(s.visit?.entries||[]).slice(-1)[0];if(f?.label)return f.label;if(f?.ring==="DOUBLE"&&typeof f?.value=="number")return`Double ${f.value/2}`;if(typeof s.visit?.visitTotal=="number")return`Checkout ${s.visit.visitTotal}`}catch{}return null},[l.players]);return r.useEffect(()=>{if(l.inProgress){q(null);return}if(!P?.label){const t=Se();t&&q(s=>({...s,label:t}))}},[l.inProgress,Se,P?.label]),e.jsxs("div",{className:"ndn-game-shell ndn-page ndn-ingame-active relative",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-32 -left-32 w-96 h-96 rounded-full bg-indigo-600/10 blur-[120px]"}),e.jsx("div",{className:"absolute -bottom-32 -right-32 w-96 h-96 rounded-full bg-amber-500/8 blur-[120px]"})]}),je&&e.jsx(Ge,{open:je,players:l.players||[],onDone:()=>{Ne(!1)},onRequestClose:()=>{Ne(!1)},showCalibrationDefault:!0}),e.jsx("div",{className:"z-20 mb-1 shrink-0",children:e.jsxs("div",{className:"relative flex items-center justify-between gap-2 px-3 sm:px-5 py-1.5 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-2xl bg-gradient-to-r from-indigo-500/10 via-transparent to-amber-500/10"}),e.jsxs("div",{className:"flex items-center gap-3 text-sm leading-none z-10",children:[O&&e.jsx("span",{className:"px-2.5 py-1 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-[10px] sm:text-xs font-semibold tracking-wide",children:"ðŸŒ Online"}),e.jsxs("span",{className:"px-3 py-1 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-xs font-semibold tracking-wide",children:[S,p?` / ${l.startingScore||E}`:""]}),be.length>=2&&e.jsxs("span",{className:"font-bold text-white/90 text-sm tabular-nums",children:["Legs: ",be[0].legsWon," â€“ ",be[1].legsWon]})]}),e.jsxs("div",{className:"flex items-center gap-2 z-10",children:[e.jsx(Ye,{}),e.jsx("button",{className:"px-4 py-1.5 rounded-xl text-sm font-semibold bg-rose-600/90 hover:bg-rose-500 text-white border border-rose-400/30 shadow-lg shadow-rose-500/20 transition-all",onClick:()=>oe(!0),children:"â¸ Quit / Pause"})]})]})}),e.jsxs("div",{className:"relative mb-1 rounded-2xl border border-white/10 overflow-hidden shrink-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-950/80 via-slate-900/90 to-amber-950/80"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,rgba(255,255,255,0.03),transparent_70%)]"}),e.jsxs("div",{className:"relative grid grid-cols-[minmax(0,1fr)_auto_minmax(0,1fr)] items-center py-1.5 px-3 sm:px-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("div",{className:`text-xs font-bold uppercase tracking-widest ${a?"text-emerald-400":"text-slate-400"}`,children:n?.name||"You"}),p&&e.jsxs("span",{className:"text-[10px] font-semibold text-slate-400 tabular-nums",children:["(",n?.legsWon||0,")"]}),a&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"})]}),e.jsx("div",{className:`font-mono text-3xl sm:text-4xl font-black tabular-nums leading-none ${a?"text-white":"text-white/60"}`,children:ie.local.primary}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5 text-[10px]",children:[e.jsx("span",{className:"uppercase tracking-wider text-slate-500 font-medium",children:ie.local.primaryLabel}),re.local.avg3>0&&e.jsxs("span",{className:"text-slate-400 tabular-nums",children:["Avg: ",re.local.avg3.toFixed(1)]})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-3",children:[e.jsx("div",{className:"w-px h-3 bg-gradient-to-b from-transparent via-white/20 to-transparent"}),e.jsx("div",{className:"text-xs font-black text-white/30 tracking-widest my-0.5",children:"VS"}),e.jsx("div",{className:"w-px h-3 bg-gradient-to-b from-transparent via-white/20 to-transparent"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("div",{className:`text-xs font-bold uppercase tracking-widest ${a?"text-slate-400":"text-amber-400"}`,children:h?.name||"Opponent"}),p&&e.jsxs("span",{className:"text-[10px] font-semibold text-slate-400 tabular-nums",children:["(",h?.legsWon||0,")"]}),!a&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"})]}),e.jsx("div",{className:`font-mono text-3xl sm:text-4xl font-black tabular-nums leading-none ${a?"text-white/60":"text-white"}`,children:ie.away.primary}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5 text-[10px]",children:[e.jsx("span",{className:"uppercase tracking-wider text-slate-500 font-medium",children:ie.away.primaryLabel}),re.away.avg3>0&&e.jsxs("span",{className:"text-slate-400 tabular-nums",children:["Avg: ",re.away.avg3.toFixed(1)]})]})]})]}),ve&&e.jsxs("div",{className:`relative border-t px-3 py-1 flex items-center gap-2 ${a?"border-emerald-400/20 bg-emerald-500/10":"border-amber-400/20 bg-amber-500/10"}`,children:[e.jsxs("span",{className:`text-[10px] sm:text-xs uppercase tracking-wider font-semibold whitespace-nowrap ${a?"text-emerald-300/80":"text-amber-300/80"}`,children:["Checkout ",te,":"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:ve.map((t,s)=>e.jsx("span",{className:`px-2 py-0.5 rounded-lg text-xs sm:text-sm font-medium ${a?"bg-emerald-500/20 border border-emerald-400/20 text-emerald-100":"bg-amber-500/20 border border-amber-400/20 text-amber-100"}`,children:t},s))})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto pb-28 sm:pb-20",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr] gap-2 min-h-0",children:[e.jsxs("div",{className:"relative rounded-2xl border border-white/10 bg-slate-950/70 shadow-2xl ring-1 ring-white/5 p-2 sm:p-3 overflow-hidden",children:[e.jsx("div",{className:`pointer-events-none absolute inset-0 bg-gradient-to-br ${a?"from-emerald-500/[0.03]":"from-white/[0.02]"} to-transparent`}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-white/90 tracking-wide",children:"Scoreboard"}),e.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold ${a?"bg-emerald-500/20 border border-emerald-400/30 text-emerald-300 animate-pulse":"bg-amber-500/20 border border-amber-400/30 text-amber-300"}`,children:a?"â— Your turn":`${h?.name||"Opponent"}â€™s turn`})]}),e.jsx(ze,{gameMode:S,players:me})]}),e.jsxs("div",{className:"relative rounded-2xl border border-white/10 bg-slate-950/70 shadow-2xl ring-1 ring-white/5 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-1 border-b border-white/5 bg-white/5 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full shadow-lg animate-pulse ${a?"bg-emerald-400 shadow-emerald-400/50":"bg-amber-400 shadow-amber-400/50"}`}),e.jsx("span",{className:"text-xs font-semibold text-white/80",children:a?"Your Board":`${h?.name||"Opponent"}â€™s Board`})]}),e.jsx("span",{className:`text-[10px] font-medium ${a?"text-emerald-300":"text-amber-300"}`,children:a?"â— Live":"â— Waiting"})]}),e.jsxs("div",{className:"relative flex-1 min-h-0 bg-black",children:[e.jsx("div",{className:`h-full ${a||!y&&!k?"":"hidden"}`,children:e.jsx(Fe,{hideInlinePanels:!0,forceAutoStart:!0})}),!a&&y&&e.jsx("video",{ref:U,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain"}),!a&&!y&&k&&e.jsx("img",{src:k,alt:"Opponent board",className:"w-full h-full object-contain"}),!a&&!y&&!k&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-white/30 text-xs uppercase tracking-wider mb-1",children:"Opponent's camera not available"}),e.jsx("div",{className:"text-white/20 text-[10px]",children:"Showing your board instead"})]})})]})]})]}),!a&&se&&z&&e.jsx(Me,{direction:z,onPickDirection:()=>{},currentTargetIndex:fe,isUsersTurn:!1,onTurnComplete:()=>{},onDartHit:()=>{},completed:fe,playerName:h?.name||"Opponent"}),a&&se&&e.jsx(Me,{direction:z,onPickDirection:t=>Ee(t),currentTargetIndex:ge,isUsersTurn:a,onTurnComplete:_e,onDartHit:We,completed:ge,playerName:n?.name||"You"}),a&&!se&&e.jsx("div",{className:"flex flex-wrap gap-1.5 justify-center",children:(p?[180,140,100,85,60,45,26,0]:[100,80,60,45,26,20,10,0]).map(t=>e.jsx("button",{className:"px-3 py-1.5 rounded-lg text-xs font-bold bg-white/5 hover:bg-white/10 active:bg-white/15 border border-white/10 text-white/90 transition-all active:scale-95",onClick:()=>W(t,3,{visitTotal:t}),children:t},t))}),P?.label&&e.jsxs("div",{className:"rounded-2xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 text-center",children:[e.jsx("span",{className:"text-xs text-emerald-400/70 uppercase tracking-wider font-semibold",children:p?"Winning Double":"Winning Shot"}),e.jsx("div",{className:"text-lg font-bold text-emerald-200 mt-0.5",children:P.label})]})]})}),de&&!se&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-8",onClick:()=>B(!1),onKeyDown:t=>{t.key==="Escape"&&B(!1)},children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full max-w-sm mx-auto rounded-3xl border border-white/10 bg-slate-900/95 backdrop-blur-xl shadow-2xl p-4 sm:p-6 animate-[slideUp_0.2s_ease-out]",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"mb-4 rounded-2xl bg-black/40 border border-white/10 p-4 text-center",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-widest text-slate-400 mb-1",children:"Score"}),e.jsx("input",{ref:F,type:"number",inputMode:"numeric",pattern:"[0-9]*",className:"w-full bg-transparent font-mono text-5xl sm:text-6xl font-black text-white tabular-nums min-h-[3.5rem] leading-none text-center outline-none border-none [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none placeholder:text-white/20",placeholder:"0",value:g,onChange:t=>{const s=t.target.value.replace(/[^0-9]/g,"");(s===""||Number(s)<=$)&&j(s)},onKeyDown:t=>{if(t.key==="Enter"){t.preventDefault();const s=Math.max(0,Math.min($,Number(g)||0));W(s,3,{visitTotal:s}),j(""),B(!1)}}}),g&&Le&&Number(g)===L&&e.jsx("div",{className:"mt-2 text-xs text-emerald-300 font-semibold",children:"âœ“ Checkout!"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[[1,2,3,4,5,6,7,8,9].map(t=>e.jsx("button",{className:"py-3.5 rounded-xl text-xl font-bold bg-white/5 hover:bg-white/10 active:bg-white/20 border border-white/10 text-white transition-all active:scale-95",onClick:()=>{const s=g+String(t);Number(s)<=$&&j(s),F.current?.focus()},children:t},t)),e.jsx("button",{className:"py-3.5 rounded-xl text-lg font-bold bg-white/5 hover:bg-white/10 active:bg-white/20 border border-white/10 text-white/60 transition-all active:scale-95",onClick:()=>{j(t=>t.slice(0,-1)),F.current?.focus()},children:"âŒ«"}),e.jsx("button",{className:"py-3.5 rounded-xl text-xl font-bold bg-white/5 hover:bg-white/10 active:bg-white/20 border border-white/10 text-white transition-all active:scale-95",onClick:()=>{const t=g+"0";Number(t)<=$&&j(t),F.current?.focus()},children:"0"}),e.jsx("button",{className:"py-3.5 rounded-xl text-lg font-bold bg-emerald-600 hover:bg-emerald-500 active:bg-emerald-400 border border-emerald-400/30 text-white shadow-lg shadow-emerald-600/30 transition-all active:scale-95",onClick:()=>{const t=Math.max(0,Math.min($,Number(g)||0));W(t,3,{visitTotal:t}),j(""),B(!1)},children:"âœ“"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-3",children:(p?[180,140,100,85,60,45,26,0]:[100,80,60,45,26,20,10,0]).map(t=>e.jsx("button",{className:"px-3 py-1.5 rounded-lg text-xs font-bold bg-white/5 hover:bg-white/10 border border-white/10 text-white/80 transition-all active:scale-95",onClick:()=>{W(t,3,{visitTotal:t}),j(""),B(!1)},children:t},t))}),e.jsx("button",{className:"w-full py-2.5 rounded-xl text-sm font-semibold text-white/50 hover:text-white/80 hover:bg-white/5 transition-all",onClick:()=>B(!1),children:"Cancel"})]})]}),!se&&!de&&!we&&!xe&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-30 bg-slate-900/95 backdrop-blur-xl border-t border-white/10 px-3 py-2 safe-bottom",style:{paddingBottom:"max(0.5rem, env(safe-area-inset-bottom, 0px))"},children:e.jsxs("div",{className:"flex items-center gap-2 max-w-lg mx-auto",children:[e.jsx("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",className:`flex-1 border rounded-xl px-4 py-3 font-mono text-xl font-bold text-center outline-none [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none placeholder:text-white/30 ${a?"bg-white/5 border-white/15 text-white focus:border-emerald-400/50 focus:ring-1 focus:ring-emerald-400/30":"bg-white/3 border-white/10 text-white/50"}`,placeholder:a?"Type score...":"Waiting for opponent...",value:g,disabled:!a,onChange:t=>{const s=t.target.value.replace(/[^0-9]/g,"");(s===""||Number(s)<=$)&&j(s)},onKeyDown:t=>{if(t.key==="Enter"){t.preventDefault();const s=Math.max(0,Math.min($,Number(g)||0));g!==""&&(W(s,3,{visitTotal:s}),j(""))}}}),e.jsx("button",{className:`px-5 py-3 rounded-xl text-sm font-bold text-white border transition-all active:scale-95 whitespace-nowrap ${a&&g!==""?"bg-emerald-600 hover:bg-emerald-500 active:bg-emerald-400 border-emerald-400/30 shadow-lg shadow-emerald-600/20":"bg-slate-700 border-white/10 opacity-50 cursor-not-allowed"}`,disabled:!a||g==="",onClick:()=>{const t=Math.max(0,Math.min($,Number(g)||0));W(t,3,{visitTotal:t}),j("")},children:"Submit"}),a&&e.jsx("button",{className:"px-3 py-3 rounded-xl text-sm font-semibold bg-white/5 hover:bg-white/10 text-white/70 border border-white/10 transition-all",onClick:()=>{j(""),B(!0)},children:"âŒ¨"})]})}),we&&e.jsx(Qe,{onClose:()=>oe(!1),onQuit:()=>{if(oe(!1),G)G();else{try{l.endGame()}catch{}try{window.dispatchEvent(new Event("ndn:match-quit"))}catch{}}},onPause:()=>{try{ce(!0,null,V)}catch{}try{De({type:"pause",pauseStartedAt:Date.now(),pauseInitiator:V})}catch{}C&&C(),oe(!1)}}),e.jsx(Ue,{localPlayerName:V,onResume:()=>{ce(!1,null);try{De({type:"unpause"})}catch{}M&&M()},onDurationSelected:(t,s)=>{N&&N(t,s)}})]})}function rt({players:c,startingScore:A=501,roomId:H="demo-room",visits:d,openWindow:G=!0}){if(!(!c||c.length===0))try{const C=Pe.getState();C.newMatch(c,A,H,"demo");const M=d&&d.length>0?d:[{score:60},{score:85},{score:100}];M.forEach((N,D)=>{C.addVisit(N.score,N.darts??3,{visitTotal:N.visitTotal??N.score}),D<M.length-1&&C.nextPlayer()}),Xe()}catch{return}}function nt(){}export{lt as I,rt as l,nt as o};
//# sourceMappingURL=matchWindow-CLGQRRUv.js.map
