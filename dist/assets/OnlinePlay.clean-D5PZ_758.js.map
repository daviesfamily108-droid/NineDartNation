{"version":3,"file":"OnlinePlay.clean-D5PZ_758.js","sources":["../../src/components/ui/CreateMatchModal.tsx","../../src/components/OnlinePlay.clean.tsx"],"sourcesContent":["import React, { useLayoutEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport {\n  allGames,\n  type GameKey,\n  getStartOptionsForGame,\n} from \"../../utils/games\";\nimport { useUserSettings } from \"../../store/userSettings\";\n\ntype Props = {\n  open: boolean;\n  onClose: () => void;\n  onCreate: (payload: any) => void;\n};\n\nexport default function CreateMatchModal({ open, onClose, onCreate }: Props) {\n  const [portalEl] = useState(() => document.createElement(\"div\"));\n  const [game, setGame] = useState<GameKey>(\"X01\");\n  const [modeType, setModeType] = useState<\"bestof\" | \"firstto\">(\"bestof\");\n  const [legs, setLegs] = useState<number>(3);\n  const [avgChoice, setAvgChoice] = useState<number>(0);\n  const [startingScore, setStartingScore] = useState<number | undefined>(() => {\n    const opts = getStartOptionsForGame(game);\n    return opts?.[0];\n  });\n  const user = (useUserSettings() as any).username || \"Anonymous\";\n\n  useLayoutEffect(() => {\n    portalEl.className = \"ndn-create-match-portal\";\n    document.body.appendChild(portalEl);\n    return () => {\n      try {\n        portalEl && portalEl.remove();\n      } catch {}\n    };\n  }, [portalEl]);\n\n  // Close modal on Escape key\n  useLayoutEffect(() => {\n    function onKey(e: KeyboardEvent) {\n      if (e.key === \"Escape\") onClose();\n    }\n    if (open) document.addEventListener(\"keydown\", onKey);\n    return () => document.removeEventListener(\"keydown\", onKey);\n  }, [open, onClose]);\n\n  const handleCreate = () => {\n    const payload = {\n      createdBy: user,\n      game,\n      modeType,\n      legs,\n      avgChoice,\n      startingScore,\n    };\n    onCreate(payload);\n    onClose();\n  };\n\n  if (!open) return null;\n\n  if (!portalEl) return null;\n\n  return createPortal(\n    <div className=\"fixed inset-0 z-60 flex items-center justify-center bg-black/60 p-4\">\n      {/* A dedicated, accessible button covers the backdrop to capture clicks and keyboard input */}\n      <button\n        aria-label=\"Close dialog\"\n        className=\"absolute inset-0 w-full h-full bg-transparent\"\n        onClick={onClose}\n      />\n      <div\n        className=\"bg-white rounded-xl p-6 max-w-lg w-full relative\"\n        role=\"dialog\"\n      >\n        <button\n          aria-label=\"Close\"\n          className=\"absolute top-3 right-3 text-red-600 font-bold\"\n          onClick={onClose}\n        >\n          ✕\n        </button>\n        <h2 className=\"text-lg font-semibold mb-3\">Create Match</h2>\n        <div className=\"grid grid-cols-1 gap-3\">\n          <div>\n            <div className=\"text-sm opacity-80\">Created By</div>\n            <div className=\"mt-1 p-2 bg-gray-100 rounded\">{user}</div>\n          </div>\n          <div>\n            <label className=\"text-sm opacity-80\" htmlFor=\"match-game\">\n              Match Name (Game)\n            </label>\n            <select\n              id=\"match-game\"\n              className=\"w-full p-2 border rounded\"\n              value={game}\n              onChange={(e) => {\n                const v = e.target.value as GameKey;\n                setGame(v);\n                const opts = getStartOptionsForGame(v);\n                setStartingScore(opts?.[0]);\n              }}\n            >\n              {allGames.map((g) => (\n                <option key={g} value={g}>\n                  {g}\n                </option>\n              ))}\n            </select>\n          </div>\n          {getStartOptionsForGame(game)?.length ? (\n            <div>\n              <label\n                className=\"text-sm opacity-80\"\n                htmlFor=\"match-start\"\n              >{`${game} Starting Score`}</label>\n              <select\n                id=\"match-start\"\n                className=\"w-full p-2 border rounded\"\n                value={startingScore}\n                onChange={(e) => setStartingScore(Number(e.target.value))}\n              >\n                {getStartOptionsForGame(game).map((opt) => (\n                  <option key={opt} value={opt}>\n                    {opt}\n                  </option>\n                ))}\n              </select>\n            </div>\n          ) : null}\n          <div>\n            <div className=\"text-sm opacity-80\">Mode</div>\n            <div className=\"flex gap-2 mt-1\">\n              <label\n                className={`btn ${modeType === \"bestof\" ? \"btn-primary\" : \"btn-ghost\"}`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"mode\"\n                  value=\"bestof\"\n                  checked={modeType === \"bestof\"}\n                  onChange={() => setModeType(\"bestof\")}\n                  className=\"sr-only\"\n                />{\" \"}\n                Best Of\n              </label>\n              <label\n                className={`btn ${modeType === \"firstto\" ? \"btn-primary\" : \"btn-ghost\"}`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"mode\"\n                  value=\"firstto\"\n                  checked={modeType === \"firstto\"}\n                  onChange={() => setModeType(\"firstto\")}\n                  className=\"sr-only\"\n                />{\" \"}\n                First To\n              </label>\n            </div>\n          </div>\n          <div>\n            <label className=\"text-sm opacity-80\" htmlFor=\"match-legs\">\n              Legs\n            </label>\n            <input\n              id=\"match-legs\"\n              type=\"number\"\n              min={1}\n              value={legs}\n              onChange={(e) =>\n                setLegs(Math.max(1, Number(e.target.value || 1)))\n              }\n              className=\"w-full p-2 border rounded\"\n            />\n          </div>\n          <div>\n            <label className=\"text-sm opacity-80\" htmlFor=\"match-avg\">\n              Average Choice (±)\n            </label>\n            <input\n              id=\"match-avg\"\n              type=\"number\"\n              value={avgChoice}\n              onChange={(e) => setAvgChoice(Number(e.target.value || 0))}\n              className=\"w-full p-2 border rounded\"\n            />\n          </div>\n        </div>\n        <div className=\"flex justify-end mt-4\">\n          <button className=\"btn btn-primary\" onClick={handleCreate}>\n            Create Match\n          </button>\n        </div>\n      </div>\n    </div>,\n    portalEl,\n  );\n}\n","import React, { useState, useMemo, useEffect } from \"react\";\nimport CreateMatchModal from \"./ui/CreateMatchModal\";\nimport GameCalibrationStatus from \"./GameCalibrationStatus\";\n\nexport default function OnlinePlayClean({ user }: { user?: any }) {\n  const username = user?.username || \"You\";\n  const [currentRoomIdx, setCurrentRoomIdx] = useState(0);\n  const [rooms, setRooms] = useState(() => [{ id: 1, name: \"room-1\", matches: [] as any[] }]);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [joinMatch, setJoinMatch] = useState<any | null>(null);\n  const [joinTimer, setJoinTimer] = useState(30);\n  const [joinChoice, setJoinChoice] = useState<null | \"bull\" | \"skip\">(null);\n  const [opponentChoice, setOpponentChoice] = useState<null | \"bull\" | \"skip\">(null);\n\n  const currentRoom = rooms[currentRoomIdx];\n  const maxMatchesPerRoom = 8;\n  const worldLobby = useMemo(() => rooms.flatMap((r) => r.matches.map((m) => ({ ...m, roomName: r.name }))), [rooms]);\n\n  const handleCreateMatch = (payload: any) => {\n    const newMatch = {\n      id: `m-${Date.now()}`,\n      createdBy: payload.createdBy || username,\n      game: payload.game,\n      modeType: payload.modeType,\n      legs: payload.legs,\n      startingScore: payload.startingScore,\n      createdAt: Date.now(),\n    };\n    setRooms((prev) => prev.map((r, idx) => (idx === currentRoomIdx ? { ...r, matches: [newMatch, ...r.matches] } : r)));\n  };\n\n  const newRoom = () => {\n    setRooms((prev) => {\n      const id = prev.length + 1;\n      const newRooms = [...prev, { id, name: `room-${id}`, matches: [] }];\n      setCurrentRoomIdx(newRooms.length - 1);\n      return newRooms;\n    });\n  };\n\n  // Join timer\n  useEffect(() => {\n    if (!joinMatch) return;\n    setJoinTimer(30);\n    setJoinChoice(null);\n    setOpponentChoice(null);\n    const t = setInterval(() => setJoinTimer((v) => Math.max(0, v - 1)), 1000);\n    return () => clearInterval(t);\n  }, [joinMatch]);\n\n  const handleJoinAccept = () => {\n    // For now, just close modal; in real app we'd start the match\n    setJoinMatch(null);\n  };\n\n  return (\n    <div className=\"flex-1 min-h-0\" style={{ position: \"relative\", marginTop: 0 }}>\n      <div className=\"card ndn-game-shell relative overflow-hidden h-full flex flex-col\">\n        <h2 className=\"text-3xl font-bold text-brand-700 mb-4\">Online Play</h2>\n        <div className=\"ndn-shell-body flex-1 overflow-hidden p-3\">\n          <div className=\"rounded-2xl bg-white/5 border border-white/10 p-4 h-full min-h-[320px] overflow-auto\">\n            {/* Top row: Room, New Room, Create Match */}\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"text-sm opacity-80\">Room</div>\n                <div className=\"px-3 py-1 bg-white/5 rounded border border-white/10\">Room ({currentRoom?.id})</div>\n                <div style={{ width: 12 }} />\n                <button className=\"btn btn-ghost\" onClick={newRoom}>New Room</button>\n              </div>\n              <div className=\"ml-auto\">\n                <button className=\"btn btn-primary\" onClick={() => setShowCreateModal(true)} disabled={(currentRoom?.matches?.length || 0) >= maxMatchesPerRoom}>Create Match +</button>\n                {((currentRoom?.matches?.length || 0) >= maxMatchesPerRoom) && <div className=\"text-xs text-rose-400 mt-1\">Room full — create a new room</div>}\n              </div>\n            </div>\n\n            <p className=\"mb-2\" />\n            <h3 className=\"font-semibold underline mb-3\">Matches in this Room</h3>\n            <div className=\"space-y-3 mb-4\">\n              {(currentRoom?.matches?.length || 0) === 0 ? (\n                <div className=\"text-sm opacity-60\">No matches in this room yet.</div>\n              ) : (\n                currentRoom.matches.map((m:any) => (\n                  <div key={m.id} className=\"p-3 rounded bg-white/3 border flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-semibold text-sm\">{m.game} {m.modeType === 'bestof' ? '(Best Of)' : '(First To)'} - {m.legs} legs</div>\n                      {m.startingScore && (\n                        <div className=\"text-xs opacity-80\">Starting: <span className=\"font-mono\">{m.startingScore}</span></div>\n                      )}\n                      <div className=\"text-xs opacity-70\">Created by: {m.createdBy}</div>\n                    </div>\n                    <div className=\"ml-4\">\n                      <button className=\"btn btn-sm\" onClick={() => setJoinMatch(m)}>Join Now!</button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n            <h3 className=\"font-semibold underline mb-3\">World Lobby</h3>\n\n            <div className=\"space-y-3\">\n              {worldLobby.length === 0 ? (\n                <div className=\"text-sm opacity-60\">No matches found.</div>\n              ) : (\n                worldLobby.map((m) => (\n                  <div key={m.id} className=\"p-3 rounded bg-white/3 border flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-semibold text-sm\">{m.game} {m.modeType === 'bestof' ? '(Best Of)' : '(First To)'} - {m.legs} legs</div>\n                      {m.startingScore && (\n                        <div className=\"text-xs opacity-80\">Starting: <span className=\"font-mono\">{m.startingScore}</span></div>\n                      )}\n                      <div className=\"text-xs opacity-70\">Created by: {m.createdBy} • Room: {m.roomName}</div>\n                    </div>\n                    <div className=\"ml-4\">\n                      <button className=\"btn btn-sm\" onClick={() => setJoinMatch(m)}>Join Now!</button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Create Match modal */}\n        <CreateMatchModal open={showCreateModal} onClose={() => setShowCreateModal(false)} onCreate={(p) => { handleCreateMatch(p); setShowCreateModal(false); }} />\n\n        {/* Join Modal (simplified) */}\n        {joinMatch && (\n          <div className=\"fixed inset-0 z-60 flex items-center justify-center bg-black/60 p-4\">\n            <div className=\"bg-slate-800 rounded-2xl p-6 max-w-md w-full\">\n              <div className=\"text-lg font-bold mb-2\">Join Match</div>\n              <div className=\"mb-3\">{joinMatch.game} - {joinMatch.modeType} • {joinMatch.legs} legs</div>\n              <div className=\"text-sm opacity-80 mb-3\">Created by {joinMatch.createdBy}</div>\n              <div className=\"mb-3\"><GameCalibrationStatus gameMode={joinMatch.game} compact /></div>\n              {joinMatch.startingScore && (\n                <div className=\"mb-3\">Starting score: <span className=\"font-mono\">{joinMatch.startingScore}</span></div>\n              )}\n              <div className=\"mb-3\">Timer: <span className=\"font-mono\">{joinTimer}s</span></div>\n              {joinTimer <= 15 && (\n                <div className=\"mb-3\">Choose: <div className=\"flex gap-2\">\n                  <button className={`btn ${joinChoice === \"bull\" ? \"btn-primary\" : \"btn-ghost\"}`} onClick={() => setJoinChoice(\"bull\")}>Bull Up</button>\n                  <button className={`btn ${joinChoice === \"skip\" ? \"btn-primary\" : \"btn-ghost\"}`} onClick={() => setJoinChoice(\"skip\")}>Skip</button>\n                </div>\n                <div className=\"text-xs opacity-70 mt-2\">{joinChoice ? `You chose: ${joinChoice}` : \"Please choose Bull Up or Skip before accepting\"}</div>\n                {joinChoice === \"skip\" && (\n                  <div className=\"text-xs opacity-70 mt-2\">Skip requires both players to click Skip. Waiting for other player…</div>\n                )}\n                {joinChoice === \"skip\" && opponentChoice === \"skip\" && (\n                  <div className=\"text-sm font-semibold mt-2\">Both players skipped — Left player throws first</div>\n                )}\n                </div>\n              )}\n              <div className=\"flex items-center gap-2\">\n                <button className=\"btn btn-primary\" onClick={handleJoinAccept} disabled={joinTimer <= 15 && !joinChoice}>Accept</button>\n                <button className=\"btn btn-ghost\" onClick={() => setJoinMatch(null)}>Cancel</button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["CreateMatchModal","open","onClose","onCreate","portalEl","useState","game","setGame","modeType","setModeType","legs","setLegs","avgChoice","setAvgChoice","startingScore","setStartingScore","getStartOptionsForGame","user","useUserSettings","useLayoutEffect","onKey","e","handleCreate","createPortal","jsxs","jsx","v","opts","allGames","g","opt","OnlinePlayClean","username","currentRoomIdx","setCurrentRoomIdx","rooms","setRooms","showCreateModal","setShowCreateModal","joinMatch","setJoinMatch","joinTimer","setJoinTimer","joinChoice","setJoinChoice","opponentChoice","setOpponentChoice","currentRoom","maxMatchesPerRoom","worldLobby","useMemo","r","m","handleCreateMatch","payload","newMatch","prev","idx","newRoom","id","newRooms","useEffect","t","handleJoinAccept","p","GameCalibrationStatus"],"mappings":"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"}