{"version":3,"file":"StatsPanel-DqP61-Nn.js","sources":["../../src/components/StatsPanel.tsx"],"sourcesContent":["import { useMatch } from \"../store/match.js\";\nimport { formatAvg } from \"../utils/stats.js\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport BarChart from \"./BarChart.js\";\nimport {\n  getGameModeStats,\n  getMonthlyAvg3,\n  getMonthlyFirstNineAvg,\n  getAllTimeAvg,\n  getAllTimeFirstNineAvg,\n  getAllTime,\n  getDailyAdjustedAvg,\n  getRollingAvg,\n  getStatSeries,\n} from \"../store/profileStats.js\";\nimport { allGames } from \"../utils/games.js\";\nimport TabPills from \"./ui/TabPills.js\";\n\nexport default function StatsPanel({ user }: { user?: any }) {\n  const {\n    players,\n    inProgress,\n    startingScore: _startingScore,\n    newMatch: _newMatch,\n  } = useMatch();\n  const [family, setFamily] = useState<\"x01\" | \"other\" | \"tourney\">(\"x01\");\n  const [_playersText, _setPlayersText] = useState(\"Player 1, Player 2\");\n  const [_start, _setStart] = useState(501);\n  const [selectedGameMode, setSelectedGameMode] = useState<string>(\"\");\n  // Opponent compare: select a friend to render on the second card\n  const [friends, setFriends] = useState<\n    Array<{ email: string; username?: string }>\n  >([]);\n  const [opponent, setOpponent] = useState<string>(\"\");\n  const [showPicker, setShowPicker] = useState<boolean>(false);\n  const [q, setQ] = useState<string>(\"\");\n  const [results, setResults] = useState<\n    Array<{ email: string; username?: string }>\n  >([]);\n  const [searching, setSearching] = useState<boolean>(false);\n  const searchTimerRef = useRef<number | null>(null);\n  const me = useMemo(() => {\n    try {\n      const cur = localStorage.getItem(\"ndn:currentUser\");\n      if (cur) return String(cur).trim();\n    } catch {}\n    return String(user?.email || \"\").toLowerCase();\n  }, [user?.email]);\n  const timeframeOptions = [\"Daily\", \"Monthly\", \"All-Time\"] as const;\n  type TimeframeOption = (typeof timeframeOptions)[number];\n  const [selectedTimeframe, setSelectedTimeframe] =\n    useState<TimeframeOption>(\"Daily\");\n  useEffect(() => {\n    if (!showPicker || !me) {\n      return;\n    }\n    let cancelled = false;\n    async function load() {\n      try {\n        const res = await fetch(\n          `/api/friends/list?email=${encodeURIComponent(me)}`,\n        );\n        const j = await res.json().catch(() => ({ friends: [] }));\n        if (!cancelled)\n          setFriends(\n            (j.friends || []) as Array<{ email: string; username?: string }>,\n          );\n      } catch {}\n    }\n    load();\n    const id = window.setInterval(load, 20000);\n    return () => {\n      cancelled = true;\n      clearInterval(id);\n    };\n  }, [me, showPicker]);\n\n  // Rehydrate previously selected opponent from localStorage (per-user key)\n  useEffect(() => {\n    try {\n      const key = me ? `ndn:stats:opponent:${me}` : \"ndn:stats:opponent\";\n      const saved = localStorage.getItem(key);\n      if (saved) setOpponent(saved);\n    } catch {}\n  }, [me]);\n\n  // Persist opponent selection\n  useEffect(() => {\n    try {\n      const key = me ? `ndn:stats:opponent:${me}` : \"ndn:stats:opponent\";\n      if (opponent) localStorage.setItem(key, opponent);\n      else localStorage.removeItem(key);\n    } catch {}\n  }, [opponent, me]);\n\n  const runSearch = useCallback(\n    (term: string) => {\n      setQ(term);\n      if (!term.trim()) {\n        setResults([]);\n        return;\n      }\n      if (!showPicker) {\n        return;\n      }\n      if (searchTimerRef.current) {\n        clearTimeout(searchTimerRef.current);\n      }\n      searchTimerRef.current = window.setTimeout(async () => {\n        setSearching(true);\n        try {\n          const res = await fetch(\n            `/api/friends/search?q=${encodeURIComponent(term)}`,\n          );\n          const j = await res.json().catch(() => ({ results: [] }));\n          setResults(\n            (j.results || []) as Array<{\n              email: string;\n              username?: string;\n            }>,\n          );\n        } finally {\n          setSearching(false);\n        }\n      }, 350);\n    },\n    [showPicker],\n  );\n\n  useEffect(() => {\n    return () => {\n      if (searchTimerRef.current) {\n        clearTimeout(searchTimerRef.current);\n      }\n    };\n  }, []);\n\n  // Build a score-frequency distribution for the selected family.\n  // X01: use per-visit scores and bucket them into \"+\" bands so players can compare ranges.\n  const dist = useMemo(() => {\n    if (family !== \"x01\") return [] as Array<{ label: number; value: number }>;\n\n    // Requested bands (inclusive lower-bounds). Keep sorted ascending.\n    const BANDS: number[] = [\n      0, 26, 41, 45, 55, 60, 81, 85, 95, 100, 120, 140, 160, 180,\n    ];\n\n    const out: Map<number, number> = new Map(BANDS.map((b) => [b, 0]));\n\n    const addScore = (rawScore: any, n: number = 1) => {\n      const s = Math.max(0, Math.min(180, Number(rawScore) || 0));\n      // Find band as highest lower-bound <= score.\n      let band = BANDS[0];\n      for (let i = 0; i < BANDS.length; i++) {\n        if (s >= BANDS[i]) band = BANDS[i];\n        else break;\n      }\n      out.set(band, (out.get(band) ?? 0) + Math.max(0, Number(n) || 0));\n    };\n\n    if (inProgress) {\n      // Current match (live)\n      for (const p of players) {\n        for (const leg of p.legs) {\n          for (const v of leg.visits) {\n            addScore(v.score, 1);\n          }\n        }\n      }\n    }\n\n    // Persisted all-time stats for signed-in user.\n    const name = (me || \"\").trim();\n    if (name) {\n      const all = getAllTime(name);\n      const stored = all?.scoreFreq || {};\n      for (const [k, v] of Object.entries(stored)) {\n        addScore(k, v);\n      }\n    }\n\n    return Array.from(out.entries())\n      .sort((a, b) => a[0] - b[0])\n      .map(([label, value]) => ({ label, value }));\n  }, [players, family, inProgress, me]);\n\n  // Build Other Modes dataset: one bar per mode with value = played, label = mode name, and show played/won in label\n  const otherData = useMemo(() => {\n    const gm = getGameModeStats(allGames as unknown as string[]);\n    return (allGames as unknown as string[]).map((mode) => {\n      const e = gm[mode] || { played: 0, won: 0 };\n      // Bar label stays short; detailed caption rendered below values via custom footer\n      return { label: mode, value: e.played, extra: e.won };\n    });\n  }, [family]);\n\n  const distSummary = useMemo(() => {\n    if (!dist.length) return null;\n    let total = 0;\n    let most = dist[0];\n    let least = dist[0];\n    for (const entry of dist) {\n      total += entry.value;\n      if (entry.value > most.value) most = entry;\n      if (entry.value < least.value) least = entry;\n    }\n    return { total, most, least };\n  }, [dist]);\n\n  const distChart = useMemo(() => {\n    if (family !== \"x01\") return dist as any;\n    return dist.map((d: any) => ({\n      ...d,\n      label:\n        typeof d.label === \"number\"\n          ? d.label >= 180\n            ? \"180\"\n            : `${d.label}+`\n          : d.label,\n    }));\n  }, [dist, family]);\n\n  const statSeries = useMemo(() => {\n    if (!me) return [];\n    return getStatSeries(me);\n  }, [me]);\n\n  const rollingAvg = useMemo(() => (me ? getRollingAvg(me) : 0), [me]);\n\n  const timeframeAverage = useMemo(() => {\n    if (!me) return 0;\n    switch (selectedTimeframe) {\n      case \"Daily\":\n        return getDailyAdjustedAvg(me);\n      case \"Monthly\":\n        return getMonthlyAvg3(me);\n      default:\n        return getAllTimeAvg(me);\n    }\n  }, [me, selectedTimeframe]);\n\n  const sparklineData = useMemo(() => {\n    if (!statSeries.length) return [];\n    const now = Date.now();\n    const DAY = 1000 * 60 * 60 * 24;\n    const THIRTY_DAYS = DAY * 30;\n    const windowMs =\n      selectedTimeframe === \"Daily\"\n        ? DAY\n        : selectedTimeframe === \"Monthly\"\n          ? THIRTY_DAYS\n          : Number.POSITIVE_INFINITY;\n    const filtered = statSeries\n      .filter(\n        (entry: any) =>\n          windowMs === Number.POSITIVE_INFINITY || now - entry.t <= windowMs,\n      )\n      .map((entry: any) => ({\n        t: entry.t,\n        value: entry.darts ? (entry.scored / entry.darts) * 3 : 0,\n      }))\n      .sort((a: any, b: any) => a.t - b.t);\n    if (!filtered.length) return [];\n    const maxPoints = 32;\n    const step = Math.max(1, Math.floor(filtered.length / maxPoints));\n    return filtered.filter(\n      (_: any, idx: number) => idx % step === 0 || idx === filtered.length - 1,\n    );\n  }, [statSeries, selectedTimeframe]);\n\n  const sparklinePath = useMemo(() => {\n    if (!sparklineData.length) return \"\";\n    const width = 220;\n    const height = 40;\n    const values = sparklineData.map((point: any) => point.value);\n    const minVal = Math.min(...values);\n    const maxVal = Math.max(...values);\n    const range = maxVal - minVal || 1;\n    const count = sparklineData.length;\n    return sparklineData\n      .map((point: any, idx: number) => {\n        const x = count === 1 ? width / 2 : (idx / (count - 1)) * width;\n        const normalized = (point.value - minVal) / range;\n        const y = height - normalized * height;\n        return `${x},${y}`;\n      })\n      .join(\" \");\n  }, [sparklineData]);\n\n  const sparklineGradientId = useMemo(\n    () => `ndn-stats-sparkline-${Math.random().toString(36).slice(2)}`,\n    [],\n  );\n\n  // Trigger re-render when any game-mode stat updates elsewhere\n  useEffect(() => {\n    const onUpdate = () => setFamily((f) => f); // noop to refresh memo\n    window.addEventListener(\"ndn:stats-updated\", onUpdate as any);\n    return () =>\n      window.removeEventListener(\"ndn:stats-updated\", onUpdate as any);\n  }, []);\n\n  // Mobile layout hooks: ensure content is fully visible above bottom nav\n\n  return (\n    <div className=\"card ndn-game-shell ndn-page ndn-stats-page pb-24 overflow-visible relative\">\n      <div\n        className=\"absolute top-0 left-0 right-0 -bottom-[155px] -z-10 rounded-[inherit]\"\n        style={{\n          background: \"linear-gradient(135deg, #393053 0%, #635985 100%)\",\n          backgroundRepeat: \"no-repeat\",\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\",\n        }}\n      />\n      <div className=\"mb-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h2 className=\"text-2xl font-extrabold text-white ndn-section-title\">\n            Match Stats ðŸŽ¯\n          </h2>\n          <span className=\"text-xs opacity-70\">View ðŸŽ¯</span>\n        </div>\n        <div className=\"relative z-20 mt-2\">\n          <TabPills\n            tabs={[\n              { key: \"x01\", label: \"X01 ðŸŽ¯\" },\n              { key: \"other\", label: \"Other Modes ðŸŽ¯\" },\n              { key: \"tourney\", label: \"Tourneys ðŸŽ¯\" },\n            ]}\n            active={family}\n            onChange={(k) => setFamily(k as any)}\n          />\n        </div>\n      </div>\n      {inProgress && (\n        <div className=\"mb-3 p-2 rounded-lg text-sm border border-amber-500/40 bg-amber-500/10 text-amber-200\">\n          Note: Detailed leg stats are finalized at the end of the game.\n        </div>\n      )}\n\n      {family === \"tourney\" && (\n        <div className=\"mb-4 p-3 rounded-xl border border-slate-800/60 bg-slate-950/40 text-slate-200\">\n          Tournament stats view is enabled. Next step is wiring tournament-only\n          stat recording so this tab shows only tournament matches.\n        </div>\n      )}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n        {players.map((p: any, idx: number) => {\n          const playerName = p.name || `Player ${idx + 1}`;\n          const all = getAllTime(playerName);\n          const resolvedBest3 = Math.max(\n            p.bestThreeDartAvg ?? 0,\n            all.best3 ?? 0,\n          );\n          const resolvedWorst3 = (() => {\n            const values = [p.worstThreeDartAvg ?? 0, all.worst3 ?? 0].filter(\n              (v) => v > 0,\n            );\n            return values.length ? Math.min(...values) : 0;\n          })();\n          const resolvedBestLegDarts = (() => {\n            const values: number[] = [];\n            if (typeof p.bestNineDart?.darts === \"number\") {\n              values.push(p.bestNineDart.darts);\n            }\n            if (typeof all.bestLegDarts === \"number\" && all.bestLegDarts > 0) {\n              values.push(all.bestLegDarts);\n            }\n            return values.length ? Math.min(...values) : 0;\n          })();\n          const resolvedBestCheckout = Math.max(\n            p.bestCheckout ?? 0,\n            all.bestCheckout ?? 0,\n          );\n\n          return (\n            <div\n              key={p.id}\n              className=\"p-4 rounded-2xl border border-indigo-500/20 bg-gradient-to-br from-indigo-700/6 to-indigo-900/6 shadow-sm transform transition-transform duration-200 hover:-translate-y-1 hover:shadow-lg\"\n            >\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"font-semibold\">\n                  {idx === 1 && !opponent\n                    ? p.name || \"Opponent\"\n                    : idx === 1 && opponent\n                      ? opponent\n                      : playerName}\n                </div>\n                {idx === 1 && (\n                  <div className=\"flex gap-2 items-center overflow-x-auto py-1\">\n                    <button\n                      className=\"text-[11px] px-3 py-1 rounded-full bg-white/5 border border-white/10 hover:bg-white/10\"\n                      onClick={() => setShowPicker((s) => !s)}\n                      title=\"Search user to compare\"\n                    >\n                      Select Friend ðŸŽ¯\n                    </button>\n                    {friends.slice(0, 6).map((f) => {\n                      const lbl = f.username || f.email;\n                      const active = opponent === lbl;\n                      return (\n                        <button\n                          key={f.email}\n                          className={`text-[11px] px-3 py-1 rounded-full border ${active ? \"bg-indigo-500/30 border-indigo-400/50\" : \"bg-white/6 border-white/8 hover:bg-white/10 transform hover:-translate-y-0.5 transition-all duration-150\"}`}\n                          onClick={() => setOpponent(lbl)}\n                          title={`Compare vs ${lbl}`}\n                        >\n                          {lbl}\n                        </button>\n                      );\n                    })}\n                    {friends.length === 0 && (\n                      <button\n                        className=\"text-[11px] px-3 py-1 rounded-full bg-white/5 border border-white/10\"\n                        disabled\n                      >\n                        Find friends to compare\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n              {idx === 1 && showPicker && (\n                <div className=\"mb-2 p-2 rounded-lg bg-black/20 border border-white/10\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <input\n                      className=\"input flex-1 py-1\"\n                      placeholder=\"Search by name or email\"\n                      value={q}\n                      onChange={(e) => runSearch(e.target.value)}\n                    />\n                    <button\n                      className=\"btn px-3 py-1 text-sm\"\n                      onClick={() => runSearch(q)}\n                      disabled={searching}\n                    >\n                      Search ðŸŽ¯\n                    </button>\n                  </div>\n                  <ul className=\"max-h-40 overflow-auto space-y-1\">\n                    {results.map((r) => {\n                      const lbl = r.username || r.email;\n                      return (\n                        <li key={r.email}>\n                          <button\n                            className=\"w-full text-left px-2 py-1 rounded bg-white/5 hover:bg-white/10 border border-white/10 text-sm\"\n                            onClick={() => {\n                              setOpponent(lbl);\n                              setShowPicker(false);\n                            }}\n                          >\n                            {lbl}\n                          </button>\n                        </li>\n                      );\n                    })}\n                    {!results.length && (\n                      <li className=\"text-xs opacity-70\">\n                        {q.trim() ? \"No results\" : \"Type to searchâ€¦\"}\n                      </li>\n                    )}\n                  </ul>\n                </div>\n              )}\n              {/* If second card and an opponent is selected, show their all-time stats; otherwise show the match/player stats */}\n              {idx === 1 && opponent ? (\n                <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                    <div className=\"text-slate-300\">Best 3-Dart</div>\n                    <div className=\"font-semibold\">\n                      {formatAvg(getAllTime(opponent).best3 || 0)}\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                    <div className=\"text-slate-300\">Worst 3-Dart</div>\n                    <div className=\"font-semibold\">\n                      {formatAvg(getAllTime(opponent).worst3 || 0)}\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                    <div className=\"text-slate-300\">\n                      Best 9-Dart (fewest darts)\n                    </div>\n                    <div className=\"font-semibold\">\n                      {(() => {\n                        const a = getAllTime(opponent);\n                        return a.bestLegDarts ? `${a.bestLegDarts} darts` : \"â€”\";\n                      })()}\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                    <div className=\"text-slate-300\">Best Checkout</div>\n                    <div className=\"font-semibold\">\n                      {getAllTime(opponent).bestCheckout || \"â€”\"}\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\n                    <div className=\"text-slate-300\">\n                      Averages (All-time vs Monthly)\n                    </div>\n                    <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\n                      <span>\n                        3-dart: {formatAvg(getAllTimeAvg(opponent))} Â·{\" \"}\n                        {formatAvg(getMonthlyAvg3(opponent))}\n                      </span>\n                      <span>\n                        First 9: {formatAvg(getAllTimeFirstNineAvg(opponent))} Â·{\" \"}\n                        {formatAvg(getMonthlyFirstNineAvg(opponent))}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\n                    <div className=\"text-slate-300\">All-time snapshot</div>\n                    {(() => {\n                      const all = getAllTime(opponent);\n                      return (\n                        <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\n                          <span>Best 3-dart: {formatAvg(all.best3 || 0)}</span>\n                          <span>\n                            Worst 3-dart: {formatAvg(all.worst3 || 0)}\n                          </span>\n                          <span>Best leg: {all.bestLegDarts || 0} darts</span>\n                          <span>Best checkout: {all.bestCheckout || 0}</span>\n                        </div>\n                      );\n                    })()}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                    <div className=\"text-slate-300\">Best 3-Dart</div>\n                    <div className=\"font-semibold\">\n                      {formatAvg(resolvedBest3)}\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                    <div className=\"text-slate-300\">Worst 3-Dart</div>\n                    <div className=\"font-semibold\">\n                      {formatAvg(resolvedWorst3)}\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                    <div className=\"text-slate-300\">\n                      Best 9-Dart (fewest darts)\n                    </div>\n                    <div className=\"font-semibold\">\n                      {resolvedBestLegDarts\n                        ? `${resolvedBestLegDarts} darts`\n                        : \"â€”\"}\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                    <div className=\"text-slate-300\">Best Checkout</div>\n                    <div className=\"font-semibold\">\n                      {resolvedBestCheckout || \"â€”\"}\n                    </div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\n                    <div className=\"text-slate-300\">\n                      Averages (All-time vs Monthly)\n                    </div>\n                    <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\n                      <span>\n                        3-dart: {formatAvg(getAllTimeAvg(playerName))} Â·{\" \"}\n                        {formatAvg(getMonthlyAvg3(playerName))}\n                      </span>\n                      <span>\n                        First 9: {formatAvg(getAllTimeFirstNineAvg(playerName))}{\" \"}\n                        Â· {formatAvg(getMonthlyFirstNineAvg(playerName))}\n                      </span>\n                    </div>\n                  </div>\n                  {/* Live current three-dart average for in-progress matches */}\n                  {inProgress && (\n                    <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\n                      <div className=\"text-slate-300\">\n                        Current 3-Dart (live)\n                      </div>\n                      <div className=\"font-semibold\">\n                        {formatAvg(p.currentThreeDartAvg)}\n                      </div>\n                    </div>\n                  )}\n                  {/* All-time snapshot */}\n                  <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\n                    <div className=\"text-slate-300\">All-time snapshot</div>\n                    {(() => {\n                      const all = getAllTime(playerName);\n                      return (\n                        <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\n                          <span>Best 3-dart: {formatAvg(all.best3 || 0)}</span>\n                          <span>\n                            Worst 3-dart: {formatAvg(all.worst3 || 0)}\n                          </span>\n                          <span>Best leg: {all.bestLegDarts || 0} darts</span>\n                          <span>Best checkout: {all.bestCheckout || 0}</span>\n                        </div>\n                      );\n                    })()}\n                  </div>\n                </div>\n              )}\n            </div>\n          );\n        })}\n        {/* Opponent compare card: if there are fewer than 2 players, show a selector to compare with a friend */}\n        {players.length <= 1 && (\n          <div className=\"p-3 rounded-2xl border border-purple-500/20 bg-gradient-to-r from-purple-800/6 to-pink-800/6\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <div className=\"font-semibold\">Opponent</div>\n              <div className=\"flex flex-wrap gap-2\">\n                {friends.slice(0, 6).map((f) => {\n                  const lbl = f.username || f.email;\n                  const active = opponent === (f.username || f.email);\n                  return (\n                    <button\n                      key={f.email}\n                      className={`text-[11px] px-3 py-1 rounded-full border ${active ? \"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-transparent shadow-sm\" : \"bg-gradient-to-r from-purple-500/8 to-pink-500/8 border-white/10 hover:from-purple-500/12 hover:to-pink-500/12\"}`}\n                      onClick={() => setOpponent(lbl)}\n                      title={`Compare vs ${lbl}`}\n                    >\n                      {lbl}\n                    </button>\n                  );\n                })}\n                {friends.length === 0 && (\n                  <span className=\"text-xs opacity-70\">\n                    Add friends to compare stats.\n                  </span>\n                )}\n              </div>\n            </div>\n            {opponent ? (\n              <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\n                  <div className=\"text-slate-300\">Comparing to</div>\n                  <div className=\"font-semibold\">{opponent}</div>\n                </div>\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                  <div className=\"text-slate-300\">Best 3-Dart</div>\n                  <div className=\"font-semibold\">\n                    {formatAvg(getAllTimeAvg(opponent))}\n                  </div>\n                </div>\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                  <div className=\"text-slate-300\">Worst 3-Dart</div>\n                  <div className=\"font-semibold\">\n                    {formatAvg(getAllTime(opponent).worst3 || 0)}\n                  </div>\n                </div>\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                  <div className=\"text-slate-300\">\n                    Best 9-Dart (fewest darts)\n                  </div>\n                  <div className=\"font-semibold\">\n                    {(() => {\n                      const a = getAllTime(opponent);\n                      return a.bestLegDarts ? `${a.bestLegDarts} darts` : \"â€”\";\n                    })()}\n                  </div>\n                </div>\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10\">\n                  <div className=\"text-slate-300\">Best Checkout</div>\n                  <div className=\"font-semibold\">\n                    {getAllTime(opponent).bestCheckout || \"â€”\"}\n                  </div>\n                </div>\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\n                  <div className=\"text-slate-300\">\n                    Averages (All-time vs Monthly)\n                  </div>\n                  <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\n                    <span>\n                      3-dart: {formatAvg(getAllTimeAvg(opponent))} Â·{\" \"}\n                      {formatAvg(getMonthlyAvg3(opponent))}\n                    </span>\n                    <span>\n                      First 9: {formatAvg(getAllTimeFirstNineAvg(opponent))} Â·{\" \"}\n                      {formatAvg(getMonthlyFirstNineAvg(opponent))}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"p-2 rounded-lg bg-white/5 border border-white/10 col-span-2\">\n                  <div className=\"text-slate-300\">All-time snapshot</div>\n                  {(() => {\n                    const all = getAllTime(opponent);\n                    return (\n                      <div className=\"font-semibold flex flex-wrap gap-3 text-[13px]\">\n                        <span>Best 3-dart: {formatAvg(all.best3 || 0)}</span>\n                        <span>Worst 3-dart: {formatAvg(all.worst3 || 0)}</span>\n                        <span>Best leg: {all.bestLegDarts || 0} darts</span>\n                        <span>Best checkout: {all.bestCheckout || 0}</span>\n                      </div>\n                    );\n                  })()}\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-sm opacity-70\">\n                Select a friend above to compare.\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Score distribution for X01 family OR Game Stats for Other Modes */}\n      {family !== \"other\" ? (\n        <div className=\"mt-6 rounded-2xl border border-white/10 bg-black/20 p-4 space-y-4\">\n          <div className=\"mb-2 text-sm opacity-80\">\n            Score Distribution ({family.toUpperCase()}): Visits by scored points\n          </div>\n          <div className=\"flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-widest text-slate-300\">\n            {timeframeOptions.map((option) => (\n              <button\n                key={option}\n                className={`px-3 py-1 rounded-full border transition-all duration-200 ${\n                  selectedTimeframe === option\n                    ? \"bg-white/20 border-white/40 text-white\"\n                    : \"bg-white/5 border-white/10 text-slate-200\"\n                }`}\n                onClick={() => setSelectedTimeframe(option)}\n              >\n                {option}\n              </button>\n            ))}\n            <span className=\"text-xs opacity-50\">sparkline window</span>\n          </div>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs text-slate-300\">\n            <div className=\"rounded-lg bg-white/5 border border-white/10 p-3\">\n              <div className=\"text-[10px] uppercase opacity-70\">Average</div>\n              <div className=\"text-lg font-semibold text-white\">\n                {formatAvg(timeframeAverage)}\n              </div>\n              <div className=\"text-[10px] opacity-50\">{selectedTimeframe}</div>\n            </div>\n            <div className=\"rounded-lg bg-white/5 border border-white/10 p-3\">\n              <div className=\"text-[10px] uppercase opacity-70\">\n                Rolling 24h\n              </div>\n              <div className=\"text-lg font-semibold text-white\">\n                {formatAvg(rollingAvg)}\n              </div>\n              <div className=\"text-[10px] opacity-50\">live trend</div>\n            </div>\n            <div className=\"rounded-lg bg-white/5 border border-white/10 p-3\">\n              <div className=\"text-[10px] uppercase opacity-70\">Visits</div>\n              <div className=\"text-lg font-semibold text-white\">\n                {distSummary ? distSummary.total : 0}\n              </div>\n              <div className=\"text-[10px] opacity-50\">Match legs</div>\n            </div>\n            <div className=\"rounded-lg bg-white/5 border border-white/10 p-3\">\n              <div className=\"text-[10px] uppercase opacity-70\">Range</div>\n              <div className=\"text-[10px] text-slate-200\">\n                {distSummary\n                  ? `${distSummary.most.label} â†’ ${distSummary.least.label}`\n                  : \"â€”\"}\n              </div>\n              <div className=\"text-[10px] opacity-50\">Most â†’ Least</div>\n            </div>\n          </div>\n          <div className=\"rounded-xl border border-white/10 bg-black/20 p-3\">\n            {sparklinePath ? (\n              <svg\n                viewBox=\"0 0 220 40\"\n                className=\"w-full h-12\"\n                role=\"presentation\"\n              >\n                <defs>\n                  <linearGradient\n                    id={sparklineGradientId}\n                    x1=\"0\"\n                    y1=\"0\"\n                    x2=\"1\"\n                    y2=\"0\"\n                  >\n                    <stop offset=\"0%\" stopColor=\"#a855f7\" stopOpacity=\"0.35\" />\n                    <stop offset=\"100%\" stopColor=\"#ec4899\" stopOpacity=\"0.9\" />\n                  </linearGradient>\n                </defs>\n                <polyline\n                  fill=\"none\"\n                  stroke={`url(#${sparklineGradientId})`}\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  points={sparklinePath}\n                />\n              </svg>\n            ) : (\n              <div className=\"text-xs text-slate-400\">\n                No historical trend data yet. Finish more legs to seed the\n                sparkline.\n              </div>\n            )}\n          </div>\n          <div className=\"grid grid-cols-2 gap-2 text-[11px] text-slate-300/80 mb-2\">\n            <span className=\"text-left\">\n              Most frequent:{\" \"}\n              {distSummary\n                ? `${distSummary.most.label >= 180 ? \"180\" : `${distSummary.most.label}+`} (${distSummary.most.value})`\n                : \"â€”\"}\n            </span>\n            <span className=\"text-right\">\n              Least frequent:{\" \"}\n              {distSummary\n                ? `${distSummary.least.label >= 180 ? \"180\" : `${distSummary.least.label}+`} (${distSummary.least.value})`\n                : \"â€”\"}\n            </span>\n          </div>\n          <div\n            className=\"rounded-xl border border-indigo-500/20 p-3 pb-1 min-h-[220px] transform transition-shadow duration-200 hover:shadow-lg overflow-y-auto\"\n            style={{\n              background: \"linear-gradient(135deg, #393053 0%, #635985 100%)\",\n              scrollbarColor: \"#8F43EE #18122B\",\n            }}\n          >\n            <BarChart data={distChart as any} showValues={false} />\n          </div>\n        </div>\n      ) : selectedGameMode &&\n        otherData.find((d) => d.label === selectedGameMode) ? (\n        <div className=\"mt-6 rounded-2xl border border-white/10 bg-black/20 p-4\">\n          {(() => {\n            const game = otherData.find((d) => d.label === selectedGameMode)!;\n            return (\n              <div>\n                <div className=\"mb-2 text-sm opacity-80\">\n                  Game Stats for {game.label}\n                </div>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                  <div className=\"p-4 rounded-lg bg-white/10 border border-white/20\">\n                    <div className=\"text-slate-300 text-sm mb-1\">\n                      Games Played\n                    </div>\n                    <div className=\"text-3xl font-bold text-white\">\n                      {game.value}\n                    </div>\n                  </div>\n                  <div className=\"p-4 rounded-lg bg-white/10 border border-white/20\">\n                    <div className=\"text-slate-300 text-sm mb-1\">Games Won</div>\n                    <div className=\"text-3xl font-bold text-green-400\">\n                      {game.extra}\n                    </div>\n                  </div>\n                  <div className=\"p-4 rounded-lg bg-white/10 border border-white/20\">\n                    <div className=\"text-slate-300 text-sm mb-1\">Win Rate</div>\n                    <div className=\"text-3xl font-bold text-blue-400\">\n                      {game.value > 0\n                        ? ((game.extra / game.value) * 100).toFixed(1)\n                        : 0}\n                      %\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })()}\n        </div>\n      ) : null}\n\n      {/* Other Modes: Game Mode Selector with Pills */}\n      {family === \"other\" && (\n        <div className=\"mt-6\">\n          <div className=\"mb-3\">\n            <div className=\"text-sm opacity-80 mb-3\">\n              Other Modes: Click a game to view stats\n            </div>\n            <div className=\"rounded-xl bg-white/5 backdrop-blur-md border border-white/10 p-2 flex items-center gap-2 overflow-x-auto no-scrollbar flex-wrap\">\n              {otherData.map((d) => (\n                <button\n                  key={d.label}\n                  onClick={() => setSelectedGameMode(d.label)}\n                  className={`transition-all select-none whitespace-nowrap rounded-full px-4 py-2 text-sm font-semibold shadow-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60 active:scale-[0.98] ${\n                    selectedGameMode === d.label\n                      ? \"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg\"\n                      : \"bg-gradient-to-r from-slate-700 to-slate-600 text-white hover:from-slate-600 hover:to-slate-500\"\n                  }`}\n                >\n                  {d.label} ðŸŽ¯\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {!selectedGameMode && (\n            <div\n              className=\"rounded-xl border border-indigo-500/20 p-4\"\n              style={{\n                background: \"linear-gradient(135deg, #393053 0%, #635985 100%)\",\n              }}\n            >\n              <div className=\"text-center text-slate-300\">\n                Select a game mode above to view detailed stats\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["StatsPanel","user","players","inProgress","_startingScore","_newMatch","useMatch","family","setFamily","useState","_playersText","_setPlayersText","_start","_setStart","selectedGameMode","setSelectedGameMode","friends","setFriends","opponent","setOpponent","showPicker","setShowPicker","q","setQ","results","setResults","searching","setSearching","searchTimerRef","useRef","me","useMemo","cur","timeframeOptions","selectedTimeframe","setSelectedTimeframe","useEffect","cancelled","load","j","id","key","saved","runSearch","useCallback","term","dist","BANDS","out","b","addScore","rawScore","n","s","band","i","p","leg","v","name","stored","getAllTime","k","a","label","value","otherData","gm","getGameModeStats","allGames","mode","e","distSummary","total","most","least","entry","distChart","d","statSeries","getStatSeries","rollingAvg","getRollingAvg","timeframeAverage","getDailyAdjustedAvg","getMonthlyAvg3","getAllTimeAvg","sparklineData","now","DAY","THIRTY_DAYS","windowMs","filtered","step","_","idx","sparklinePath","width","height","values","point","minVal","range","count","x","normalized","y","sparklineGradientId","onUpdate","f","jsxs","jsx","TabPills","playerName","all","resolvedBest3","resolvedWorst3","resolvedBestLegDarts","resolvedBestCheckout","lbl","active","r","formatAvg","getAllTimeFirstNineAvg","getMonthlyFirstNineAvg","option","BarChart","game"],"mappings":"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"}