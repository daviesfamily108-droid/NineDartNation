import{h as b,e as g,j as e}from"./index-CC0rYhL0.js";import{r as a}from"./ui-Cl5S-Tv0.js";import"./vendor-D3F3s8fL.js";function y({user:r}){const[s,m]=a.useState(null),[u,h]=a.useState(!0),[c,x]=a.useState(null),i=b(),n=g();if(a.useEffect(()=>{(async()=>{try{const t=r?.email?`?email=${encodeURIComponent(r.email)}`:"",d=await fetch(`${i}/api/subscription`+t);if(!d.ok)throw new Error("Failed to fetch subscription");const p=await d.json();m(p)}catch(t){x(t instanceof Error?t.message:"Something went wrong")}finally{h(!1)}})()},[r?.email,i]),u)return e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 mx-auto mb-4"}),e.jsx("p",{children:"Loading subscription..."})]})});if(c)return e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-300 mb-2",children:"Subscription Error"}),e.jsx("p",{className:"mb-4 text-red-200",children:c}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn bg-red-600 hover:bg-red-700",children:"Retry"})]});const o=s?.fullAccess;return e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-2xl font-bold text-indigo-300 mb-2",children:o?"PREMIUM Active":"PREMIUM"}),o?e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"bg-green-500/20 border border-green-500/40 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"flex items-center gap-2 text-green-300 font-semibold mb-2",children:"âœ… PREMIUM Access Active"}),e.jsx("p",{className:"text-green-200 text-sm",children:"You have full access to all premium features!"}),s?.source&&e.jsxs("p",{className:"text-green-200 text-xs mt-1",children:["Source: ",s.source,s?.expiresAt&&` (expires: ${new Date(s.expiresAt).toLocaleDateString()})`]})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-indigo-200",children:"Your Benefits:"})]}):e.jsx("p",{className:"mb-2 text-indigo-200",children:"Unlock every game mode known to darts, advanced stats, and premium features."}),e.jsxs("ul",{className:"mb-4",children:[e.jsx("li",{children:"All game modes (including paid/advanced)"}),e.jsx("li",{children:"Online play with all rules and variations"}),e.jsx("li",{children:"Advanced analytics and leaderboards"}),e.jsx("li",{children:"Premium camera modes and autoscoring"})]}),!o&&e.jsx("button",{onClick:async()=>{try{const t=await(await fetch(`${i}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email})})).json();t.ok&&t.url?window.location.href=t.url:t.error==="STRIPE_NOT_CONFIGURED"?n("Premium purchases are not available. Payment link not configured.",{type:"error",timeout:4e3}):n("Failed to get payment link. Please try again.",{type:"error",timeout:4e3})}catch{n("Error creating checkout. Please try again.",{type:"error",timeout:4e3})}},className:"btn bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold shadow-lg hover:scale-105 transition",children:"Subscribe to PREMIUM"})]})}export{y as default};
//# sourceMappingURL=AdminAccess-VC6hxg_R.js.map
