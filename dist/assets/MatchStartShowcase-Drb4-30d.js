import{m as E,O as C,S as R,U as L,g as T,V as F,j as t,J as B,r as I}from"./index-hEoLjEue.js";import{r as a}from"./ui-CuWypN7C.js";function u({label:c,value:r,className:s="",scale:f=1}){return t.jsxs("div",{className:`flex flex-col items-center gap-1 ${s}`,children:[t.jsx("div",{className:"text-xs opacity-70",children:c}),t.jsx("div",{className:"text-2xl sm:text-3xl font-bold transform transition-transform duration-200 ease-out",style:{transform:`scale(${f})`},children:r})]})}function O({players:c,onDone:r}){const[s,f]=a.useState(15),[M,g]=a.useState(1),[i,o]=a.useState(!0),j=a.useRef(null),b=a.useRef(null),y=a.useRef(null),x=a.useRef(null);a.useEffect(()=>{if(!i)return;try{setTimeout(()=>{try{b.current?.focus()}catch{}},0)}catch{}try{x.current=document.activeElement}catch{}const e=document.getElementById("root"),n=e?e.getAttribute("aria-hidden"):null;try{e&&e.setAttribute("aria-hidden","true")}catch{}const h=setInterval(()=>f(l=>l-1),1e3),m=l=>{if(l.key==="Escape"){l.preventDefault(),o(!1);try{r?.()}catch{}try{x.current?.focus()}catch{}}};return document.addEventListener("keydown",m),()=>{try{e&&n===null?e.setAttribute("aria-hidden","false"):e&&n!==null&&e.setAttribute("aria-hidden",n)}catch{}document.removeEventListener("keydown",m),clearInterval(h)}},[i,r]),a.useEffect(()=>{i&&(s<=3&&s>0&&g(e=>e+.4),s<=0&&setTimeout(()=>{o(!1);try{r?.()}catch{}try{x.current?.focus()}catch{}},1e3))},[s,r,i]);const N=a.useMemo(()=>c.map(e=>{const n=E(e.name),h=C(e.name),m=R(e.name),l=L(e.name);T(e.name);const A=F(e.name);let v=0;try{for(const k of e.legs||[])for(const S of k.visits||[])Number(S.score||0)===180&&(v+=1)}catch{}const w=`${v}/${A}`;return{id:e.id,name:e.name,avg3:n.toFixed(1),best9:h.toFixed(1),bestCheckout:m,bestLeg:l,one80s:w}}),[c]);if(!i)return null;const d=e=>e<=0?1.8:e===1?1.6:e===2?1.4:e===3?1.2:1,p=t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:t.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"match-start-heading",tabIndex:-1,children:t.jsx(B,{returnFocus:!0,children:t.jsx("div",{ref:j,children:t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 md:p-6 max-w-3xl w-full backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{id:"match-start-heading",className:"text-sm opacity-80",children:"Match starting in"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"text-4xl font-extrabold","aria-live":"polite",children:s>0?s:"GO"}),t.jsx("button",{ref:b,className:"btn btn-sm",onClick:()=>{o(!1);try{r?.()}catch{}},"aria-label":"Start match now",children:"Start now"}),t.jsx("button",{ref:y,className:"btn btn-ghost btn-sm",onClick:()=>{o(!1);try{r?.()}catch{}},"aria-label":"Close match start showcase",children:"Close"})]})]}),t.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:N.map(e=>t.jsxs("div",{className:"p-3 rounded-lg bg-white/6 border border-white/8 flex flex-col items-center",children:[t.jsx("div",{className:"text-sm mb-2 font-semibold",children:e.name}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[t.jsx(u,{label:"3-Dart Avg",value:e.avg3,scale:d(s)}),t.jsx(u,{label:"First-9 Avg",value:e.best9,scale:d(s)}),t.jsx(u,{label:"Best Checkout",value:e.bestCheckout||"—",scale:d(s)}),t.jsx(u,{label:"Best Leg",value:e.bestLeg||"—",scale:d(s)})]}),t.jsxs("div",{className:"mt-3 opacity-70 text-xs",children:["180s (match / career): ",e.one80s]})]},e.id))}),t.jsx("div",{className:"mt-4 text-center",children:s<=1?t.jsxs("div",{className:"text-lg font-bold",children:["Good luck — Game on! ",c.map(e=>e.name).join(" vs ")]}):t.jsxs("div",{className:"text-sm opacity-70",children:["Players: ",c.map(e=>e.name).join(" vs ")]})})]})})})})});return I.createPortal(p,document.body)}export{O as M};
//# sourceMappingURL=MatchStartShowcase-Drb4-30d.js.map
