{"version":3,"file":"matchWindow-_tMJLG5T.js","sources":["../../src/components/AroundTheClockScorer.tsx","../../src/components/InGameShell.tsx","../../src/components/MatchSummaryModal.tsx","../../src/utils/matchWindow.ts"],"sourcesContent":["import React, { useCallback, useMemo, useState } from \"react\";\nimport { ATC_ORDER } from \"../game/aroundTheClock.js\";\n\n/** Reversed order: Bull ‚Üí 20 ‚Üí 1 */\nconst ATC_ORDER_REV = [...ATC_ORDER].reverse();\n\nexport type ATCDirection = \"1-to-bull\" | \"bull-to-1\";\n\ninterface Props {\n  /** Which direction around the board (chosen by first thrower at game start). */\n  direction: ATCDirection | null;\n  /** Callback when the first thrower picks a direction. */\n  onPickDirection: (dir: ATCDirection) => void;\n  /** Index into the target sequence that the current thrower must hit. */\n  currentTargetIndex: number;\n  /** True when it is the local player's turn. */\n  isUsersTurn: boolean;\n  /**\n   * Called after 3 darts have been thrown.\n   * @param hits ‚Äî how many targets were hit this turn (0-3)\n   * @param totalValue ‚Äî sum of all hit target values this turn\n   */\n  onTurnComplete: (hits: number, totalValue: number) => void;\n  /**\n   * Called each time a single dart hits so the parent can advance the\n   * target index immediately (keeps hero display in sync).\n   */\n  onDartHit: () => void;\n  /** Number of targets already completed by the current thrower. */\n  completed: number;\n  /** Player name shown above the target. */\n  playerName?: string;\n}\n\nfunction targetLabel(n: number): string {\n  if (n === 25) return \"Outer Bull\";\n  if (n === 50) return \"Inner Bull\";\n  return String(n);\n}\n\ntype DartResult = \"hit\" | \"miss\" | null;\n\n/**\n * Around the Clock scoring panel ‚Äî replaces the number pad when game mode\n * is \"Around the Clock\". Players throw 3 darts per turn. Each dart can\n * hit the current target (advancing it) or miss. After all 3 darts the\n * turn is committed and play passes to the opponent.\n */\nexport default function AroundTheClockScorer({\n  direction,\n  onPickDirection,\n  currentTargetIndex,\n  isUsersTurn,\n  onTurnComplete,\n  onDartHit,\n  completed,\n  playerName,\n}: Props) {\n  const order = direction === \"bull-to-1\" ? ATC_ORDER_REV : ATC_ORDER;\n  const total = order.length;\n  const finished = currentTargetIndex >= total;\n\n  // Per-turn dart tracking (resets each turn)\n  const [darts, setDarts] = useState<DartResult[]>([null, null, null]);\n  const dartsThrown = darts.filter((d) => d !== null).length;\n  const dartsHit = darts.filter((d) => d === \"hit\").length;\n\n  // Accumulate hit values within the turn so we can report the total\n  const [turnHitValues, setTurnHitValues] = useState<number[]>([]);\n\n  // The \"live\" target accounts for hits already recorded this turn\n  const liveTargetIndex = currentTargetIndex;\n  const liveTarget = order[liveTargetIndex] ?? null;\n\n  const resetTurn = useCallback(() => {\n    setDarts([null, null, null]);\n    setTurnHitValues([]);\n  }, []);\n\n  const recordDart = useCallback(\n    (result: \"hit\" | \"miss\") => {\n      if (dartsThrown >= 3 || finished) return;\n\n      const nextDarts = [...darts];\n      nextDarts[dartsThrown] = result;\n      setDarts(nextDarts);\n\n      let hitVal = 0;\n      if (result === \"hit\") {\n        hitVal = order[liveTargetIndex] ?? 0;\n        setTurnHitValues((prev) => [...prev, hitVal]);\n        // Immediately advance target in parent\n        onDartHit();\n      }\n\n      const newCount = dartsThrown + 1;\n\n      // After 3 darts, auto-commit the turn\n      if (newCount >= 3) {\n        const totalHits = nextDarts.filter((d) => d === \"hit\").length;\n        const totalVal =\n          result === \"hit\"\n            ? [...turnHitValues, hitVal].reduce((a, b) => a + b, 0)\n            : turnHitValues.reduce((a, b) => a + b, 0);\n        // Use setTimeout so state updates flush before parent commits\n        setTimeout(() => {\n          onTurnComplete(totalHits, totalVal);\n          resetTurn();\n        }, 350);\n      }\n    },\n    [\n      darts,\n      dartsThrown,\n      finished,\n      order,\n      liveTargetIndex,\n      turnHitValues,\n      onDartHit,\n      onTurnComplete,\n      resetTurn,\n    ],\n  );\n\n  // Show direction picker if not yet chosen\n  if (!direction) {\n    return (\n      <div className=\"relative w-full rounded-2xl border-2 border-dashed border-indigo-400/40 bg-indigo-500/5 p-6 sm:p-8 text-center\">\n        <div className=\"text-indigo-300/70 text-xs sm:text-sm uppercase tracking-widest font-semibold mb-4\">\n          Choose Direction\n        </div>\n        <p className=\"text-white/70 text-sm mb-6\">\n          The first thrower picks the order for both players.\n        </p>\n        <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n          <button\n            type=\"button\"\n            className=\"px-6 py-4 rounded-2xl border border-emerald-400/40 bg-emerald-500/10 hover:bg-emerald-500/20 active:scale-95 transition-all text-center\"\n            onClick={() => onPickDirection(\"1-to-bull\")}\n          >\n            <div className=\"font-bold text-emerald-200 text-lg\">1 ‚Üí Bull</div>\n            <div className=\"text-emerald-300/60 text-xs mt-1\">\n              Start at 1, finish on Bullseye\n            </div>\n          </button>\n          <button\n            type=\"button\"\n            className=\"px-6 py-4 rounded-2xl border border-amber-400/40 bg-amber-500/10 hover:bg-amber-500/20 active:scale-95 transition-all text-center\"\n            onClick={() => onPickDirection(\"bull-to-1\")}\n          >\n            <div className=\"font-bold text-amber-200 text-lg\">Bull ‚Üí 1</div>\n            <div className=\"text-amber-300/60 text-xs mt-1\">\n              Start at Bullseye, finish on 1\n            </div>\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Finished state\n  if (finished && dartsThrown === 0) {\n    return (\n      <div className=\"relative w-full rounded-2xl border border-emerald-400/30 bg-emerald-500/10 p-6 sm:p-8 text-center\">\n        <div className=\"text-4xl mb-2\">üéØ</div>\n        <div className=\"font-bold text-emerald-200 text-xl\">\n          Around the Clock Complete!\n        </div>\n        <div className=\"text-emerald-300/60 text-sm mt-2\">\n          All {total} targets hit\n        </div>\n      </div>\n    );\n  }\n\n  // Progress bar\n  const pct = total > 0 ? Math.round((completed / total) * 100) : 0;\n\n  // Show upcoming targets (next 5 after current live target)\n  const upcoming = order.slice(liveTargetIndex + 1, liveTargetIndex + 6);\n\n  const allDartsThrown = dartsThrown >= 3;\n\n  return (\n    <div className=\"flex flex-col gap-3\">\n      {/* Progress */}\n      <div className=\"relative rounded-2xl border border-white/10 bg-slate-950/70 p-3 sm:p-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-xs uppercase tracking-wider text-slate-400 font-semibold\">\n            Progress\n          </span>\n          <span className=\"text-xs text-slate-400 tabular-nums font-medium\">\n            {completed} / {total} ({pct}%)\n          </span>\n        </div>\n        <div className=\"h-2 rounded-full bg-white/10 overflow-hidden\">\n          <div\n            className=\"h-full rounded-full bg-gradient-to-r from-emerald-500 to-emerald-400 transition-all duration-300\"\n            style={{ width: `${pct}%` }}\n          />\n        </div>\n        <div className=\"mt-2 text-[10px] text-slate-500\">\n          Direction:{\" \"}\n          {direction === \"1-to-bull\" ? \"1 ‚Üí 20 ‚Üí Bull\" : \"Bull ‚Üí 20 ‚Üí 1\"}\n        </div>\n      </div>\n\n      {/* Dart indicators ‚Äî shows which darts have been thrown */}\n      {isUsersTurn && (\n        <div className=\"flex items-center justify-center gap-3\">\n          {darts.map((d, i) => (\n            <div key={i} className=\"flex flex-col items-center gap-1\">\n              <div className=\"text-[9px] uppercase tracking-wider text-slate-500 font-semibold\">\n                Dart {i + 1}\n              </div>\n              <div\n                className={`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold border-2 transition-all ${\n                  d === \"hit\"\n                    ? \"bg-emerald-500/20 border-emerald-400/60 text-emerald-300\"\n                    : d === \"miss\"\n                      ? \"bg-rose-500/20 border-rose-400/60 text-rose-300\"\n                      : i === dartsThrown\n                        ? \"bg-white/10 border-white/30 text-white/60 animate-pulse\"\n                        : \"bg-white/5 border-white/10 text-white/20\"\n                }`}\n              >\n                {d === \"hit\" ? \"‚úì\" : d === \"miss\" ? \"‚úó\" : \"‚Ä¢\"}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Current target ‚Äî big tappable area */}\n      <div\n        className={`relative w-full rounded-2xl border-2 p-6 sm:p-8 text-center transition-all ${\n          isUsersTurn && !allDartsThrown\n            ? \"border-emerald-400/40 bg-emerald-500/5\"\n            : isUsersTurn && allDartsThrown\n              ? \"border-amber-400/40 bg-amber-500/5\"\n              : \"border-white/10 bg-white/5 opacity-60\"\n        }`}\n      >\n        {playerName && (\n          <div className=\"text-[10px] uppercase tracking-widest text-slate-400 mb-1\">\n            {isUsersTurn ? \"Your target\" : `${playerName}'s target`}\n          </div>\n        )}\n        <div className=\"text-emerald-300/60 text-xs sm:text-sm uppercase tracking-widest font-semibold mb-2\">\n          {allDartsThrown\n            ? \"Turn Complete\"\n            : `Current Target ‚Äî Dart ${dartsThrown + 1} of 3`}\n        </div>\n        <div className=\"font-mono text-6xl sm:text-7xl font-black text-white leading-none mb-4\">\n          {finished ? \"‚úì\" : liveTarget != null ? targetLabel(liveTarget) : \"‚Äî\"}\n        </div>\n\n        {isUsersTurn && !allDartsThrown && !finished && (\n          <div className=\"flex gap-3 justify-center\">\n            <button\n              type=\"button\"\n              className=\"flex-1 max-w-[10rem] py-4 rounded-2xl text-lg font-bold bg-emerald-600 hover:bg-emerald-500 active:bg-emerald-400 border border-emerald-400/30 text-white shadow-lg shadow-emerald-600/30 transition-all active:scale-95\"\n              onClick={() => recordDart(\"hit\")}\n            >\n              ‚úì Hit\n            </button>\n            <button\n              type=\"button\"\n              className=\"flex-1 max-w-[10rem] py-4 rounded-2xl text-lg font-bold bg-rose-600/80 hover:bg-rose-500 active:bg-rose-400 border border-rose-400/30 text-white shadow-lg shadow-rose-600/20 transition-all active:scale-95\"\n              onClick={() => recordDart(\"miss\")}\n            >\n              ‚úó Miss\n            </button>\n          </div>\n        )}\n        {isUsersTurn && allDartsThrown && (\n          <div className=\"text-sm text-amber-200/70 mt-2 animate-pulse\">\n            Submitting turn‚Ä¶\n          </div>\n        )}\n        {!isUsersTurn && (\n          <div className=\"text-sm text-white/40 mt-2\">\n            Waiting for opponent‚Ä¶\n          </div>\n        )}\n      </div>\n\n      {/* Turn summary (visible while throwing) */}\n      {isUsersTurn && dartsThrown > 0 && (\n        <div className=\"flex items-center justify-center gap-4 text-sm\">\n          <span className=\"text-emerald-300 font-semibold\">\n            Hits: {dartsHit}\n          </span>\n          <span className=\"text-rose-300 font-semibold\">\n            Misses: {dartsThrown - dartsHit}\n          </span>\n        </div>\n      )}\n\n      {/* Upcoming targets */}\n      {upcoming.length > 0 && (\n        <div className=\"flex items-center gap-2 px-1\">\n          <span className=\"text-[10px] uppercase tracking-wider text-slate-500 font-semibold whitespace-nowrap\">\n            Next:\n          </span>\n          <div className=\"flex gap-1.5 flex-wrap\">\n            {upcoming.map((t, i) => (\n              <span\n                key={i}\n                className=\"px-2.5 py-1 rounded-lg bg-white/5 border border-white/10 text-xs text-white/60 font-medium tabular-nums\"\n              >\n                {targetLabel(t)}\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport CameraView from \"./CameraView.js\";\nimport GameScoreboard from \"./scoreboards/GameScoreboard.js\";\nimport { useOnlineGameStats } from \"./scoreboards/useGameStats.js\";\nimport { useMatch } from \"../store/match.js\";\nimport { useMatchControl } from \"../store/matchControl.js\";\nimport { usePendingVisit } from \"../store/pendingVisit.js\";\nimport PauseTimerBadge from \"./ui/PauseTimerBadge.js\";\nimport PauseQuitModal from \"./ui/PauseQuitModal.js\";\nimport PauseOverlay from \"./ui/PauseOverlay.js\";\nimport { useUserSettings } from \"../store/userSettings.js\";\nimport MatchStartShowcase from \"./ui/MatchStartShowcase.js\";\nimport { suggestCheckouts, sayScore } from \"../utils/checkout.js\";\nimport { getPreferredUserName } from \"../utils/userName.js\";\nimport { broadcastMessage } from \"../utils/broadcast.js\";\nimport AroundTheClockScorer, {\n  type ATCDirection,\n} from \"./AroundTheClockScorer.js\";\nimport { ATC_ORDER } from \"../game/aroundTheClock.js\";\n\nexport default function InGameShell({\n  user,\n  showStartShowcase: showStartShowcaseProp,\n  onShowStartShowcaseChange,\n  onCommitVisit,\n  onQuit: onQuitProp,\n  onPause: onPauseProp,\n  onResume: onResumeProp,\n  onPauseDurationSelected: onPauseDurationSelectedProp,\n  onStateChange,\n  localPlayerIndexOverride,\n  gameModeOverride,\n  isOnline,\n  remoteStream,\n  remoteFrame: remoteFrameProp,\n}: {\n  user: any;\n  showStartShowcase?: boolean;\n  onShowStartShowcaseChange?: (open: boolean) => void;\n  /** Override default visit commit (for online WS sync). */\n  onCommitVisit?: (score: number, darts: number, meta?: any) => void;\n  /** Override default quit behaviour. */\n  onQuit?: () => void;\n  /** Override default pause behaviour (for online WS sync). */\n  onPause?: () => void;\n  /** Override default resume behaviour (for online WS sync). */\n  onResume?: () => void;\n  /** Called when pause duration is selected (for online WS sync). */\n  onPauseDurationSelected?: (minutes: number, endsAt: number) => void;\n  /** Called after any match state mutation for external sync. */\n  onStateChange?: () => void;\n  /** Explicit local player index for online (skips name matching). */\n  localPlayerIndexOverride?: number;\n  /** Override game mode label (e.g. online tracks currentGame separately). */\n  gameModeOverride?: string;\n  /** True when this is an online match ‚Äî adds visual indicators. */\n  isOnline?: boolean;\n  /** Remote opponent camera stream for turn-by-turn camera alternation. */\n  remoteStream?: MediaStream | null;\n  /** Remote opponent camera snapshot (base64 JPEG) relayed via WebSocket. */\n  remoteFrame?: string | null;\n}) {\n  const match = useMatch();\n  useUserSettings((s: any) => s.hideInGameSidebar ?? true);\n  useMatchControl((s: any) => s.setPaused);\n  useMatchControl();\n  usePendingVisit();\n\n  const [winningShot, setWinningShot] = useState<{\n    label?: string;\n    ring?: string;\n    frame?: string | null;\n    ts?: number;\n  } | null>(null);\n  const remoteFrame = remoteFrameProp ?? null;\n  const remoteVideoRef = useRef<HTMLVideoElement>(null);\n\n  // Attach remote opponent camera stream to the video element\n  useEffect(() => {\n    const v = remoteVideoRef.current;\n    if (!v || !remoteStream) return;\n    v.srcObject = remoteStream;\n    v.play().catch(() => {});\n    return () => {\n      v.srcObject = null;\n    };\n  }, [remoteStream]);\n\n  const lastOfflineStart = useUserSettings(\n    (s: any) => s.lastOffline?.x01Start || 501,\n  );\n\n  const settingsUser = useUserSettings((s: any) => s.user);\n  const localPlayerName =\n    getPreferredUserName(user, \"\") ||\n    getPreferredUserName(settingsUser, \"\") ||\n    user?.email?.split(\"@\")[0] ||\n    settingsUser?.email?.split(\"@\")[0] ||\n    \"You\";\n\n  const resolvedLocalIndex =\n    typeof localPlayerIndexOverride === \"number\" &&\n    localPlayerIndexOverride >= 0\n      ? localPlayerIndexOverride\n      : (match.players || []).findIndex(\n          (p: any) => p?.name && p.name === localPlayerName,\n        );\n  const localPlayerIndex = resolvedLocalIndex >= 0 ? resolvedLocalIndex : 0;\n  const isUsersTurn = (match.currentPlayerIdx ?? 0) === localPlayerIndex;\n\n  const localPlayer = match.players?.[localPlayerIndex];\n  const localLeg = localPlayer?.legs?.[localPlayer.legs.length - 1];\n  const localRemaining =\n    localLeg?.totalScoreRemaining ?? match.startingScore ?? lastOfflineStart;\n  const awayIdx = (match.players || []).findIndex(\n    (_p: any, idx: number) => idx !== localPlayerIndex,\n  );\n  const awayPlayer = (match.players || [])[awayIdx >= 0 ? awayIdx : 0];\n  const awayLeg = awayPlayer?.legs?.[awayPlayer.legs.length - 1];\n  const awayRemaining =\n    awayLeg?.totalScoreRemaining ?? match.startingScore ?? lastOfflineStart;\n\n  // Compute per-player stats for hero banner (last visit, 3-dart average)\n  const playerStats = useMemo(() => {\n    const compute = (p: any) => {\n      if (!p) return { lastVisit: 0, avg3: 0 };\n      let pts = 0,\n        darts = 0;\n      for (const L of p.legs || []) {\n        pts += (L.totalScoreStart ?? 0) - (L.totalScoreRemaining ?? 0);\n        darts += (L.visits || []).reduce(\n          (a: number, v: any) => a + (v.darts || 0) - (v.preOpenDarts || 0),\n          0,\n        );\n      }\n      const lastV = (p.legs?.[p.legs.length - 1]?.visits || []).slice(-1)[0];\n      return {\n        lastVisit: lastV?.score ?? lastV?.visitTotal ?? 0,\n        avg3: darts > 0 ? (pts / darts) * 3 : 0,\n      };\n    };\n    return { local: compute(localPlayer), away: compute(awayPlayer) };\n  }, [\n    localPlayer,\n    awayPlayer,\n    localLeg?.visits?.length,\n    awayLeg?.visits?.length,\n  ]);\n\n  // Checkout suggestions for the current thrower (local or away)\n  const throwerRemaining = isUsersTurn ? localRemaining : awayRemaining;\n\n  const gameMode = gameModeOverride || (match as any)?.game || \"X01\";\n  const isX01 = gameMode === \"X01\";\n  const scoreboardPlayers = useOnlineGameStats(gameMode, match as any);\n\n  // Around the Clock state (per-player target tracking) ‚Äî declared early\n  // so heroValues and other memos can reference them.\n  const isATC = gameMode === \"Around the Clock\";\n  const [atcDirection, setAtcDirection] = useState<ATCDirection | null>(null);\n  const [atcTargets, setAtcTargets] = useState<Record<number, number>>({});\n  const atcOrder =\n    atcDirection === \"bull-to-1\" ? [...ATC_ORDER].reverse() : ATC_ORDER;\n  const localAtcIdx = atcTargets[localPlayerIndex] ?? 0;\n  const awayAtcIdx = atcTargets[awayIdx >= 0 ? awayIdx : 1] ?? 0;\n\n  // Game-mode-aware hero display values for each player\n  const heroValues = useMemo(() => {\n    const forPlayer = (p: any, sbIdx: number) => {\n      const sb = scoreboardPlayers[sbIdx];\n      if (isX01) {\n        const leg = p?.legs?.[p.legs.length - 1];\n        return {\n          primary: String(\n            leg?.totalScoreRemaining ?? match.startingScore ?? lastOfflineStart,\n          ),\n          primaryLabel: \"Remaining\",\n        };\n      }\n      // Around the Clock ‚Äî show target progress\n      if (gameMode === \"Around the Clock\") {\n        const pIdx =\n          sbIdx === 0 ? localPlayerIndex : awayIdx >= 0 ? awayIdx : 1;\n        const tIdx = atcTargets[pIdx] ?? 0;\n        const order =\n          atcDirection === \"bull-to-1\" ? [...ATC_ORDER].reverse() : ATC_ORDER;\n        const tgt = order[tIdx];\n        const label =\n          tIdx >= order.length\n            ? \"Done!\"\n            : tgt === 25\n              ? \"Outer Bull\"\n              : tgt === 50\n                ? \"Inner Bull\"\n                : String(tgt);\n        return {\n          primary: tIdx >= order.length ? \"‚úì\" : label,\n          primaryLabel:\n            tIdx >= order.length\n              ? \"Complete\"\n              : `Target ${tIdx + 1}/${order.length}`,\n        };\n      }\n      if (gameMode === \"Cricket\" || gameMode === \"American Cricket\") {\n        return {\n          primary: String(sb?.points ?? 0),\n          primaryLabel: \"Points\",\n        };\n      }\n      if (gameMode === \"Killer\") {\n        const lives = sb?.lives ?? 0;\n        return {\n          primary: sb?.eliminated ? \"OUT\" : String(lives),\n          primaryLabel: sb?.eliminated ? \"Eliminated\" : \"Lives\",\n        };\n      }\n      // Generic score-based games\n      return {\n        primary: String(sb?.score ?? sb?.points ?? 0),\n        primaryLabel: \"Score\",\n      };\n    };\n    return {\n      local: forPlayer(localPlayer, localPlayerIndex),\n      away: forPlayer(awayPlayer, awayIdx >= 0 ? awayIdx : 0),\n    };\n  }, [\n    isX01,\n    gameMode,\n    scoreboardPlayers,\n    localPlayer,\n    awayPlayer,\n    localPlayerIndex,\n    awayIdx,\n    match.startingScore,\n    lastOfflineStart,\n    atcTargets,\n    atcDirection,\n  ]);\n\n  const callerEnabled = useUserSettings((s: any) => s.callerEnabled);\n  const callerVoice = useUserSettings((s: any) => s.callerVoice);\n  const callerVolume = useUserSettings((s: any) => s.callerVolume);\n  const speakCheckoutOnly = useUserSettings((s: any) => s.speakCheckoutOnly);\n\n  const [showQuitPause, setShowQuitPause] = useState(false);\n  const setPaused = useMatchControl((s: any) => s.setPaused);\n  const paused = useMatchControl((s: any) => s.paused);\n  const pauseEndsAt = useMatchControl((s: any) => s.pauseEndsAt);\n  const pauseInitiator = useMatchControl((s: any) => s.pauseInitiator);\n  const [pauseNow, setPauseNow] = useState(Date.now());\n\n  // Signal the app shell to go full-screen on mobile while in-game\n  useEffect(() => {\n    document.documentElement.setAttribute(\"data-ndn-ingame\", \"true\");\n    return () => {\n      document.documentElement.removeAttribute(\"data-ndn-ingame\");\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!paused || !pauseEndsAt) return;\n    const t = setInterval(() => {\n      const now = Date.now();\n      setPauseNow(now);\n      if (now >= pauseEndsAt) {\n        setPaused(false, null);\n      }\n    }, 250);\n    return () => clearInterval(t);\n  }, [paused, pauseEndsAt, setPaused]);\n\n  const checkoutRoutes = useMemo(() => {\n    if (!isX01 || localRemaining > 170 || localRemaining <= 0) return null;\n    const routes = suggestCheckouts(localRemaining);\n    return routes && routes.length > 0 ? routes : null;\n  }, [isX01, localRemaining]);\n\n  // Checkout for the current thrower (shown in hero strip for both players)\n  const throwerCheckout = useMemo(() => {\n    if (!isX01 || throwerRemaining > 170 || throwerRemaining <= 0) return null;\n    const routes = suggestCheckouts(throwerRemaining);\n    return routes && routes.length > 0 ? routes : null;\n  }, [isX01, throwerRemaining]);\n\n  const numpadMax = isX01 ? 180 : 999;\n\n  const legsInfo = useMemo(() => {\n    const players = match.players || [];\n    return players.map((p: any) => ({\n      name: p.name || \"Player\",\n      legsWon: p.legsWon || 0,\n    }));\n  }, [match.players]);\n\n  // Only show the showcase when the parent explicitly tells us to AND\n  // the match hasn't progressed yet (no visits recorded).\n  const matchHasVisits = useMemo(() => {\n    return (match.players || []).some((p: any) =>\n      (p.legs || []).some((leg: any) => (leg.visits || []).length > 0),\n    );\n  }, [match.players]);\n  const showStartShowcaseLocal =\n    typeof showStartShowcaseProp === \"boolean\"\n      ? showStartShowcaseProp && !matchHasVisits\n      : false;\n  const setShowStartShowcase = (open: boolean) => {\n    onShowStartShowcaseChange?.(open);\n  };\n\n  const [showNumpad, setShowNumpad] = useState(false);\n  const [numpadValue, setNumpadValue] = useState(\"\");\n  const numpadInputRef = useRef<HTMLInputElement>(null);\n  const [dartsAtDouble, setDartsAtDouble] = useState(0);\n\n  // Show darts-at-double selector when remaining is ‚â§ 60 (checkout range)\n  const showDartsAtDouble =\n    isX01 && isUsersTurn && localRemaining <= 60 && localRemaining > 0;\n\n  // Auto-focus the input when numpad opens\n  useEffect(() => {\n    if (showNumpad && numpadInputRef.current) {\n      numpadInputRef.current.focus();\n    }\n  }, [showNumpad]);\n\n  // Turn timer: tracks how long the opponent has been throwing\n  const [opponentTurnStart, setOpponentTurnStart] = useState<number | null>(\n    null,\n  );\n  const [opponentTurnElapsed, setOpponentTurnElapsed] = useState(0);\n\n  // Track when turn changes to start/stop timer\n  useEffect(() => {\n    if (!isUsersTurn) {\n      // Opponent's turn started\n      setOpponentTurnStart(Date.now());\n    } else {\n      // Our turn - reset\n      setOpponentTurnStart(null);\n      setOpponentTurnElapsed(0);\n    }\n  }, [isUsersTurn]);\n\n  // Update elapsed time every second when opponent is throwing\n  useEffect(() => {\n    if (!opponentTurnStart) return;\n    const interval = setInterval(() => {\n      setOpponentTurnElapsed(\n        Math.floor((Date.now() - opponentTurnStart) / 1000),\n      );\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [opponentTurnStart]);\n\n  // Format seconds as mm:ss\n  const formatTurnTime = (seconds: number) => {\n    const mm = Math.floor(seconds / 60)\n      .toString()\n      .padStart(2, \"0\");\n    const ss = (seconds % 60).toString().padStart(2, \"0\");\n    return `${mm}:${ss}`;\n  };\n\n  const commitVisit = (score: number, darts: number, meta?: any) => {\n    const p = match.players?.[match.currentPlayerIdx];\n    const leg = p?.legs?.[p.legs.length - 1];\n    const prevRemaining = leg ? leg.totalScoreRemaining : match.startingScore;\n    const numericScore = typeof score === \"number\" ? score : 0;\n    let newRemaining = prevRemaining - numericScore;\n    if (!Number.isFinite(newRemaining) || newRemaining < 0) newRemaining = 0;\n    const isCheckout = newRemaining === 0 && numericScore > 0;\n\n    // Professional darts double tracking ‚Äî enrich meta if not already set\n    const visitMeta = { visitTotal: numericScore, ...(meta || {}) };\n    if (visitMeta.doubleWindowDarts == null) {\n      let dwd = 0;\n      if (prevRemaining <= 50) {\n        dwd = darts;\n      } else if (prevRemaining <= 170) {\n        dwd = isCheckout ? 1 : newRemaining <= 50 ? 1 : 0;\n      }\n      visitMeta.doubleWindowDarts = dwd;\n    }\n    if (visitMeta.finishedByDouble == null) {\n      visitMeta.finishedByDouble = isCheckout;\n    }\n\n    if (onCommitVisit) {\n      onCommitVisit(numericScore, darts, visitMeta);\n      return;\n    }\n\n    if (callerEnabled) {\n      const playerName = p?.name || getPreferredUserName(user, \"Player\");\n      try {\n        sayScore(playerName, numericScore, newRemaining, callerVoice, {\n          volume: callerVolume,\n          checkoutOnly: speakCheckoutOnly,\n        });\n      } catch {}\n    }\n\n    match.addVisit(numericScore, darts, visitMeta);\n    if (isCheckout) {\n      match.endLeg(numericScore);\n    } else {\n      match.nextPlayer();\n    }\n    onStateChange?.();\n  };\n\n  // Around the Clock hit/miss handlers (must be after commitVisit)\n  // onDartHit: immediately advance target index for this player (single dart)\n  const handleAtcDartHit = useCallback(() => {\n    const playerIdx = match.currentPlayerIdx ?? localPlayerIndex;\n    setAtcTargets((prev) => ({\n      ...prev,\n      [playerIdx]: (prev[playerIdx] ?? 0) + 1,\n    }));\n  }, [match.currentPlayerIdx, localPlayerIndex]);\n\n  // onTurnComplete: called after all 3 darts ‚Äî commit the visit with totals\n  const handleAtcTurnComplete = useCallback(\n    (hits: number, totalValue: number) => {\n      commitVisit(totalValue, 3, {\n        visitTotal: totalValue,\n        atcHit: hits > 0,\n        atcHits: hits,\n      });\n    },\n    [],\n  );\n\n  const deriveWinningLabel = useCallback(() => {\n    try {\n      const legs: Array<{ ts: number; visit?: any; player?: any }> = [];\n      (match.players || []).forEach((p: any) => {\n        (p.legs || []).forEach((leg: any) => {\n          if (leg?.finished) {\n            const lastVisit = (leg.visits || []).slice(-1)[0];\n            legs.push({\n              ts: leg.endTime || Date.now(),\n              visit: lastVisit,\n              player: p,\n            });\n          }\n        });\n      });\n      if (!legs.length) return null;\n      const latest = legs.sort((a, b) => b.ts - a.ts)[0];\n      const entry = (latest.visit?.entries || []).slice(-1)[0];\n      if (entry?.label) return entry.label as string;\n      if (entry?.ring === \"DOUBLE\" && typeof entry?.value === \"number\")\n        return `Double ${entry.value / 2}`;\n      if (typeof latest.visit?.visitTotal === \"number\")\n        return `Checkout ${latest.visit.visitTotal}`;\n    } catch {}\n    return null;\n  }, [match.players]);\n\n  useEffect(() => {\n    if (match.inProgress) {\n      setWinningShot(null);\n      return;\n    }\n    if (!winningShot?.label) {\n      const derived = deriveWinningLabel();\n      if (derived) setWinningShot((prev) => ({ ...prev, label: derived }));\n    }\n  }, [match.inProgress, deriveWinningLabel, winningShot?.label]);\n\n  return (\n    <div className=\"ndn-game-shell ndn-page ndn-ingame-active relative\">\n      {/* ‚îÄ‚îÄ Ambient background glow ‚îÄ‚îÄ */}\n      <div className=\"pointer-events-none absolute inset-0 overflow-hidden\">\n        <div className=\"absolute -top-32 -left-32 w-96 h-96 rounded-full bg-indigo-600/10 blur-[120px]\" />\n        <div className=\"absolute -bottom-32 -right-32 w-96 h-96 rounded-full bg-amber-500/8 blur-[120px]\" />\n      </div>\n\n      {showStartShowcaseLocal && (\n        <MatchStartShowcase\n          open={showStartShowcaseLocal}\n          players={(match.players || []) as any}\n          onDone={() => {\n            setShowStartShowcase(false);\n          }}\n          onRequestClose={() => {\n            setShowStartShowcase(false);\n          }}\n          showCalibrationDefault={true}\n        />\n      )}\n\n      {/* ‚îÄ‚îÄ Premium sticky header ‚îÄ‚îÄ */}\n      <div className=\"z-20 mb-1 shrink-0\">\n        <div className=\"relative flex items-center justify-between gap-2 px-3 sm:px-5 py-1.5 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-lg\">\n          <div className=\"pointer-events-none absolute inset-0 rounded-2xl bg-gradient-to-r from-indigo-500/10 via-transparent to-amber-500/10\" />\n          <div className=\"flex items-center gap-3 text-sm leading-none z-10\">\n            {isOnline && (\n              <span className=\"px-2.5 py-1 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-[10px] sm:text-xs font-semibold tracking-wide\">\n                üåê Online\n              </span>\n            )}\n            <span className=\"px-3 py-1 rounded-full bg-indigo-500/20 text-indigo-200 border border-indigo-400/30 text-xs font-semibold tracking-wide\">\n              {gameMode}\n              {isX01 ? ` / ${match.startingScore || lastOfflineStart}` : \"\"}\n            </span>\n            {legsInfo.length >= 2 && (\n              <span className=\"font-bold text-white/90 text-sm tabular-nums\">\n                Legs: {legsInfo[0].legsWon} ‚Äì {legsInfo[1].legsWon}\n              </span>\n            )}\n          </div>\n          <div className=\"flex items-center gap-2 z-10\">\n            <PauseTimerBadge />\n            <button\n              className=\"px-4 py-1.5 rounded-xl text-sm font-semibold bg-rose-600/90 hover:bg-rose-500 text-white border border-rose-400/30 shadow-lg shadow-rose-500/20 transition-all\"\n              onClick={() => setShowQuitPause(true)}\n            >\n              ‚è∏ Quit / Pause\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* ‚îÄ‚îÄ Hero scoreboard banner ‚Äî big remaining scores ‚îÄ‚îÄ */}\n      <div className=\"relative mb-1 rounded-2xl border border-white/10 overflow-hidden shrink-0\">\n        {/* Gradient backdrop */}\n        <div className=\"absolute inset-0 bg-gradient-to-r from-indigo-950/80 via-slate-900/90 to-amber-950/80\" />\n        <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_center,rgba(255,255,255,0.03),transparent_70%)]\" />\n\n        <div className=\"relative grid grid-cols-[minmax(0,1fr)_auto_minmax(0,1fr)] items-center py-1.5 px-3 sm:px-4\">\n          {/* Player 1 (local) */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"flex items-center gap-1.5 mb-0.5\">\n              <div\n                className={`text-xs font-bold uppercase tracking-widest ${isUsersTurn ? \"text-emerald-400\" : \"text-slate-400\"}`}\n              >\n                {localPlayer?.name || \"You\"}\n              </div>\n              {isX01 && (\n                <span className=\"text-[10px] font-semibold text-slate-400 tabular-nums\">\n                  ({localPlayer?.legsWon || 0})\n                </span>\n              )}\n              {isUsersTurn && (\n                <span className=\"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse\" />\n              )}\n            </div>\n            <div\n              className={`font-mono text-3xl sm:text-4xl font-black tabular-nums leading-none ${isUsersTurn ? \"text-white\" : \"text-white/60\"}`}\n            >\n              {heroValues.local.primary}\n            </div>\n            <div className=\"flex items-center gap-2 mt-0.5 text-[10px]\">\n              <span className=\"uppercase tracking-wider text-slate-500 font-medium\">\n                {heroValues.local.primaryLabel}\n              </span>\n              {playerStats.local.avg3 > 0 && (\n                <span className=\"text-slate-400 tabular-nums\">\n                  Avg: {playerStats.local.avg3.toFixed(1)}\n                </span>\n              )}\n            </div>\n          </div>\n\n          {/* Centre divider ‚Äî VS */}\n          <div className=\"flex flex-col items-center justify-center px-3\">\n            <div className=\"w-px h-3 bg-gradient-to-b from-transparent via-white/20 to-transparent\" />\n            <div className=\"text-xs font-black text-white/30 tracking-widest my-0.5\">\n              VS\n            </div>\n            <div className=\"w-px h-3 bg-gradient-to-b from-transparent via-white/20 to-transparent\" />\n          </div>\n\n          {/* Player 2 (away) */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"flex items-center gap-1.5 mb-0.5\">\n              <div\n                className={`text-xs font-bold uppercase tracking-widest ${!isUsersTurn ? \"text-amber-400\" : \"text-slate-400\"}`}\n              >\n                {awayPlayer?.name || \"Opponent\"}\n              </div>\n              {isX01 && (\n                <span className=\"text-[10px] font-semibold text-slate-400 tabular-nums\">\n                  ({awayPlayer?.legsWon || 0})\n                </span>\n              )}\n              {!isUsersTurn && (\n                <span className=\"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse\" />\n              )}\n            </div>\n            <div\n              className={`font-mono text-3xl sm:text-4xl font-black tabular-nums leading-none ${!isUsersTurn ? \"text-white\" : \"text-white/60\"}`}\n            >\n              {heroValues.away.primary}\n            </div>\n            <div className=\"flex items-center gap-2 mt-0.5 text-[10px]\">\n              <span className=\"uppercase tracking-wider text-slate-500 font-medium\">\n                {heroValues.away.primaryLabel}\n              </span>\n              {playerStats.away.avg3 > 0 && (\n                <span className=\"text-slate-400 tabular-nums\">\n                  Avg: {playerStats.away.avg3.toFixed(1)}\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Checkout suggestion strip ‚Äî shows for whoever is currently throwing */}\n        {throwerCheckout && (\n          <div\n            className={`relative border-t px-3 py-1 flex items-center gap-2 ${\n              isUsersTurn\n                ? \"border-emerald-400/20 bg-emerald-500/10\"\n                : \"border-amber-400/20 bg-amber-500/10\"\n            }`}\n          >\n            <span\n              className={`text-[10px] sm:text-xs uppercase tracking-wider font-semibold whitespace-nowrap ${\n                isUsersTurn ? \"text-emerald-300/80\" : \"text-amber-300/80\"\n              }`}\n            >\n              Checkout {throwerRemaining}:\n            </span>\n            <div className=\"flex flex-wrap gap-1.5\">\n              {throwerCheckout.map((route: string, i: number) => (\n                <span\n                  key={i}\n                  className={`px-2 py-0.5 rounded-lg text-xs sm:text-sm font-medium ${\n                    isUsersTurn\n                      ? \"bg-emerald-500/20 border border-emerald-400/20 text-emerald-100\"\n                      : \"bg-amber-500/20 border border-amber-400/20 text-amber-100\"\n                  }`}\n                >\n                  {route}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* ‚îÄ‚îÄ Main content ‚Äî camera always visible + turn-sensitive controls ‚îÄ‚îÄ */}\n      <div className=\"flex-1 min-h-0 overflow-y-auto pb-28 sm:pb-20\">\n        <div className=\"flex flex-col gap-2\">\n          {/* Scoreboard + Camera side by side */}\n          <div className=\"grid grid-cols-1 md:grid-cols-[1fr_1fr] gap-2 min-h-0\">\n            {/* Scoreboard ‚Äî left side */}\n            <div className=\"relative rounded-2xl border border-white/10 bg-slate-950/70 shadow-2xl ring-1 ring-white/5 p-2 sm:p-3 overflow-hidden\">\n              <div\n                className={`pointer-events-none absolute inset-0 bg-gradient-to-br ${isUsersTurn ? \"from-emerald-500/[0.03]\" : \"from-white/[0.02]\"} to-transparent`}\n              />\n              <div className=\"flex items-center justify-between mb-2\">\n                <h3 className=\"text-sm font-bold text-white/90 tracking-wide\">\n                  Scoreboard\n                </h3>\n                <div\n                  className={`px-3 py-1 rounded-full text-[10px] sm:text-xs font-semibold ${\n                    isUsersTurn\n                      ? \"bg-emerald-500/20 border border-emerald-400/30 text-emerald-300 animate-pulse\"\n                      : \"bg-amber-500/20 border border-amber-400/30 text-amber-300\"\n                  }`}\n                >\n                  {isUsersTurn\n                    ? \"‚óè Your turn\"\n                    : `${awayPlayer?.name || \"Opponent\"}\\u2019s turn`}\n                </div>\n              </div>\n              <GameScoreboard gameMode={gameMode} players={scoreboardPlayers} />\n            </div>\n\n            {/* Camera ‚Äî right side, only shown for online matches */}\n            {isOnline && (\n              <div className=\"relative rounded-2xl border border-white/10 bg-slate-950/70 shadow-2xl ring-1 ring-white/5 overflow-hidden flex flex-col min-h-0\">\n                <div className=\"flex items-center justify-between px-3 py-1 border-b border-white/5 bg-white/5 shrink-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <div\n                      className={`w-2 h-2 rounded-full shadow-lg animate-pulse ${isUsersTurn ? \"bg-emerald-400 shadow-emerald-400/50\" : \"bg-amber-400 shadow-amber-400/50\"}`}\n                    />\n                    <span className=\"text-xs font-semibold text-white/80\">\n                      {isUsersTurn\n                        ? \"Your Board\"\n                        : `${awayPlayer?.name || \"Opponent\"}\\u2019s Board`}\n                    </span>\n                  </div>\n                  <span\n                    className={`text-[10px] font-medium ${isUsersTurn ? \"text-emerald-300\" : \"text-amber-300\"}`}\n                  >\n                    {isUsersTurn ? \"‚óè Live\" : \"‚óè Waiting\"}\n                  </span>\n                </div>\n                <div className=\"relative flex-1 min-h-0 bg-black\">\n                  <div\n                    className={`h-full ${isUsersTurn || (!remoteStream && !remoteFrame) ? \"\" : \"hidden\"}`}\n                  >\n                    <CameraView hideInlinePanels={true} forceAutoStart={true} />\n                  </div>\n                  {!isUsersTurn && remoteStream && (\n                    <video\n                      ref={remoteVideoRef}\n                      autoPlay\n                      playsInline\n                      muted\n                      className=\"w-full h-full object-contain\"\n                    />\n                  )}\n                  {!isUsersTurn && !remoteStream && remoteFrame && (\n                    <img\n                      id=\"ndn-opponent-frame\"\n                      src={remoteFrame}\n                      alt=\"Opponent board\"\n                      className=\"w-full h-full object-contain\"\n                    />\n                  )}\n                  {!isUsersTurn && !remoteStream && !remoteFrame && (\n                    <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                      <div className=\"text-center\">\n                        <div className=\"text-white/30 text-xs uppercase tracking-wider mb-1\">\n                          Opponent&apos;s camera not available\n                        </div>\n                        <div className=\"text-white/20 text-[10px]\">\n                          Showing your board instead\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Around the Clock ‚Äî opponent's turn */}\n          {!isUsersTurn && isATC && atcDirection && (\n            <AroundTheClockScorer\n              direction={atcDirection}\n              onPickDirection={() => {}}\n              currentTargetIndex={awayAtcIdx}\n              isUsersTurn={false}\n              onTurnComplete={() => {}}\n              onDartHit={() => {}}\n              completed={awayAtcIdx}\n              playerName={awayPlayer?.name || \"Opponent\"}\n            />\n          )}\n\n          {/* Around the Clock ‚Äî user's turn */}\n          {isUsersTurn && isATC && (\n            <AroundTheClockScorer\n              direction={atcDirection}\n              onPickDirection={(dir) => setAtcDirection(dir)}\n              currentTargetIndex={localAtcIdx}\n              isUsersTurn={isUsersTurn}\n              onTurnComplete={handleAtcTurnComplete}\n              onDartHit={handleAtcDartHit}\n              completed={localAtcIdx}\n              playerName={localPlayer?.name || \"You\"}\n            />\n          )}\n\n          {/* X01 and other modes: quick score buttons ‚Äî only when user's turn */}\n          {isUsersTurn && !isATC && (\n            <div className=\"flex flex-wrap gap-1.5 justify-center\">\n              {(isX01\n                ? [180, 140, 100, 85, 60, 45, 26, 0]\n                : [100, 80, 60, 45, 26, 20, 10, 0]\n              ).map((v) => (\n                <button\n                  key={v}\n                  className=\"px-3 py-1.5 rounded-lg text-xs font-bold bg-white/5 hover:bg-white/10 active:bg-white/15 border border-white/10 text-white/90 transition-all active:scale-95\"\n                  onClick={() => {\n                    const isFinish = localRemaining - v === 0 && v > 0;\n                    commitVisit(v, 3, {\n                      visitTotal: v,\n                      ...(showDartsAtDouble\n                        ? {\n                            doubleWindowDarts: dartsAtDouble,\n                            finishedByDouble: isFinish,\n                          }\n                        : {}),\n                    });\n                    setDartsAtDouble(0);\n                  }}\n                >\n                  {v}\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Winning shot banner */}\n          {winningShot?.label && (\n            <div className=\"rounded-2xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 text-center\">\n              <span className=\"text-xs text-emerald-400/70 uppercase tracking-wider font-semibold\">\n                {isX01 ? \"Winning Double\" : \"Winning Shot\"}\n              </span>\n              <div className=\"text-lg font-bold text-emerald-200 mt-0.5\">\n                {winningShot.label}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* ‚îÄ‚îÄ Number Pad Modal (X01 and other numpad modes only) ‚îÄ‚îÄ */}\n      {showNumpad && !isATC && (\n        <div\n          className=\"fixed inset-0 z-50 flex items-start justify-center pt-8\"\n          onClick={() => setShowNumpad(false)}\n          onKeyDown={(e) => {\n            if (e.key === \"Escape\") {\n              setShowNumpad(false);\n            }\n          }}\n        >\n          {/* Backdrop */}\n          <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" />\n          {/* Panel */}\n          <div\n            className=\"relative w-full max-w-sm mx-auto rounded-3xl border border-white/10 bg-slate-900/95 backdrop-blur-xl shadow-2xl p-4 sm:p-6 animate-[slideUp_0.2s_ease-out]\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Score input field ‚Äî typeable on both mobile and PC */}\n            <div className=\"mb-4 rounded-2xl bg-black/40 border border-white/10 p-4 text-center\">\n              <div className=\"text-[10px] uppercase tracking-widest text-slate-400 mb-1\">\n                Score\n              </div>\n              {/* Score input ‚Äî auto-focused via useEffect */}\n              <input\n                ref={numpadInputRef}\n                type=\"number\"\n                inputMode=\"numeric\"\n                pattern=\"[0-9]*\"\n                className=\"w-full bg-transparent font-mono text-5xl sm:text-6xl font-black text-white tabular-nums min-h-[3.5rem] leading-none text-center outline-none border-none [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none placeholder:text-white/20\"\n                placeholder=\"0\"\n                value={numpadValue}\n                onChange={(e) => {\n                  const raw = e.target.value.replace(/[^0-9]/g, \"\");\n                  if (raw === \"\" || Number(raw) <= numpadMax) {\n                    setNumpadValue(raw);\n                  }\n                }}\n                onKeyDown={(e) => {\n                  if (e.key === \"ArrowUp\" && showDartsAtDouble) {\n                    e.preventDefault();\n                    setDartsAtDouble((v) => Math.min(3, v + 1));\n                    return;\n                  }\n                  if (e.key === \"ArrowDown\" && showDartsAtDouble) {\n                    e.preventDefault();\n                    setDartsAtDouble((v) => Math.max(0, v - 1));\n                    return;\n                  }\n                  if (e.key === \"Enter\") {\n                    e.preventDefault();\n                    const score = Math.max(\n                      0,\n                      Math.min(numpadMax, Number(numpadValue) || 0),\n                    );\n                    const isFinish = localRemaining - score === 0 && score > 0;\n                    commitVisit(score, 3, {\n                      visitTotal: score,\n                      ...(showDartsAtDouble\n                        ? {\n                            doubleWindowDarts: dartsAtDouble,\n                            finishedByDouble: isFinish,\n                          }\n                        : {}),\n                    });\n                    setNumpadValue(\"\");\n                    setDartsAtDouble(0);\n                    setShowNumpad(false);\n                  }\n                }}\n              />\n              {numpadValue &&\n                checkoutRoutes &&\n                Number(numpadValue) === localRemaining && (\n                  <div className=\"mt-2 text-xs text-emerald-300 font-semibold\">\n                    ‚úì Checkout!\n                  </div>\n                )}\n            </div>\n\n            {/* Darts at double selector in numpad */}\n            {showDartsAtDouble && (\n              <div className=\"mb-3 rounded-xl bg-amber-500/10 border border-amber-400/20 px-3 py-2 flex items-center justify-between select-none\">\n                <span className=\"text-xs font-semibold text-amber-300/80 uppercase tracking-wide\">\n                  Darts at Double\n                </span>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    className=\"w-8 h-8 rounded-lg bg-white/5 hover:bg-white/15 active:bg-white/20 border border-white/10 text-white/80 text-base font-bold transition-all active:scale-90\"\n                    onClick={() => {\n                      setDartsAtDouble((v) => Math.max(0, v - 1));\n                      numpadInputRef.current?.focus();\n                    }}\n                    aria-label=\"Decrease darts at double\"\n                  >\n                    ‚àí\n                  </button>\n                  <span className=\"w-8 text-center font-mono text-2xl font-black text-amber-300 tabular-nums\">\n                    {dartsAtDouble}\n                  </span>\n                  <button\n                    className=\"w-8 h-8 rounded-lg bg-white/5 hover:bg-white/15 active:bg-white/20 border border-white/10 text-white/80 text-base font-bold transition-all active:scale-90\"\n                    onClick={() => {\n                      setDartsAtDouble((v) => Math.min(3, v + 1));\n                      numpadInputRef.current?.focus();\n                    }}\n                    aria-label=\"Increase darts at double\"\n                  >\n                    +\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Numpad grid */}\n            <div className=\"grid grid-cols-3 gap-2 mb-3\">\n              {[1, 2, 3, 4, 5, 6, 7, 8, 9].map((n) => (\n                <button\n                  key={n}\n                  className=\"py-3.5 rounded-xl text-xl font-bold bg-white/5 hover:bg-white/10 active:bg-white/20 border border-white/10 text-white transition-all active:scale-95\"\n                  onClick={() => {\n                    const next = numpadValue + String(n);\n                    if (Number(next) <= numpadMax) setNumpadValue(next);\n                    numpadInputRef.current?.focus();\n                  }}\n                >\n                  {n}\n                </button>\n              ))}\n              {/* Bottom row: backspace, 0, submit */}\n              <button\n                className=\"py-3.5 rounded-xl text-lg font-bold bg-white/5 hover:bg-white/10 active:bg-white/20 border border-white/10 text-white/60 transition-all active:scale-95\"\n                onClick={() => {\n                  setNumpadValue((v) => v.slice(0, -1));\n                  numpadInputRef.current?.focus();\n                }}\n              >\n                ‚å´\n              </button>\n              <button\n                className=\"py-3.5 rounded-xl text-xl font-bold bg-white/5 hover:bg-white/10 active:bg-white/20 border border-white/10 text-white transition-all active:scale-95\"\n                onClick={() => {\n                  const next = numpadValue + \"0\";\n                  if (Number(next) <= numpadMax) setNumpadValue(next);\n                  numpadInputRef.current?.focus();\n                }}\n              >\n                0\n              </button>\n              <button\n                className=\"py-3.5 rounded-xl text-lg font-bold bg-emerald-600 hover:bg-emerald-500 active:bg-emerald-400 border border-emerald-400/30 text-white shadow-lg shadow-emerald-600/30 transition-all active:scale-95\"\n                onClick={() => {\n                  const score = Math.max(\n                    0,\n                    Math.min(numpadMax, Number(numpadValue) || 0),\n                  );\n                  const isFinish = localRemaining - score === 0 && score > 0;\n                  commitVisit(score, 3, {\n                    visitTotal: score,\n                    ...(showDartsAtDouble\n                      ? {\n                          doubleWindowDarts: dartsAtDouble,\n                          finishedByDouble: isFinish,\n                        }\n                      : {}),\n                  });\n                  setNumpadValue(\"\");\n                  setDartsAtDouble(0);\n                  setShowNumpad(false);\n                }}\n              >\n                ‚úì\n              </button>\n            </div>\n\n            {/* Quick buttons inside numpad */}\n            <div className=\"flex flex-wrap gap-2 justify-center mb-3\">\n              {(isX01\n                ? [180, 140, 100, 85, 60, 45, 26, 0]\n                : [100, 80, 60, 45, 26, 20, 10, 0]\n              ).map((v) => (\n                <button\n                  key={v}\n                  className=\"px-3 py-1.5 rounded-lg text-xs font-bold bg-white/5 hover:bg-white/10 border border-white/10 text-white/80 transition-all active:scale-95\"\n                  onClick={() => {\n                    const isFinish = localRemaining - v === 0 && v > 0;\n                    commitVisit(v, 3, {\n                      visitTotal: v,\n                      ...(showDartsAtDouble\n                        ? {\n                            doubleWindowDarts: dartsAtDouble,\n                            finishedByDouble: isFinish,\n                          }\n                        : {}),\n                    });\n                    setNumpadValue(\"\");\n                    setDartsAtDouble(0);\n                    setShowNumpad(false);\n                  }}\n                >\n                  {v}\n                </button>\n              ))}\n            </div>\n\n            {/* Cancel */}\n            <button\n              className=\"w-full py-2.5 rounded-xl text-sm font-semibold text-white/50 hover:text-white/80 hover:bg-white/5 transition-all\"\n              onClick={() => setShowNumpad(false)}\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* ‚îÄ‚îÄ Fixed bottom score input bar (X01 and other numpad modes only) ‚îÄ‚îÄ */}\n      {!isATC && !showNumpad && !showQuitPause && !paused && (\n        <div\n          className=\"fixed bottom-0 left-0 right-0 z-30 bg-slate-900/95 backdrop-blur-xl border-t border-white/10 px-3 py-2 safe-bottom\"\n          style={{\n            paddingBottom: \"max(0.5rem, env(safe-area-inset-bottom, 0px))\",\n          }}\n        >\n          <div className=\"flex items-center gap-2 max-w-lg mx-auto\">\n            <input\n              type=\"number\"\n              inputMode=\"numeric\"\n              pattern=\"[0-9]*\"\n              className={`flex-1 border rounded-xl px-4 py-3 font-mono text-xl font-bold text-center outline-none [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none placeholder:text-white/30 ${\n                isUsersTurn\n                  ? \"bg-white/5 border-white/15 text-white focus:border-emerald-400/50 focus:ring-1 focus:ring-emerald-400/30\"\n                  : \"bg-white/3 border-white/10 text-white/50\"\n              }`}\n              placeholder={\n                isUsersTurn ? \"Type score...\" : \"Waiting for opponent...\"\n              }\n              value={numpadValue}\n              disabled={!isUsersTurn}\n              onChange={(e) => {\n                const raw = e.target.value.replace(/[^0-9]/g, \"\");\n                if (raw === \"\" || Number(raw) <= numpadMax) {\n                  setNumpadValue(raw);\n                }\n              }}\n              onKeyDown={(e) => {\n                if (e.key === \"ArrowUp\" && showDartsAtDouble) {\n                  e.preventDefault();\n                  setDartsAtDouble((v) => Math.min(3, v + 1));\n                  return;\n                }\n                if (e.key === \"ArrowDown\" && showDartsAtDouble) {\n                  e.preventDefault();\n                  setDartsAtDouble((v) => Math.max(0, v - 1));\n                  return;\n                }\n                if (e.key === \"Enter\") {\n                  e.preventDefault();\n                  const score = Math.max(\n                    0,\n                    Math.min(numpadMax, Number(numpadValue) || 0),\n                  );\n                  if (numpadValue !== \"\") {\n                    const isFinish = localRemaining - score === 0 && score > 0;\n                    commitVisit(score, 3, {\n                      visitTotal: score,\n                      ...(showDartsAtDouble\n                        ? {\n                            doubleWindowDarts: dartsAtDouble,\n                            finishedByDouble: isFinish,\n                          }\n                        : {}),\n                    });\n                    setNumpadValue(\"\");\n                    setDartsAtDouble(0);\n                  }\n                }\n              }}\n            />\n            {showDartsAtDouble && (\n              <div className=\"flex flex-col items-center gap-0.5 select-none\">\n                <div className=\"text-[9px] uppercase tracking-wider text-amber-300/70 font-semibold whitespace-nowrap\">\n                  Darts@Dbl\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <button\n                    className=\"w-7 h-7 rounded-lg bg-white/5 hover:bg-white/15 active:bg-white/20 border border-white/10 text-white/80 text-sm font-bold transition-all active:scale-90\"\n                    onClick={() => setDartsAtDouble((v) => Math.max(0, v - 1))}\n                    aria-label=\"Decrease darts at double\"\n                  >\n                    ‚àí\n                  </button>\n                  <span className=\"w-6 text-center font-mono text-lg font-black text-amber-300 tabular-nums\">\n                    {dartsAtDouble}\n                  </span>\n                  <button\n                    className=\"w-7 h-7 rounded-lg bg-white/5 hover:bg-white/15 active:bg-white/20 border border-white/10 text-white/80 text-sm font-bold transition-all active:scale-90\"\n                    onClick={() => setDartsAtDouble((v) => Math.min(3, v + 1))}\n                    aria-label=\"Increase darts at double\"\n                  >\n                    +\n                  </button>\n                </div>\n              </div>\n            )}\n            <button\n              className={`px-5 py-3 rounded-xl text-sm font-bold text-white border transition-all active:scale-95 whitespace-nowrap ${\n                isUsersTurn && numpadValue !== \"\"\n                  ? \"bg-emerald-600 hover:bg-emerald-500 active:bg-emerald-400 border-emerald-400/30 shadow-lg shadow-emerald-600/20\"\n                  : \"bg-slate-700 border-white/10 opacity-50 cursor-not-allowed\"\n              }`}\n              disabled={!isUsersTurn || numpadValue === \"\"}\n              onClick={() => {\n                const score = Math.max(\n                  0,\n                  Math.min(numpadMax, Number(numpadValue) || 0),\n                );\n                const isFinish = localRemaining - score === 0 && score > 0;\n                commitVisit(score, 3, {\n                  visitTotal: score,\n                  ...(showDartsAtDouble\n                    ? {\n                        doubleWindowDarts: dartsAtDouble,\n                        finishedByDouble: isFinish,\n                      }\n                    : {}),\n                });\n                setNumpadValue(\"\");\n                setDartsAtDouble(0);\n              }}\n            >\n              Submit\n            </button>\n            {isUsersTurn && (\n              <button\n                className=\"px-3 py-3 rounded-xl text-sm font-semibold bg-white/5 hover:bg-white/10 text-white/70 border border-white/10 transition-all\"\n                onClick={() => {\n                  setNumpadValue(\"\");\n                  setShowNumpad(true);\n                }}\n              >\n                ‚å®\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* ‚îÄ‚îÄ Quit / Pause modal ‚îÄ‚îÄ */}\n      {showQuitPause && (\n        <PauseQuitModal\n          onClose={() => setShowQuitPause(false)}\n          onQuit={() => {\n            setShowQuitPause(false);\n            if (onQuitProp) {\n              onQuitProp();\n            } else {\n              try {\n                match.endGame();\n              } catch {}\n              try {\n                window.dispatchEvent(new Event(\"ndn:match-quit\"));\n              } catch {}\n            }\n          }}\n          onPause={() => {\n            try {\n              setPaused(true, null, localPlayerName);\n            } catch {}\n            try {\n              broadcastMessage({\n                type: \"pause\",\n                pauseStartedAt: Date.now(),\n                pauseInitiator: localPlayerName,\n              });\n            } catch {}\n            // Notify opponent via WS (online matches)\n            if (onPauseProp) onPauseProp();\n            setShowQuitPause(false);\n          }}\n        />\n      )}\n\n      <PauseOverlay\n        localPlayerName={localPlayerName}\n        onResume={() => {\n          setPaused(false, null);\n          try {\n            broadcastMessage({ type: \"unpause\" });\n          } catch {}\n          // Notify opponent via WS (online matches)\n          if (onResumeProp) onResumeProp();\n        }}\n        onDurationSelected={(minutes, endsAt) => {\n          // Notify opponent via WS when duration is selected (online matches)\n          if (onPauseDurationSelectedProp)\n            onPauseDurationSelectedProp(minutes, endsAt);\n        }}\n      />\n    </div>\n  );\n}\n","import ResizableModal from \"./ui/ResizableModal.js\";\nimport type { Player } from \"../store/match.js\";\nimport { getHeadToHeadLegDiff } from \"../store/profileStats.js\";\nimport BarChart from \"./BarChart.js\";\n\nconst MATCH_BUCKETS = [\n  { min: 0, max: 39, label: \"0+\" },\n  { min: 40, max: 59, label: \"40+\" },\n  { min: 60, max: 79, label: \"60+\" },\n  { min: 80, max: 99, label: \"80+\" },\n  { min: 100, max: 119, label: \"100+\" },\n  { min: 120, max: 139, label: \"120+\" },\n  { min: 140, max: 179, label: \"140+\" },\n  { min: 180, max: 180, label: \"180\" },\n] as const;\n\nfunction computeScoreDistribution(\n  p: Player,\n): { label: string; value: number }[] {\n  const counts = new Array(MATCH_BUCKETS.length).fill(0);\n  for (const L of p.legs || []) {\n    for (const v of L.visits || []) {\n      const score = v?.score || (v as any)?.visitTotal || 0;\n      for (let i = MATCH_BUCKETS.length - 1; i >= 0; i--) {\n        if (score >= MATCH_BUCKETS[i].min && score <= MATCH_BUCKETS[i].max) {\n          counts[i]++;\n          break;\n        }\n      }\n    }\n  }\n  return MATCH_BUCKETS.map((b, i) => ({ label: b.label, value: counts[i] }));\n}\n\nfunction computeTotals(p: Player) {\n  let points = 0;\n  let darts = 0;\n  let bestLeg: number | null = null;\n  let worstLeg: number | null = null;\n  let oneEighties = 0;\n  let oneForties = 0;\n  let tons = 0; // 100+\n  let highestVisit = 0;\n  let totalVisits = 0;\n  let checkoutAttempts = 0;\n  let checkoutsHit = 0;\n  let firstNineDarts = 0;\n  let firstNinePoints = 0;\n\n  for (const L of p.legs || []) {\n    points += L.totalScoreStart - L.totalScoreRemaining;\n    const legDarts = (L.visits || []).reduce((a, v) => a + (v.darts || 0), 0);\n    darts += legDarts;\n    if (L.finished) {\n      if (bestLeg === null || L.dartsThrown < bestLeg) bestLeg = L.dartsThrown;\n      if (worstLeg === null || L.dartsThrown > worstLeg)\n        worstLeg = L.dartsThrown;\n    }\n    // Count 180s, 140+, 100+ and track highest visit\n    let legDartsCount = 0;\n    for (const v of L.visits || []) {\n      const score = v?.score || v?.visitTotal || 0;\n      totalVisits++;\n      if (score === 180) oneEighties += 1;\n      if (score >= 140 && score < 180) oneForties += 1;\n      if (score >= 100) tons += 1;\n      if (score > highestVisit) highestVisit = score;\n\n      // First 9 darts average (first 3 visits = 9 darts)\n      if (legDartsCount < 9) {\n        firstNineDarts += Math.min(v.darts || 3, 9 - legDartsCount);\n        firstNinePoints += score;\n      }\n      legDartsCount += v.darts || 3;\n\n      // Checkout tracking\n      if (v.doubleWindowDarts) checkoutAttempts += v.doubleWindowDarts;\n      if (v.finishedByDouble) checkoutsHit += 1;\n    }\n  }\n  const threeDA = darts > 0 ? (points / darts) * 3 : 0;\n  const firstNineAvg =\n    firstNineDarts > 0 ? (firstNinePoints / firstNineDarts) * 3 : 0;\n  const checkoutPct =\n    checkoutAttempts > 0 ? (checkoutsHit / checkoutAttempts) * 100 : 0;\n\n  return {\n    points,\n    darts,\n    threeDA,\n    bestLeg,\n    worstLeg,\n    oneEighties,\n    oneForties,\n    tons,\n    highestVisit,\n    totalVisits,\n    firstNineAvg,\n    checkoutAttempts,\n    checkoutsHit,\n    checkoutPct,\n  };\n}\n\nexport default function MatchSummaryModal({\n  open,\n  onClose,\n  title = \"Match Summary\",\n  players,\n  centerScore,\n  doublesStats,\n  allowRematch,\n  onRematch,\n  winnerName,\n}: {\n  open: boolean;\n  onClose: () => void;\n  title?: string;\n  players: Player[];\n  centerScore?: string;\n  doublesStats?: Record<\n    string,\n    { dartsAtDouble?: number; doublesHit?: number }\n  >;\n  allowRematch?: boolean;\n  onRematch?: () => void;\n  winnerName?: string;\n}) {\n  if (!open) return null;\n\n  const cards = players.map((p, idx) => {\n    const t = computeTotals(p);\n    const distribution = computeScoreDistribution(p);\n    const dbl = doublesStats?.[p.id] || {};\n    const att = Math.max(\n      0,\n      Number(dbl.dartsAtDouble || t.checkoutAttempts || 0),\n    );\n    const hit = Math.max(0, Number(dbl.doublesHit || t.checkoutsHit || 0));\n    const pct = att > 0 ? Math.round((hit / att) * 100) : null;\n    // Head-to-head leg difference vs the other player\n    const opponent = players[1 - idx];\n    const h2h = opponent ? getHeadToHeadLegDiff(p.name, opponent.name) : null;\n    const legDiff = h2h && h2h.played ? h2h.diffA : 0;\n    const legDiffStr = `${legDiff > 0 ? \"+\" : \"\"}${legDiff}`;\n    return {\n      id: p.id,\n      name: p.name,\n      legsWon: p.legsWon,\n      ...t,\n      distribution,\n      dartsAtDouble: att,\n      doublesHit: hit,\n      doublePct: pct,\n      legDiffStr,\n    };\n  });\n\n  // Determine winner\n  const winner =\n    winnerName ||\n    (cards.length === 2 && cards[0].legsWon !== cards[1].legsWon\n      ? cards[0].legsWon > cards[1].legsWon\n        ? cards[0].name\n        : cards[1].name\n      : null);\n\n  return (\n    <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[120] p-4\">\n      <ResizableModal\n        storageKey=\"ndn:modal:match-summary\"\n        className=\"ndn-modal w-full relative overflow-hidden\"\n        defaultWidth={960}\n        defaultHeight={780}\n        minWidth={640}\n        minHeight={520}\n        maxWidth={1400}\n        maxHeight={1000}\n        initialFitHeight\n      >\n        {/* Winner Banner */}\n        {winner && (\n          <div className=\"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500/20 via-yellow-400/30 to-amber-500/20 py-3 text-center border-b border-yellow-400/30\">\n            <div className=\"text-2xl font-black text-yellow-300 tracking-tight\">\n              üèÜ {winner} WINS! üèÜ\n            </div>\n          </div>\n        )}\n\n        <div className={winner ? \"pt-14\" : \"\"}>\n          <h3 className=\"text-2xl font-extrabold mb-1 text-center\">{title}</h3>\n          <div className=\"text-sm opacity-80 mb-4 text-center\">\n            {players.map((p) => p.name).join(\" vs \")}\n          </div>\n\n          {/* Score Display */}\n          <div className=\"flex items-center justify-center gap-6 mb-6\">\n            {cards[0] && (\n              <div\n                className={`text-5xl font-black ${cards[0].legsWon > (cards[1]?.legsWon || 0) ? \"text-emerald-400\" : \"text-white\"}`}\n              >\n                {cards[0].legsWon}\n              </div>\n            )}\n            <div className=\"text-3xl font-bold text-white/50\">‚Äì</div>\n            {cards[1] && (\n              <div\n                className={`text-5xl font-black ${cards[1].legsWon > (cards[0]?.legsWon || 0) ? \"text-emerald-400\" : \"text-white\"}`}\n              >\n                {cards[1].legsWon}\n              </div>\n            )}\n          </div>\n\n          {/* Player Stats Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n            {cards.map((card, idx) => (\n              <div\n                key={card.id}\n                className={`p-4 rounded-2xl border ${\n                  card.legsWon > (cards[1 - idx]?.legsWon || 0)\n                    ? \"bg-emerald-500/10 border-emerald-400/30\"\n                    : \"bg-white/5 border-white/10\"\n                }`}\n              >\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"text-lg font-bold\">{card.name}</div>\n                  {card.legsWon > (cards[1 - idx]?.legsWon || 0) && (\n                    <span className=\"text-xs px-2 py-1 rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-400/30\">\n                      Winner\n                    </span>\n                  )}\n                </div>\n\n                {/* Key Stats */}\n                <div className=\"grid grid-cols-3 gap-2 mb-3\">\n                  <div className=\"p-2 rounded-lg bg-white/5 text-center\">\n                    <div className=\"text-2xl font-bold text-indigo-300\">\n                      {card.threeDA.toFixed(1)}\n                    </div>\n                    <div className=\"text-[10px] opacity-70\">3-Dart Avg</div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 text-center\">\n                    <div className=\"text-2xl font-bold text-amber-300\">\n                      {card.firstNineAvg.toFixed(1)}\n                    </div>\n                    <div className=\"text-[10px] opacity-70\">First 9 Avg</div>\n                  </div>\n                  <div className=\"p-2 rounded-lg bg-white/5 text-center\">\n                    <div className=\"text-2xl font-bold text-emerald-300\">\n                      {card.doublePct !== null ? `${card.doublePct}%` : \"‚Äî\"}\n                    </div>\n                    <div className=\"text-[10px] opacity-70\">Checkout %</div>\n                  </div>\n                </div>\n\n                {/* Detailed Stats Grid */}\n                <div className=\"grid grid-cols-4 gap-2 text-xs\">\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div className=\"font-bold text-rose-300\">\n                      {card.oneEighties}\n                    </div>\n                    <div className=\"opacity-60\">180's</div>\n                  </div>\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div className=\"font-bold\">{card.oneForties}</div>\n                    <div className=\"opacity-60\">140+</div>\n                  </div>\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div className=\"font-bold\">{card.tons}</div>\n                    <div className=\"opacity-60\">100+</div>\n                  </div>\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div className=\"font-bold\">{card.highestVisit}</div>\n                    <div className=\"opacity-60\">High</div>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-5 gap-2 text-xs mt-2\">\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div className=\"font-bold\">{card.bestLeg || \"‚Äî\"}</div>\n                    <div className=\"opacity-60\">Best Leg</div>\n                  </div>\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div className=\"font-bold\">{card.worstLeg || \"‚Äî\"}</div>\n                    <div className=\"opacity-60\">Worst Leg</div>\n                  </div>\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div className=\"font-bold\">{card.darts}</div>\n                    <div className=\"opacity-60\">Darts</div>\n                  </div>\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div className=\"font-bold\">{card.dartsAtDouble}</div>\n                    <div className=\"opacity-60\">At Double</div>\n                  </div>\n                  <div className=\"p-1.5 rounded bg-white/5 text-center\">\n                    <div\n                      className={`font-bold ${card.legDiffStr.startsWith(\"+\") ? \"text-emerald-300\" : card.legDiffStr.startsWith(\"-\") ? \"text-rose-300\" : \"\"}`}\n                    >\n                      {card.legDiffStr}\n                    </div>\n                    <div className=\"opacity-60\">Leg Diff</div>\n                  </div>\n                </div>\n\n                {/* Score Distribution */}\n                <div className=\"mt-3\">\n                  <div className=\"text-[10px] opacity-60 mb-1 text-center\">\n                    Score Distribution\n                  </div>\n                  <BarChart\n                    data={card.distribution}\n                    height={90}\n                    barWidth={20}\n                    gap={3}\n                    showValues\n                  />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"grid grid-cols-2 gap-3 mt-4\">\n          <button\n            className=\"btn bg-slate-700 hover:bg-slate-600 py-3 text-sm font-semibold\"\n            onClick={onClose}\n          >\n            Close\n          </button>\n          {allowRematch && (\n            <button\n              className=\"btn bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 py-3 text-sm font-semibold\"\n              onClick={onRematch}\n            >\n              üîÑ Rematch\n            </button>\n          )}\n        </div>\n      </ResizableModal>\n    </div>\n  );\n}\n","export function openMatchWindow() {\n  // No-op: the in-game UI now renders inline via InGameShell,\n  // so we no longer open a separate browser window.\n}\n"],"names":["ATC_ORDER_REV","ATC_ORDER","targetLabel","n","AroundTheClockScorer","direction","onPickDirection","currentTargetIndex","isUsersTurn","onTurnComplete","onDartHit","completed","playerName","order","total","finished","darts","setDarts","useState","dartsThrown","d","dartsHit","turnHitValues","setTurnHitValues","liveTargetIndex","liveTarget","resetTurn","useCallback","recordDart","result","nextDarts","hitVal","prev","totalHits","totalVal","a","b","jsxs","jsx","pct","upcoming","allDartsThrown","i","t","InGameShell","user","showStartShowcaseProp","onShowStartShowcaseChange","onCommitVisit","onQuitProp","onPauseProp","onResumeProp","onPauseDurationSelectedProp","onStateChange","localPlayerIndexOverride","gameModeOverride","isOnline","remoteStream","remoteFrameProp","match","useMatch","useUserSettings","s","useMatchControl","usePendingVisit","winningShot","setWinningShot","remoteFrame","remoteVideoRef","useRef","useEffect","v","lastOfflineStart","settingsUser","localPlayerName","getPreferredUserName","resolvedLocalIndex","p","localPlayerIndex","localPlayer","localLeg","localRemaining","awayIdx","_p","idx","awayPlayer","awayLeg","awayRemaining","playerStats","useMemo","compute","pts","L","lastV","throwerRemaining","gameMode","isX01","scoreboardPlayers","useOnlineGameStats","isATC","atcDirection","setAtcDirection","atcTargets","setAtcTargets","localAtcIdx","awayAtcIdx","heroValues","forPlayer","sbIdx","sb","leg","pIdx","tIdx","tgt","label","lives","callerEnabled","callerVoice","callerVolume","speakCheckoutOnly","showQuitPause","setShowQuitPause","setPaused","paused","pauseEndsAt","pauseNow","setPauseNow","now","checkoutRoutes","routes","suggestCheckouts","throwerCheckout","numpadMax","legsInfo","matchHasVisits","showStartShowcaseLocal","setShowStartShowcase","open","showNumpad","setShowNumpad","numpadValue","setNumpadValue","numpadInputRef","dartsAtDouble","setDartsAtDouble","showDartsAtDouble","opponentTurnStart","setOpponentTurnStart","opponentTurnElapsed","setOpponentTurnElapsed","interval","commitVisit","score","meta","prevRemaining","numericScore","newRemaining","isCheckout","visitMeta","dwd","sayScore","handleAtcDartHit","playerIdx","handleAtcTurnComplete","hits","totalValue","deriveWinningLabel","legs","lastVisit","latest","entry","derived","MatchStartShowcase","PauseTimerBadge","route","GameScoreboard","CameraView","dir","isFinish","e","raw","next","PauseQuitModal","broadcastMessage","PauseOverlay","minutes","endsAt","MATCH_BUCKETS","computeScoreDistribution","counts","computeTotals","points","bestLeg","worstLeg","oneEighties","oneForties","tons","highestVisit","totalVisits","checkoutAttempts","checkoutsHit","firstNineDarts","firstNinePoints","legDarts","legDartsCount","threeDA","firstNineAvg","checkoutPct","MatchSummaryModal","onClose","title","players","centerScore","doublesStats","allowRematch","onRematch","winnerName","cards","distribution","dbl","att","hit","opponent","h2h","getHeadToHeadLegDiff","legDiff","legDiffStr","winner","ResizableModal","card","BarChart","openMatchWindow"],"mappings":"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"}