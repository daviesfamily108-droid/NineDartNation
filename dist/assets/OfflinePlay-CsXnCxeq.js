import{j as e,u as al,i as Or,k as rl,e as il,l as ll,s as cl,m as Cs,n as Ct,o as Hn,p as Ds,M as ol,r as Vr,q as E,t as Un,v as $r,w as Kr,x as _r,R as Qe,P as Wr,G as Ye,y as dl,z as ul,h as ml,C as xl,B as Gr,A as hl,D as fl}from"./index-zYyjKDd0.js";import{r as a}from"./ui-HJtpxRqe.js";import{u as Ie,A as J,P as pl}from"./aroundTheClock-BzZ4LFMk.js";import{S as bl}from"./ScoreNumberPad-LPiXF1e9.js";import{f as gl}from"./stats-X3jz_E9o.js";import"./vendor-D3F3s8fL.js";const Tt=[...Array.from({length:20},(s,i)=>({label:`D${i+1}`,score:(i+1)*2})),{label:"DBULL",score:50,isBull:!0}];function vl(s,i){const o=Tt[i];return!!o&&s===o.score}function Dt(s){const i=s.trim().toUpperCase();if(!i)return null;if(i==="50"||i==="BULL"||i==="DBULL"||i==="IBULL")return 50;if(i==="25"||i==="OBULL")return 25;const o=i.match(/^(S|D|T)?\s*(\d{1,2})$/);if(!o)return null;const x=o[1]||"S",u=parseInt(o[2],10);return u<1||u>20?null:u*(x==="S"?1:x==="D"?2:3)}const Xn=[20,19,18,17,16,15,25];function On(){const s={};return Xn.forEach(i=>{s[i]=0}),{marks:s,points:0}}function jl(s,i,o,x,u=()=>!1){let m=null,p=0;if(o==="BULL"||o==="INNER_BULL"||i===25||i===50)m=25,p=o==="INNER_BULL"||i===50?2:1;else if(typeof x=="number"&&x>=15&&x<=20)m=x,o==="TRIPLE"?p=3:o==="DOUBLE"?p=2:p=1;else if(i){const xe=[20,19,18,17,16,15];for(const Le of xe){if(i===Le){m=Le,p=1;break}if(i===Le*2){m=Le,p=2;break}if(i===Le*3){m=Le,p=3;break}}!m&&(i===25||i===50)&&(m=25,p=i===50?2:1)}if(!m)return 0;const F=s.marks[m],Ze=Math.max(0,3-F),Ne=Math.min(Ze,p),ae=Math.max(0,p-Ne),Te=F+Ne;s.marks[m]=Te>3?3:Te;let _=0;return ae>0&&!u(m)&&(m===25?o==="INNER_BULL"?_+=50*ae:_+=25*ae:_+=m*ae),s.points+=_,_}function Nl(s){return Xn.every(i=>(s.marks[i]||0)>=3)}function Vn(){return{round:1,score:0,finished:!1,shanghaiAchieved:!1,turnHits:{singles:0,doubles:0,triples:0}}}function yl(s){return s.round}function Sl(s,i,o,x){if(s.finished)return 0;const u=yl(s);let m=0;return typeof x=="number"&&x===u?o==="TRIPLE"?(m=u*3,s.turnHits.triples++):o==="DOUBLE"?(m=u*2,s.turnHits.doubles++):o==="SINGLE"&&(m=u*1,s.turnHits.singles++):!x&&(i===u||i===u*2||i===u*3)&&(i===u*3?(m=u*3,s.turnHits.triples++):i===u*2?(m=u*2,s.turnHits.doubles++):i===u&&(m=u,s.turnHits.singles++)),s.score+=m,m}function wl(s){if(!s.finished){if(s.turnHits.singles>0&&s.turnHits.doubles>0&&s.turnHits.triples>0){s.shanghaiAchieved=!0,s.finished=!0;return}const i=s.round+1;i>20?s.finished=!0:s.round=i}s.turnHits={singles:0,doubles:0,triples:0}}function $n(){return{stage:0,targets:[{kind:"NUMBER",num:20},{kind:"DOUBLE",num:16},{kind:"TRIPLE",num:14},{kind:"NUMBER",num:19},{kind:"BULL"},{kind:"ANY_NUMBER"}],score:0,finished:!1,hitThisRound:!1}}function _n(s){return s.targets[s.stage]||null}function kl(s,i,o,x){if(s.finished)return 0;const u=_n(s);if(!u)return 0;let m=0;switch(u.kind){case"NUMBER":{typeof x=="number"&&x===u.num?o==="TRIPLE"?m=u.num*3:o==="DOUBLE"?m=u.num*2:o==="SINGLE"&&(m=u.num):!x&&(i===u.num||i===u.num*2||i===u.num*3)&&(m=i),m>0&&(s.hitThisRound=!0);break}case"DOUBLE":{(o==="DOUBLE"&&x===u.num||i===u.num*2)&&(m=u.num*2,s.hitThisRound=!0);break}case"TRIPLE":{(o==="TRIPLE"&&x===u.num||i===u.num*3)&&(m=u.num*3,s.hitThisRound=!0);break}case"BULL":{(o==="BULL"||o==="INNER_BULL"||i===25||i===50)&&(m=o==="INNER_BULL"||i===50?50:25,s.hitThisRound=!0);break}case"ANY_NUMBER":{i>0&&(m=i,s.hitThisRound=!0);break}}return s.score+=m,m}function Cl(s){s.finished||(s.hitThisRound||(s.score=Math.floor(s.score/2)),s.hitThisRound=!1,s.stage+=1,s.stage>=s.targets.length&&(s.finished=!0))}function Kn(){return{round:1,score:0,target:"HIGH",finished:!1}}function Dl(s,i,o,x){if(s.finished)return 0;let u=0;if(s.target==="HIGH")if(o==="INNER_BULL")u=50;else if(typeof x=="number"){const p=x*(o==="TRIPLE"?3:o==="DOUBLE"?2:1);x>=20&&(u=p)}else i>=40&&(u=i);else if(typeof x=="number"){const p=x*(o==="TRIPLE"?3:o==="DOUBLE"?2:1);x<=10&&(u=p)}else i>0&&i<=30&&(u=i);return s.score+=u,u}function Tl(s){if(!s.finished){if(s.round+=1,s.round>10){s.finished=!0;return}s.target=s.target==="HIGH"?"LOW":"HIGH"}}function Ll(s,i=3){return{number:s,lives:i,isKiller:!1,eliminated:!1}}function Ml(s){const i=Array.from({length:20},(x,u)=>u+1),o={};for(const x of s){const u=Math.floor(Math.random()*i.length),m=i.splice(u,1)[0];o[x]=m}return o}function Al(s,i,o,x){const u=i[s];if(!u||!x||!o)return{becameKiller:!1};if(!u.isKiller&&o==="DOUBLE"&&x===u.number)return u.isKiller=!0,{becameKiller:!0};if(u.isKiller&&(o==="DOUBLE"||o==="TRIPLE")){const m=Object.keys(i).find(p=>p!==s&&!i[p].eliminated&&i[p].number===x);if(m){const p=i[m],F=o==="TRIPLE"?2:1;return p.lives=Math.max(0,p.lives-F),p.lives===0&&(p.eliminated=!0),{becameKiller:!1,victimId:m,livesRemoved:F}}}return{becameKiller:!1}}function El(s){const i=Object.entries(s).filter(([,o])=>!o.eliminated&&o.lives>0);return i.length===1?i[0][0]:null}function zr(){return{inning:1,score:0,dartsThisInning:0,finished:!1}}function Rl(s,i,o,x){if(s.finished)return 0;let u=0;if(typeof x=="number"&&x===s.inning?o==="TRIPLE"?u=3:o==="DOUBLE"?u=2:u=1:!x&&(i===s.inning||i===s.inning*2||i===s.inning*3)&&(u=i===s.inning*3?3:i===s.inning*2?2:1),s.score+=u,s.dartsThisInning+=1,s.dartsThisInning>=3){const m=s.inning+1;m>9?s.finished=!0:(s.inning=m,s.dartsThisInning=0)}return u}const Pl={1:5,2:20,3:1,4:18,5:4,6:13,7:6,8:10,9:15,10:2,11:17,12:3,13:19,14:7,15:16,16:8,17:11,18:14};function Xr(){return{hole:1,strokes:0,dartsThisHole:0,finished:!1}}function Bl(s,i,o,x){if(s.finished)return!1;const u=Pl[s.hole];if(s.dartsThisHole+=1,typeof x=="number"&&x===u&&(o==="SINGLE"||o==="DOUBLE"||o==="TRIPLE")||!x&&(i===u||i===u*2||i===u*3)){s.strokes+=s.dartsThisHole;const p=s.hole+1;return p>18?s.finished=!0:(s.hole=p,s.dartsThisHole=0),!0}if(s.dartsThisHole>=3){s.strokes+=3;const p=s.hole+1;p>18?s.finished=!0:(s.hole=p,s.dartsThisHole=0)}return!1}const ti={0:{type:"NUM",num:20},1:{type:"NUM",num:19},2:{type:"NUM",num:18},3:{type:"NUM",num:17},4:{type:"BULL"},5:{type:"NUM",num:16},6:{type:"NUM",num:15},7:{type:"NUM",num:14},8:{type:"NUM",num:13}};function qr(){return{board:Array(9).fill(null),turn:"X",finished:!1,winner:null}}function Il(s){const i=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[o,x,u]of i)if(s[o]&&s[o]===s[x]&&s[o]===s[u])return s[o];return s.every(o=>o)?"Draw":null}function Fl(s,i,o,x,u){if(s.finished||s.board[i])return!1;const m=ti[i];let p=!1;if(m.type==="BULL"?p=x==="BULL"||x==="INNER_BULL"||o===25||o===50:m.type==="NUM"&&typeof m.num=="number"&&(typeof u=="number"&&u===m.num||!u&&(o===m.num||o===m.num*2||o===m.num*3))&&(p=!0),!p)return!1;s.board[i]=s.turn;const F=Il(s.board);return F?(s.finished=!0,s.winner=F,!0):(s.turn=s.turn==="X"?"O":"X",!0)}function Wn(){return{targetIndex:0,darts:0,finished:!1}}const si=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25],Ts=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","Bull"];function Hl(s){return si[s.targetIndex]}function ni(s,i,o){if(s.finished)return s;const x=Hl(s);if(!(o==="SINGLE"&&i===x||o==="DOUBLE"&&i===x||o==="TRIPLE"&&i===x||o==="INNER_BULL"&&x===25))return s;const m=s.targetIndex+1,p=m>=si.length;return{targetIndex:m,darts:s.darts+1,finished:p}}function Qr(s,i){return ni(s,i,"SINGLE")}function Ul(){return Wn()}function Gn(s=50){return{score:0,darts:0,finished:!1,target:s}}const Ol=[5,10,15,20,25,50];function Vl(s){return Ol.includes(s)}function ai(s,i,o){if(s.finished)return s;if(!Vl(i))return{...s,darts:s.darts+1};const x=s.score+i,u=x>=s.target;return{score:u?s.target:x,darts:s.darts+1,finished:u,target:s.target}}function Yr(s,i){return ai(s,i)}function $l(s=50){return Gn(s)}function zn(s=70){return{score:0,darts:0,finished:!1,target:s}}const Kl=[7,14,21];function _l(s){return Kl.includes(s)}function ri(s,i,o){if(s.finished)return s;if(!_l(i))return{...s,darts:s.darts+1};const x=s.score+i,u=x>=s.target;return{score:u?s.target:x,darts:s.darts+1,finished:u,target:s.target}}function Zr(s,i){return ri(s,i)}function Wl(s=70){return zn(s)}const qn=[20,19,18,17,16,15,14,13,12,25];function Jr(){const s={};return qn.forEach(i=>{s[i]=0}),{marks:s,points:0}}function Gl(s,i,o,x,u=()=>!1){let m=null,p=0;if(o==="BULL"||o==="INNER_BULL"||i===25||i===50)m=25,p=o==="INNER_BULL"||i===50?2:1;else if(typeof x=="number"&&x>=12&&x<=20)m=x,o==="TRIPLE"?p=3:o==="DOUBLE"?p=2:p=1;else if(i){for(const xe of[20,19,18,17,16,15,14,13,12]){if(i===xe){m=xe,p=1;break}if(i===xe*2){m=xe,p=2;break}if(i===xe*3){m=xe,p=3;break}}!m&&(i===25||i===50)&&(m=25,p=i===50?2:1)}if(!m)return 0;const F=s.marks[m],Ze=Math.max(0,3-F),Ne=Math.min(Ze,p),ae=Math.max(0,p-Ne),Te=F+Ne;s.marks[m]=Te>3?3:Te;let _=0;return ae>0&&!u(m)&&(m===25?o==="INNER_BULL"?_+=50*ae:_+=25*ae:_+=m*ae),s.points+=_,_}function zl(s){return qn.every(i=>(s.marks[i]||0)>=3)}function Xl({left:s,right:i,className:o="",sticky:x=!0}){return e.jsxs("div",{className:`${x?"sticky top-0":""} card relative overflow-hidden flex items-center justify-between gap-2 mb-2 px-2 sm:px-3 py-2 rounded-xl bg-white/10 border border-white/10 z-10 backdrop-blur-sm ${o}`,children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-slate-900/30 via-slate-900/10 to-transparent"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm leading-none flex-wrap",children:[s," ðŸŽ¯"]}),e.jsx("div",{className:"flex items-center gap-1 flex-wrap justify-end",children:i})]})}a.memo(fl);const ei=["Easy","Medium","Hardened"],ql=6500;function me(s,i,o){return Math.max(i,Math.min(o,s))}function Ql(s,i){let o=0;if(i==="Easy"){const x=[22,26,41,45,60];o=x[Math.floor(Math.random()*x.length)]}else i==="Medium"?o=Math.round(me(60+(Math.random()*30-15),30,100)):o=Math.round(me(80+(Math.random()*20-10),50,120));return s<=0?0:o>s?[100,85,81,60,57,45,41,26,22,20,1].find(u=>u<=s)??0:o}function Yl({onClose:s}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-start justify-center pt-8 z-50",children:e.jsxs("div",{className:"card max-w-lg w-full relative",children:[e.jsx("button",{className:"absolute top-2 right-2 btn px-2 py-1",onClick:s,children:"Close âœ•"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"X01 Rules & Regulations ðŸ“–"}),e.jsxs("ul",{className:"list-disc pl-5 text-left mb-2",children:[e.jsx("li",{children:"Double In: Start scoring only after hitting a double."}),e.jsx("li",{children:"Double Out: Finish the game by hitting a double to reach exactly zero."}),e.jsx("li",{children:"Best Of: Play a set number of legs, winner is first to reach majority."}),e.jsx("li",{children:"First To: Play until a player reaches a set number of legs."}),e.jsx("li",{children:"No Cheating: All scores must be valid, no manual score changes mid-leg."}),e.jsx("li",{children:"Competitive Standard: Follow latest WDF/PDC rules for match play."})]}),e.jsx("p",{className:"text-sm text-slate-600",children:"For full details, see official darts governing body rules."})]})})}const Zl=ml();function Tc({user:s}){const{offlineLayout:i,favoriteDouble:o,callerEnabled:x,callerVoice:u,callerVolume:m,speakCheckoutOnly:p,rememberLastOffline:F,setLastOffline:Ze,autoStartOffline:Ne,cameraEnabled:ae,textSize:Te,boxSize:_,autoscoreProvider:xe,autoCommitMode:Le="wait-for-clear",matchType:ii="singles",setMatchType:li,teamAName:ci="Team A",setTeamAName:oi,teamBName:di="Team B",setTeamBName:ui}=al(),T=!1,Fe=i==="classic"?"classic":"modern",Qn=T,[l,Ls]=a.useState("X01"),[Yn,Ms]=a.useState(()=>Or("X01")),[w,Lt]=a.useState(501),[A,Zn]=a.useState("None"),[mi,Jn]=a.useState(!1),[Mt,Je]=a.useState(!1),[re,W]=a.useState(w),[ee,At]=a.useState(w),[Jl,ea]=a.useState(!1),[ta,H]=a.useState(!1),[et,sa]=a.useState(1),[G,Et]=a.useState(0),P=rl(),[xi,na]=a.useState(!1),aa=a.useRef(!1),[z,Rt]=a.useState(0),[Pt,U]=a.useState(null),[Bt,ra]=a.useState(1),[It,ia]=a.useState(1),[he,la]=a.useState([]),[ca,hi]=a.useState(2e3),fe=il(),[He,Ue]=a.useState(!1),[oa,ie]=a.useState(!1),[As,Ft]=a.useState(!1),[tt,Oe]=a.useState({player:!1,opponent:!1}),Ht=ll(t=>t.setPaused);a.useEffect(()=>{const t=()=>{Ue(!1),Je(!1),ie(!1)};try{window.addEventListener("ndn:match-quit",t)}catch{}return()=>{try{window.removeEventListener("ndn:match-quit",t)}catch{}}},[]);const[st,fi]=a.useState(!1),[nt,pi]=a.useState(!1),[Ut,da]=a.useState(1),[ec,ua]=a.useState(!1),[te,at]=a.useState(!0),[ma,bi]=a.useState(()=>typeof window<"u"&&window.innerWidth<768),[tc,gi]=a.useState(!1);a.useEffect(()=>{if(typeof window>"u")return;const t=()=>bi(window.innerWidth<768);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),a.useEffect(()=>{ma||gi(!1)},[ma]),a.useEffect(()=>{const t=()=>We(!0);return window.addEventListener("ndn:open-camera-manager",t),()=>window.removeEventListener("ndn:open-camera-manager",t)},[]);const[C,N]=a.useState(0),[rt,vi]=a.useState(0),[Ot,ji]=a.useState(0),[se,xa]=a.useState(0),[Vt,ha]=a.useState(0),[it,Es]=a.useState(On()),[$t,Kt]=a.useState(Vn()),[pe,_t]=a.useState($n()),[ye,Wt]=a.useState(Kn()),[sc,X]=a.useState(0),[Gt,fa]=a.useState(1),[Rs,Ps]=a.useState(27),[nc,pa]=a.useState(0),[Ni,Bs]=a.useState(0),[ba,ga]=a.useState(!1),[zt,va]=a.useState(1),[Is,ja]=a.useState(0),[ac,Na]=a.useState(0),yi=8,[Xt,ya]=a.useState(1),[Fs,Sa]=a.useState(0),[rc,wa]=a.useState(0),Si=10,[qt,ka]=a.useState(1),[Hs,Ca]=a.useState(0),[ic,Da]=a.useState(0),wi=10,[lt,Us]=a.useState(170),[Ta,La]=a.useState(0),[Qt,Ma]=a.useState(0),[Yt,Aa]=a.useState(0),[ct,Os]=a.useState(121),[Ea,Ra]=a.useState(0),[Zt,Pa]=a.useState(0),[Jt,Ba]=a.useState(0),[be,Vs]=a.useState(20),[ot,$s]=a.useState(0),[Ia,Ks]=a.useState(0),[Me,ki]=a.useState(30),[Fa,_s]=a.useState(!1),[dt,Ha]=a.useState(zr()),[ut,Ua]=a.useState(Xr()),[le,Oa]=a.useState(qr()),[Ws,Va]=a.useState(Jr()),[R,Gs]=a.useState([{id:"p1",name:"Player 1"},{id:"p2",name:"Player 2"}]),[es,ts]=a.useState({}),[zs,Xs]=a.useState({}),[$a,qs]=a.useState(!1),[Ae,mt]=a.useState(0),[lc,xt]=a.useState(0),[ht,ss]=a.useState(null),[Ci,Ve]=a.useState(""),[ns,cc]=a.useState(Wn()),[ce,as]=a.useState(Wn()),[oe,oc]=a.useState(Gn(50)),[ge,Qs]=a.useState(Gn(50)),[de,dc]=a.useState(zn(70)),[ve,Ys]=a.useState(zn(70)),[Ka,$e]=a.useState(0),[Zs,Ee]=a.useState(0),[ne,O]=a.useState(0),[Js,ft]=a.useState(w),[Re,q]=a.useState(0),[en,Se]=a.useState(null),[rs,V]=a.useState(0),is=a.useRef(0),Di=a.useRef(0),Q=a.useRef(re),I=a.useRef(ne),Y=a.useRef(Re),Ke=a.useRef(Js),Z=a.useRef(rs);a.useEffect(()=>{Q.current=re},[re]),a.useEffect(()=>{I.current=ne},[ne]),a.useEffect(()=>{Y.current=Re},[Re]),a.useEffect(()=>{Ke.current=Js},[Js]),a.useEffect(()=>{Z.current=rs},[rs]);const[Ti,pt]=a.useState(0);a.useRef(null);const[_a,tn]=a.useState(0),[sn,nn]=a.useState(0),[an,_e]=a.useState(0),[rn,we]=a.useState(0),[ln,bt]=a.useState(null),[cn,gt]=a.useState(0),[ls,vt]=a.useState(0),[Wa,cs]=a.useState(0),[os,Ga]=a.useState(0),[za,Xa]=a.useState(0),[on,jt]=a.useState(0),[dn,qa]=a.useState(0),[Qa,ds]=a.useState(0),[Ya,Za]=a.useState(0),[Ja,us]=a.useState(0),[Li,ms]=a.useState(0),[Mi,xs]=a.useState(0),[er,un]=a.useState(0),[Ai,mn]=a.useState(0),[Ei,xn]=a.useState(0),[Ri,hs]=a.useState(0),[Pi,tr]=a.useState(0),[fs,ps]=a.useState(null),[Bi,ke]=a.useState(!1),[Ii,hn]=a.useState(!1),[$,K]=a.useState(""),[uc,mc]=a.useState(""),[xc,hc]=a.useState(""),[fc,pc]=a.useState(""),[bc,sr]=a.useState(""),[gc,nr]=a.useState(""),[bs,ar]=a.useState(null),[Fi,We]=a.useState(!1),[fn,pn]=a.useState(!1),[Hi,rr]=a.useState({}),[vc,gs]=a.useState(!1),Pe=a.useRef(null),bn=a.useRef(null),ue=a.useCallback(()=>{const t=bn.current;t&&(clearTimeout(t),bn.current=null)},[]),Ui=a.useCallback(t=>{if(t>0&&t<=60){const n=cl(t,o);ps({remaining:t,routes:n}),ke(!0)}else ps(null),ke(!1)},[o]),vs=a.useCallback(()=>{try{Cs({type:"quit"})}catch{}Ue(!1),Je(!1),ie(!1),Ft(!1),Oe({player:!1,opponent:!1})},[]);a.useEffect(()=>{As&&tt.player&&tt.opponent&&vs()},[vs,tt,As]);const ir=a.useCallback(t=>{if(!x)return;const n=Ct(s,"Player");try{Hn(n,t.visitTotal,Math.max(t.remaining,0),u,{volume:m,checkoutOnly:p})}catch{}},[x,u,m,p,s]),lr=a.useCallback((t,n)=>{gs(!1);const{visitTotal:r,darts:c,preRemaining:d,remaining:v,doubleAttempts:g,finished:k,doubleWindow:f,highestCheckout:b}=t;k?(W(0),Q.current=0,typeof b=="number"&&b>0&&hs(j=>Math.max(j,b))):(W(v),Q.current=v),Se(r),r===180?us(j=>j+1):r>=140?ms(j=>j+1):r>=100&&xs(j=>j+1),f&&g>0&&(vt(j=>j+g),k&&cs(j=>j+1)),t.announced||ir(t);try{Ds.getState().recordVisit("offline-x01",c,r,{preRemaining:d,postRemaining:k?0:v,finish:k,bust:!1})}catch{}try{P.addVisit(r,c,{visitTotal:r}),k&&P.endLeg(d)}catch{}k&&(U("player"),H(!0)),ws(k?0:v),q(0),Y.current=0,O(0),I.current=0,V(0),Z.current=0},[ws,hs,U,W,Se,q,O,V,H,us,ms,xs,vt,cs,ir]),Nt=a.useCallback(t=>{const n=Pe.current;n&&(Pe.current=null,ue(),lr(n,t))},[ue,lr]);a.useCallback(t=>{Pe.current={...t,announced:!1},gs(!0),ue(),bn.current=setTimeout(()=>Nt("timeout"),ql)},[ue,Nt]),a.useEffect(()=>{},[Qn,Nt]),a.useEffect(()=>{Nt("timeout")},[Qn,Nt]),a.useEffect(()=>()=>ue(),[ue]),a.useEffect(()=>{if(ne===0){try{window.dispatchEvent(new CustomEvent("ndn:darts-cleared",{detail:{source:"offline-play",ts:Date.now()}}))}catch{}is.current=0}Di.current=ne},[ne]);const D=Ct(s,"Player 1"),js=A==="None"?"Player 2":A,Ns=Ie("X01",re,ee,G,z,Zs,sn,Re,an,en,ln,ne,rn,Wa,ls,za,os,he,te,A,w),cr=Ie("Cricket",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,it),gn=Ie("Shanghai",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,te,A,void 0,it,$t),vn=Ie("Killer",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,R,es,zs,Ae),jn=Ie("Scam"),Nn=Ie("Fives"),yn=Ie("Sevens"),Sn=a.useMemo(()=>{switch(l){case"Cricket":return cr;case"Shanghai":return gn;case"Killer":return vn;case"Scam":return jn;case"Fives":return Nn;case"Sevens":return yn;default:return Ns}},[l,cr,gn,vn,jn,Nn,yn,Ns]),Oi=l==="X01"?`${G}-${z}`:void 0,ys=a.useMemo(()=>{const t=Ns||[],n=ne>0?Re:en??Zs,r=rn>0?an:ln??sn;return t.length===0?{name:te?D:js,isCurrentTurn:!0,legsWon:te?G:z,score:te?re:ee,lastScore:te?n:r}:t.find(c=>c.isCurrentTurn)??t[0]},[Ns,te,D,js,G,z,re,ee,ne,Re,en,Zs,an,ln,sn,rn]),or=a.useMemo(()=>{if(!ys)return[];const{matchAvg:t,allTimeAvg:n,...r}=ys;return[{...r,matchAvg:void 0,allTimeAvg:void 0}]},[ys]);ys?.name;const dr=te?re:ee,Ss=P.players?.[P.currentPlayerIdx];let ur=0,mr=0;if(Ss&&Ss.legs&&Ss.legs.length>0){for(const t of Ss.legs)if(Array.isArray(t.visits))for(const n of t.visits)ur+=n.score||0,mr+=n.darts||0}const Vi=ur+(Re||0),xr=mr+(ne||0),hr=xr>0?Vi/xr*3:0,wn=a.useMemo(()=>{if(Sn.length>0)return Sn;switch(l){case"Double Practice":return[{name:D,isCurrentTurn:!0,target:Tt[rt]?.label||"â€”",hits:Ot,totalNeeded:Tt.length}];case"Around the Clock":return[{name:D,isCurrentTurn:!0,target:J[se]===25?"25 (Outer Bull)":J[se]===50?"50 (Inner Bull)":J[se]||"â€”",hits:Vt,totalNeeded:J.length}];case"Treble Practice":return[{name:D,isCurrentTurn:!0,target:`T${be}`,hits:ot,totalNeeded:Me}];case"Count-Up":return[{name:D,isCurrentTurn:!0,score:Is,round:zt}];case"High Score":return[{name:D,isCurrentTurn:!0,score:Fs,round:Xt}];case"Low Score":return[{name:D,isCurrentTurn:!0,score:Hs,round:qt}];case"Checkout 170":return[{name:D,isCurrentTurn:!0,remaining:lt,attempts:Qt,successes:Yt}];case"Checkout 121":return[{name:D,isCurrentTurn:!0,remaining:ct,attempts:Zt,successes:Jt}];case"Bob's 27":return[{name:D,isCurrentTurn:!0,target:Gt,score:Rs}];case"Baseball":return[{name:D,isCurrentTurn:!0,inning:dt.inning,score:dt.score}];case"Golf":return[{name:D,isCurrentTurn:!0,hole:ut.hole,strokes:ut.strokes}];case"Tic Tac Toe":return[{name:D,isCurrentTurn:!0,turn:le.turn,winner:le.winner}];case"Scam":return[{name:D,isCurrentTurn:!0,target:Ts[ce.targetIndex]||"â€”",darts:ce.darts,finished:ce.finished}];case"Fives":return[{name:D,isCurrentTurn:!0,score:oe.score,target:oe.target,darts:oe.darts}];case"Sevens":return[{name:D,isCurrentTurn:!0,score:de.score,target:de.target,darts:de.darts}];case"High-Low":return[{name:D,isCurrentTurn:!0,round:ye.round,target:ye.target,score:ye.score}];case"Halve It":return[{name:D,isCurrentTurn:!0,round:pe.stage+1,target:(()=>{const t=_n(pe);return t?t.kind==="ANY_NUMBER"?"Any":t.kind==="BULL"?"Bull":t.kind==="DOUBLE"||t.kind==="TRIPLE"||t.kind==="NUMBER"?`${t.kind} ${t.num}`:"â€”":"â€”"})(),score:pe.score}];default:return or}},[Sn,l,D,rt,Ot,se,Vt,be,ot,Me,Is,zt,Fs,Xt,Hs,qt,lt,Qt,Yt,ct,Zt,Jt,Gt,Rs,dt,ut,le,ce,oe,de,ye,pe,or]),yt=a.useMemo(()=>{if(l==="X01")return{primaryLabel:"Current score",primaryValue:dr,secondaryLabel:"3-dart avg",secondaryValue:hr.toFixed(1),secondaryClass:"text-emerald-300"};const t=wn[0],n=t?.score??t?.points??t?.lives??t?.remaining??0;let r="Target",c=t?.target??t?.round??"â€”";return l==="Cricket"||l==="American Cricket"?(r="Points",c=t?.points??0):l==="Killer"?(r="Lives",c=t?.lives??0):l==="Checkout 170"||l==="Checkout 121"?(r="Remaining",c=t?.remaining??0):l==="Baseball"?(r="Inning",c=t?.inning??1):l==="Golf"?(r="Hole",c=t?.hole??1):(l==="Scam"||l==="Fives"||l==="Sevens")&&(r="Target",c=t?.target??"â€”"),{primaryLabel:"Score",primaryValue:n,secondaryLabel:r,secondaryValue:c,secondaryClass:"text-white"}},[l,dr,hr,wn]),Ce=a.useCallback(t=>Math.max(0,Math.min(99,Math.round(t||0))).toString(),[]),L=a.useCallback((t,n=1)=>{!t||n<=0||rr(r=>({...r,[t]:(r[t]||0)+n}))},[]),M=a.useCallback(t=>{t&&rr(n=>n[t]===void 0?n:{...n,[t]:0})},[]);Hi[l];const fr=a.useCallback(()=>{Pe.current&&(Pe.current=null),ue(),gs(!1)},[ue]);a.useCallback(t=>{const n=me(t,0,w);fr(),W(n),Q.current=n;const r=n===0?w:n;ft(r),Ke.current=r,q(0),Y.current=0,O(0),I.current=0,V(0),Z.current=0,Se(null),Ee(0),N(0),is.current=0,n===0?(U("player"),H(!0)):(U(null),H(!1))},[fr,W,w,ft,q,O,V,Se,Ee,N,U,H]);const pr=a.useCallback((t,n)=>{t==="player"?(Et(n),sr("")):(Rt(n),nr("")),U(null),H(!1)},[Rt,nr,sr,U,Et,H]),$i=a.useCallback(()=>{ar(t=>t&&(t.stage===1?{...t,stage:2}:(pr(t.target,t.value),null)))},[pr]),St=a.useCallback(()=>{ar(null)},[]);a.useEffect(()=>{if(!bs)return;const t=n=>{n.key==="Escape"&&(n.preventDefault(),St())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[St,bs]);const kn=(t=>{switch(t){case"small":return"px-1.5 py-0.5 text-xs";case"large":return"px-3 py-1 text-sm";default:return"px-2 py-0.5 text-sm"}})(Te),Ge=a.useRef(null),ze=a.useRef(null),Cn=a.useRef(null),[je,wt]=a.useState("first"),[Xe,Dn]=a.useState(1),Ki=a.useRef(null);a.useEffect(()=>{const t=Math.max(1,Math.floor(Number(Xe)||1)),n=je==="first"?t:Math.max(1,Math.ceil(t/2));sa(n)},[je,Xe]),a.useEffect(()=>{if(!nt){da(1),ua(!1);return}const t=()=>{const c=Ge.current,d=ze.current;if(!c||!d)return;const v=Cn.current?Cn.current.getBoundingClientRect().height:0,g=Math.max(0,c.clientHeight-v-6),k=Math.max(0,c.clientWidth-8),f=d.getBoundingClientRect(),b=Ut||1,j=f.height/b,y=f.width/b,S=g>0?g/j:1,h=k>0?k/y:1,Be=Math.min(1,Math.max(.5,Math.min(S,h))),B=j*Be,qe=g>0&&B-g>1;ua(qe),da(Be)};t();const n=window.ResizeObserver,r=n?new n(()=>t()):null;return r&&Ge.current&&r.observe(Ge.current),r&&ze.current&&r.observe(ze.current),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t);try{r&&Ge.current&&r.unobserve(Ge.current)}catch{}try{r&&ze.current&&r.unobserve(ze.current)}catch{}}},[nt,Ut]),a.useEffect(()=>{const t=n=>{const r=n?.detail?.mode;r&&(Ls(r),De())};return window.addEventListener("ndn:auto-start",t),()=>window.removeEventListener("ndn:auto-start",t)},[]),a.useEffect(()=>{const t=n=>{const r=n?.detail?.formatType,c=n?.detail?.formatCount,d=n?.detail?.startScore;(r==="first"||r==="best")&&wt(r),typeof c=="number"&&isFinite(c)&&Dn(Math.max(1,Math.floor(c))),typeof d=="number"&&isFinite(d)&&Lt(Math.max(1,Math.floor(d)))};return window.addEventListener("ndn:offline-format",t),()=>window.removeEventListener("ndn:offline-format",t)},[]),a.useEffect(()=>{if(!Ne)return;const t=setTimeout(()=>De(),50);return()=>clearTimeout(t)},[Ne]),a.useEffect(()=>{if(!He||te||A==="None"||Ti<=0)return;let t,n=performance.now();const r=c=>{const d=c-n;n=c,pt(v=>{const g=v-d;if(g<=0){let k=0,f=0,b=ee;for(we(0);k<3&&b>0;){const j=Ql(b,A),y=me(j-k*20,0,Math.min(60,b)),S=b-y;if(nn(y),tn(B=>B+1),qa(B=>B+1),S<0){b=ee,_e(0),gt(0),f=0,bt(0),we(0);break}f+=y,_e(B=>B+y),Za(B=>B+y);const h=b,Be=S;if(h>50&&Be<=50?gt(1):h<=50&&gt(B=>B+1),b=S,k+=1,we(k),b===0)break}if(At(b),b===0){f===180?un(y=>y+1):f>=140?mn(y=>y+1):f>=100&&xn(y=>y+1);const j=ee;j<=170&&tr(y=>Math.max(y,j)),ee<=50&&(Ga(y=>y+(cn>0?cn:1)),Xa(y=>y+1)),bt(f),_e(0),gt(0),we(0),U("ai"),H(!0)}return b>0&&k>=3&&(f===180?un(j=>j+1):f>=140?mn(j=>j+1):f>=100&&xn(j=>j+1),bt(f),_e(0),gt(0),we(0)),we(0),at(!0),0}return g}),t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>cancelAnimationFrame(t)},[He,te,A,ee]),a.useEffect(()=>{P.inProgress&&(aa.current||(na(!0),aa.current=!0))},[P.inProgress]);function De(){Je(!0),W(w),Q.current=w,At(w),ea(!1),Ue(!0),at(!0),N(0),$e(0),Ee(0),O(0),I.current=0,ft(w),q(0),Se(null),V(0),pt(0),tn(0),nn(0),_e(0),we(0),bt(null),U(null),Et(0),Rt(0),la([]),$s(0),Ks(0),_s(!1),jt(0),qa(0),ds(0),Za(0),us(0),ms(0),xs(0),un(0),mn(0),xn(0),hs(0),tr(0),vt(0),cs(0),Ga(0),Xa(0),M("X01");const t=Math.max(1,Math.floor(Number(Xe)||1));if(sa(je==="first"?t:Math.max(1,Math.ceil(t/2))),F)try{Ze({mode:l,x01Start:w,firstTo:et,aiLevel:A})}catch{}const n=Ct(s,"You"),r=A!=="None"?`AI (${A})`:"Opponent",c=A!=="None"?[n,r]:[n];P.newMatch(c,w,`offline-${Date.now()}`,"offline")}function _i(){W(w),Q.current=w,At(w),ea(!1),ps(null),ke(!1),Ue(!0),at(!0),N(0),$e(0),Ee(0),O(0),I.current=0,ft(w),q(0),Ke.current=w,Y.current=0,Se(null),V(0),Z.current=0,Z.current=0,pt(0),tn(0),nn(0),_e(0),we(0),bt(null),U(null)}function ws(t){Ui(t),O(0),I.current=0,ft(t===0?w:t),Ke.current=t===0?w:t,V(0),Z.current=0,A!=="None"?(at(!1),pt(ca)):(pt(0),at(!0))}function Wi(t){if(!Number.isFinite(t))return!1;const n=Ke.current,r=Q.current,c=I.current,d=Y.current,v=c>0||d>0;v&&(W(n),Q.current=n,O(0),I.current=0,q(0),Y.current=0,V(0),Z.current=0,Ee(0),N(0),$e(h=>Math.max(0,h-c)),jt(h=>Math.max(0,h-c)),ds(h=>Math.max(0,h-d)),is.current=0);const g=v?n:r,k=g<=170?170:180,f=me(Math.round(t),0,k),b=g-f,j=me(Math.round(It||0),0,3),y=me(Math.round(Bt||0),0,3),S=b===0?j:3;if(L("X01",S),$e(h=>h+S),jt(h=>h+S),O(S),I.current=S,q(f),Y.current=f,Se(f),f===180?us(h=>h+1):f>=140?ms(h=>h+1):f>=100&&xs(h=>h+1),b<0){if(x)try{Hn(D,0,Math.max(n,0),u,{volume:m,checkoutOnly:p})}catch{}try{Ds.getState().recordVisit("offline-x01",S,0,{preRemaining:g,postRemaining:n,bust:!0,finish:!1})}catch{}W(n),Q.current=n,Se(0),q(0),Y.current=0,O(0),I.current=0,V(0),Z.current=0;try{P.addVisit(0,S)}catch{}return ws(n),!0}if(W(b),Q.current=b,ds(h=>h+f),x)try{Hn(D,f,Math.max(b,0),u,{volume:m,checkoutOnly:p})}catch{}if(b===0?(vt(h=>h+y),cs(h=>h+1),V(y),Z.current=y):g<=50&&vt(h=>h+3),b===0){g<=170&&hs(h=>Math.max(h,g)),ps(null),ke(!1);try{Ds.getState().recordVisit("offline-x01",S,f,{preRemaining:g,postRemaining:0,finish:!0,bust:!1})}catch{}try{P.addVisit(f,S,{visitTotal:f,doubleWindowDarts:y,finishedByDouble:!0}),P.endLeg(g)}catch{}return U("player"),H(!0),O(0),I.current=0,q(0),Y.current=0,V(0),Z.current=0,!0}try{Ds.getState().recordVisit("offline-x01",S,f,{preRemaining:g,postRemaining:b,finish:!1,bust:!1})}catch{}try{const h=g<=50?S:g<=170&&b<=50?1:0;P.addVisit(f,S,{visitTotal:f,doubleWindowDarts:h,finishedByDouble:!1})}catch{}return ws(b),q(0),Y.current=0,O(0),I.current=0,V(0),Z.current=0,!0}const[Tn,Ln]=a.useState(""),br=t=>{Ln(t)},Gi=t=>t===50?{ring:"INNER_BULL",sector:25}:t===25?{ring:"BULL",sector:25}:t>=1&&t<=20?{ring:"SINGLE",sector:t}:{ring:void 0,sector:null},zi=t=>{const{ring:n,sector:r}=Gi(t);switch(l){case"Double Practice":An(t);return;case"Around the Clock":In(t,n,r);return;case"Cricket":Ar(t,n,r);return;case"Shanghai":Rr(t,n,r);return;case"Halve It":Br(t,n,r);return;case"High-Low":Fr(t,n,r);return;case"Bob's 27":Nr(t,n,r);return;case"Count-Up":En(t);return;case"High Score":Rn(t);return;case"Low Score":Pn(t);return;case"Checkout 170":kr(t,n);return;case"Checkout 121":Cr(t,n);return;case"Treble Practice":Bn(t,n,r);return;case"Baseball":Qi(t,n,r);return;case"Golf":Zi(t,n,r);return;case"American Cricket":sl(t,n,r);return;case"Scam":as(ni(ce,t,n));return;case"Fives":setFives(ai(oe,t));return;case"Sevens":setSevens(ri(de,t));return;case"Killer":fe("Use the Killer player board to record hits.",{type:"info",timeout:2e3});return;case"Tic Tac Toe":fe("Tap a cell on the Tic Tac Toe board to claim it.",{type:"info",timeout:2e3});return;default:fe("Use the in-game controls for this mode.",{type:"info",timeout:2e3})}},Mn=()=>{const t=parseInt(Tn,10);if(isNaN(t)||t<0){alert("Enter a valid number");return}if(l!=="X01"){const c=me(Math.round(t),0,999);zi(c),Ln("");return}if(t>180){alert("Enter a number 0-180 for visit total");return}const n=Q.current<=170?170:180,r=me(Math.round(t),0,n);t>n&&fe(`Visit totals cannot exceed ${n}.`,{type:"info",timeout:2200}),Wi(r)&&Ln("")},gr=a.useCallback(()=>{Pe.current&&(Pe.current=null,ue(),gs(!1));const t=I.current,n=Y.current,r=Ke.current;t===0&&n===0||(W(r),Q.current=r,O(0),I.current=0,q(0),Y.current=0,V(0),Z.current=0,Ee(0),N(0),$e(c=>Math.max(0,c-t)),jt(c=>Math.max(0,c-t)),ds(c=>Math.max(0,c-n)),is.current=0)},[ue]);a.useEffect(()=>{const t=n=>{const r=n?.detail;!r||r?.source==="offline-play"||gr()};return window.addEventListener("ndn:clear-visit-request",t),()=>window.removeEventListener("ndn:clear-visit-request",t)},[gr]);function An(t){L("Double Practice");const n=me(Math.round(t||0),0,60);if(Ee(n),$e(r=>r+1),jt(r=>r+1),vl(n,rt)){const r=Ot+1;ji(r),vi(c=>Math.min(20,c+1)),r>=21&&(U("player"),H(!0))}N(0)}function vr(){An(Number(C))}function jr(){const t=Dt($);if(t==null){alert("Enter like D16, 50, 25, T20");return}An(t),K("")}function Nr(t,n,r){if(ba)return!1;L("Bob's 27");const c=Gt,d=n==="DOUBLE"&&r===c||!n&&t===c*2;return d&&Bs(v=>v+1),pa(v=>{const g=v+1;if(g>=3){const k=Ni+(d?1:0);k>0?Ps(b=>b+k*c*2):Ps(b=>b-c*2);const f=c+1;return fa(f),Bs(0),f>20&&ga(!0),0}return g}),!0}function yr(){Nr(Math.max(0,C|0)),N(0)}function Sr(){fa(1),Ps(27),pa(0),Bs(0),ga(!1),M("Bob's 27")}function En(t){return L("Count-Up"),ja(n=>n+Math.max(0,t|0)),Na(n=>{const r=n+1;return r>=3?(va(c=>c+1),0):r}),!0}function Rn(t){return L("High Score"),Sa(n=>n+Math.max(0,t|0)),wa(n=>{const r=n+1;return r>=3?(ya(c=>c+1),0):r}),!0}function Pn(t){return L("Low Score"),Ca(n=>n+Math.max(0,t|0)),Da(n=>{const r=n+1;return r>=3?(ka(c=>c+1),0):r}),!0}function wr(t,n,r,c,d,v,g,k){const f=t-g;if(!(f<0))if(f===0){if(k==="DOUBLE"||k==="INNER_BULL"){v(b=>b+1),d(b=>b+1),c(()=>0),n(t);return}n(f)}else n(f);c(b=>{const j=b+1;return j>=3?(d(y=>y+1),0):j})}function kr(t,n){return L("Checkout 170"),wr(lt,Us,Ta,La,Ma,Aa,t,n),Ta+1>=3&&Us(170),!0}function Cr(t,n){return L("Checkout 121"),wr(ct,Os,Ea,Ra,Pa,Ba,t,n),Ea+1>=3&&Os(121),!0}function ks(t){const n=Dt($);if(n==null){alert("Enter like T20, D16, 25, 50");return}const r=$.trim().toUpperCase(),c=r.startsWith("D")||r==="50"||r==="BULL"||r==="DBULL"||r==="IBULL"||r.includes("INNER");t?kr(n,c?"DOUBLE":void 0):Cr(n,c?"DOUBLE":void 0),K("")}function Xi(){Us(170),La(0),Ma(0),Aa(0),M("Checkout 170")}function qi(){Os(121),Ra(0),Pa(0),Ba(0),M("Checkout 121")}function Bn(t,n,r){return Fa?!1:(L("Treble Practice"),(n==="TRIPLE"&&r===be||!n&&t===be*3)&&$s(d=>d+1),Ks(d=>{const v=d+1;if(v%3===0&&[20,19,18].includes(be)){const g=["T20","T19","T18"],k=g.indexOf(`T${be}`),f=g[(k+1)%g.length];Vs(Number(f.replace("T","")))}return Me>0&&v>=Me&&_s(!0),v}),!0)}function Dr(){$s(0),Ks(0),_s(!1),M("Treble Practice")}function Qi(t,n,r){return L("Baseball"),Ha(c=>{const d={...c};return Rl(d,t,n,r),d}),!0}function Yi(){Ha(zr()),M("Baseball")}function Zi(t,n,r){return L("Golf"),Ua(c=>{const d={...c};return Bl(d,t,n,r),d}),!0}function Ji(){Ua(Xr()),M("Golf")}function el(t,n,r,c){return L("Tic Tac Toe"),Oa(d=>{const v={...d,board:[...d.board]};return Fl(v,t,n,r,c),v}),!0}function tl(){Oa(qr()),M("Tic Tac Toe")}function sl(t,n,r){return L("American Cricket"),Va(c=>{const d={...c,marks:{...c.marks}};return Gl(d,t,n,r,()=>!1),d}),!0}function Tr(){Va(Jr()),M("American Cricket")}function In(t,n,r){L("Around the Clock");const c=J[se];let d=!1;if(typeof r=="number"&&r===c&&(n==="SINGLE"||n==="DOUBLE"||n==="TRIPLE")&&(d=!0),c===25&&(n==="BULL"||t===25)&&(d=!0),c===50&&(n==="INNER_BULL"||t===50)&&(d=!0),d||(t===c||t===c*2||t===c*3)&&(d=!0),d){const v=Vt+1;return ha(v),xa(g=>g+1),!0}return!0}function Lr(){In(Math.max(0,C|0)),N(0)}function Mr(){const t=Dt($);if(t==null){alert("Enter like T20, D5, 25, 50");return}In(t),K("")}function Ar(t,n,r){return L("Cricket"),Es(c=>{const d={...c,marks:{...c.marks}};return jl(d,t,n,r,()=>!1),d}),X(c=>{const d=c+1;return d>=3?0:d}),!0}function Er(){Ar(Math.max(0,C|0)),N(0)}function Rr(t,n,r){return L("Shanghai"),Kt(c=>{const d={...c,turnHits:{...c.turnHits}};return Sl(d,t,n,r),d}),X(c=>{const d=c+1;return d>=3?(Kt(v=>{const g={...v,turnHits:{...v.turnHits}};return wl(g),g}),0):d}),!0}function Pr(){Rr(Math.max(0,C|0)),N(0)}function Br(t,n,r){return L("Halve It"),_t(c=>{const d={...c,targets:[...c.targets]};return kl(d,t,n,r),d}),X(c=>{const d=c+1;return d>=3?(_t(v=>{const g={...v,targets:[...v.targets]};return Cl(g),g}),0):d}),!0}function Ir(){Br(Math.max(0,C|0)),N(0)}function Fr(t,n,r){return L("High-Low"),Wt(c=>{const d={...c};return Dl(d,t,n,r),d}),X(c=>{const d=c+1;return d>=3?(Wt(v=>{const g={...v};return Tl(g),g}),0):d}),!0}function Hr(){Fr(Math.max(0,C|0)),N(0)}function nl(){const t=Pt??"player",n=t==="player"?rs||void 0:cn||void 0,r=1,c=t==="player"?Ka:_a;la([...he,{winner:t,doubleDarts:Bt,checkoutDarts:It,winnerDarts:c,doublesAtt:n,doublesHit:r}]),H(!1);let d=G,v=z;if(Pt==="player"?d+=1:Pt==="ai"&&(v+=1),Et(d),Rt(v),U(null),d>=et||v>=et){try{hl(l,t==="player")}catch{}try{P.endGame()}catch{}Ue(!1),Je(!1),W(w),At(w),hn(!0);return}_i()}const Fn=!Un.includes(l)&&!(s?.fullAccess||s?.admin);return e.jsxs("div",{className:"card ndn-game-shell ndn-page flex flex-col min-h-0 relative overflow-hidden md:overflow-hidden overflow-y-auto",children:[xi&&e.jsx(ol,{players:P.players||[],user:s,onDone:()=>na(!1)}),!He&&!Mt&&e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h2",{className:"text-2xl font-bold ndn-section-title",children:"Offline Mode ðŸŽ®"})}),e.jsxs("div",{className:"ndn-shell-body",children:[!He&&!Mt&&e.jsxs("div",{className:"mb-4 flex flex-col gap-3",children:[e.jsxs("select",{onPointerDown:t=>{t.stopPropagation()},onMouseDown:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation?.()},className:"input w-full",value:l,onChange:t=>{const n=t.target.value;Ls(n),Ms(Or(n))},children:[Un.map(t=>e.jsxs("option",{value:t,children:[E(t).emoji," ",t]},t)),$r.map(t=>e.jsxs("option",{value:t,disabled:!(s?.fullAccess||s?.admin),children:[E(t).emoji," ",t," ",s?.fullAccess||s?.admin?"":"(Premium)"]},t))]}),E(l).tagline&&e.jsxs("div",{className:"text-xs mt-0.5 px-0.5",style:{color:E(l).color},children:[E(l).emoji," ",E(l).tagline]}),l!=="Treble Practice"&&Kr(l).length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 items-end",children:Kr(l).map(t=>e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold",children:t.label}),t.type==="select"&&t.options?e.jsx("select",{className:"input w-full",value:Yn[t.key]??t.defaultValue,onChange:n=>Ms(r=>({...r,[t.key]:Number(n.target.value)})),children:t.options.map(n=>e.jsx("option",{value:n,children:n},n))}):e.jsx("input",{className:"input w-full",type:"number",min:t.min??1,max:t.max,step:t.step??1,value:Yn[t.key]??t.defaultValue,onChange:n=>Ms(r=>({...r,[t.key]:Number(n.target.value)}))}),t.hint&&e.jsx("div",{className:"text-xs text-slate-300 mt-0.5",children:t.hint})]},t.key))}),l!=="X01"&&_r(l).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold",children:"Starting Score"}),e.jsx("select",{className:"input w-full",value:w,onChange:t=>Lt(Number(t.target.value)),children:_r(l).map(t=>e.jsx("option",{value:t,children:t},t))})]}),l==="Treble Practice"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{className:"sm:col-span-1",children:[e.jsx("label",{className:"font-semibold",children:"Throws per game"}),e.jsx("input",{className:"input w-full",type:"number",min:3,step:3,value:Me,onChange:t=>ki(Math.max(3,Math.floor(Number(t.target.value)||30)))})]}),e.jsx("div",{className:"sm:col-span-2 text-xs text-slate-300",children:"Target cycles T20â†’T19â†’T18 every 3 darts. Game ends after the selected number of throws."}),T]}),!s?.fullAccess&&e.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-slate-800/40 border border-slate-700/40 text-slate-200 text-sm flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”’"}),e.jsx("span",{children:"Only X01 and Double Practice are free. Advanced modes (Killer, Cricket, Shanghai, etc.) require PREMIUM."})]}),l==="X01"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-semibold mt-2",children:"Enter starting score (1-1001):"}),e.jsx("input",{className:"input w-full",type:"number",min:1,max:1001,value:w,onChange:t=>Lt(Number(t.target.value))}),e.jsx("label",{className:"font-semibold mt-2",children:"Play against AI bot?"}),e.jsxs("select",{onPointerDown:t=>{t.stopPropagation()},onMouseDown:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation?.()},className:"input w-full",value:A,onChange:t=>Zn(t.target.value),children:[e.jsx("option",{value:"None",children:"None"}),ei.map(t=>e.jsx("option",{value:t,children:t},t))]}),A!=="None"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end mt-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"font-semibold",children:"AI throw delay (seconds)"}),e.jsx("input",{className:"input w-full",type:"number",min:.5,max:10,step:.5,value:ca/1e3,onChange:t=>hi(Math.round(Number(t.target.value)*1e3))})]}),e.jsx("div",{className:"text-sm text-slate-300",children:"Controls how long the AI waits before its visit."})]}),e.jsx("button",{className:"btn mt-2",onClick:()=>Jn(!0),children:"X01 Rules & Regulations! ðŸ“–"})]}),l==="Double Practice"&&e.jsx("div",{className:"mt-2 text-brand-600",children:"Hit doubles D1 â†’ D20 â†’ DBULL in as few darts as possible. AI and X01 settings don't apply."})]}),!He&&!Mt&&e.jsx("button",{className:"btn",disabled:Fn,title:Fn?"PREMIUM required for this mode":"",onClick:De,children:"Start Match ðŸš€"}),He&&e.jsx("div",{className:`fixed inset-0 z-[1000] bg-slate-950/90 backdrop-blur-sm ${st?"":"flex items-center justify-center p-3 sm:p-4"}`,children:e.jsx(Qe,{storageKey:"ndn:modal:offline-match:v2",frameClassName:"relative",frameFullScreenClassName:"relative ndn-modal-full",className:`${st?"w-full h-full ndn-modal-tight":""} relative flex flex-col overflow-hidden`,fullScreen:st,defaultWidth:1100,defaultHeight:720,minWidth:720,minHeight:480,maxWidth:1600,maxHeight:1200,initialFitHeight:!0,children:e.jsx("div",{className:"flex h-full",children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-x-hidden pt-2 pb-2 pr-0 pl-2 sm:pl-3",style:{overflowY:"auto",willChange:"scroll-position",transform:"translateZ(0)",WebkitOverflowScrolling:"touch",contain:"layout style"},ref:t=>{Ge.current=t},children:[Fe!=="modern"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:t=>{Cn.current=t},children:e.jsx(Xl,{className:"w-full",left:e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hidden xs:inline px-2 py-0.5 rounded-full text-[10px] sm:text-xs border",style:{backgroundColor:`${E(l).color}20`,color:E(l).color,borderColor:`${E(l).color}50`},children:[E(l).emoji," ",l]}),e.jsx("span",{className:"font-medium whitespace-nowrap",children:l==="X01"?`X01 / ${w}`:l}),e.jsxs("span",{className:"opacity-80 whitespace-nowrap",children:["First to ",et," Â· Legs ",G,"-",z]}),e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full border text-[10px] sm:text-xs bg-white/10 text-white/70 border-white/20",children:"Classic layout"})]}),right:e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:nt?"Actual Size":"Fit All",onClick:()=>pi(t=>!t),children:nt?"Actual Size":"Fit All"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",title:st?"Restore":"Maximize",onClick:()=>fi(t=>!t),children:st?"Restore":"Maximize"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{De()},children:"Restart"}),e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 px-3 py-1 text-sm",onClick:()=>ie(!0),children:"Quit"})]})})}),oa&&e.jsx(Wr,{onClose:()=>ie(!1),onQuit:()=>{if(A==="None"){ie(!1),Oe({player:!0,opponent:!1}),Ft(!0);return}vs()},onPause:()=>{try{Ht(!0,null,D),Cs({type:"pause",pauseStartedAt:Date.now(),pauseInitiator:D})}catch{}ie(!1)}})]}),As&&e.jsx("div",{className:"fixed inset-0 z-[170] flex items-start justify-center pt-8 bg-black/70 p-4",children:e.jsxs(Qe,{storageKey:"ndn:modal:offline-quit-confirm",className:"w-full relative",defaultWidth:460,defaultHeight:320,minWidth:360,minHeight:260,maxWidth:720,maxHeight:520,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Confirm Quit (Both Players)"}),e.jsx("p",{className:"text-sm text-slate-200 mb-4",children:"Both players must accept to end the match. If either player wants to continue, the match will keep going."}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("button",{className:`btn w-full ${tt.player?"bg-emerald-600 hover:bg-emerald-700":"bg-slate-700 hover:bg-slate-800"}`,onClick:()=>Oe(t=>({...t,player:!0})),children:[Ct(s,"Player 1")," Accepts"]}),e.jsxs("button",{className:`btn w-full ${tt.opponent?"bg-emerald-600 hover:bg-emerald-700":"bg-slate-700 hover:bg-slate-800"}`,onClick:()=>Oe(t=>({...t,opponent:!0})),children:[A==="None"?"Opponent":`${A} AI`," Accepts"]}),e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 w-full",onClick:()=>{Oe({player:!1,opponent:!1}),Ft(!1)},children:"Continue Match"})]})]})}),l==="X01"&&Bi&&fs&&e.jsx("div",{className:"fixed inset-0 z-[160] flex items-start justify-center pt-8 bg-black/70 p-4",onClick:()=>ke(!1),children:e.jsxs("div",{className:"w-full max-w-xl rounded-3xl border border-emerald-400/40 bg-slate-900/95 p-4 text-white shadow-2xl",onClick:t=>t.stopPropagation(),onKeyDown:t=>{(t.key==="Enter"||t.key==="Escape")&&(t.preventDefault(),ke(!1))},tabIndex:-1,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/70",children:"Checkout box"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-100",children:[fs.remaining," left"]})]}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>ke(!1),children:"Close"})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Darts used at double"}),e.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(t=>e.jsx("button",{className:`btn px-3 py-1 text-sm ${Bt===t?"bg-brand-600":"btn--ghost"}`,onClick:()=>ra(t),children:Ce(t)},`double-${t}`))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Darts at checkout"}),e.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(t=>e.jsx("button",{className:`btn px-3 py-1 text-sm ${It===t?"bg-brand-600":"btn--ghost"}`,onClick:()=>ia(t),children:Ce(t)},`checkout-${t}`))})]}),fs.routes.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-emerald-200/80 mb-1",children:"Suggested checkout"}),e.jsx("div",{className:"space-y-1",children:fs.routes.map(t=>e.jsx("div",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-sm font-semibold",children:t},t))})]}),e.jsx("div",{className:"pt-2 flex justify-end",children:e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-4 py-1 text-sm",onClick:()=>ke(!1),children:"Enter"})})]})]})}),e.jsxs("div",{ref:t=>{ze.current=t},className:"will-change-transform",style:nt?{transform:`scale(${Ut})`,transformOrigin:"top left",width:"100%",fontSize:`${Math.max(.8,Math.min(1,Ut))}em`}:void 0,children:[Fe!=="modern"&&e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-xl font-bold mb-2 mt-1 leading-tight",children:[E(l).emoji," ",l==="X01"?`X01 â€” ${w}`:l]}),e.jsxs("p",{className:"text-xs text-slate-300/70 mb-1",children:[E(l).tagline," Â· 3 darts per visit"]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full border",style:{backgroundColor:`${E(l).color}20`,color:E(l).color,borderColor:`${E(l).color}50`},children:[E(l).emoji," ",l]}),l==="X01"&&e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Start: ",w]}),e.jsxs("div",{ref:Ki,className:"inline-flex items-center gap-2 px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[e.jsx("span",{children:"Format:"}),(()=>{const t=re!==w||ee!==w||ne>0,n=`pill ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"} `;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:`${n} ${je==="first"?"pill--filled":"pill--ghost"}`,onClick:()=>{t||wt("first")},title:"First to N",children:"First to"}),e.jsx("button",{type:"button",className:`${n} ${je==="best"?"pill--filled":"pill--ghost"}`,onClick:()=>{t||wt("best")},title:"Best of N (wins = ceil(N/2)",children:"Best of"})]}),e.jsx("input",{className:`input w-16 text-center ${t?"opacity-50":""}`,type:"number",min:1,step:1,value:Xe,onChange:r=>Dn(Math.max(1,Math.floor(Number(r.target.value)||1))),disabled:t,title:je==="first"?"First to N":"Best of N (wins = ceil(N/2))"})]})})()]}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs: ",G,"â€“",z]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1 text-[10px] flex-wrap",children:[e.jsx("span",{className:"opacity-70",children:"Match"}),e.jsxs("select",{className:`input input-compact font-bold ${kn}`,value:ii,onChange:t=>li(t.target.value),children:[e.jsx("option",{value:"singles",children:"Singles"}),e.jsx("option",{value:"doubles",children:"Doubles"})]}),e.jsx("input",{className:`input ${kn} w-[7.5rem]`,value:ci,onChange:t=>oi(t.target.value),placeholder:"Team A"}),e.jsx("span",{className:"opacity-50",children:"vs"}),e.jsx("input",{className:`input ${kn} w-[7.5rem]`,value:di,onChange:t=>ui(t.target.value),placeholder:"Team B"})]})]})]}),Fe!=="modern"&&l!=="X01"?e.jsxs("div",{className:"p-3 rounded-2xl glass text-white border border-white/10 min-w-0 flex flex-col h-full mb-2",children:[l==="Double Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:Tt[rt]?.label||"â€”"})]})}),l==="Around the Clock"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{className:"opacity-80",children:"Current Target"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:J[se]===25?"25 (Outer Bull)":J[se]===50?"50 (Inner Bull)":J[se]||"â€”"})]})}),l==="Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Cricket â€” Close 20â€“15 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-[11px] mb-2",children:Xn.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,it.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points:"," ",e.jsx("span",{className:"font-semibold",children:it.points})]}),Nl(it)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Es(On()),X(0),M("Cricket")},children:"Reset"})]})]}),l==="Shanghai"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Round"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:$t.round})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",$t.score]}),$t.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Kt(Vn()),X(0),M("Shanghai")},children:"Reset"})]})]}),l==="Halve It"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Stage"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-xs font-semibold",children:[pe.stage+1,"/",pe.targets.length]})]}),e.jsxs("div",{className:"text-sm",children:["Target:"," ",e.jsx("span",{className:"font-semibold",children:(()=>{const t=_n(pe);return t?t.kind==="ANY_NUMBER"?"Any":t.kind==="BULL"?"Bull":t.kind==="DOUBLE"||t.kind==="TRIPLE"||t.kind==="NUMBER"?`${t.kind} ${t.num}`:"â€”":"â€”"})()})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",pe.score]}),pe.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{_t($n()),X(0),M("Halve It")},children:"Reset"})]})]}),l==="High-Low"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",ye.round," Â· Target ",ye.target]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",ye.score]}),ye.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{Wt(Kn()),X(0),M("High-Low")},children:"Reset"})]})]}),l==="Bob's 27"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Target"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-semibold",children:["D",Gt]})]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Rs]}),ba&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Sr,children:"Reset"})]})]}),l==="Count-Up"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",zt,"/8"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Is]})]}),l==="High Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",Xt,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Fs]})]}),l==="Low Score"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Round ",qt,"/10"]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Score: ",Hs]})]}),l==="Checkout 170"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:lt}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",Qt," Â· Successes:"," ",Yt]})]}),l==="Checkout 121"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Remaining"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:ct}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Attempts: ",Zt," Â· Successes:"," ",Jt]})]}),l==="Treble Practice"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Treble Target: T",be]}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:["Hits: ",ot]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("label",{className:"text-sm",children:"Target"}),e.jsx("div",{className:"inline-flex items-center gap-1",children:[20,19,18].map(t=>e.jsxs("button",{className:`btn px-2 py-0.5 text-xs ${be===t?"bg-emerald-600/30 border border-emerald-400/30":""}`,onClick:()=>Vs(t),children:["T",t]},`tpick-header-${t}`))}),e.jsx("span",{className:"opacity-60 text-xs",children:"or"}),e.jsx("select",{className:"input w-24",value:be,onChange:t=>Vs(parseInt(t.target.value,10)),children:Array.from({length:20},(t,n)=>n+1).map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Dr,children:"Reset"})]})]})}),l==="Baseball"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Inning"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:dt.inning}),e.jsxs("div",{className:"text-sm",children:["Score:"," ",e.jsx("span",{className:"font-semibold",children:dt.score})]})]}),l==="Golf"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Hole"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:ut.hole}),e.jsxs("div",{className:"text-sm",children:["Strokes:"," ",e.jsx("span",{className:"font-semibold",children:ut.strokes})]})]}),l==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Turn"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:le.turn}),le.finished&&e.jsxs("div",{className:"mt-1 text-xs",children:["Winner: ",le.winner||"â€”"]})]}),l==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Target"}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:Ts[ns.targetIndex]}),e.jsxs("div",{className:"text-sm",children:["Progress:"," ",e.jsxs("span",{className:"font-semibold",children:[ns.targetIndex+1,"/",Ts.length]})]}),ns.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["ðŸŽ‰ Finished in ",ns.darts," darts!"]})]}),l==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[oe.score,"/",oe.target]}),e.jsxs("div",{className:"text-sm",children:["Darts:"," ",e.jsx("span",{className:"font-semibold",children:oe.darts})]}),oe.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",oe.target,"!"]})]}),l==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Score"}),e.jsxs("div",{className:"text-3xl font-extrabold tracking-tight",children:[de.score,"/",de.target]}),e.jsxs("div",{className:"text-sm",children:["Darts:"," ",e.jsx("span",{className:"font-semibold",children:de.darts})]}),de.finished&&e.jsxs("div",{className:"mt-1 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200",children:["âœ“ Reached ",de.target,"!"]})]}),l==="American Cricket"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Close 20â€“12 and Bull; overflow scores points"}),e.jsx("div",{className:"grid grid-cols-10 gap-1 text-center text-[11px] mb-2",children:qn.map(t=>e.jsxs("div",{className:"p-1 rounded bg-slate-800/50 border border-slate-700/50",children:[e.jsx("div",{className:"opacity-70",children:t===25?"Bull":t}),e.jsxs("div",{className:"font-semibold",children:[Math.min(3,Ws.marks?.[t]||0)," / 3"]})]},t))}),e.jsxs("div",{className:"text-sm",children:["Points:"," ",e.jsx("span",{className:"font-semibold",children:Ws.points})]}),zl(Ws)&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Tr,children:"Reset"})]})]}),l==="Killer"&&e.jsx(e.Fragment,{children:$a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs text-slate-600 flex items-center justify-between",children:[e.jsx("span",{children:"Turn"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-200 text-xs font-bold",children:R[Ae]?.name||"â€”"})]}),e.jsx("div",{className:"text-3xl font-extrabold tracking-tight",children:ht?`${R.find(t=>t.id===ht)?.name||"Winner"} Wins`:Ci||"Ready"})]}):e.jsx("div",{className:"text-xs text-slate-600",children:"Setup players and assign numbers"})})]}):Fe==="modern"?e.jsxs("div",{className:"space-y-3 mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-xl border px-4 py-2",style:{borderColor:`${E(l).color}50`,backgroundColor:`${E(l).color}18`},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:E(l).emoji}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold leading-tight text-white",children:l==="X01"?`X01 â€” ${w}`:l}),e.jsxs("p",{className:"text-[11px] text-slate-300/80",children:[E(l).tagline," Â· 3 darts per visit"]})]})]}),e.jsx("div",{className:"flex items-center gap-2 text-xs",children:e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:["Legs ",G,"â€“",z]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap py-1",children:[e.jsx("button",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-rose-600/20 text-rose-200 border border-rose-400/30 hover:bg-rose-600/40 transition-colors",onClick:()=>ie(!0),children:"Quit"}),e.jsx("button",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-amber-600/20 text-amber-200 border border-amber-400/30 hover:bg-amber-600/40 transition-colors",onClick:()=>{try{Ht(!0,null,D),Cs({type:"pause",pauseStartedAt:Date.now(),pauseInitiator:D})}catch{}fe("Match paused â€” select duration on overlay",{type:"info",timeout:2500})},children:"Pause"}),e.jsx("button",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-slate-600/20 text-slate-200 border border-slate-400/30 hover:bg-slate-600/40 transition-colors",onClick:()=>De(),children:"Restart"}),e.jsx("button",{className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${fn?"bg-indigo-600/40 text-indigo-100 border-indigo-400/50":"bg-indigo-600/20 text-indigo-200 border-indigo-400/30 hover:bg-indigo-600/40"}`,onClick:()=>pn(t=>!t),children:fn?"Close Setup â–²":"New Match â–¼"})]}),fn&&e.jsxs("div",{className:"rounded-2xl bg-slate-900/80 border border-white/10 p-3 space-y-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Match Setup"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"Game Mode"}),e.jsxs("select",{className:"input w-full text-sm",value:l,onChange:t=>Ls(t.target.value),children:[Un.map(t=>e.jsx("option",{value:t,children:t},t)),$r.map(t=>e.jsxs("option",{value:t,disabled:!(s?.fullAccess||s?.admin),children:[t,s?.fullAccess||s?.admin?"":" (Premium)"]},t))]})]}),l==="X01"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"Starting Score"}),e.jsx("input",{className:"input w-full text-sm",type:"number",min:1,max:1001,value:w,onChange:t=>Lt(Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"Format"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full text-xs border ${je==="first"?"bg-white/20 border-white/30":"bg-transparent border-white/10 opacity-60"}`,onClick:()=>wt("first"),children:"First to"}),e.jsx("button",{type:"button",className:`px-2 py-0.5 rounded-full text-xs border ${je==="best"?"bg-white/20 border-white/30":"bg-transparent border-white/10 opacity-60"}`,onClick:()=>wt("best"),children:"Best of"}),e.jsx("input",{className:"input w-14 text-center text-sm",type:"number",min:1,step:1,value:Xe,onChange:t=>Dn(Math.max(1,Math.floor(Number(t.target.value)||1)))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"AI Opponent"}),e.jsxs("select",{className:"input w-full text-sm",value:A,onChange:t=>Zn(t.target.value),children:[e.jsx("option",{value:"None",children:"None"}),ei.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-4 py-1 text-sm",onClick:()=>{pn(!1),De()},children:"Start New Match ðŸš€"}),e.jsx("button",{className:"btn btn--ghost px-3 py-1 text-sm",onClick:()=>pn(!1),children:"Cancel"})]})]}),oa&&e.jsx(Wr,{onClose:()=>ie(!1),onQuit:()=>{if(A==="None"){ie(!1),Oe({player:!0,opponent:!1}),Ft(!0);return}vs()},onPause:()=>{try{Ht(!0,null,D),Cs({type:"pause",pauseStartedAt:Date.now(),pauseInitiator:D})}catch{}ie(!1)}})]}):null,Fe!=="modern"?e.jsxs("div",{className:"space-y-2",children:[l==="Double Practice"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Tt[rt]?.label||"â€”"})]}),T,e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,max:60,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&vr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:vr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (D16, 50, 25, T20)",value:$,onChange:t=>K(t.target.value),onKeyDown:t=>{t.key==="Enter"&&jr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:jr,children:"Add"})]})]}),e.jsxs("div",{className:"text-xs text-slate-300",children:["Progress: ",Ot," of 21"]})]}),l==="Around the Clock"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:J[se]===25?"25 (Outer Bull)":J[se]===50?"50 (Inner Bull)":J[se]||"â€”"})]}),T,e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Lr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Lr,children:"Add Dart"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-44",placeholder:"Manual (T20, D5, 25, 50)",value:$,onChange:t=>K(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Mr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Mr,children:"Add"})]}),Vt>=J.length&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{ha(0),xa(0),M("Around the Clock")},children:"Reset"})]})]}),l==="Cricket"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Er()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Er,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Es(On()),X(0),M("Cricket")},children:"Reset"})]})]}),l==="Shanghai"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Pr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Pr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Kt(Vn()),X(0),M("Shanghai")},children:"Reset"})]})]}),l==="Halve It"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Ir()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Ir,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{_t($n()),X(0),M("Halve It")},children:"Reset"})]})]}),l==="High-Low"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&Hr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:Hr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Wt(Kn()),X(0),M("High-Low")},children:"Reset"})]})]}),l==="Bob's 27"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&yr()}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:yr,children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Sr,children:"Reset"})]})]}),l==="Count-Up"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(En(C),N(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{En(C),N(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{va(1),ja(0),Na(0),M("Count-Up")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",zt,"/",yi]})]}),l==="High Score"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(Rn(C),N(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{Rn(C),N(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ya(1),Sa(0),wa(0),M("High Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",Xt,"/",Si]})]}),l==="Low Score"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:0,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(Pn(C),N(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{Pn(C),N(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ka(1),Ca(0),Da(0),M("Low Score")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Round ",qt,"/",wi]})]}),l==="Checkout 170"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:$,onChange:t=>K(t.target.value),onKeyDown:t=>{t.key==="Enter"&&ks(!0)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>ks(!0),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Xi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",lt," Â· Attempts: ",Qt," ","Â· Successes: ",Yt]})]}),l==="Checkout 121"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (D16, T20)",value:$,onChange:t=>K(t.target.value),onKeyDown:t=>{t.key==="Enter"&&ks(!1)}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>ks(!1),children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:qi,children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Remaining: ",ct," Â· Attempts: ",Zt," ","Â· Successes: ",Jt]})]}),l==="Treble Practice"&&e.jsxs(e.Fragment,{children:[T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"text",placeholder:"Manual (T20)",value:$,onChange:t=>K(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){const n=Dt($);n!=null&&Bn(n,void 0,void 0),K("")}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{const t=Dt($);t!=null&&Bn(t,void 0,void 0),K("")},children:"Add Dart"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Hits: ",ot," Â· Misses:"," ",Math.max(0,Ia-ot)," Â· Darts:"," ",Ia,Me>0?`/${Me}`:""]}),Fa&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Completed!"," ",e.jsx("button",{className:"ml-2 underline",onClick:Dr,children:"Reset"})]})]}),l==="Baseball"&&e.jsxs(e.Fragment,{children:[T,e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Yi,children:"Reset"})})]}),l==="Golf"&&e.jsxs(e.Fragment,{children:[T,e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Ji,children:"Reset"})})]}),l==="Tic Tac Toe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:Array.from({length:9},(t,n)=>n).map(t=>e.jsx("button",{className:`h-16 rounded-xl border ${le.board[t]?"bg-emerald-500/20 border-emerald-400/30":"bg-slate-800/50 border-slate-700/50"}`,onClick:()=>{if(le.finished||le.board[t])return;const n=Number(prompt("Enter dart score for this cell (e.g., 20, 40, 60; 25 or 50 for center)")||0),r=n%3===0?"TRIPLE":n%2===0?"DOUBLE":"SINGLE",c=t,d=ti[c],v=d.type==="BULL"?null:d.num||null;el(c,n,r,v)},children:le.board[t]||""},t))}),T,e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:tl,children:"Reset"})})]}),l==="American Cricket"&&e.jsxs(e.Fragment,{children:[T,e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:Tr,children:"Reset"})})]}),l==="Scam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Target:"," ",e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:Ts[ce.targetIndex]})]}),T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:1,max:25,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(L("Scam"),as(Qr(ce,C)),N(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{L("Scam"),as(Qr(ce,C)),N(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{as(Ul()),M("Scam")},children:"Reset"})]}),ce.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["ðŸŽ‰ Finished in ",ce.darts," darts!"]})]}),l==="Fives"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score:"," ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[ge.score,"/",ge.target]})]}),T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:5,max:50,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(L("Fives"),Qs(Yr(ge,C)),N(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{L("Fives"),Qs(Yr(ge,C)),N(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Qs($l(ge.target)),M("Fives")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 5, 10, 15, 20, 25, 50 Â· Darts:"," ",ge.darts]}),ge.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",ge.target," in"," ",ge.darts," darts!"]})]}),l==="Sevens"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold",children:["Score:"," ",e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/10",children:[ve.score,"/",ve.target]})]}),T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-24",type:"number",min:7,max:21,value:C,onChange:t=>N(Number(t.target.value||0)),onKeyDown:t=>{t.key==="Enter"&&(L("Sevens"),Ys(Zr(ve,C)),N(0))}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{L("Sevens"),Ys(Zr(ve,C)),N(0)},children:"Add Dart"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{Ys(Wl(ve.target)),M("Sevens")},children:"Reset"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid scores: 7, 14, 21 Â· Darts:"," ",ve.darts]}),ve.finished&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["âœ“ Reached ",ve.target," in"," ",ve.darts," darts!"]})]}),l==="Killer"&&e.jsx(e.Fragment,{children:$a?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:R.map(t=>{const n=es[t.id],r=zs[t.id];return e.jsxs("div",{className:`p-2 rounded-xl border ${n?.eliminated?"opacity-50 border-red-500/40 bg-red-500/10":"border-slate-700/50 bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded ${n?.isKiller?"bg-purple-500/20 text-purple-200 border border-purple-400/30":"bg-slate-600/30 text-slate-300"}`,children:n?.isKiller?"Killer":"Not Killer"})]}),e.jsxs("div",{className:"mt-1 text-sm",children:["Number:"," ",e.jsx("span",{className:"font-semibold",children:r})]}),e.jsxs("div",{className:"text-sm",children:["Lives:"," ",e.jsx("span",{className:"font-semibold",children:n?.lives??0})]})]},t.id)})}),T,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input w-40",placeholder:"Manual (D16, T5)",value:$,onChange:t=>K(t.target.value),onKeyDown:t=>{if(t.key==="Enter"){if(ht)return;const r=$.trim().toUpperCase().match(/^(S|D|T)?\s*(\d{1,2})$/);if(!r){K("");return}const c=r[1]||"S",d=parseInt(r[2],10),v=c==="D"?"DOUBLE":c==="T"?"TRIPLE":"SINGLE",g=R[Ae];ts(k=>{const f={};Object.keys(k).forEach(y=>f[y]={...k[y]});const b=Al(g.id,f,v,d);if(b.becameKiller)Ve(`${g.name} became a Killer`);else if(b.victimId){const y=R.find(S=>S.id===b.victimId);Ve(`${g.name} hit ${y?.name}'s ${zs[b.victimId]} (${b.livesRemoved} life${(b.livesRemoved||0)>1?"s":""})`)}else Ve("No effect");const j=El(f);return j&&ss(j),f}),K(""),xt(k=>{const f=k+1;if(f>=3){let b=Ae;for(let j=1;j<=R.length;j++){const y=(Ae+j)%R.length,S=R[y].id,h=es[S];if(h&&!h.eliminated&&h.lives>0){b=y;break}}return mt(b),0}return f})}}}),e.jsx("button",{className:"btn px-3 py-1 text-sm",onClick:()=>{let t=Ae;for(let n=1;n<=R.length;n++){const r=(Ae+n)%R.length,c=R[r].id,d=es[c];if(d&&!d.eliminated&&d.lives>0){t=r;break}}mt(t),xt(0)},children:"Next Player"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 px-3 py-1 text-sm",onClick:()=>{ts({}),Xs({}),qs(!1),mt(0),xt(0),ss(null),Ve("")},children:"Reset"})]}),ht&&e.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 inline-block",children:["Winner:"," ",R.find(t=>t.id===ht)?.name," ",e.jsx("button",{className:"ml-2 underline",onClick:()=>{ts({}),Xs({}),qs(!1),mt(0),xt(0),ss(null),Ve("")},children:"Play Again"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Players"}),e.jsx("div",{className:"space-y-1",children:R.map((t,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"input",value:t.name,onChange:r=>{const c=r.target.value;Gs(d=>d.map((v,g)=>g===n?{...v,name:c}:v))}}),e.jsx("button",{className:"btn px-2 py-1",onClick:()=>Gs(r=>r.filter((c,d)=>d!==n)),disabled:R.length<=2,children:"Remove"})]},t.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn px-2 py-1",onClick:()=>Gs(t=>{const n=`p${t.length+1}`;return[...t,{id:n,name:`Player ${t.length+1}`}]}),children:"Add Player"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 px-3 py-1",onClick:()=>{if(R.length<2){alert("Need at least 2 players");return}const t=R.map(c=>c.id),n=Ml(t),r={};t.forEach(c=>{r[c]=Ll(n[c])}),Xs(n),ts(r),mt(0),xt(0),ss(null),Ve("Assigned numbers"),qs(!0)},children:"Assign Numbers & Start"})]})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold",children:"Your Turn"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col-reverse md:grid md:grid-cols-12 gap-4 items-start",children:[e.jsx("div",{className:"col-span-12 md:col-span-4 space-y-3",children:e.jsxs("div",{className:"rounded-2xl bg-slate-900/70 border border-white/10 p-4 shadow-lg",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-2",children:"Visit total"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{className:"input w-28",type:"number",min:0,max:l==="X01"?re<=170?170:180:999,placeholder:l==="X01"?"0â€“180":"0â€“999",value:Tn,onChange:t=>br(t.target.value),onKeyDown:t=>{t.key==="Enter"&&Mn()}}),e.jsx("button",{className:"btn px-4 py-1 text-sm",onClick:Mn,title:"Commit a full 3-dart total like 93",children:"Commit Visit"})]}),e.jsx("div",{className:"mt-3",children:e.jsx(bl,{value:Tn,onChange:br,onSubmit:Mn,helperText:"Tap numbers then Enter to commit the visit total."})})]})}),e.jsxs("div",{className:"col-span-12 md:col-span-4 space-y-3",children:[e.jsx("div",{className:"rounded-2xl bg-slate-900/70 border border-white/10 p-2 text-slate-100 shadow-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"rounded-lg bg-black/30 px-2 py-1",children:[e.jsx("div",{className:"uppercase tracking-wide text-white/50",children:yt.primaryLabel}),e.jsx("div",{className:"text-lg font-bold text-white",children:yt.primaryValue})]}),e.jsxs("div",{className:"rounded-lg bg-black/30 px-2 py-1",children:[e.jsx("div",{className:"uppercase tracking-wide text-white/50",children:yt.secondaryLabel}),e.jsx("div",{className:`text-lg font-bold ${yt.secondaryClass}`,children:yt.secondaryValue})]})]})}),e.jsx("div",{className:"rounded-2xl bg-slate-900/70 border border-white/10 p-2 text-slate-100 shadow-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"rounded-lg bg-black/30 px-2 py-1",children:[e.jsx("div",{className:"uppercase tracking-wide text-white/50",children:"Game"}),e.jsxs("div",{className:"text-lg font-bold text-white",children:[l,l==="X01"?` / ${w}`:""]})]}),e.jsxs("div",{className:"rounded-lg bg-black/30 px-2 py-1",children:[e.jsx("div",{className:"uppercase tracking-wide text-white/50",children:"Format"}),e.jsxs("div",{className:"text-lg font-bold text-white",children:[je==="first"?"First to":"Best of"," ",Xe," Â· ",G,"-",z]})]})]})}),e.jsxs("div",{className:"rounded-2xl bg-slate-900/70 border border-white/10 p-2 text-slate-100 shadow-lg",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Scoreboard"}),e.jsx(Ye,{gameMode:l,players:wn,matchScore:Oi})]})]}),e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsxs("div",{className:"relative rounded-2xl bg-black/60 border border-white/10 overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"absolute inset-x-0 top-0 z-10 flex items-center justify-between px-2 py-1 text-[11px] uppercase tracking-wide text-white/70 bg-black/40 backdrop-blur-sm",children:[e.jsx("span",{children:"Board camera"}),e.jsx("span",{className:"text-amber-300 font-semibold",children:"Camera disabled"})]}),e.jsx("div",{className:"p-4 text-sm text-slate-200/80",children:"Enable the camera to keep the board visible while you score."})]})})]}),e.jsx("div",{className:"text-xs text-slate-300",children:"Tip: Tap numbers then Enter to commit a 3-dart visit."})]}),e.jsx("div",{className:"flex flex-col gap-3 min-h-0 flex-1 text-[14px]",children:e.jsx("div",{className:"min-w-0 flex flex-col gap-2 overflow-y-auto pr-2 text-sm",style:{willChange:"scroll-position",transform:"translateZ(0)",WebkitOverflowScrolling:"touch"}})}),l==="Cricket"&&T,l==="Shanghai"&&e.jsx(e.Fragment,{children:e.jsx(Ye,{gameMode:"Shanghai",players:gn})}),l==="Shanghai"&&T,l==="Killer"&&e.jsx(e.Fragment,{children:e.jsx(Ye,{gameMode:"Killer",players:vn})}),l==="Scam"&&e.jsx(e.Fragment,{children:e.jsx(Ye,{gameMode:"Scam",players:jn})}),l==="Scam"&&T,l==="Fives"&&e.jsx(e.Fragment,{children:e.jsx(Ye,{gameMode:"Fives",players:Nn})}),l==="Fives"&&T,l==="Sevens"&&e.jsx(e.Fragment,{children:e.jsx(Ye,{gameMode:"Sevens",players:yn})}),l==="Sevens"&&T]}),e.jsx("div",{className:"h-1"})]})]})})})}),mi&&e.jsx(Yl,{onClose:()=>Jn(!1)}),Fn&&e.jsxs("div",{className:"absolute inset-0 z-40 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-slate-900/40"}),e.jsxs("div",{className:"relative z-10 p-4 rounded-xl bg-black/60 border border-slate-700 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ”’"}),e.jsx("div",{className:"font-semibold",children:"Premium mode locked"}),e.jsx("div",{className:"text-sm text-slate-200/80",children:"Upgrade to PREMIUM to play modes like Killer, Cricket, Shanghai, and more."}),e.jsxs("button",{onClick:async()=>{try{const n=await(await fetch(`${Zl}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s?.email})})).json();n.ok&&n.url?(window.location.href=n.url,n.development&&fe("Opened Stripe test checkout (development mode)",{type:"info",timeout:3e3})):n.error==="STRIPE_NOT_CONFIGURED"?fe("Premium purchases are not available in this development environment. Please visit the production site to upgrade.",{type:"error",timeout:4e3}):fe("Failed to create checkout session. Please try again.",{type:"error",timeout:4e3})}catch{fe("Error creating checkout. Please try again.",{type:"error",timeout:4e3})}},className:"btn mt-3 bg-gradient-to-r from-indigo-500 to-fuchsia-600 text-white font-bold",children:["Upgrade to PREMIUM Â·"," ",dl(ul(),5)]})]})]}),Fi&&typeof document<"u"?Vr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[200] flex items-start justify-center pt-8 p-4",onClick:()=>We(!1),children:e.jsx(Qe,{storageKey:"ndn:modal:offline-camera-manager",className:"relative",defaultWidth:640,defaultHeight:520,minWidth:480,minHeight:420,maxWidth:1200,maxHeight:900,initialFitHeight:!0,onClose:()=>We(!1),children:e.jsxs("div",{className:"space-y-3",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50",children:"Camera Devices"}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Manage Offline Camera Feeds"})]}),e.jsx("button",{className:"btn bg-slate-800 hover:bg-slate-700 text-white",onClick:()=>We(!1),children:"Close"})]}),e.jsx(xl,{fill:!0,user:s,playerScore:re,aiScore:ee,x01Score:w,inMatch:Mt,showWinPopup:ta,pendingLegWinner:Pt,playerDartsThrown:Ka,aiDartsThrown:_a,totalPlayerDarts:on,totalAiDarts:dn,totalPlayerPoints:Qa,totalAiPoints:Ya,player180s:Ja,player140s:Li,player100s:Mi,ai180s:er,ai140s:Ai,ai100s:Ei,playerHighestCheckout:Ri,aiHighestCheckout:Pi,onClose:()=>We(!1),onOpen:()=>We(!0),layout:Fe})]})})}),document.body):null,bs&&typeof document<"u"?Vr.createPortal((()=>{const{target:t,value:n,stage:r}=bs,c=t==="player"?D:js,d=t==="player"?G:z;return e.jsx("div",{className:"fixed inset-0 bg-black/75 z-[240] flex items-start justify-center pt-8 p-4",onClick:St,children:e.jsx(Qe,{storageKey:"ndn:modal:offline-leg-override",className:"relative",defaultWidth:360,defaultHeight:240,minWidth:280,minHeight:200,maxWidth:420,maxHeight:360,initialFitHeight:!0,onClose:St,children:e.jsxs("div",{className:"space-y-3 max-w-[18rem] mx-auto",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-white/50",children:["Step ",r," of 2"]}),e.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:"Override legs?"})]}),e.jsx("div",{className:"text-sm text-slate-200 leading-relaxed",children:r===1?e.jsxs(e.Fragment,{children:["Set ",c,"'s legs to"," ",e.jsx("span",{className:"font-semibold text-white",children:n}),"? Confirm to continue."]}):e.jsxs(e.Fragment,{children:["Final confirmation: set ",c,"'s legs to"," ",e.jsx("span",{className:"font-semibold text-white",children:n}),". Select"," ",e.jsx("span",{className:"font-semibold text-emerald-200",children:"Yes"})," ","to apply immediately."]})}),e.jsxs("div",{className:"rounded-xl bg-black/40 border border-white/10 p-3 text-sm",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-white/50 mb-1",children:"Current legs"}),e.jsx("div",{className:"text-base font-semibold text-white",children:d})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{className:"btn bg-rose-600 hover:bg-rose-700 text-white",onClick:St,children:"No"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 text-white",onClick:$i,children:"Yes"})]})]})})})})(),document.body):null,ta&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-start justify-center pt-8 z-[99999]",children:e.jsxs(Qe,{storageKey:"ndn:modal:offline-win",className:"w-full relative",defaultWidth:420,defaultHeight:360,minWidth:360,minHeight:300,maxWidth:800,maxHeight:700,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Leg Won!"}),e.jsxs("div",{className:"mb-2 text-sm text-slate-200",children:["Average:"," ",e.jsx("span",{className:"font-mono",children:gl(P.players?.[P.currentPlayerIdx]?.currentThreeDartAvg??0)})]}),e.jsxs("div",{className:"grid gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Darts used at double"}),e.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(t=>e.jsx("button",{className:`btn px-3 py-1 text-sm ${Bt===t?"bg-brand-600":"btn--ghost"}`,onClick:()=>ra(t),children:Ce(t)},`win-double-${t}`))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Darts at checkout"}),e.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(t=>e.jsx("button",{className:`btn px-3 py-1 text-sm ${It===t?"bg-brand-600":"btn--ghost"}`,onClick:()=>ia(t),children:Ce(t)},`win-checkout-${t}`))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-2",children:[e.jsx("button",{className:"btn w-full",onClick:nl,children:"Submit"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700 w-full",onClick:()=>{H(!1),De()},children:"Rematch"}),e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800 w-full",onClick:()=>{H(!1),Ue(!1),Je(!1)},children:"Back to Menu"})]})]})}),Ii&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-start justify-center pt-8 z-[60]",children:e.jsxs(Qe,{storageKey:"ndn:modal:offline-summary",className:"w-full relative",defaultWidth:820,defaultHeight:520,minWidth:600,minHeight:400,maxWidth:1400,maxHeight:1e3,initialFitHeight:!0,children:[e.jsx("h3",{className:"text-xl font-extrabold mb-2",children:"Match Summary"}),e.jsxs("div",{className:"text-xs opacity-80 mb-3",children:[l," Â· ",w," start Â· First to ",et]}),(()=>{const t=on>0?Qa/on*3:0,n=(()=>{const S=he.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return S.length?`${Math.min(...S)} darts`:"â€”"})(),r=(()=>{const S=he.filter(h=>h.winner==="player"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return S.length?`${Math.max(...S)} darts`:"â€”"})(),c=ls>0?Math.round(Wa/ls*100):0,d=dn>0?Ya/dn*3:0,v=(()=>{const S=he.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return S.length?`${Math.min(...S)} darts`:"â€”"})(),g=(()=>{const S=he.filter(h=>h.winner==="ai"&&typeof h.winnerDarts=="number").map(h=>h.winnerDarts);return S.length?`${Math.max(...S)} darts`:"â€”"})(),k=os>0?Math.round(za/os*100):0,f=[{min:0,max:39,label:"0+"},{min:40,max:59,label:"40+"},{min:60,max:79,label:"60+"},{min:80,max:99,label:"80+"},{min:100,max:119,label:"100+"},{min:120,max:139,label:"120+"},{min:140,max:179,label:"140+"},{min:180,max:180,label:"180"}],b=S=>{const h=new Array(f.length).fill(0),Be=P.players?.[S];if(Be)for(const B of Be.legs||[])for(const qe of B.visits||[]){const Ur=qe?.score||qe?.visitTotal||0;for(let kt=f.length-1;kt>=0;kt--)if(Ur>=f[kt].min&&Ur<=f[kt].max){h[kt]++;break}}return f.map((B,qe)=>({label:B.label,value:h[qe]}))},j=b(0),y=b(1);return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:Ct(s,"You")}),e.jsx("div",{className:"text-3xl font-extrabold",children:G}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:t.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:ls})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[c,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:n})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:Ja})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-[10px] opacity-60 mb-1 text-center",children:"Score Distribution"}),e.jsx(Gr,{data:j,height:80,barWidth:18,gap:2,showValues:!0})]})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsxs("div",{className:"text-4xl font-black",children:[G," â€“ ",z]})}),e.jsxs("div",{className:"p-3 rounded-2xl glass border border-white/10",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:A==="None"?"Opponent":`${A} AI`}),e.jsx("div",{className:"text-3xl font-extrabold",children:z}),e.jsx("div",{className:"text-xs opacity-80",children:"Legs Won"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Final 3DA"}),e.jsx("div",{className:"font-semibold",children:d.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Darts At Double"}),e.jsx("div",{className:"font-semibold",children:os})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Double %"}),e.jsxs("div",{className:"font-semibold",children:[k,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Best Dart Leg"}),e.jsx("div",{className:"font-semibold",children:v})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"Worst Dart Leg"}),e.jsx("div",{className:"font-semibold",children:g})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-70",children:"180's Hit"}),e.jsx("div",{className:"font-semibold",children:er})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-[10px] opacity-60 mb-1 text-center",children:"Score Distribution"}),e.jsx(Gr,{data:y,height:80,barWidth:18,gap:2,showValues:!0})]})]})]})})(),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Legs Timeline"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:he.map((t,n)=>e.jsxs("div",{className:`px-3 py-1 rounded-full border text-xs ${t.winner==="player"?"bg-emerald-500/15 border-emerald-400/30":"bg-fuchsia-500/15 border-fuchsia-400/30"}`,children:["Leg ",n+1,":"," ",t.winner==="player"?"You":A==="None"?"Opp":"AI"," ","Â· Dbl ",Ce(t.doubleDarts)," Â· CO"," ",Ce(t.checkoutDarts||0)]},n))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx("button",{className:"btn bg-slate-700 hover:bg-slate-800",onClick:()=>hn(!1),children:"Close"}),e.jsx("button",{className:"btn bg-emerald-600 hover:bg-emerald-700",onClick:()=>{hn(!1),De()},children:"Rematch"})]})]})}),he.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Leg Stats"}),e.jsx("ul",{children:he.map((t,n)=>e.jsxs("li",{children:["Leg ",n+1,": Double darts: ",Ce(t.doubleDarts),", Checkout darts: ",Ce(t.checkoutDarts||0)]},n))})]})]}),e.jsx(pl,{localPlayerName:D,onResume:()=>{Ht(!1,null)}})]})}export{Tc as default};
//# sourceMappingURL=OfflinePlay-CsXnCxeq.js.map
