{"version":3,"file":"PauseOverlay-D_Mr9RJr.js","sources":["../../src/components/scoreboards/useGameStats.ts","../../src/components/ui/PauseOverlay.tsx"],"sourcesContent":["/**\n * Hook to convert OfflinePlay game state to GameScoreboard format\n */\n\nimport { useMemo } from \"react\";\nimport type { PlayerStats } from \"./GameScoreboard.js\";\nimport type { GameMode } from \"./GameScoreboard.js\";\nimport { getAllTimeAvg } from \"../../store/profileStats.js\";\n\nexport function useOfflineGameStats(\n  gameMode: GameMode,\n  // X01 state\n  playerScore?: number,\n  aiScore?: number,\n  playerLegs?: number,\n  aiLegs?: number,\n  playerLastDart?: number,\n  aiLastDart?: number,\n  playerVisitSum?: number,\n  aiVisitSum?: number,\n  playerLastVisitScore?: number | null,\n  aiLastVisitScore?: number | null,\n  playerVisitDartCount?: number,\n  aiVisitDartCount?: number,\n  playerDoublesHit?: number,\n  playerDoublesAtt?: number,\n  aiDoublesHit?: number,\n  aiDoublesAtt?: number,\n  legStats?: Array<any>,\n  isPlayerTurn?: boolean,\n  ai?: string,\n  x01Score?: number,\n  // Cricket state\n  cricket?: any,\n  // Shanghai state\n  shanghai?: any,\n  // Killer state\n  killerPlayers?: Array<any>,\n  killerStates?: Record<string, any>,\n  killerAssigned?: Record<string, number>,\n  killerTurnIdx?: number,\n): PlayerStats[] {\n  return useMemo(() => {\n    const players: PlayerStats[] = [];\n\n    if (gameMode === \"X01\") {\n      // Calculate player match average\n      let playerMatchAvg = 0;\n      let playerDarts = 0;\n      let playerScored = 0;\n      if (legStats && legStats.length > 0) {\n        for (const leg of legStats) {\n          if (leg.dartsThrown && leg.totalScored) {\n            playerDarts += leg.dartsThrown;\n            playerScored += leg.totalScored;\n          }\n        }\n        if (playerDarts > 0) {\n          playerMatchAvg = (playerScored / playerDarts) * 3;\n        }\n      }\n\n      // Player card\n      const playerVisitDarts = playerVisitDartCount ?? 0;\n      const playerCurrentVisitActive = playerVisitDarts > 0;\n      const playerCurrentVisitSum = playerVisitSum ?? 0;\n      const playerLastVisitTotal = playerLastVisitScore ?? null;\n      const playerLastDartValue = playerLastDart ?? 0;\n      const resolvedPlayerLastScore = playerCurrentVisitActive\n        ? playerCurrentVisitSum\n        : (playerLastVisitTotal ?? playerLastDartValue);\n\n      players.push({\n        name: \"You\",\n        isCurrentTurn: !!isPlayerTurn,\n        legsWon: playerLegs || 0,\n        score:\n          typeof playerScore === \"number\"\n            ? playerScore\n            : typeof x01Score === \"number\"\n              ? x01Score\n              : 0,\n        lastScore: resolvedPlayerLastScore,\n        avg: playerMatchAvg,\n        checkoutRate:\n          playerDoublesAtt && playerDoublesAtt > 0\n            ? Math.round(((playerDoublesHit || 0) / playerDoublesAtt) * 100)\n            : 0,\n        bestLeg:\n          legStats && legStats.length > 0\n            ? `${Math.min(...legStats.map((l) => l.doubleDarts + (l.checkoutDarts || 0))) || 0} darts`\n            : \"—\",\n        matchAvg: playerMatchAvg,\n        allTimeAvg: getAllTimeAvg(\"You\") || 0,\n      });\n\n      // AI card (if playing against AI)\n      if (ai && ai !== \"None\") {\n        const aiVisitDarts = aiVisitDartCount ?? 0;\n        const aiCurrentVisitActive = aiVisitDarts > 0;\n        const aiCurrentVisitSum = aiVisitSum ?? 0;\n        const aiLastVisitTotal = aiLastVisitScore ?? null;\n        const aiLastDartValue = aiLastDart ?? 0;\n        const resolvedAiLastScore = aiCurrentVisitActive\n          ? aiCurrentVisitSum\n          : (aiLastVisitTotal ?? aiLastDartValue);\n\n        players.push({\n          name: `${ai} AI`,\n          isCurrentTurn: !isPlayerTurn,\n          legsWon: aiLegs || 0,\n          score:\n            typeof aiScore === \"number\"\n              ? aiScore\n              : typeof x01Score === \"number\"\n                ? x01Score\n                : 0,\n          lastScore: resolvedAiLastScore,\n          avg: undefined,\n          checkoutRate:\n            aiDoublesAtt && aiDoublesAtt > 0\n              ? Math.round(((aiDoublesHit || 0) / aiDoublesAtt) * 100)\n              : 0,\n          bestLeg: \"—\",\n        });\n      }\n    }\n\n    if (gameMode === \"Cricket\") {\n      players.push({\n        name: \"You\",\n        isCurrentTurn: !!isPlayerTurn,\n        closed: cricket?.marks || {},\n        points: cricket?.points || 0,\n      });\n\n      if (ai && ai !== \"None\") {\n        players.push({\n          name: `${ai} AI`,\n          isCurrentTurn: !isPlayerTurn,\n          closed: {},\n          points: 0,\n        });\n      }\n    }\n\n    if (gameMode === \"Shanghai\") {\n      players.push({\n        name: \"You\",\n        isCurrentTurn: !!isPlayerTurn,\n        round: shanghai?.round || 1,\n        target: shanghai?.target || 1,\n        score: shanghai?.score || 0,\n      });\n\n      if (ai && ai !== \"None\") {\n        players.push({\n          name: `${ai} AI`,\n          isCurrentTurn: !isPlayerTurn,\n          round: shanghai?.round || 1,\n          target: shanghai?.target || 1,\n          score: 0,\n        });\n      }\n    }\n\n    if (gameMode === \"Killer\" && killerPlayers && killerPlayers.length > 0) {\n      killerPlayers.forEach((p, idx) => {\n        const state = killerStates?.[p.id];\n        players.push({\n          name: p.name,\n          isCurrentTurn: idx === killerTurnIdx,\n          number: killerAssigned?.[p.id],\n          lives: state?.lives || 0,\n          eliminated: state?.eliminated || false,\n        });\n      });\n    }\n\n    return players;\n  }, [\n    gameMode,\n    playerScore,\n    aiScore,\n    playerLegs,\n    aiLegs,\n    playerLastDart,\n    aiLastDart,\n    playerVisitSum,\n    aiVisitSum,\n    playerLastVisitScore,\n    aiLastVisitScore,\n    playerVisitDartCount,\n    aiVisitDartCount,\n    playerDoublesHit,\n    playerDoublesAtt,\n    aiDoublesHit,\n    aiDoublesAtt,\n    legStats,\n    isPlayerTurn,\n    ai,\n    cricket,\n    shanghai,\n    killerPlayers,\n    killerStates,\n    killerAssigned,\n    killerTurnIdx,\n  ]);\n}\n\nexport function useOnlineGameStats(\n  gameMode: GameMode,\n  matchState?: any, // From useMatch() store\n  participants?: string[],\n): PlayerStats[] {\n  return useMemo(() => {\n    const players: PlayerStats[] = [];\n\n    if (!matchState || !matchState.players || matchState.players.length === 0) {\n      return players;\n    }\n\n    matchState.players.forEach((player: any, idx: number) => {\n      const isCurrentTurn = idx === matchState.currentPlayerIdx;\n\n      if (gameMode === \"X01\") {\n        // Calculate match average for this player\n        let matchAvg = 0;\n        let totalDarts = 0;\n        let totalScored = 0;\n\n        if (player.legs && player.legs.length > 0) {\n          for (const leg of player.legs) {\n            if (leg.finished) {\n              const legDarts = leg.dartsThrown || 0;\n              const legScored =\n                Math.max(0, leg.totalScoreStart - leg.totalScoreRemaining) || 0;\n              totalDarts += legDarts;\n              totalScored += legScored;\n            }\n          }\n        }\n\n        if (totalDarts > 0) {\n          matchAvg = (totalScored / totalDarts) * 3;\n        }\n\n        players.push({\n          name: player.name || `Player ${idx + 1}`,\n          isCurrentTurn,\n          legsWon: player.legsWon || 0,\n          score: player.score || 0,\n          lastScore: player.lastVisitScore || 0,\n          checkoutRate:\n            player.doublesAttempted > 0\n              ? Math.round((player.doublesHit / player.doublesAttempted) * 100)\n              : 0,\n          bestLeg: player.bestLegDarts ? `${player.bestLegDarts} darts` : \"—\",\n          matchAvg: matchAvg,\n          allTimeAvg: player.name ? getAllTimeAvg(player.name) : 0,\n        });\n      }\n\n      if (gameMode === \"Cricket\") {\n        players.push({\n          name: player.name || `Player ${idx + 1}`,\n          isCurrentTurn,\n          closed: player.cricket?.marks || {},\n          points: player.cricket?.points || 0,\n        });\n      }\n\n      if (gameMode === \"Killer\") {\n        players.push({\n          name: player.name || `Player ${idx + 1}`,\n          isCurrentTurn,\n          number: player.killerNumber || null,\n          lives: player.killerLives || 3,\n          eliminated: player.killerEliminated || false,\n        });\n      }\n    });\n\n    return players;\n  }, [gameMode, matchState, participants]);\n}\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { useMatchControl } from \"../../store/matchControl.js\";\n\nconst DURATION_OPTIONS = [\n  { label: \"1 min\", minutes: 1 },\n  { label: \"3 min\", minutes: 3 },\n  { label: \"5 min\", minutes: 5 },\n] as const;\n\nfunction fmt(ms: number) {\n  const s = Math.max(0, Math.floor(ms / 1000));\n  const mm = Math.floor(s / 60)\n    .toString()\n    .padStart(2, \"0\");\n  const ss = (s % 60).toString().padStart(2, \"0\");\n  return { mm, ss, totalSeconds: s };\n}\n\nexport default function PauseOverlay({\n  localPlayerName,\n  onResume,\n  onDurationSelected,\n}: {\n  localPlayerName?: string | null;\n  onResume?: () => void;\n  onDurationSelected?: (minutes: number, endsAt: number) => void;\n}) {\n  const paused = useMatchControl((s) => s.paused);\n  const pauseEndsAt = useMatchControl((s) => s.pauseEndsAt);\n  const pauseStartedAt = useMatchControl((s) => s.pauseStartedAt);\n  const pauseInitiator = useMatchControl((s) => s.pauseInitiator);\n  const setPaused = useMatchControl((s) => s.setPaused);\n  const [now, setNow] = useState(Date.now());\n\n  useEffect(() => {\n    if (!paused || !pauseEndsAt) return;\n    const t = setInterval(() => {\n      const current = Date.now();\n      setNow(current);\n      if (current >= pauseEndsAt) {\n        setPaused(false, null);\n      }\n    }, 250);\n    return () => clearInterval(t);\n  }, [paused, pauseEndsAt, setPaused]);\n\n  const remaining = Math.max(0, (pauseEndsAt ?? now) - now);\n  const started = pauseStartedAt ?? now;\n  const total = Math.max(1, (pauseEndsAt ?? now) - started);\n  const progress = Math.max(0, Math.min(1, 1 - remaining / total));\n  const pct = Math.round(progress * 100);\n\n  const ringStyle = useMemo(\n    () => ({\n      background: `conic-gradient(rgba(251, 191, 36, 0.95) ${pct}%, rgba(255, 255, 255, 0.08) ${pct}%)`,\n    }),\n    [pct],\n  );\n\n  if (!paused) return null;\n\n  const canResume =\n    !pauseInitiator || !localPlayerName || pauseInitiator === localPlayerName;\n\n  const handleResume = () => {\n    if (onResume) {\n      onResume();\n    } else {\n      setPaused(false, null);\n    }\n  };\n\n  const selectDuration = (minutes: number) => {\n    const endsAt = Date.now() + minutes * 60_000;\n    setPaused(true, endsAt, pauseInitiator);\n    // Notify parent so online matches can sync with opponent\n    if (onDurationSelected) onDurationSelected(minutes, endsAt);\n  };\n\n  // Phase 1: timer duration selection (no pauseEndsAt yet)\n  const needsSelection = !pauseEndsAt;\n\n  const { mm, ss } = needsSelection ? { mm: \"--\", ss: \"--\" } : fmt(remaining);\n\n  return createPortal(\n    <div\n      className=\"fixed inset-0 z-[1200] flex items-center justify-center\"\n      style={{ pointerEvents: \"all\" }}\n      onKeyDown={(e) => e.stopPropagation()}\n      onKeyUp={(e) => e.stopPropagation()}\n    >\n      {/* Full-screen frosted glass backdrop — blocks all interaction underneath */}\n      <div className=\"absolute inset-0 bg-slate-950/80 backdrop-blur-2xl\" />\n      <div className=\"absolute inset-0 bg-gradient-to-br from-white/[0.04] to-transparent\" />\n\n      {/* Centered analogue timer card */}\n      <div className=\"relative w-full max-w-sm mx-4 rounded-3xl border border-white/15 bg-white/[0.08] shadow-2xl shadow-black/50 p-8 sm:p-10 backdrop-blur-xl\">\n        <div className=\"absolute inset-0 rounded-3xl bg-gradient-to-br from-white/10 to-transparent pointer-events-none\" />\n        <div className=\"relative flex flex-col items-center gap-6 text-center\">\n          <div className=\"text-xs uppercase tracking-[0.35em] font-semibold text-amber-200/80\">\n            Match Paused\n          </div>\n          {pauseInitiator && (\n            <div className=\"text-sm text-amber-200/60\">\n              Paused by{\" \"}\n              <span className=\"font-semibold text-amber-100\">\n                {pauseInitiator}\n              </span>\n            </div>\n          )}\n          {/* Analogue ring timer */}\n          <div className=\"relative flex items-center justify-center w-48 h-48 sm:w-56 sm:h-56\">\n            <div\n              className=\"absolute inset-0 rounded-full border border-amber-300/30 shadow-inner\"\n              style={\n                needsSelection\n                  ? { background: \"rgba(255, 255, 255, 0.08)\" }\n                  : ringStyle\n              }\n            />\n            <div className=\"absolute inset-3 rounded-full bg-slate-950/90 border border-white/10 flex items-center justify-center\">\n              <div className=\"font-mono text-5xl sm:text-6xl font-black text-white tabular-nums\">\n                {mm}\n                <span className=\"text-amber-300/80\">:</span>\n                {ss}\n              </div>\n            </div>\n          </div>\n\n          {needsSelection ? (\n            /* Phase 1 — duration selection */\n            canResume ? (\n              <div className=\"flex flex-col items-center gap-3\">\n                <div className=\"text-[11px] uppercase tracking-[0.25em] text-amber-200/60\">\n                  Select pause duration\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  {DURATION_OPTIONS.map((opt) => (\n                    <button\n                      key={opt.minutes}\n                      className=\"px-5 py-2.5 rounded-2xl text-sm font-semibold bg-amber-500/20 hover:bg-amber-500/40 text-amber-100 border border-amber-400/30 shadow-lg transition active:scale-95\"\n                      onClick={() => selectDuration(opt.minutes)}\n                    >\n                      {opt.label}\n                    </button>\n                  ))}\n                </div>\n                <button\n                  className=\"mt-1 px-8 py-3 rounded-2xl text-sm font-semibold bg-emerald-600 hover:bg-emerald-500 text-white border border-emerald-400/40 shadow-lg shadow-emerald-500/20 transition active:scale-95\"\n                  onClick={handleResume}\n                >\n                  Resume\n                </button>\n              </div>\n            ) : (\n              <div className=\"text-xs text-amber-200/50 mt-1\">\n                Waiting for{\" \"}\n                <span className=\"font-semibold text-amber-100\">\n                  {pauseInitiator}\n                </span>{\" \"}\n                to select timer…\n              </div>\n            )\n          ) : (\n            /* Phase 2 — countdown active */\n            <>\n              <div className=\"text-[11px] uppercase tracking-[0.25em] text-amber-200/40\">\n                Countdown\n              </div>\n              {canResume ? (\n                <button\n                  className=\"mt-1 px-8 py-3 rounded-2xl text-sm font-semibold bg-emerald-600 hover:bg-emerald-500 text-white border border-emerald-400/40 shadow-lg shadow-emerald-500/20 transition active:scale-95\"\n                  onClick={handleResume}\n                >\n                  Resume\n                </button>\n              ) : (\n                <div className=\"text-xs text-amber-200/50 mt-1\">\n                  Only{\" \"}\n                  <span className=\"font-semibold text-amber-100\">\n                    {pauseInitiator}\n                  </span>{\" \"}\n                  can resume\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>,\n    document.body,\n  );\n}\n"],"names":["useOfflineGameStats","gameMode","playerScore","aiScore","playerLegs","aiLegs","playerLastDart","aiLastDart","playerVisitSum","aiVisitSum","playerLastVisitScore","aiLastVisitScore","playerVisitDartCount","aiVisitDartCount","playerDoublesHit","playerDoublesAtt","aiDoublesHit","aiDoublesAtt","legStats","isPlayerTurn","ai","x01Score","cricket","shanghai","killerPlayers","killerStates","killerAssigned","killerTurnIdx","useMemo","players","playerMatchAvg","playerDarts","playerScored","leg","resolvedPlayerLastScore","l","getAllTimeAvg","resolvedAiLastScore","p","idx","state","useOnlineGameStats","matchState","participants","player","isCurrentTurn","matchAvg","totalDarts","totalScored","legDarts","legScored","DURATION_OPTIONS","fmt","ms","s","mm","ss","PauseOverlay","localPlayerName","onResume","onDurationSelected","paused","useMatchControl","pauseEndsAt","pauseStartedAt","pauseInitiator","setPaused","now","setNow","useState","useEffect","current","remaining","total","progress","pct","ringStyle","canResume","handleResume","selectDuration","minutes","endsAt","needsSelection","createPortal","jsxs","e","jsx","opt","Fragment"],"mappings":"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"}