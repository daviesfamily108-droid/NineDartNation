/* Responsive Overrides
   Loaded after Tailwind in `src/main.tsx`.
   Provides device-specific polish for mobile (≤768px), tablet (769-1024px),
   and desktop (>1024px) viewports.
*/

/* ─── Mobile (≤768px) ─── */
@media (max-width: 768px) {
  :root {
    --ndn-safe-top: env(safe-area-inset-top, 0px);
    --ndn-safe-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Prevent iOS text-size auto bumping */
  html {
    -webkit-text-size-adjust: 100%;
  }

  /* Prevent sideways scroll accidents on touch */
  html,
  body {
    width: 100%;
    overflow-x: hidden;
  }

  /* Ensure drawer opens smoothly */
  [role="dialog"] {
    max-height: 100vh !important;
  }

  /* Compact header on mobile */
  #ndn-header {
    padding: 0.375rem 0.75rem !important;
  }

  /* Larger touch targets for buttons */
  .btn-sm,
  button.tab {
    min-height: 40px;
    min-width: 40px;
  }

  /* Stack filter bar vertically on mobile */
  .ndn-filterbar {
    flex-direction: column;
    gap: 0.5rem;
  }

  /* Match cards: single column, more breathing room */
  .ndn-card-grid {
    grid-template-columns: 1fr !important;
    gap: 0.75rem;
  }

  /* Main content full width without padding cutting into space */
  #ndn-main-scroll {
    padding-right: 0;
  }

  /* Greeting area: tighter on mobile */
  .ndn-greeting-avg {
    display: none;
  }

  /* Safe-area bottom padding for iOS */
  .ndn-page {
    padding-bottom: var(--ndn-safe-bottom, 0px);
  }

  /* Stats page card — match desktop default; admin-tuneable via --ndn-card-padding-bottom */
  .ndn-game-shell.ndn-stats-page,
  .card.ndn-stats-page {
    padding-bottom: var(--ndn-card-padding-bottom, 810px) !important;
  }

  /* ── Online Lobby mobile fixes ── */

  /* Shell body must scroll on mobile */
  .ndn-online-page .ndn-shell-body {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch;
  }

  /* Compact page header: smaller padding, hide New Page button */
  .ndn-page-header {
    padding: 0.5rem 0.75rem !important;
    gap: 0.5rem !important;
  }

  .ndn-new-page-btn {
    display: none !important;
  }

  /* Hide bottom page tabs on mobile (single page is typical) */
  .ndn-page-tabs {
    display: none !important;
  }

  /* Filter bar: wrap horizontally instead of stacking vertically */
  .ndn-online-page .ndn-filterbar {
    flex-direction: row !important;
    flex-wrap: wrap !important;
    gap: 0.375rem !important;
  }

  .ndn-online-page .ndn-filterbar > * {
    flex: 1 1 45%;
    min-width: 100px;
  }

  /* Search input takes full width */
  .ndn-online-page .ndn-filterbar > :first-child {
    flex: 1 1 100%;
  }

  /* Smaller filter controls on mobile */
  .ndn-online-page .ndn-filterbar select,
  .ndn-online-page .ndn-filterbar button {
    font-size: 0.75rem;
    padding: 0.375rem 0.5rem;
  }

  /* Online page card bottom padding */
  .ndn-online-page {
    padding-bottom: 80px !important;
  }
}

/* ─── Tablet (769px – 1024px) ─── */
@media (min-width: 769px) and (max-width: 1024px) {
  /* Two-column match grid */
  .ndn-card-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }

  /* Slightly tighter header */
  #ndn-header {
    padding: 0.5rem 1rem !important;
  }

  /* Hide welcome text, keep avg */
  .ndn-greeting-welcome {
    display: none;
  }
}

/* ─── Desktop (>1024px) ─── */
@media (min-width: 1025px) {
  /* Tighter grid gap for compact lobby cards */
  .ndn-card-grid {
    gap: 0.5rem;
  }
}

/* ─── Small phones (iPhone SE, etc) ─── */
@media (max-width: 380px) {
  .home-content h2 {
    font-size: 26px !important;
  }

  .home-content p {
    font-size: 14px !important;
  }

  /* Even more compact header */
  #ndn-header {
    padding: 0.25rem 0.5rem !important;
  }
}

/* ─── Touch device helpers ─── */
@media (hover: none) and (pointer: coarse) {
  /* Ensure comfortable tap targets */
  button,
  a,
  select,
  input[type="text"] {
    min-height: 36px;
  }

  /* Disable hover effects that feel stuck on touch */
  .group:hover {
    border-color: inherit;
  }
}
