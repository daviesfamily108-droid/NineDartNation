/* Mobile-only visual overhaul (max-width: 640px)
   This file contains strong overrides to make the site clean, legible
   and simple on small screens. It is intentionally scoped to small
   viewports and loaded after the main stylesheet.
*/

@media (max-width: 640px) {
  /* Simplify background to reduce visual noise on phones */
  body {
    background: #0f172a; /* Solid dark slate for cleaner look */
    color: #f8fafc;
    font-size: 16px; /* base readable size */
    line-height: 1.35;
  }

  /* Header becomes compact and fixed */
  .header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 40;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    padding-top: max(12px, env(safe-area-inset-top));
    border-radius: 0;
    background: rgba(15, 23, 42, 0.95);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(255,255,255,0.05);
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
  }
  .logo { font-size: 1.25rem; font-weight: 800; }

  /* Hide large sidebar and surface as bottom nav when needed */
  .sidebar { display: none !important; }
  .sidebar.mobile-sidebar-visible { display: flex !important; }

  /* Convert main layout to a single-column flow */
  .container, .app-shell, .main-content, .ndn-game-shell { padding: 0.5rem !important; }
  .ndn-game-shell { margin-top: 72px; /* account for fixed header */ }

  /* Cards should be edge-to-edge with comfortable padding */
  .card, .glass {
    border-radius: 12px !important;
    margin: 0.5rem 0 !important;
    padding: 16px !important;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
    background: #1e293b !important; /* Solid card bg */
    border: 1px solid rgba(255,255,255,0.05) !important;
  }

  /* Make buttons full width where appropriate and bigger tap targets */
  .btn { width: 100% !important; padding: 14px 16px !important; font-size: 16px !important; border-radius: 10px !important; }
  .btn-inline { width: auto !important; }

  /* Forms and inputs comfortable on mobile */
  .input, input, textarea, select { font-size: 16px !important; padding: 12px 14px !important; border-radius: 10px !important; background: #0f172a !important; border: 1px solid rgba(255,255,255,0.1) !important; }

  /* Camera and video panes should be shorter and responsive */
  .ndn-camera-tall { min-height: 200px !important; }
  .camera-fullwidth-card { padding: 0 !important; border-radius: 10px !important; }

  /* Game controls stacked vertically and spaced */
  .match-controls, .match-actions, .controls-row { display: flex !important; flex-direction: column !important; gap: 10px !important; }

  /* Reduce footer/panels and make floating controls reachable */
  .floating-controls { bottom: 14px !important; left: 10px !important; right: 10px !important; width: auto !important; }

  /* Promote important text and increase contrast for readability */
  h1, h2, h3 { font-weight: 700; color: #fff; }
  p, label { color: #cbd5e1; }

  /* Compact modals to fill the viewport on mobile */
  .ndn-modal-full, .modal { border-radius: 8px !important; padding: 12px !important; }

  /* Make nav tabs easier to tap (bottom tab bar) */
  .tabs, .tab-list { display: flex !important; gap: 6px !important; justify-content: space-between; }
  .tab { flex: 1 1 auto !important; text-align: center !important; padding: 10px 6px !important; font-weight: 700 !important; border-radius: 8px !important; }

  /* Hide decorative background animation on mobile for perf */
  .background-animated { display: none !important; }

  /* Add breathing room at the bottom since we now float a tab bar */
  #ndn-main-scroll {
    padding-bottom: 90px !important;
    scroll-padding-bottom: 100px !important;
    padding-top: 92px !important; /* clear fixed header */
    scroll-padding-top: 96px !important;
  }

  .ndn-shell-body {
    padding-bottom: 100px !important;
  }

  .card, .glass {
    width: 100% !important;
  }

  /* Professional Bottom Navigation Bar */
  .ndn-mobile-tabbar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 55;
    display: flex;
    justify-content: space-around;
    gap: 0;
    padding: 8px 4px;
    padding-bottom: max(8px, env(safe-area-inset-bottom));
    border-radius: 0;
    background: rgba(15, 23, 42, 0.98); /* Dark slate */
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    box-shadow: 0 -4px 20px rgba(0,0,0,0.2);
    border-left: none;
    border-right: none;
    border-bottom: none;
  }

  .ndn-mobile-tabbar .tab {
    flex-direction: column !important;
    justify-content: center !important;
    align-items: center !important;
    padding: 4px !important;
    min-width: 0 !important;
    height: auto !important;
    flex: 1 !important;
    background: transparent !important; /* Remove card bg from tabs */
    border: none !important;
    box-shadow: none !important;
    color: #64748b !important; /* Muted slate for inactive */
    border-radius: 8px !important;
  }

  .ndn-mobile-tabbar .tab--active {
    color: #8b5cf6 !important; /* Violet accent for active */
    background: rgba(139, 92, 246, 0.1) !important;
  }

  .ndn-mobile-tabbar .tab::after {
    display: none !important;
  }

  .mobile-tab-label {
    font-size: 0.65rem;
    font-weight: 600;
    margin-top: 4px;
    letter-spacing: 0.01em;
  }

  .ndn-mobile-tabbar .tab svg {
    width: 24px !important;
    height: 24px !important;
    stroke-width: 2px;
  }

  footer { margin-bottom: 80px !important; }

  /* Improve scoreboard readability: single-column items */
  .scoreboard, .stats-panel { display: block !important; width: 100% !important; }
  .scoreboard .row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }

  /* Footer spacing to avoid UI overlap */
  .ndn-shell-body { padding-bottom: 96px !important; }

  /* Reduce visual noise in lists */
  .list-item { padding: 14px 12px !important; border-radius: 8px !important; background: #1e293b !important; margin-bottom: 8px !important; border: 1px solid rgba(255,255,255,0.05); }

  /* Ensure overlays and popovers are full width and readable */
  .popover, .dropdown { left: 8px !important; right: 8px !important; width: auto !important; }

  /* Accessibility: increase tap target for small icons */
  .icon-btn { padding: 12px !important; border-radius: 8px !important; }

  /* Minor typography tuning */
  .logo, .brand { letter-spacing: -0.02em; }

}
